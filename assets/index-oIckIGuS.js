function oU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Bh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kb={exports:{}},eg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function lU(){if(YM)return eg;YM=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:a}}return eg.Fragment=e,eg.jsx=t,eg.jsxs=t,eg}var jM;function cU(){return jM||(jM=1,Kb.exports=lU()),Kb.exports}var _n=cU(),Jb={exports:{}},An={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WM;function uU(){if(WM)return An;WM=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function y(W){return W===null||typeof W!="object"?null:(W=v&&W[v]||W["@@iterator"],typeof W=="function"?W:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,T={};function M(W,se,Ae){this.props=W,this.context=se,this.refs=T,this.updater=Ae||x}M.prototype.isReactComponent={},M.prototype.setState=function(W,se){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,se,"setState")},M.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function A(){}A.prototype=M.prototype;function w(W,se,Ae){this.props=W,this.context=se,this.refs=T,this.updater=Ae||x}var B=w.prototype=new A;B.constructor=w,b(B,M.prototype),B.isPureReactComponent=!0;var D=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function H(W,se,Ae,De,ge,He){return Ae=He.ref,{$$typeof:n,type:W,key:se,ref:Ae!==void 0?Ae:null,props:He}}function P(W,se){return H(W.type,se,void 0,void 0,void 0,W.props)}function L(W){return typeof W=="object"&&W!==null&&W.$$typeof===n}function U(W){var se={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Ae){return se[Ae]})}var Y=/\/+/g;function ie(W,se){return typeof W=="object"&&W!==null&&W.key!=null?U(""+W.key):se.toString(36)}function Q(){}function ae(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Q,Q):(W.status="pending",W.then(function(se){W.status==="pending"&&(W.status="fulfilled",W.value=se)},function(se){W.status==="pending"&&(W.status="rejected",W.reason=se)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function he(W,se,Ae,De,ge){var He=typeof W;(He==="undefined"||He==="boolean")&&(W=null);var Le=!1;if(W===null)Le=!0;else switch(He){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(W.$$typeof){case n:case e:Le=!0;break;case m:return Le=W._init,he(Le(W._payload),se,Ae,De,ge)}}if(Le)return ge=ge(W),Le=De===""?"."+ie(W,0):De,D(ge)?(Ae="",Le!=null&&(Ae=Le.replace(Y,"$&/")+"/"),he(ge,se,Ae,"",function(Bt){return Bt})):ge!=null&&(L(ge)&&(ge=P(ge,Ae+(ge.key==null||W&&W.key===ge.key?"":(""+ge.key).replace(Y,"$&/")+"/")+Le)),se.push(ge)),1;Le=0;var Qe=De===""?".":De+":";if(D(W))for(var rt=0;rt<W.length;rt++)De=W[rt],He=Qe+ie(De,rt),Le+=he(De,se,Ae,He,ge);else if(rt=y(W),typeof rt=="function")for(W=rt.call(W),rt=0;!(De=W.next()).done;)De=De.value,He=Qe+ie(De,rt++),Le+=he(De,se,Ae,He,ge);else if(He==="object"){if(typeof W.then=="function")return he(ae(W),se,Ae,De,ge);throw se=String(W),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Le}function X(W,se,Ae){if(W==null)return W;var De=[],ge=0;return he(W,De,"","",function(He){return se.call(Ae,He,ge++)}),De}function te(W){if(W._status===-1){var se=W._result;se=se(),se.then(function(Ae){(W._status===0||W._status===-1)&&(W._status=1,W._result=Ae)},function(Ae){(W._status===0||W._status===-1)&&(W._status=2,W._result=Ae)}),W._status===-1&&(W._status=0,W._result=se)}if(W._status===1)return W._result.default;throw W._result}var ne=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function be(){}return An.Children={map:X,forEach:function(W,se,Ae){X(W,function(){se.apply(this,arguments)},Ae)},count:function(W){var se=0;return X(W,function(){se++}),se},toArray:function(W){return X(W,function(se){return se})||[]},only:function(W){if(!L(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},An.Component=M,An.Fragment=t,An.Profiler=r,An.PureComponent=w,An.StrictMode=i,An.Suspense=f,An.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,An.__COMPILER_RUNTIME={__proto__:null,c:function(W){return I.H.useMemoCache(W)}},An.cache=function(W){return function(){return W.apply(null,arguments)}},An.cloneElement=function(W,se,Ae){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var De=b({},W.props),ge=W.key,He=void 0;if(se!=null)for(Le in se.ref!==void 0&&(He=void 0),se.key!==void 0&&(ge=""+se.key),se)!N.call(se,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&se.ref===void 0||(De[Le]=se[Le]);var Le=arguments.length-2;if(Le===1)De.children=Ae;else if(1<Le){for(var Qe=Array(Le),rt=0;rt<Le;rt++)Qe[rt]=arguments[rt+2];De.children=Qe}return H(W.type,ge,void 0,void 0,He,De)},An.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},An.createElement=function(W,se,Ae){var De,ge={},He=null;if(se!=null)for(De in se.key!==void 0&&(He=""+se.key),se)N.call(se,De)&&De!=="key"&&De!=="__self"&&De!=="__source"&&(ge[De]=se[De]);var Le=arguments.length-2;if(Le===1)ge.children=Ae;else if(1<Le){for(var Qe=Array(Le),rt=0;rt<Le;rt++)Qe[rt]=arguments[rt+2];ge.children=Qe}if(W&&W.defaultProps)for(De in Le=W.defaultProps,Le)ge[De]===void 0&&(ge[De]=Le[De]);return H(W,He,void 0,void 0,null,ge)},An.createRef=function(){return{current:null}},An.forwardRef=function(W){return{$$typeof:c,render:W}},An.isValidElement=L,An.lazy=function(W){return{$$typeof:m,_payload:{_status:-1,_result:W},_init:te}},An.memo=function(W,se){return{$$typeof:p,type:W,compare:se===void 0?null:se}},An.startTransition=function(W){var se=I.T,Ae={};I.T=Ae;try{var De=W(),ge=I.S;ge!==null&&ge(Ae,De),typeof De=="object"&&De!==null&&typeof De.then=="function"&&De.then(be,ne)}catch(He){ne(He)}finally{I.T=se}},An.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},An.use=function(W){return I.H.use(W)},An.useActionState=function(W,se,Ae){return I.H.useActionState(W,se,Ae)},An.useCallback=function(W,se){return I.H.useCallback(W,se)},An.useContext=function(W){return I.H.useContext(W)},An.useDebugValue=function(){},An.useDeferredValue=function(W,se){return I.H.useDeferredValue(W,se)},An.useEffect=function(W,se,Ae){var De=I.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return De.useEffect(W,se)},An.useId=function(){return I.H.useId()},An.useImperativeHandle=function(W,se,Ae){return I.H.useImperativeHandle(W,se,Ae)},An.useInsertionEffect=function(W,se){return I.H.useInsertionEffect(W,se)},An.useLayoutEffect=function(W,se){return I.H.useLayoutEffect(W,se)},An.useMemo=function(W,se){return I.H.useMemo(W,se)},An.useOptimistic=function(W,se){return I.H.useOptimistic(W,se)},An.useReducer=function(W,se,Ae){return I.H.useReducer(W,se,Ae)},An.useRef=function(W){return I.H.useRef(W)},An.useState=function(W){return I.H.useState(W)},An.useSyncExternalStore=function(W,se,Ae){return I.H.useSyncExternalStore(W,se,Ae)},An.useTransition=function(){return I.H.useTransition()},An.version="19.1.0",An}var qM;function wp(){return qM||(qM=1,Jb.exports=uU()),Jb.exports}var F=wp();const fe=Bh(F),fU=oU({__proto__:null,default:fe},[F]);var Zb={exports:{}},tg={},$b={exports:{}},Qb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function hU(){return KM||(KM=1,function(n){function e(X,te){var ne=X.length;X.push(te);e:for(;0<ne;){var be=ne-1>>>1,W=X[be];if(0<r(W,te))X[be]=te,X[ne]=W,ne=be;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var te=X[0],ne=X.pop();if(ne!==te){X[0]=ne;e:for(var be=0,W=X.length,se=W>>>1;be<se;){var Ae=2*(be+1)-1,De=X[Ae],ge=Ae+1,He=X[ge];if(0>r(De,ne))ge<W&&0>r(He,De)?(X[be]=He,X[ge]=ne,be=ge):(X[be]=De,X[Ae]=ne,be=Ae);else if(ge<W&&0>r(He,ne))X[be]=He,X[ge]=ne,be=ge;else break e}}return te}function r(X,te){var ne=X.sortIndex-te.sortIndex;return ne!==0?ne:X.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],p=[],m=1,v=null,y=3,x=!1,b=!1,T=!1,M=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=X)i(p),te.sortIndex=te.expirationTime,e(f,te);else break;te=t(p)}}function I(X){if(T=!1,D(X),!b)if(t(f)!==null)b=!0,N||(N=!0,ie());else{var te=t(p);te!==null&&he(I,te.startTime-X)}}var N=!1,H=-1,P=5,L=-1;function U(){return M?!0:!(n.unstable_now()-L<P)}function Y(){if(M=!1,N){var X=n.unstable_now();L=X;var te=!0;try{e:{b=!1,T&&(T=!1,w(H),H=-1),x=!0;var ne=y;try{t:{for(D(X),v=t(f);v!==null&&!(v.expirationTime>X&&U());){var be=v.callback;if(typeof be=="function"){v.callback=null,y=v.priorityLevel;var W=be(v.expirationTime<=X);if(X=n.unstable_now(),typeof W=="function"){v.callback=W,D(X),te=!0;break t}v===t(f)&&i(f),D(X)}else i(f);v=t(f)}if(v!==null)te=!0;else{var se=t(p);se!==null&&he(I,se.startTime-X),te=!1}}break e}finally{v=null,y=ne,x=!1}te=void 0}}finally{te?ie():N=!1}}}var ie;if(typeof B=="function")ie=function(){B(Y)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ae=Q.port2;Q.port1.onmessage=Y,ie=function(){ae.postMessage(null)}}else ie=function(){A(Y,0)};function he(X,te){H=A(function(){X(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(X){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ne=y;y=te;try{return X()}finally{y=ne}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(X,te){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=y;y=X;try{return te()}finally{y=ne}},n.unstable_scheduleCallback=function(X,te,ne){var be=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?be+ne:be):ne=be,X){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,X={id:m++,callback:te,priorityLevel:X,startTime:ne,expirationTime:W,sortIndex:-1},ne>be?(X.sortIndex=ne,e(p,X),t(f)===null&&X===t(p)&&(T?(w(H),H=-1):T=!0,he(I,ne-be))):(X.sortIndex=W,e(f,X),b||x||(b=!0,N||(N=!0,ie()))),X},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(X){var te=y;return function(){var ne=y;y=te;try{return X.apply(this,arguments)}finally{y=ne}}}}(Qb)),Qb}var JM;function dU(){return JM||(JM=1,$b.exports=hU()),$b.exports}var eS={exports:{}},ha={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM;function pU(){if(ZM)return ha;ZM=1;var n=wp();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:p,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ha.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,m)},ha.flushSync=function(f){var p=o.T,m=i.p;try{if(o.T=null,i.p=2,f)return f()}finally{o.T=p,i.p=m,i.d.f()}},ha.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},ha.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ha.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,v=c(m,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:x}):m==="script"&&i.d.X(f,{crossOrigin:v,integrity:y,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ha.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=c(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},ha.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=c(m,p.crossOrigin);i.d.L(f,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ha.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=c(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},ha.requestFormReset=function(f){i.d.r(f)},ha.unstable_batchedUpdates=function(f,p){return f(p)},ha.useFormState=function(f,p,m){return o.H.useFormState(f,p,m)},ha.useFormStatus=function(){return o.H.useHostTransitionStatus()},ha.version="19.1.0",ha}var $M;function e2(){if($M)return eS.exports;$M=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eS.exports=pU(),eS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM;function mU(){if(QM)return tg;QM=1;var n=dU(),e=wp(),t=e2();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(i(188))}function f(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(i(188));return l!==s?null:s}for(var d=s,g=l;;){var S=d.return;if(S===null)break;var C=S.alternate;if(C===null){if(g=S.return,g!==null){d=g;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===d)return c(S),s;if(C===g)return c(S),l;C=C.sibling}throw Error(i(188))}if(d.return!==g.return)d=S,g=C;else{for(var z=!1,j=S.child;j;){if(j===d){z=!0,d=S,g=C;break}if(j===g){z=!0,g=S,d=C;break}j=j.sibling}if(!z){for(j=C.child;j;){if(j===d){z=!0,d=C,g=S;break}if(j===g){z=!0,g=C,d=S;break}j=j.sibling}if(!z)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ie(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var Q=Symbol.for("react.client.reference");function ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case M:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case B:return(s.displayName||"Context")+".Provider";case w:return(s._context.displayName||"Context")+".Consumer";case D:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return l=s.displayName||null,l!==null?l:ae(s.type)||"Memo";case P:l=s._payload,s=s._init;try{return ae(s(l))}catch{}}return null}var he=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},be=[],W=-1;function se(s){return{current:s}}function Ae(s){0>W||(s.current=be[W],be[W]=null,W--)}function De(s,l){W++,be[W]=s.current,s.current=l}var ge=se(null),He=se(null),Le=se(null),Qe=se(null);function rt(s,l){switch(De(Le,l),De(He,s),De(ge,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?_M(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=_M(l),s=xM(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ae(ge),De(ge,s)}function Bt(){Ae(ge),Ae(He),Ae(Le)}function wt(s){s.memoizedState!==null&&De(Qe,s);var l=ge.current,d=xM(l,s.type);l!==d&&(De(He,s),De(ge,d))}function fn(s){He.current===s&&(Ae(ge),Ae(He)),Qe.current===s&&(Ae(Qe),Km._currentValue=ne)}var Vt=Object.prototype.hasOwnProperty,Rt=n.unstable_scheduleCallback,Z=n.unstable_cancelCallback,lt=n.unstable_shouldYield,et=n.unstable_requestPaint,Ze=n.unstable_now,je=n.unstable_getCurrentPriorityLevel,yt=n.unstable_ImmediatePriority,Je=n.unstable_UserBlockingPriority,J=n.unstable_NormalPriority,k=n.unstable_LowPriority,re=n.unstable_IdlePriority,xe=n.log,Xe=n.unstable_setDisableYieldValue,Be=null,ut=null;function ot(s){if(typeof xe=="function"&&Xe(s),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Be,s)}catch{}}var pt=Math.clz32?Math.clz32:_t,Pt=Math.log,at=Math.LN2;function _t(s){return s>>>=0,s===0?32:31-(Pt(s)/at|0)|0}var Et=256,vt=4194304;function dt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function de(s,l,d){var g=s.pendingLanes;if(g===0)return 0;var S=0,C=s.suspendedLanes,z=s.pingedLanes;s=s.warmLanes;var j=g&134217727;return j!==0?(g=j&~C,g!==0?S=dt(g):(z&=j,z!==0?S=dt(z):d||(d=j&~s,d!==0&&(S=dt(d))))):(j=g&~C,j!==0?S=dt(j):z!==0?S=dt(z):d||(d=g&~s,d!==0&&(S=dt(d)))),S===0?0:l!==0&&l!==S&&(l&C)===0&&(C=S&-S,d=l&-l,C>=d||C===32&&(d&4194048)!==0)?l:S}function Pe(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function st(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pe(){var s=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),s}function Te(){var s=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),s}function Ie(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Ye(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bt(s,l,d,g,S,C){var z=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var j=s.entanglements,oe=s.expirationTimes,Re=s.hiddenUpdates;for(d=z&~d;0<d;){var Ke=31-pt(d),tt=1<<Ke;j[Ke]=0,oe[Ke]=-1;var Ne=Re[Ke];if(Ne!==null)for(Re[Ke]=null,Ke=0;Ke<Ne.length;Ke++){var ze=Ne[Ke];ze!==null&&(ze.lane&=-536870913)}d&=~tt}g!==0&&gt(s,g,0),C!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=C&~(z&~l))}function gt(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-pt(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|d&4194090}function zt(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var g=31-pt(d),S=1<<g;S&l|s[g]&l&&(s[g]|=l),d&=~S}}function mn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Vn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function on(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:FM(s.type))}function Ri(s,l){var d=te.p;try{return te.p=s,l()}finally{te.p=d}}var fi=Math.random().toString(36).slice(2),wi="__reactFiber$"+fi,Fi="__reactProps$"+fi,Hi="__reactContainer$"+fi,Or="__reactEvents$"+fi,cs="__reactListeners$"+fi,_r="__reactHandles$"+fi,jt="__reactResources$"+fi,ia="__reactMarker$"+fi;function qn(s){delete s[wi],delete s[Fi],delete s[Or],delete s[cs],delete s[_r]}function G(s){var l=s[wi];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Hi]||d[wi]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=EM(s);s!==null;){if(d=s[wi])return d;s=EM(s)}return l}s=d,d=s.parentNode}return null}function K(s){if(s=s[wi]||s[Hi]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function me(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function we(s){var l=s[jt];return l||(l=s[jt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ue(s){s[ia]=!0}var Ge=new Set,ct={};function it(s,l){V(s,l),V(s+"Capture",l)}function V(s,l){for(ct[s]=l,s=0;s<l.length;s++)Ge.add(l[s])}var ee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),le={},ce={};function ye(s){return Vt.call(ce,s)?!0:Vt.call(le,s)?!1:ee.test(s)?ce[s]=!0:(le[s]=!0,!1)}function Ce(s,l,d){if(ye(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function ke(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function We(s,l,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+g)}}var nt,St;function mt(s){if(nt===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);nt=l&&l[1]||"",St=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+s+St}var At=!1;function kt(s,l){if(!s||At)return"";At=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(ze){var Ne=ze}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(ze){Ne=ze}s.call(tt.prototype)}}else{try{throw Error()}catch(ze){Ne=ze}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(ze){if(ze&&Ne&&typeof ze.stack=="string")return[ze.stack,Ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),z=C[0],j=C[1];if(z&&j){var oe=z.split(`
`),Re=j.split(`
`);for(S=g=0;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;for(;S<Re.length&&!Re[S].includes("DetermineComponentFrameRoot");)S++;if(g===oe.length||S===Re.length)for(g=oe.length-1,S=Re.length-1;1<=g&&0<=S&&oe[g]!==Re[S];)S--;for(;1<=g&&0<=S;g--,S--)if(oe[g]!==Re[S]){if(g!==1||S!==1)do if(g--,S--,0>S||oe[g]!==Re[S]){var Ke=`
`+oe[g].replace(" at new "," at ");return s.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",s.displayName)),Ke}while(1<=g&&0<=S);break}}}finally{At=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?mt(d):""}function It(s){switch(s.tag){case 26:case 27:case 5:return mt(s.type);case 16:return mt("Lazy");case 13:return mt("Suspense");case 19:return mt("SuspenseList");case 0:case 15:return kt(s.type,!1);case 11:return kt(s.type.render,!1);case 1:return kt(s.type,!0);case 31:return mt("Activity");default:return""}}function wn(s){try{var l="";do l+=It(s),s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Dt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ht(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ot(s){var l=Ht(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var S=d.get,C=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(z){g=""+z,C.call(this,z)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function ti(s){s._valueTracker||(s._valueTracker=Ot(s))}function en(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return s&&(g=Ht(s)?s.checked?"true":"false":s.value),s=g,s!==d?(l.setValue(s),!0):!1}function sn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ri=/[\n"\\]/g;function Yt(s){return s.replace(ri,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function xn(s,l,d,g,S,C,z,j){s.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?s.type=z:s.removeAttribute("type"),l!=null?z==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Dt(l)):s.value!==""+Dt(l)&&(s.value=""+Dt(l)):z!=="submit"&&z!=="reset"||s.removeAttribute("value"),l!=null?_i(s,z,Dt(l)):d!=null?_i(s,z,Dt(d)):g!=null&&s.removeAttribute("value"),S==null&&C!=null&&(s.defaultChecked=!!C),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?s.name=""+Dt(j):s.removeAttribute("name")}function gn(s,l,d,g,S,C,z,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),l!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||l!=null))return;d=d!=null?""+Dt(d):"",l=l!=null?""+Dt(l):d,j||l===s.value||(s.value=l),s.defaultValue=l}g=g??S,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=j?s.checked:!!g,s.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(s.name=z)}function _i(s,l,d){l==="number"&&sn(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function On(s,l,d,g){if(s=s.options,l){l={};for(var S=0;S<d.length;S++)l["$"+d[S]]=!0;for(d=0;d<s.length;d++)S=l.hasOwnProperty("$"+s[d].value),s[d].selected!==S&&(s[d].selected=S),S&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Dt(d),l=null,S=0;S<s.length;S++){if(s[S].value===d){s[S].selected=!0,g&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function ai(s,l,d){if(l!=null&&(l=""+Dt(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Dt(d):""}function hr(s,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(i(92));if(he(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=Dt(l),s.defaultValue=d,g=s.textContent,g===d&&g!==""&&g!==null&&(s.value=g)}function Xr(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Rs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ju(s,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,d):typeof d!="number"||d===0||Rs.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function Wu(s,l,d){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var S in l)g=l[S],l.hasOwnProperty(S)&&d[S]!==g&&ju(s,S,g)}else for(var C in l)l.hasOwnProperty(C)&&ju(s,C,l[C])}function Ph(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qu(s){return Bv.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var zh=null;function Fh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jo=null,Nl=null;function Vp(s){var l=K(s);if(l&&(s=l.stateNode)){var d=s[Fi]||null;e:switch(s=l.stateNode,l.type){case"input":if(xn(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Yt(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==s&&g.form===s.form){var S=g[Fi]||null;if(!S)throw Error(i(90));xn(g,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===s.form&&en(g)}break e;case"textarea":ai(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&On(s,!!d.multiple,l,!1)}}}var Ku=!1;function kp(s,l,d){if(Ku)return s(l,d);Ku=!0;try{var g=s(l);return g}finally{if(Ku=!1,(jo!==null||Nl!==null)&&(Xs(),jo&&(l=jo,s=Nl,Nl=jo=null,Vp(l),s)))for(l=0;l<s.length;l++)Vp(s[l])}}function wc(s,l){var d=s.stateNode;if(d===null)return null;var g=d[Fi]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,l,typeof d));return d}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(ws)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{Ju=!1}var ro=null,Xp=null,Hh=null;function Yp(){if(Hh)return Hh;var s,l=Xp,d=l.length,g,S="value"in ro?ro.value:ro.textContent,C=S.length;for(s=0;s<d&&l[s]===S[s];s++);var z=d-s;for(g=1;g<=z&&l[d-g]===S[C-g];g++);return Hh=S.slice(s,1<g?1-g:void 0)}function Wo(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Dc(){return!0}function Zu(){return!1}function Yr(s){function l(d,g,S,C,z){this._reactName=d,this._targetInst=S,this.type=g,this.nativeEvent=C,this.target=z,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(d=s[j],this[j]=d?d(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Dc:Zu,this.isPropagationStopped=Zu,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Dc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Dc)},persist:function(){},isPersistent:Dc}),l}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oc=Yr(qo),Uc=m({},qo,{view:0,detail:0}),Dv=Yr(Uc),ao,Nc,Lc,Ic=m({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Lc&&(Lc&&s.type==="mousemove"?(ao=s.screenX-Lc.screenX,Nc=s.screenY-Lc.screenY):Nc=ao=0,Lc=s),ao)},movementY:function(s){return"movementY"in s?s.movementY:Nc}}),jp=Yr(Ic),Ov=m({},Ic,{dataTransfer:0}),db=Yr(Ov),xr=m({},Uc,{relatedTarget:0}),Gh=Yr(xr),Uv=m({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),Nv=Yr(Uv),Lv=m({},qo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Iv=Yr(Lv),$u=m({},qo,{data:0}),Vh=Yr($u),Pv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wp(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Fv[s])?!!l[s]:!1}function Qu(){return Wp}var Hv=m({},Uc,{key:function(s){if(s.key){var l=Pv[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Wo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(s){return s.type==="keypress"?Wo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Wo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qp=Yr(Hv),Kp=m({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Yr(Kp),Gv=m({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),Jp=Yr(Gv),Vv=m({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),so=Yr(Vv),Zp=m({},Ic,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),pb=Yr(Zp),kv=m({},qo,{newState:0,oldState:0}),Ko=Yr(kv),oo=[9,13,27,32],ef=ws&&"CompositionEvent"in window,Ll=null;ws&&"documentMode"in document&&(Ll=document.documentMode);var tf=ws&&"TextEvent"in window&&!Ll,nf=ws&&(!ef||Ll&&8<Ll&&11>=Ll),Jo=" ",br=!1;function rf(s,l){switch(s){case"keyup":return oo.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zo=!1;function af(s,l){switch(s){case"compositionend":return $p(l);case"keypress":return l.which!==32?null:(br=!0,Jo);case"textInput":return s=l.data,s===Jo&&br?null:s;default:return null}}function Qp(s,l){if(Zo)return s==="compositionend"||!ef&&rf(s,l)?(s=Yp(),Hh=Xp=ro=null,Zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return nf&&l.locale!=="ko"?null:l.data;default:return null}}var Xh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Xh[s.type]:l==="textarea"}function ra(s,l,d,g){jo?Nl?Nl.push(g):Nl=[g]:jo=g,l=V0(l,"onChange"),0<l.length&&(d=new Oc("onChange","change",null,d,g),s.push({event:d,listeners:l}))}var Pc=null,Il=null;function Xv(s){pM(s,0)}function sf(s){var l=me(s);if(en(l))return s}function Yh(s,l){if(s==="change")return l}var jh=!1;if(ws){var Wh;if(ws){var zc="oninput"in document;if(!zc){var Fc=document.createElement("div");Fc.setAttribute("oninput","return;"),zc=typeof Fc.oninput=="function"}Wh=zc}else Wh=!1;jh=Wh&&(!document.documentMode||9<document.documentMode)}function Si(){Pc&&(Pc.detachEvent("onpropertychange",Yv),Il=Pc=null)}function Yv(s){if(s.propertyName==="value"&&sf(Il)){var l=[];ra(l,Il,s,Fh(s)),kp(Xv,l)}}function mb(s,l,d){s==="focusin"?(Si(),Pc=l,Il=d,Pc.attachEvent("onpropertychange",Yv)):s==="focusout"&&Si()}function jv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return sf(Il)}function of(s,l){if(s==="click")return sf(l)}function $o(s,l){if(s==="input"||s==="change")return sf(l)}function Wv(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var aa=typeof Object.is=="function"?Object.is:Wv;function us(s,l){if(aa(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var S=d[g];if(!Vt.call(l,S)||!aa(s[S],l[S]))return!1}return!0}function sa(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tm(s,l){var d=sa(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=l&&g>=l)return{node:d,offset:l-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sa(d)}}function nm(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?nm(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function im(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=sn(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=sn(s.document)}return l}function lf(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var rm=ws&&"documentMode"in document&&11>=document.documentMode,lo=null,qh=null,cf=null,Kh=!1;function am(s,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Kh||lo==null||lo!==sn(g)||(g=lo,"selectionStart"in g&&lf(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),cf&&us(cf,g)||(cf=g,g=V0(qh,"onSelect"),0<g.length&&(l=new Oc("onSelect","select",null,l,d),s.push({event:l,listeners:g}),l.target=lo)))}function Sr(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Qo={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionrun:Sr("Transition","TransitionRun"),transitionstart:Sr("Transition","TransitionStart"),transitioncancel:Sr("Transition","TransitionCancel"),transitionend:Sr("Transition","TransitionEnd")},Jh={},qv={};ws&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function co(s){if(Jh[s])return Jh[s];if(!Qo[s])return s;var l=Qo[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in qv)return Jh[s]=l[d];return s}var jr=co("animationend"),sm=co("animationiteration"),oa=co("animationstart"),Kv=co("transitionrun"),uo=co("transitionstart"),Hc=co("transitioncancel"),fo=co("transitionend"),Zh=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function dr(s,l){Zh.set(s,l),it(l,[s])}var om=new WeakMap;function Ar(s,l){if(typeof s=="object"&&s!==null){var d=om.get(s);return d!==void 0?d:(l={value:s,source:l,stack:wn(l)},om.set(s,l),l)}return{value:s,source:l,stack:wn(l)}}var Ur=[],ka=0,$h=0;function ff(){for(var s=ka,l=$h=ka=0;l<s;){var d=Ur[l];Ur[l++]=null;var g=Ur[l];Ur[l++]=null;var S=Ur[l];Ur[l++]=null;var C=Ur[l];if(Ur[l++]=null,g!==null&&S!==null){var z=g.pending;z===null?S.next=S:(S.next=z.next,z.next=S),g.pending=S}C!==0&&lm(d,S,C)}}function el(s,l,d,g){Ur[ka++]=s,Ur[ka++]=l,Ur[ka++]=d,Ur[ka++]=g,$h|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Qh(s,l,d,g){return el(s,l,d,g),Gc(s)}function ho(s,l){return el(s,null,null,l),Gc(s)}function lm(s,l,d){s.lanes|=d;var g=s.alternate;g!==null&&(g.lanes|=d);for(var S=!1,C=s.return;C!==null;)C.childLanes|=d,g=C.alternate,g!==null&&(g.childLanes|=d),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(S=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,S&&l!==null&&(S=31-pt(d),s=C.hiddenUpdates,g=s[S],g===null?s[S]=[l]:g.push(l),l.lane=d|536870912),C):null}function Gc(s){if(50<ks)throw ks=0,ec=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var tl={};function cm(s,l,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(s,l,d,g){return new cm(s,l,d,g)}function hf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gi(s,l){var d=s.alternate;return d===null?(d=la(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function um(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function pr(s,l,d,g,S,C){var z=0;if(g=s,typeof s=="function")hf(s)&&(z=1);else if(typeof s=="string")z=qO(s,d,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=la(31,d,l,S),s.elementType=L,s.lanes=C,s;case b:return nl(d.children,S,C,l);case T:z=8,S|=24;break;case M:return s=la(12,d,l,S|2),s.elementType=M,s.lanes=C,s;case I:return s=la(13,d,l,S),s.elementType=I,s.lanes=C,s;case N:return s=la(19,d,l,S),s.elementType=N,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case A:case B:z=10;break e;case w:z=9;break e;case D:z=11;break e;case H:z=14;break e;case P:z=16,g=null;break e}z=29,d=Error(i(130,s===null?"null":typeof s,"")),g=null}return l=la(z,d,l,S),l.elementType=s,l.type=g,l.lanes=C,l}function nl(s,l,d,g){return s=la(7,s,g,l),s.lanes=d,s}function df(s,l,d){return s=la(6,s,null,l),s.lanes=d,s}function ed(s,l,d){return l=la(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Vc=[],ca=0,pf=null,kc=0,Er=[],ba=0,il=null,Bs=1,Ds="";function po(s,l){Vc[ca++]=kc,Vc[ca++]=pf,pf=s,kc=l}function td(s,l,d){Er[ba++]=Bs,Er[ba++]=Ds,Er[ba++]=il,il=s;var g=Bs;s=Ds;var S=32-pt(g)-1;g&=~(1<<S),d+=1;var C=32-pt(l)+S;if(30<C){var z=S-S%5;C=(g&(1<<z)-1).toString(32),g>>=z,S-=z,Bs=1<<32-pt(l)+S|d<<S|g,Ds=C+s}else Bs=1<<C|d<<S|g,Ds=s}function fm(s){s.return!==null&&(po(s,1),td(s,1,0))}function hm(s){for(;s===pf;)pf=Vc[--ca],Vc[ca]=null,kc=Vc[--ca],Vc[ca]=null;for(;s===il;)il=Er[--ba],Er[ba]=null,Ds=Er[--ba],Er[ba]=null,Bs=Er[--ba],Er[ba]=null}var Wr=null,Mi=null,kn=!1,Xa=null,Sa=!1,nd=Error(i(519));function rl(s){var l=Error(i(418,""));throw Pl(Ar(l,s)),nd}function Jv(s){var l=s.stateNode,d=s.type,g=s.memoizedProps;switch(l[wi]=s,l[Fi]=g,d){case"dialog":Bn("cancel",l),Bn("close",l);break;case"iframe":case"object":case"embed":Bn("load",l);break;case"video":case"audio":for(d=0;d<km.length;d++)Bn(km[d],l);break;case"source":Bn("error",l);break;case"img":case"image":case"link":Bn("error",l),Bn("load",l);break;case"details":Bn("toggle",l);break;case"input":Bn("invalid",l),gn(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),ti(l);break;case"select":Bn("invalid",l);break;case"textarea":Bn("invalid",l),hr(l,g.value,g.defaultValue,g.children),ti(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||yM(l.textContent,d)?(g.popover!=null&&(Bn("beforetoggle",l),Bn("toggle",l)),g.onScroll!=null&&Bn("scroll",l),g.onScrollEnd!=null&&Bn("scrollend",l),g.onClick!=null&&(l.onclick=k0),l=!0):l=!1,l||rl(s)}function dm(s){for(Wr=s.return;Wr;)switch(Wr.tag){case 5:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:Wr=Wr.return}}function fs(s){if(s!==Wr)return!1;if(!kn)return dm(s),kn=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||Lb(s.type,s.memoizedProps)),d=!d),d&&Mi&&rl(s),dm(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(l===0){Mi=Ro(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;s=s.nextSibling}Mi=null}}else l===27?(l=Mi,pu(s.type)?(s=Fb,Fb=null,Mi=s):Mi=l):Mi=Wr?Ro(s.stateNode.nextSibling):null;return!0}function Xc(){Mi=Wr=null,kn=!1}function Kn(){var s=Xa;return s!==null&&(Kt===null?Kt=s:Kt.push.apply(Kt,s),Xa=null),s}function Pl(s){Xa===null?Xa=[s]:Xa.push(s)}var pm=se(null),al=null,mo=null;function sl(s,l,d){De(pm,l._currentValue),l._currentValue=d}function go(s){s._currentValue=pm.current,Ae(pm)}function mm(s,l,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===d)break;s=s.return}}function mf(s,l,d,g){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var C=S.dependencies;if(C!==null){var z=S.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=S;for(var oe=0;oe<l.length;oe++)if(j.context===l[oe]){C.lanes|=d,j=C.alternate,j!==null&&(j.lanes|=d),mm(C.return,d,s),g||(z=null);break e}C=j.next}}else if(S.tag===18){if(z=S.return,z===null)throw Error(i(341));z.lanes|=d,C=z.alternate,C!==null&&(C.lanes|=d),mm(z,d,s),z=null}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===s){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}}function Ya(s,l,d,g){s=null;for(var S=l,C=!1;S!==null;){if(!C){if((S.flags&524288)!==0)C=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var z=S.alternate;if(z===null)throw Error(i(387));if(z=z.memoizedProps,z!==null){var j=S.type;aa(S.pendingProps.value,z.value)||(s!==null?s.push(j):s=[j])}}else if(S===Qe.current){if(z=S.alternate,z===null)throw Error(i(387));z.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(Km):s=[Km])}S=S.return}s!==null&&mf(l,s,d,g),l.flags|=262144}function gf(s){for(s=s.firstContext;s!==null;){if(!aa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Os(s){al=s,mo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Bi(s){return id(al,s)}function vf(s,l){return al===null&&Os(s),id(s,l)}function id(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},mo===null){if(s===null)throw Error(i(308));mo=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else mo=mo.next=l;return d}var gm=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},gb=n.unstable_scheduleCallback,Zv=n.unstable_NormalPriority,Zi={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rd(){return{controller:new gm,data:new Map,refCount:0}}function Yc(s){s.refCount--,s.refCount===0&&gb(Zv,function(){s.controller.abort()})}var jc=null,yf=0,hn=0,Wc=null;function Aa(s,l){if(jc===null){var d=jc=[];yf=0,hn=Tb(),Wc={status:"pending",value:void 0,then:function(g){d.push(g)}}}return yf++,l.then(ad,ad),l}function ad(){if(--yf===0&&jc!==null){Wc!==null&&(Wc.status="fulfilled");var s=jc;jc=null,hn=0,Wc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function vb(s,l){var d=[],g={status:"pending",value:null,reason:null,then:function(S){d.push(S)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var S=0;S<d.length;S++)(0,d[S])(l)},function(S){for(g.status="rejected",g.reason=S,S=0;S<d.length;S++)(0,d[S])(void 0)}),g}var _f=X.S;X.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&Aa(s,l),_f!==null&&_f(s,l)};var ja=se(null);function ol(){var s=ja.current;return s!==null?s:ln.pooledCache}function xf(s,l){l===null?De(ja,ja.current):De(ja,l.pool)}function sd(){var s=ol();return s===null?null:{parent:Zi._currentValue,pool:s}}var bf=Error(i(460)),vm=Error(i(474)),hs=Error(i(542)),Sf={then:function(){}};function od(s){return s=s.status,s==="fulfilled"||s==="rejected"}function qc(){}function ld(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(qc,qc),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,$v(s),s;default:if(typeof l.status=="string")l.then(qc,qc);else{if(s=ln,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=g}},function(g){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,$v(s),s}throw Wa=l,bf}}var Wa=null;function ym(){if(Wa===null)throw Error(i(459));var s=Wa;return Wa=null,s}function $v(s){if(s===bf||s===hs)throw Error(i(483))}var vo=!1;function _m(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tn(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Us(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function yo(s,l,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Jn&2)!==0){var S=g.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),g.pending=l,l=Gc(s),lm(s,null,d),l}return el(s,g,l,d),Gc(s)}function zl(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,zt(s,d)}}function Kc(s,l){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var S=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var z={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?S=C=z:C=C.next=z,d=d.next}while(d!==null);C===null?S=C=l:C=C.next=l}else S=C=l;d={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var xm=!1;function Af(){if(xm){var s=Wc;if(s!==null)throw s}}function Jc(s,l,d,g){xm=!1;var S=s.updateQueue;vo=!1;var C=S.firstBaseUpdate,z=S.lastBaseUpdate,j=S.shared.pending;if(j!==null){S.shared.pending=null;var oe=j,Re=oe.next;oe.next=null,z===null?C=Re:z.next=Re,z=oe;var Ke=s.alternate;Ke!==null&&(Ke=Ke.updateQueue,j=Ke.lastBaseUpdate,j!==z&&(j===null?Ke.firstBaseUpdate=Re:j.next=Re,Ke.lastBaseUpdate=oe))}if(C!==null){var tt=S.baseState;z=0,Ke=Re=oe=null,j=C;do{var Ne=j.lane&-536870913,ze=Ne!==j.lane;if(ze?(Xt&Ne)===Ne:(g&Ne)===Ne){Ne!==0&&Ne===hn&&(xm=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var an=s,$t=j;Ne=l;var gi=d;switch($t.tag){case 1:if(an=$t.payload,typeof an=="function"){tt=an.call(gi,tt,Ne);break e}tt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=$t.payload,Ne=typeof an=="function"?an.call(gi,tt,Ne):an,Ne==null)break e;tt=m({},tt,Ne);break e;case 2:vo=!0}}Ne=j.callback,Ne!==null&&(s.flags|=64,ze&&(s.flags|=8192),ze=S.callbacks,ze===null?S.callbacks=[Ne]:ze.push(Ne))}else ze={lane:Ne,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Ke===null?(Re=Ke=ze,oe=tt):Ke=Ke.next=ze,z|=Ne;if(j=j.next,j===null){if(j=S.shared.pending,j===null)break;ze=j,j=ze.next,ze.next=null,S.lastBaseUpdate=ze,S.shared.pending=null}}while(!0);Ke===null&&(oe=tt),S.baseState=oe,S.firstBaseUpdate=Re,S.lastBaseUpdate=Ke,C===null&&(S.shared.lanes=0),xs|=z,s.lanes=z,s.memoizedState=tt}}function Zc(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function Qv(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)Zc(d[s],l)}var $c=se(null),cd=se(0);function e0(s,l){s=Qa,De(cd,s),De($c,l),Qa=s|l.baseLanes}function bm(){De(cd,Qa),De($c,$c.current)}function Ef(){Qa=cd.current,Ae($c),Ae(cd)}var _o=0,dn=null,ni=null,$i=null,ud=!1,ll=!1,qr=!1,rr=0,qa=0,Mr=null,t0=0;function Vi(){throw Error(i(321))}function Nr(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!aa(s[d],l[d]))return!1;return!0}function xo(s,l,d,g,S,C){return _o=C,dn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,X.H=s===null||s.memoizedState===null?_d:Pm,qr=!1,C=d(g,S),qr=!1,ll&&(C=i0(l,d,g,S)),n0(s),C}function n0(s){X.H=Cf;var l=ni!==null&&ni.next!==null;if(_o=0,$i=ni=dn=null,ud=!1,qa=0,Mr=null,l)throw Error(i(300));s===null||mr||(s=s.dependencies,s!==null&&gf(s)&&(mr=!0))}function i0(s,l,d,g){dn=s;var S=0;do{if(ll&&(Mr=null),qa=0,ll=!1,25<=S)throw Error(i(301));if(S+=1,$i=ni=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}X.H=w0,C=l(d,g)}while(ll);return C}function yb(){var s=X.H,l=s.useState()[0];return l=typeof l.then=="function"?ds(l):l,s=s.useState()[0],(ni!==null?ni.memoizedState:null)!==s&&(dn.flags|=1024),l}function Sm(){var s=rr!==0;return rr=0,s}function fd(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function Am(s){if(ud){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}ud=!1}_o=0,$i=ni=dn=null,ll=!1,qa=rr=0,Mr=null}function Kr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $i===null?dn.memoizedState=$i=s:$i=$i.next=s,$i}function Qi(){if(ni===null){var s=dn.alternate;s=s!==null?s.memoizedState:null}else s=ni.next;var l=$i===null?dn.memoizedState:$i.next;if(l!==null)$i=l,ni=s;else{if(s===null)throw dn.alternate===null?Error(i(467)):Error(i(310));ni=s,s={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},$i===null?dn.memoizedState=$i=s:$i=$i.next=s}return $i}function cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ds(s){var l=qa;return qa+=1,Mr===null&&(Mr=[]),s=ld(Mr,s,l),l=dn,($i===null?l.memoizedState:$i.next)===null&&(l=l.alternate,X.H=l===null||l.memoizedState===null?_d:Pm),s}function hd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ds(s);if(s.$$typeof===B)return Bi(s)}throw Error(i(438,String(s)))}function Em(s){var l=null,d=dn.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=dn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=cl(),dn.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),g=0;g<s;g++)d[g]=U;return l.index++,d}function bo(s,l){return typeof l=="function"?l(s):l}function ul(s){var l=Qi();return Mm(l,ni,s)}function Mm(s,l,d){var g=s.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var S=s.baseQueue,C=g.pending;if(C!==null){if(S!==null){var z=S.next;S.next=C.next,C.next=z}l.baseQueue=S=C,g.pending=null}if(C=s.baseState,S===null)s.memoizedState=C;else{l=S.next;var j=z=null,oe=null,Re=l,Ke=!1;do{var tt=Re.lane&-536870913;if(tt!==Re.lane?(Xt&tt)===tt:(_o&tt)===tt){var Ne=Re.revertLane;if(Ne===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),tt===hn&&(Ke=!0);else if((_o&Ne)===Ne){Re=Re.next,Ne===hn&&(Ke=!0);continue}else tt={lane:0,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},oe===null?(j=oe=tt,z=C):oe=oe.next=tt,dn.lanes|=Ne,xs|=Ne;tt=Re.action,qr&&d(C,tt),C=Re.hasEagerState?Re.eagerState:d(C,tt)}else Ne={lane:tt,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},oe===null?(j=oe=Ne,z=C):oe=oe.next=Ne,dn.lanes|=tt,xs|=tt;Re=Re.next}while(Re!==null&&Re!==l);if(oe===null?z=C:oe.next=j,!aa(C,s.memoizedState)&&(mr=!0,Ke&&(d=Wc,d!==null)))throw d;s.memoizedState=C,s.baseState=z,s.baseQueue=oe,g.lastRenderedState=C}return S===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Tm(s){var l=Qi(),d=l.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var g=d.dispatch,S=d.pending,C=l.memoizedState;if(S!==null){d.pending=null;var z=S=S.next;do C=s(C,z.action),z=z.next;while(z!==S);aa(C,l.memoizedState)||(mr=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),d.lastRenderedState=C}return[C,g]}function r0(s,l,d){var g=dn,S=Qi(),C=kn;if(C){if(d===void 0)throw Error(i(407));d=d()}else d=l();var z=!aa((ni||S).memoizedState,d);z&&(S.memoizedState=d,mr=!0),S=S.queue;var j=s0.bind(null,g,S,s);if(tu(2048,8,j,[s]),S.getSnapshot!==l||z||$i!==null&&$i.memoizedState.tag&1){if(g.flags|=2048,eu(9,Mf(),a0.bind(null,g,S,d,l),null),ln===null)throw Error(i(349));C||(_o&124)!==0||Qc(g,l,d)}return d}function Qc(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=dn.updateQueue,l===null?(l=cl(),dn.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function a0(s,l,d,g){l.value=d,l.getSnapshot=g,o0(l)&&l0(s)}function s0(s,l,d){return d(function(){o0(l)&&l0(s)})}function o0(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!aa(s,d)}catch{return!0}}function l0(s){var l=ho(s,2);l!==null&&$r(l,s,2)}function Cm(s){var l=Kr();if(typeof s=="function"){var d=s;if(s=d(),qr){ot(!0);try{d()}finally{ot(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:s},l}function c0(s,l,d,g){return s.baseState=d,Mm(s,ni,typeof g=="function"?g:bo)}function _b(s,l,d,g,S){if(yd(s))throw Error(i(485));if(s=l.action,s!==null){var C={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){C.listeners.push(z)}};X.T!==null?d(!0):C.isTransition=!1,g(C),d=l.pending,d===null?(C.next=l.pending=C,u0(l,C)):(C.next=d.next,l.pending=d.next=C)}}function u0(s,l){var d=l.action,g=l.payload,S=s.state;if(l.isTransition){var C=X.T,z={};X.T=z;try{var j=d(S,g),oe=X.S;oe!==null&&oe(z,j),f0(s,l,j)}catch(Re){Rm(s,l,Re)}finally{X.T=C}}else try{C=d(S,g),f0(s,l,C)}catch(Re){Rm(s,l,Re)}}function f0(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){h0(s,l,g)},function(g){return Rm(s,l,g)}):h0(s,l,d)}function h0(s,l,d){l.status="fulfilled",l.value=d,d0(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,u0(s,d)))}function Rm(s,l,d){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,d0(l),l=l.next;while(l!==g)}s.action=null}function d0(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function wm(s,l){return l}function p0(s,l){if(kn){var d=ln.formState;if(d!==null){e:{var g=dn;if(kn){if(Mi){t:{for(var S=Mi,C=Sa;S.nodeType!==8;){if(!C){S=null;break t}if(S=Ro(S.nextSibling),S===null){S=null;break t}}C=S.data,S=C==="F!"||C==="F"?S:null}if(S){Mi=Ro(S.nextSibling),g=S.data==="F!";break e}}rl(g)}g=!1}g&&(l=d[0])}}return d=Kr(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wm,lastRenderedState:l},d.queue=g,d=C0.bind(null,dn,g),g.dispatch=d,g=Cm(!1),C=vd.bind(null,dn,!1,g.queue),g=Kr(),S={state:l,dispatch:null,action:s,pending:null},g.queue=S,d=_b.bind(null,dn,S,C,d),S.dispatch=d,g.memoizedState=s,[l,d,!1]}function m0(s){var l=Qi();return g0(l,ni,s)}function g0(s,l,d){if(l=Mm(s,l,wm)[0],s=ul(bo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=ds(l)}catch(z){throw z===bf?hs:z}else g=l;l=Qi();var S=l.queue,C=S.dispatch;return d!==l.memoizedState&&(dn.flags|=2048,eu(9,Mf(),xb.bind(null,S,d),null)),[g,C,s]}function xb(s,l){s.action=l}function v0(s){var l=Qi(),d=ni;if(d!==null)return g0(l,d,s);Qi(),l=l.memoizedState,d=Qi();var g=d.queue.dispatch;return d.memoizedState=s,[l,g,!1]}function eu(s,l,d,g){return s={tag:s,create:d,deps:g,inst:l,next:null},l=dn.updateQueue,l===null&&(l=cl(),dn.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,l.lastEffect=s),s}function Mf(){return{destroy:void 0,resource:void 0}}function Bm(){return Qi().memoizedState}function dd(s,l,d,g){var S=Kr();g=g===void 0?null:g,dn.flags|=s,S.memoizedState=eu(1|l,Mf(),d,g)}function tu(s,l,d,g){var S=Qi();g=g===void 0?null:g;var C=S.memoizedState.inst;ni!==null&&g!==null&&Nr(g,ni.memoizedState.deps)?S.memoizedState=eu(l,C,d,g):(dn.flags|=s,S.memoizedState=eu(1|l,C,d,g))}function Dm(s,l){dd(8390656,8,s,l)}function Om(s,l){tu(2048,8,s,l)}function pd(s,l){return tu(4,2,s,l)}function md(s,l){return tu(4,4,s,l)}function y0(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function _0(s,l,d){d=d!=null?d.concat([s]):null,tu(4,4,y0.bind(null,l,s),d)}function Um(){}function x0(s,l){var d=Qi();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&Nr(l,g[1])?g[0]:(d.memoizedState=[s,l],s)}function Nm(s,l){var d=Qi();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&Nr(l,g[1]))return g[0];if(g=s(),qr){ot(!0);try{s()}finally{ot(!1)}}return d.memoizedState=[g,l],g}function gd(s,l,d){return d===void 0||(_o&1073741824)!==0?s.memoizedState=l:(s.memoizedState=d,s=Bd(),dn.lanes|=s,xs|=s,d)}function b0(s,l,d,g){return aa(d,l)?d:$c.current!==null?(s=gd(s,d,g),aa(s,l)||(mr=!0),s):(_o&42)===0?(mr=!0,s.memoizedState=d):(s=Bd(),dn.lanes|=s,xs|=s,l)}function S0(s,l,d,g,S){var C=te.p;te.p=C!==0&&8>C?C:8;var z=X.T,j={};X.T=j,vd(s,!1,l,d);try{var oe=S(),Re=X.S;if(Re!==null&&Re(j,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ke=vb(oe,g);Tf(s,l,Ke,Ui(s))}else Tf(s,l,g,Ui(s))}catch(tt){Tf(s,l,{then:function(){},status:"rejected",reason:tt},Ui())}finally{te.p=C,X.T=z}}function bb(){}function Lm(s,l,d,g){if(s.tag!==5)throw Error(i(476));var S=A0(s).queue;S0(s,S,l,ne,d===null?bb:function(){return E0(s),d(g)})}function A0(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:ne},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function E0(s){var l=A0(s).next.queue;Tf(s,l,{},Ui())}function Im(){return Bi(Km)}function M0(){return Qi().memoizedState}function T0(){return Qi().memoizedState}function Sb(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=Ui();s=Us(d);var g=yo(l,s,d);g!==null&&($r(g,l,d),zl(g,l,d)),l={cache:rd()},s.payload=l;return}l=l.return}}function Ab(s,l,d){var g=Ui();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},yd(s)?R0(l,d):(d=Qh(s,l,d,g),d!==null&&($r(d,s,g),Ea(d,l,g)))}function C0(s,l,d){var g=Ui();Tf(s,l,d,g)}function Tf(s,l,d,g){var S={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(yd(s))R0(l,S);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var z=l.lastRenderedState,j=C(z,d);if(S.hasEagerState=!0,S.eagerState=j,aa(j,z))return el(s,l,S,0),ln===null&&ff(),!1}catch{}finally{}if(d=Qh(s,l,S,g),d!==null)return $r(d,s,g),Ea(d,l,g),!0}return!1}function vd(s,l,d,g){if(g={lane:2,revertLane:Tb(),action:g,hasEagerState:!1,eagerState:null,next:null},yd(s)){if(l)throw Error(i(479))}else l=Qh(s,d,g,2),l!==null&&$r(l,s,2)}function yd(s){var l=s.alternate;return s===dn||l!==null&&l===dn}function R0(s,l){ll=ud=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function Ea(s,l,d){if((d&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,d|=g,l.lanes=d,zt(s,d)}}var Cf={readContext:Bi,use:hd,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useLayoutEffect:Vi,useInsertionEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useSyncExternalStore:Vi,useId:Vi,useHostTransitionStatus:Vi,useFormState:Vi,useActionState:Vi,useOptimistic:Vi,useMemoCache:Vi,useCacheRefresh:Vi},_d={readContext:Bi,use:hd,useCallback:function(s,l){return Kr().memoizedState=[s,l===void 0?null:l],s},useContext:Bi,useEffect:Dm,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,dd(4194308,4,y0.bind(null,l,s),d)},useLayoutEffect:function(s,l){return dd(4194308,4,s,l)},useInsertionEffect:function(s,l){dd(4,2,s,l)},useMemo:function(s,l){var d=Kr();l=l===void 0?null:l;var g=s();if(qr){ot(!0);try{s()}finally{ot(!1)}}return d.memoizedState=[g,l],g},useReducer:function(s,l,d){var g=Kr();if(d!==void 0){var S=d(l);if(qr){ot(!0);try{d(l)}finally{ot(!1)}}}else S=l;return g.memoizedState=g.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},g.queue=s,s=s.dispatch=Ab.bind(null,dn,s),[g.memoizedState,s]},useRef:function(s){var l=Kr();return s={current:s},l.memoizedState=s},useState:function(s){s=Cm(s);var l=s.queue,d=C0.bind(null,dn,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:Um,useDeferredValue:function(s,l){var d=Kr();return gd(d,s,l)},useTransition:function(){var s=Cm(!1);return s=S0.bind(null,dn,s.queue,!0,!1),Kr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var g=dn,S=Kr();if(kn){if(d===void 0)throw Error(i(407));d=d()}else{if(d=l(),ln===null)throw Error(i(349));(Xt&124)!==0||Qc(g,l,d)}S.memoizedState=d;var C={value:d,getSnapshot:l};return S.queue=C,Dm(s0.bind(null,g,C,s),[s]),g.flags|=2048,eu(9,Mf(),a0.bind(null,g,C,d,l),null),d},useId:function(){var s=Kr(),l=ln.identifierPrefix;if(kn){var d=Ds,g=Bs;d=(g&~(1<<32-pt(g)-1)).toString(32)+d,l=""+l+"R"+d,d=rr++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=t0++,l=""+l+"r"+d.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:Im,useFormState:p0,useActionState:p0,useOptimistic:function(s){var l=Kr();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=vd.bind(null,dn,!0,d),d.dispatch=l,[s,l]},useMemoCache:Em,useCacheRefresh:function(){return Kr().memoizedState=Sb.bind(null,dn)}},Pm={readContext:Bi,use:hd,useCallback:x0,useContext:Bi,useEffect:Om,useImperativeHandle:_0,useInsertionEffect:pd,useLayoutEffect:md,useMemo:Nm,useReducer:ul,useRef:Bm,useState:function(){return ul(bo)},useDebugValue:Um,useDeferredValue:function(s,l){var d=Qi();return b0(d,ni.memoizedState,s,l)},useTransition:function(){var s=ul(bo)[0],l=Qi().memoizedState;return[typeof s=="boolean"?s:ds(s),l]},useSyncExternalStore:r0,useId:M0,useHostTransitionStatus:Im,useFormState:m0,useActionState:m0,useOptimistic:function(s,l){var d=Qi();return c0(d,ni,s,l)},useMemoCache:Em,useCacheRefresh:T0},w0={readContext:Bi,use:hd,useCallback:x0,useContext:Bi,useEffect:Om,useImperativeHandle:_0,useInsertionEffect:pd,useLayoutEffect:md,useMemo:Nm,useReducer:Tm,useRef:Bm,useState:function(){return Tm(bo)},useDebugValue:Um,useDeferredValue:function(s,l){var d=Qi();return ni===null?gd(d,s,l):b0(d,ni.memoizedState,s,l)},useTransition:function(){var s=Tm(bo)[0],l=Qi().memoizedState;return[typeof s=="boolean"?s:ds(s),l]},useSyncExternalStore:r0,useId:M0,useHostTransitionStatus:Im,useFormState:v0,useActionState:v0,useOptimistic:function(s,l){var d=Qi();return ni!==null?c0(d,ni,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:Em,useCacheRefresh:T0},Fl=null,Rf=0;function wf(s){var l=Rf;return Rf+=1,Fl===null&&(Fl=[]),ld(Fl,s,l)}function nu(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function xd(s,l){throw l.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function B0(s){var l=s._init;return l(s._payload)}function D0(s){function l(Se,_e){if(s){var Me=Se.deletions;Me===null?(Se.deletions=[_e],Se.flags|=16):Me.push(_e)}}function d(Se,_e){if(!s)return null;for(;_e!==null;)l(Se,_e),_e=_e.sibling;return null}function g(Se){for(var _e=new Map;Se!==null;)Se.key!==null?_e.set(Se.key,Se):_e.set(Se.index,Se),Se=Se.sibling;return _e}function S(Se,_e){return Se=Gi(Se,_e),Se.index=0,Se.sibling=null,Se}function C(Se,_e,Me){return Se.index=Me,s?(Me=Se.alternate,Me!==null?(Me=Me.index,Me<_e?(Se.flags|=67108866,_e):Me):(Se.flags|=67108866,_e)):(Se.flags|=1048576,_e)}function z(Se){return s&&Se.alternate===null&&(Se.flags|=67108866),Se}function j(Se,_e,Me,$e){return _e===null||_e.tag!==6?(_e=df(Me,Se.mode,$e),_e.return=Se,_e):(_e=S(_e,Me),_e.return=Se,_e)}function oe(Se,_e,Me,$e){var Nt=Me.type;return Nt===b?Ke(Se,_e,Me.props.children,$e,Me.key):_e!==null&&(_e.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===P&&B0(Nt)===_e.type)?(_e=S(_e,Me.props),nu(_e,Me),_e.return=Se,_e):(_e=pr(Me.type,Me.key,Me.props,null,Se.mode,$e),nu(_e,Me),_e.return=Se,_e)}function Re(Se,_e,Me,$e){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Me.containerInfo||_e.stateNode.implementation!==Me.implementation?(_e=ed(Me,Se.mode,$e),_e.return=Se,_e):(_e=S(_e,Me.children||[]),_e.return=Se,_e)}function Ke(Se,_e,Me,$e,Nt){return _e===null||_e.tag!==7?(_e=nl(Me,Se.mode,$e,Nt),_e.return=Se,_e):(_e=S(_e,Me),_e.return=Se,_e)}function tt(Se,_e,Me){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=df(""+_e,Se.mode,Me),_e.return=Se,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case y:return Me=pr(_e.type,_e.key,_e.props,null,Se.mode,Me),nu(Me,_e),Me.return=Se,Me;case x:return _e=ed(_e,Se.mode,Me),_e.return=Se,_e;case P:var $e=_e._init;return _e=$e(_e._payload),tt(Se,_e,Me)}if(he(_e)||ie(_e))return _e=nl(_e,Se.mode,Me,null),_e.return=Se,_e;if(typeof _e.then=="function")return tt(Se,wf(_e),Me);if(_e.$$typeof===B)return tt(Se,vf(Se,_e),Me);xd(Se,_e)}return null}function Ne(Se,_e,Me,$e){var Nt=_e!==null?_e.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Nt!==null?null:j(Se,_e,""+Me,$e);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case y:return Me.key===Nt?oe(Se,_e,Me,$e):null;case x:return Me.key===Nt?Re(Se,_e,Me,$e):null;case P:return Nt=Me._init,Me=Nt(Me._payload),Ne(Se,_e,Me,$e)}if(he(Me)||ie(Me))return Nt!==null?null:Ke(Se,_e,Me,$e,null);if(typeof Me.then=="function")return Ne(Se,_e,wf(Me),$e);if(Me.$$typeof===B)return Ne(Se,_e,vf(Se,Me),$e);xd(Se,Me)}return null}function ze(Se,_e,Me,$e,Nt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Se=Se.get(Me)||null,j(_e,Se,""+$e,Nt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case y:return Se=Se.get($e.key===null?Me:$e.key)||null,oe(_e,Se,$e,Nt);case x:return Se=Se.get($e.key===null?Me:$e.key)||null,Re(_e,Se,$e,Nt);case P:var Rn=$e._init;return $e=Rn($e._payload),ze(Se,_e,Me,$e,Nt)}if(he($e)||ie($e))return Se=Se.get(Me)||null,Ke(_e,Se,$e,Nt,null);if(typeof $e.then=="function")return ze(Se,_e,Me,wf($e),Nt);if($e.$$typeof===B)return ze(Se,_e,Me,vf(_e,$e),Nt);xd(_e,$e)}return null}function an(Se,_e,Me,$e){for(var Nt=null,Rn=null,Gt=_e,Qt=_e=0,Pr=null;Gt!==null&&Qt<Me.length;Qt++){Gt.index>Qt?(Pr=Gt,Gt=null):Pr=Gt.sibling;var $n=Ne(Se,Gt,Me[Qt],$e);if($n===null){Gt===null&&(Gt=Pr);break}s&&Gt&&$n.alternate===null&&l(Se,Gt),_e=C($n,_e,Qt),Rn===null?Nt=$n:Rn.sibling=$n,Rn=$n,Gt=Pr}if(Qt===Me.length)return d(Se,Gt),kn&&po(Se,Qt),Nt;if(Gt===null){for(;Qt<Me.length;Qt++)Gt=tt(Se,Me[Qt],$e),Gt!==null&&(_e=C(Gt,_e,Qt),Rn===null?Nt=Gt:Rn.sibling=Gt,Rn=Gt);return kn&&po(Se,Qt),Nt}for(Gt=g(Gt);Qt<Me.length;Qt++)Pr=ze(Gt,Se,Qt,Me[Qt],$e),Pr!==null&&(s&&Pr.alternate!==null&&Gt.delete(Pr.key===null?Qt:Pr.key),_e=C(Pr,_e,Qt),Rn===null?Nt=Pr:Rn.sibling=Pr,Rn=Pr);return s&&Gt.forEach(function(_u){return l(Se,_u)}),kn&&po(Se,Qt),Nt}function $t(Se,_e,Me,$e){if(Me==null)throw Error(i(151));for(var Nt=null,Rn=null,Gt=_e,Qt=_e=0,Pr=null,$n=Me.next();Gt!==null&&!$n.done;Qt++,$n=Me.next()){Gt.index>Qt?(Pr=Gt,Gt=null):Pr=Gt.sibling;var _u=Ne(Se,Gt,$n.value,$e);if(_u===null){Gt===null&&(Gt=Pr);break}s&&Gt&&_u.alternate===null&&l(Se,Gt),_e=C(_u,_e,Qt),Rn===null?Nt=_u:Rn.sibling=_u,Rn=_u,Gt=Pr}if($n.done)return d(Se,Gt),kn&&po(Se,Qt),Nt;if(Gt===null){for(;!$n.done;Qt++,$n=Me.next())$n=tt(Se,$n.value,$e),$n!==null&&(_e=C($n,_e,Qt),Rn===null?Nt=$n:Rn.sibling=$n,Rn=$n);return kn&&po(Se,Qt),Nt}for(Gt=g(Gt);!$n.done;Qt++,$n=Me.next())$n=ze(Gt,Se,Qt,$n.value,$e),$n!==null&&(s&&$n.alternate!==null&&Gt.delete($n.key===null?Qt:$n.key),_e=C($n,_e,Qt),Rn===null?Nt=$n:Rn.sibling=$n,Rn=$n);return s&&Gt.forEach(function(sU){return l(Se,sU)}),kn&&po(Se,Qt),Nt}function gi(Se,_e,Me,$e){if(typeof Me=="object"&&Me!==null&&Me.type===b&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case y:e:{for(var Nt=Me.key;_e!==null;){if(_e.key===Nt){if(Nt=Me.type,Nt===b){if(_e.tag===7){d(Se,_e.sibling),$e=S(_e,Me.props.children),$e.return=Se,Se=$e;break e}}else if(_e.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===P&&B0(Nt)===_e.type){d(Se,_e.sibling),$e=S(_e,Me.props),nu($e,Me),$e.return=Se,Se=$e;break e}d(Se,_e);break}else l(Se,_e);_e=_e.sibling}Me.type===b?($e=nl(Me.props.children,Se.mode,$e,Me.key),$e.return=Se,Se=$e):($e=pr(Me.type,Me.key,Me.props,null,Se.mode,$e),nu($e,Me),$e.return=Se,Se=$e)}return z(Se);case x:e:{for(Nt=Me.key;_e!==null;){if(_e.key===Nt)if(_e.tag===4&&_e.stateNode.containerInfo===Me.containerInfo&&_e.stateNode.implementation===Me.implementation){d(Se,_e.sibling),$e=S(_e,Me.children||[]),$e.return=Se,Se=$e;break e}else{d(Se,_e);break}else l(Se,_e);_e=_e.sibling}$e=ed(Me,Se.mode,$e),$e.return=Se,Se=$e}return z(Se);case P:return Nt=Me._init,Me=Nt(Me._payload),gi(Se,_e,Me,$e)}if(he(Me))return an(Se,_e,Me,$e);if(ie(Me)){if(Nt=ie(Me),typeof Nt!="function")throw Error(i(150));return Me=Nt.call(Me),$t(Se,_e,Me,$e)}if(typeof Me.then=="function")return gi(Se,_e,wf(Me),$e);if(Me.$$typeof===B)return gi(Se,_e,vf(Se,Me),$e);xd(Se,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,_e!==null&&_e.tag===6?(d(Se,_e.sibling),$e=S(_e,Me),$e.return=Se,Se=$e):(d(Se,_e),$e=df(Me,Se.mode,$e),$e.return=Se,Se=$e),z(Se)):d(Se,_e)}return function(Se,_e,Me,$e){try{Rf=0;var Nt=gi(Se,_e,Me,$e);return Fl=null,Nt}catch(Gt){if(Gt===bf||Gt===hs)throw Gt;var Rn=la(29,Gt,null,Se.mode);return Rn.lanes=$e,Rn.return=Se,Rn}finally{}}}var Hl=D0(!0),O0=D0(!1),si=se(null),ps=null;function fl(s){var l=s.alternate;De(ki,ki.current&1),De(si,s),ps===null&&(l===null||$c.current!==null||l.memoizedState!==null)&&(ps=s)}function U0(s){if(s.tag===22){if(De(ki,ki.current),De(si,s),ps===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(ps=s)}}else hl()}function hl(){De(ki,ki.current),De(si,si.current)}function Ns(s){Ae(si),ps===s&&(ps=null),Ae(ki)}var ki=se(0);function So(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||zb(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function dl(s,l,d,g){l=s.memoizedState,d=d(g,l),d=d==null?l:m({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Jr={enqueueSetState:function(s,l,d){s=s._reactInternals;var g=Ui(),S=Us(g);S.payload=l,d!=null&&(S.callback=d),l=yo(s,S,g),l!==null&&($r(l,s,g),zl(l,s,g))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var g=Ui(),S=Us(g);S.tag=1,S.payload=l,d!=null&&(S.callback=d),l=yo(s,S,g),l!==null&&($r(l,s,g),zl(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Ui(),g=Us(d);g.tag=2,l!=null&&(g.callback=l),l=yo(s,g,d),l!==null&&($r(l,s,d),zl(l,s,d))}};function N0(s,l,d,g,S,C,z){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,C,z):l.prototype&&l.prototype.isPureReactComponent?!us(d,g)||!us(S,C):!0}function L0(s,l,d,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==s&&Jr.enqueueReplaceState(l,l.state,null)}function Ls(s,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(s=s.defaultProps){d===l&&(d=m({},d));for(var S in s)d[S]===void 0&&(d[S]=s[S])}return d}var Gl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Bf(s){Gl(s)}function bd(s){console.error(s)}function I0(s){Gl(s)}function Sd(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function Ka(s,l,d){try{var g=s.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function Ad(s,l,d){return d=Us(d),d.tag=3,d.payload={element:null},d.callback=function(){Sd(s,l)},d}function P0(s){return s=Us(s),s.tag=3,s}function Ed(s,l,d,g){var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var C=g.value;s.payload=function(){return S(C)},s.callback=function(){Ka(l,d,g)}}var z=d.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(s.callback=function(){Ka(l,d,g),typeof S!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var j=g.stack;this.componentDidCatch(g.value,{componentStack:j!==null?j:""})})}function Eb(s,l,d,g,S){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&Ya(l,d,S,!0),d=si.current,d!==null){switch(d.tag){case 13:return ps===null?u():d.alternate===null&&xi===0&&(xi=3),d.flags&=-257,d.flags|=65536,d.lanes=S,g===Sf?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),Fe(s,g,S)),!1;case 22:return d.flags|=65536,g===Sf?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),Fe(s,g,S)),!1}throw Error(i(435,d.tag))}return Fe(s,g,S),u(),!1}if(kn)return l=si.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,g!==nd&&(s=Error(i(422),{cause:g}),Pl(Ar(s,d)))):(g!==nd&&(l=Error(i(423),{cause:g}),Pl(Ar(l,d))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,g=Ar(g,d),S=Ad(s.stateNode,g,S),Kc(s,S),xi!==4&&(xi=2)),!1;var C=Error(i(520),{cause:g});if(C=Ar(C,d),Zn===null?Zn=[C]:Zn.push(C),xi!==4&&(xi=2),l===null)return!0;g=Ar(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=S&-S,d.lanes|=s,s=Ad(d.stateNode,g,s),Kc(d,s),!1;case 1:if(l=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Oa===null||!Oa.has(C))))return d.flags|=65536,S&=-S,d.lanes|=S,S=P0(S),Ed(S,s,d,g),Kc(d,S),!1}d=d.return}while(d!==null);return!1}var z0=Error(i(461)),mr=!1;function Xi(s,l,d,g){l.child=s===null?O0(l,null,d,g):Hl(l,s.child,d,g)}function ua(s,l,d,g,S){d=d.render;var C=l.ref;if("ref"in g){var z={};for(var j in g)j!=="ref"&&(z[j]=g[j])}else z=g;return Os(l),g=xo(s,l,d,z,C,S),j=Sm(),s!==null&&!mr?(fd(s,l,S),gr(s,l,S)):(kn&&j&&fm(l),l.flags|=1,Xi(s,l,g,S),l.child)}function fa(s,l,d,g,S){if(s===null){var C=d.type;return typeof C=="function"&&!hf(C)&&C.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=C,zm(s,l,C,g,S)):(s=pr(d.type,null,g,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(C=s.child,!Df(s,S)){var z=C.memoizedProps;if(d=d.compare,d=d!==null?d:us,d(z,g)&&s.ref===l.ref)return gr(s,l,S)}return l.flags|=1,s=Gi(C,g),s.ref=l.ref,s.return=l,l.child=s}function zm(s,l,d,g,S){if(s!==null){var C=s.memoizedProps;if(us(C,g)&&s.ref===l.ref)if(mr=!1,l.pendingProps=g=C,Df(s,S))(s.flags&131072)!==0&&(mr=!0);else return l.lanes=s.lanes,gr(s,l,S)}return iu(s,l,d,g,S)}function Vl(s,l,d){var g=l.pendingProps,S=g.children,C=s!==null?s.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=C!==null?C.baseLanes|d:d,s!==null){for(S=l.child=s.child,C=0;S!==null;)C=C|S.lanes|S.childLanes,S=S.sibling;l.childLanes=C&~g}else l.childLanes=0,l.child=null;return kl(s,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&xf(l,C!==null?C.cachePool:null),C!==null?e0(l,C):bm(),U0(l);else return l.lanes=l.childLanes=536870912,kl(s,l,C!==null?C.baseLanes|d:d,d)}else C!==null?(xf(l,C.cachePool),e0(l,C),hl(),l.memoizedState=null):(s!==null&&xf(l,null),bm(),hl());return Xi(s,l,S,d),l.child}function kl(s,l,d,g){var S=ol();return S=S===null?null:{parent:Zi._currentValue,pool:S},l.memoizedState={baseLanes:d,cachePool:S},s!==null&&xf(l,null),bm(),U0(l),s!==null&&Ya(s,l,g,!0),null}function Xl(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function iu(s,l,d,g,S){return Os(l),d=xo(s,l,d,g,void 0,S),g=Sm(),s!==null&&!mr?(fd(s,l,S),gr(s,l,S)):(kn&&g&&fm(l),l.flags|=1,Xi(s,l,d,S),l.child)}function Ma(s,l,d,g,S,C){return Os(l),l.updateQueue=null,d=i0(l,g,d,S),n0(s),g=Sm(),s!==null&&!mr?(fd(s,l,C),gr(s,l,C)):(kn&&g&&fm(l),l.flags|=1,Xi(s,l,d,C),l.child)}function Ta(s,l,d,g,S){if(Os(l),l.stateNode===null){var C=tl,z=d.contextType;typeof z=="object"&&z!==null&&(C=Bi(z)),C=new d(g,C),l.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Jr,l.stateNode=C,C._reactInternals=l,C=l.stateNode,C.props=g,C.state=l.memoizedState,C.refs={},_m(l),z=d.contextType,C.context=typeof z=="object"&&z!==null?Bi(z):tl,C.state=l.memoizedState,z=d.getDerivedStateFromProps,typeof z=="function"&&(dl(l,d,z,g),C.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(z=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),z!==C.state&&Jr.enqueueReplaceState(C,C.state,null),Jc(l,g,C,S),Af(),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){C=l.stateNode;var j=l.memoizedProps,oe=Ls(d,j);C.props=oe;var Re=C.context,Ke=d.contextType;z=tl,typeof Ke=="object"&&Ke!==null&&(z=Bi(Ke));var tt=d.getDerivedStateFromProps;Ke=typeof tt=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=l.pendingProps!==j,Ke||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||Re!==z)&&L0(l,C,g,z),vo=!1;var Ne=l.memoizedState;C.state=Ne,Jc(l,g,C,S),Af(),Re=l.memoizedState,j||Ne!==Re||vo?(typeof tt=="function"&&(dl(l,d,tt,g),Re=l.memoizedState),(oe=vo||N0(l,d,oe,g,Ne,Re,z))?(Ke||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(l.flags|=4194308)):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Re),C.props=g,C.state=Re,C.context=z,g=oe):(typeof C.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{C=l.stateNode,tn(s,l),z=l.memoizedProps,Ke=Ls(d,z),C.props=Ke,tt=l.pendingProps,Ne=C.context,Re=d.contextType,oe=tl,typeof Re=="object"&&Re!==null&&(oe=Bi(Re)),j=d.getDerivedStateFromProps,(Re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==tt||Ne!==oe)&&L0(l,C,g,oe),vo=!1,Ne=l.memoizedState,C.state=Ne,Jc(l,g,C,S),Af();var ze=l.memoizedState;z!==tt||Ne!==ze||vo||s!==null&&s.dependencies!==null&&gf(s.dependencies)?(typeof j=="function"&&(dl(l,d,j,g),ze=l.memoizedState),(Ke=vo||N0(l,d,Ke,g,Ne,ze,oe)||s!==null&&s.dependencies!==null&&gf(s.dependencies))?(Re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,ze,oe),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,ze,oe)),typeof C.componentDidUpdate=="function"&&(l.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof C.componentDidUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ze),C.props=g,C.state=ze,C.context=oe,g=Ke):(typeof C.componentDidUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ne===s.memoizedState||(l.flags|=1024),g=!1)}return C=g,Xl(s,l),g=(l.flags&128)!==0,C||g?(C=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:C.render(),l.flags|=1,s!==null&&g?(l.child=Hl(l,s.child,null,S),l.child=Hl(l,null,d,S)):Xi(s,l,d,S),l.memoizedState=C.state,s=l.child):s=gr(s,l,S),s}function pl(s,l,d,g){return Xc(),l.flags|=256,Xi(s,l,d,g),l.child}var ms={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gs(s){return{baseLanes:s,cachePool:sd()}}function ar(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=es),s}function ru(s,l,d){var g=l.pendingProps,S=!1,C=(l.flags&128)!==0,z;if((z=C)||(z=s!==null&&s.memoizedState===null?!1:(ki.current&2)!==0),z&&(S=!0,l.flags&=-129),z=(l.flags&32)!==0,l.flags&=-33,s===null){if(kn){if(S?fl(l):hl(),kn){var j=Mi,oe;if(oe=j){e:{for(oe=j,j=Sa;oe.nodeType!==8;){if(!j){j=null;break e}if(oe=Ro(oe.nextSibling),oe===null){j=null;break e}}j=oe}j!==null?(l.memoizedState={dehydrated:j,treeContext:il!==null?{id:Bs,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},oe=la(18,null,null,0),oe.stateNode=j,oe.return=l,l.child=oe,Wr=l,Mi=null,oe=!0):oe=!1}oe||rl(l)}if(j=l.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return zb(j)?l.lanes=32:l.lanes=536870912,null;Ns(l)}return j=g.children,g=g.fallback,S?(hl(),S=l.mode,j=Yl({mode:"hidden",children:j},S),g=nl(g,S,d,null),j.return=l,g.return=l,j.sibling=g,l.child=j,S=l.child,S.memoizedState=gs(d),S.childLanes=ar(s,z,d),l.memoizedState=ms,g):(fl(l),Is(l,j))}if(oe=s.memoizedState,oe!==null&&(j=oe.dehydrated,j!==null)){if(C)l.flags&256?(fl(l),l.flags&=-257,l=Tr(s,l,d)):l.memoizedState!==null?(hl(),l.child=s.child,l.flags|=128,l=null):(hl(),S=g.fallback,j=l.mode,g=Yl({mode:"visible",children:g.children},j),S=nl(S,j,d,null),S.flags|=2,g.return=l,S.return=l,g.sibling=S,l.child=g,Hl(l,s.child,null,d),g=l.child,g.memoizedState=gs(d),g.childLanes=ar(s,z,d),l.memoizedState=ms,l=S);else if(fl(l),zb(j)){if(z=j.nextSibling&&j.nextSibling.dataset,z)var Re=z.dgst;z=Re,g=Error(i(419)),g.stack="",g.digest=z,Pl({value:g,source:null,stack:null}),l=Tr(s,l,d)}else if(mr||Ya(s,l,d,!1),z=(d&s.childLanes)!==0,mr||z){if(z=ln,z!==null&&(g=d&-d,g=(g&42)!==0?1:mn(g),g=(g&(z.suspendedLanes|d))!==0?0:g,g!==0&&g!==oe.retryLane))throw oe.retryLane=g,ho(s,g),$r(z,s,g),z0;j.data==="$?"||u(),l=Tr(s,l,d)}else j.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=oe.treeContext,Mi=Ro(j.nextSibling),Wr=l,kn=!0,Xa=null,Sa=!1,s!==null&&(Er[ba++]=Bs,Er[ba++]=Ds,Er[ba++]=il,Bs=s.id,Ds=s.overflow,il=l),l=Is(l,g.children),l.flags|=4096);return l}return S?(hl(),S=g.fallback,j=l.mode,oe=s.child,Re=oe.sibling,g=Gi(oe,{mode:"hidden",children:g.children}),g.subtreeFlags=oe.subtreeFlags&65011712,Re!==null?S=Gi(Re,S):(S=nl(S,j,d,null),S.flags|=2),S.return=l,g.return=l,g.sibling=S,l.child=g,g=S,S=l.child,j=s.child.memoizedState,j===null?j=gs(d):(oe=j.cachePool,oe!==null?(Re=Zi._currentValue,oe=oe.parent!==Re?{parent:Re,pool:Re}:oe):oe=sd(),j={baseLanes:j.baseLanes|d,cachePool:oe}),S.memoizedState=j,S.childLanes=ar(s,z,d),l.memoizedState=ms,g):(fl(l),d=s.child,s=d.sibling,d=Gi(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,s!==null&&(z=l.deletions,z===null?(l.deletions=[s],l.flags|=16):z.push(s)),l.child=d,l.memoizedState=null,d)}function Is(s,l){return l=Yl({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Yl(s,l){return s=la(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Tr(s,l,d){return Hl(l,s.child,null,d),s=Is(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Cr(s,l,d){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),mm(s.return,l,d)}function Un(s,l,d,g,S){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:S}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=d,C.tailMode=S)}function Ja(s,l,d){var g=l.pendingProps,S=g.revealOrder,C=g.tail;if(Xi(s,l,g.children,d),g=ki.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Cr(s,d,l);else if(s.tag===19)Cr(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}switch(De(ki,g),S){case"forwards":for(d=l.child,S=null;d!==null;)s=d.alternate,s!==null&&So(s)===null&&(S=d),d=d.sibling;d=S,d===null?(S=l.child,l.child=null):(S=d.sibling,d.sibling=null),Un(l,!1,S,d,C);break;case"backwards":for(d=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&So(s)===null){l.child=S;break}s=S.sibling,S.sibling=d,d=S,S=s}Un(l,!0,d,null,C);break;case"together":Un(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function gr(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),xs|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(Ya(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,d=Gi(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Gi(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Df(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&gf(s)))}function Za(s,l,d){switch(l.tag){case 3:rt(l,l.stateNode.containerInfo),sl(l,Zi,s.memoizedState.cache),Xc();break;case 27:case 5:wt(l);break;case 4:rt(l,l.stateNode.containerInfo);break;case 10:sl(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(fl(l),l.flags|=128,null):(d&l.child.childLanes)!==0?ru(s,l,d):(fl(l),s=gr(s,l,d),s!==null?s.sibling:null);fl(l);break;case 19:var S=(s.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(Ya(s,l,d,!1),g=(d&l.childLanes)!==0),S){if(g)return Ja(s,l,d);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),De(ki,ki.current),g)break;return null;case 22:case 23:return l.lanes=0,Vl(s,l,d);case 24:sl(l,Zi,s.memoizedState.cache)}return gr(s,l,d)}function jl(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)mr=!0;else{if(!Df(s,d)&&(l.flags&128)===0)return mr=!1,Za(s,l,d);mr=(s.flags&131072)!==0}else mr=!1,kn&&(l.flags&1048576)!==0&&td(l,kc,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var g=l.elementType,S=g._init;if(g=S(g._payload),l.type=g,typeof g=="function")hf(g)?(s=Ls(g,s),l.tag=1,l=Ta(null,l,g,s,d)):(l.tag=0,l=iu(null,l,g,s,d));else{if(g!=null){if(S=g.$$typeof,S===D){l.tag=11,l=ua(null,l,g,s,d);break e}else if(S===H){l.tag=14,l=fa(null,l,g,s,d);break e}}throw l=ae(g)||g,Error(i(306,l,""))}}return l;case 0:return iu(s,l,l.type,l.pendingProps,d);case 1:return g=l.type,S=Ls(g,l.pendingProps),Ta(s,l,g,S,d);case 3:e:{if(rt(l,l.stateNode.containerInfo),s===null)throw Error(i(387));g=l.pendingProps;var C=l.memoizedState;S=C.element,tn(s,l),Jc(l,g,null,d);var z=l.memoizedState;if(g=z.cache,sl(l,Zi,g),g!==C.cache&&mf(l,[Zi],d,!0),Af(),g=z.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:z.cache},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){l=pl(s,l,g,d);break e}else if(g!==S){S=Ar(Error(i(424)),l),Pl(S),l=pl(s,l,g,d);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mi=Ro(s.firstChild),Wr=l,kn=!0,Xa=null,Sa=!0,d=O0(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Xc(),g===S){l=gr(s,l,d);break e}Xi(s,l,g,d)}l=l.child}return l;case 26:return Xl(s,l),s===null?(d=RM(l.type,null,l.pendingProps,null))?l.memoizedState=d:kn||(d=l.type,s=l.pendingProps,g=X0(Le.current).createElement(d),g[wi]=l,g[Fi]=s,Qr(g,d,s),Ue(g),l.stateNode=g):l.memoizedState=RM(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return wt(l),s===null&&kn&&(g=l.stateNode=MM(l.type,l.pendingProps,Le.current),Wr=l,Sa=!0,S=Mi,pu(l.type)?(Fb=S,Mi=Ro(g.firstChild)):Mi=S),Xi(s,l,l.pendingProps.children,d),Xl(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&kn&&((S=g=Mi)&&(g=LO(g,l.type,l.pendingProps,Sa),g!==null?(l.stateNode=g,Wr=l,Mi=Ro(g.firstChild),Sa=!1,S=!0):S=!1),S||rl(l)),wt(l),S=l.type,C=l.pendingProps,z=s!==null?s.memoizedProps:null,g=C.children,Lb(S,C)?g=null:z!==null&&Lb(S,z)&&(l.flags|=32),l.memoizedState!==null&&(S=xo(s,l,yb,null,null,d),Km._currentValue=S),Xl(s,l),Xi(s,l,g,d),l.child;case 6:return s===null&&kn&&((s=d=Mi)&&(d=IO(d,l.pendingProps,Sa),d!==null?(l.stateNode=d,Wr=l,Mi=null,s=!0):s=!1),s||rl(l)),null;case 13:return ru(s,l,d);case 4:return rt(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Hl(l,null,g,d):Xi(s,l,g,d),l.child;case 11:return ua(s,l,l.type,l.pendingProps,d);case 7:return Xi(s,l,l.pendingProps,d),l.child;case 8:return Xi(s,l,l.pendingProps.children,d),l.child;case 12:return Xi(s,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,sl(l,l.type,g.value),Xi(s,l,g.children,d),l.child;case 9:return S=l.type._context,g=l.pendingProps.children,Os(l),S=Bi(S),g=g(S),l.flags|=1,Xi(s,l,g,d),l.child;case 14:return fa(s,l,l.type,l.pendingProps,d);case 15:return zm(s,l,l.type,l.pendingProps,d);case 19:return Ja(s,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},s===null?(d=Yl(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Gi(s.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Vl(s,l,d);case 24:return Os(l),g=Bi(Zi),s===null?(S=ol(),S===null&&(S=ln,C=rd(),S.pooledCache=C,C.refCount++,C!==null&&(S.pooledCacheLanes|=d),S=C),l.memoizedState={parent:g,cache:S},_m(l),sl(l,Zi,S)):((s.lanes&d)!==0&&(tn(s,l),Jc(l,null,null,d),Af()),S=s.memoizedState,C=l.memoizedState,S.parent!==g?(S={parent:g,cache:g},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),sl(l,Zi,g)):(g=C.cache,sl(l,Zi,g),g!==S.cache&&mf(l,[Zi],d,!0))),Xi(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function vs(s){s.flags|=4}function Of(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!UM(l)){if(l=si.current,l!==null&&((Xt&4194048)===Xt?ps!==null:(Xt&62914560)!==Xt&&(Xt&536870912)===0||l!==ps))throw Wa=Sf,vm;s.flags|=8192}}function Ao(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Te():536870912,s.lanes|=l,In|=l)}function Wl(s,l){if(!kn)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function hi(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(l)for(var S=s.child;S!==null;)d|=S.lanes|S.childLanes,g|=S.subtreeFlags&65011712,g|=S.flags&65011712,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)d|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=g,s.childLanes=d,l}function Fm(s,l,d){var g=l.pendingProps;switch(hm(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(l),null;case 1:return hi(l),null;case 3:return d=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),go(Zi),Bt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(fs(l)?vs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Kn())),hi(l),null;case 26:return d=l.memoizedState,s===null?(vs(l),d!==null?(hi(l),Of(l,d)):(hi(l),l.flags&=-16777217)):d?d!==s.memoizedState?(vs(l),hi(l),Of(l,d)):(hi(l),l.flags&=-16777217):(s.memoizedProps!==g&&vs(l),hi(l),l.flags&=-16777217),null;case 27:fn(l),d=Le.current;var S=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return hi(l),null}s=ge.current,fs(l)?Jv(l):(s=MM(S,g,d),l.stateNode=s,vs(l))}return hi(l),null;case 5:if(fn(l),d=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(!g){if(l.stateNode===null)throw Error(i(166));return hi(l),null}if(s=ge.current,fs(l))Jv(l);else{switch(S=X0(Le.current),s){case 1:s=S.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=S.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof g.is=="string"?S.createElement("select",{is:g.is}):S.createElement("select"),g.multiple?s.multiple=!0:g.size&&(s.size=g.size);break;default:s=typeof g.is=="string"?S.createElement(d,{is:g.is}):S.createElement(d)}}s[wi]=l,s[Fi]=g;e:for(S=l.child;S!==null;){if(S.tag===5||S.tag===6)s.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===l)break e;for(;S.sibling===null;){if(S.return===null||S.return===l)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}l.stateNode=s;e:switch(Qr(s,d,g),d){case"button":case"input":case"select":case"textarea":s=!!g.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&vs(l)}}return hi(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&vs(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(i(166));if(s=Le.current,fs(l)){if(s=l.stateNode,d=l.memoizedProps,g=null,S=Wr,S!==null)switch(S.tag){case 27:case 5:g=S.memoizedProps}s[wi]=l,s=!!(s.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||yM(s.nodeValue,d)),s||rl(l)}else s=X0(s).createTextNode(g),s[wi]=l,l.stateNode=s}return hi(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=fs(l),g!==null&&g.dehydrated!==null){if(s===null){if(!S)throw Error(i(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[wi]=l}else Xc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;hi(l),S=!1}else S=Kn(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=S),S=!0;if(!S)return l.flags&256?(Ns(l),l):(Ns(l),null)}if(Ns(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,s=s!==null&&s.memoizedState!==null,d){g=l.child,S=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(S=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==S&&(g.flags|=2048)}return d!==s&&d&&(l.child.flags|=8192),Ao(l,l.updateQueue),hi(l),null;case 4:return Bt(),s===null&&Bb(l.stateNode.containerInfo),hi(l),null;case 10:return go(l.type),hi(l),null;case 19:if(Ae(ki),S=l.memoizedState,S===null)return hi(l),null;if(g=(l.flags&128)!==0,C=S.rendering,C===null)if(g)Wl(S,!1);else{if(xi!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(C=So(s),C!==null){for(l.flags|=128,Wl(S,!1),s=C.updateQueue,l.updateQueue=s,Ao(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)um(d,s),d=d.sibling;return De(ki,ki.current&1|2),l.child}s=s.sibling}S.tail!==null&&Ze()>Lr&&(l.flags|=128,g=!0,Wl(S,!1),l.lanes=4194304)}else{if(!g)if(s=So(C),s!==null){if(l.flags|=128,g=!0,s=s.updateQueue,l.updateQueue=s,Ao(l,s),Wl(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!kn)return hi(l),null}else 2*Ze()-S.renderingStartTime>Lr&&d!==536870912&&(l.flags|=128,g=!0,Wl(S,!1),l.lanes=4194304);S.isBackwards?(C.sibling=l.child,l.child=C):(s=S.last,s!==null?s.sibling=C:l.child=C,S.last=C)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Ze(),l.sibling=null,s=ki.current,De(ki,g?s&1|2:s&1),l):(hi(l),null);case 22:case 23:return Ns(l),Ef(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(hi(l),l.subtreeFlags&6&&(l.flags|=8192)):hi(l),d=l.updateQueue,d!==null&&Ao(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),s!==null&&Ae(ja),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),go(Zi),hi(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function au(s,l){switch(hm(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return go(Zi),Bt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return fn(l),null;case 13:if(Ns(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Xc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ae(ki),null;case 4:return Bt(),null;case 10:return go(l.type),null;case 22:case 23:return Ns(l),Ef(),s!==null&&Ae(ja),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return go(Zi),null;case 25:return null;default:return null}}function su(s,l){switch(hm(l),l.tag){case 3:go(Zi),Bt();break;case 26:case 27:case 5:fn(l);break;case 4:Bt();break;case 13:Ns(l);break;case 19:Ae(ki);break;case 10:go(l.type);break;case 22:case 23:Ns(l),Ef(),s!==null&&Ae(ja);break;case 24:go(Zi)}}function ql(s,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var S=g.next;d=S;do{if((d.tag&s)===s){g=void 0;var C=d.create,z=d.inst;g=C(),z.destroy=g}d=d.next}while(d!==S)}}catch(j){ve(l,l.return,j)}}function Ca(s,l,d){try{var g=l.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var C=S.next;g=C;do{if((g.tag&s)===s){var z=g.inst,j=z.destroy;if(j!==void 0){z.destroy=void 0,S=l;var oe=d,Re=j;try{Re()}catch(Ke){ve(S,oe,Ke)}}}g=g.next}while(g!==C)}}catch(Ke){ve(l,l.return,Ke)}}function Kl(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{Qv(l,d)}catch(g){ve(s,s.return,g)}}}function Eo(s,l,d){d.props=Ls(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(g){ve(s,l,g)}}function Jl(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof d=="function"?s.refCleanup=d(g):d.current=g}}catch(S){ve(s,l,S)}}function Ps(s,l){var d=s.ref,g=s.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(S){ve(s,l,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(S){ve(s,l,S)}else d.current=null}function ou(s){var l=s.type,d=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(S){ve(s,s.return,S)}}function Uf(s,l,d){try{var g=s.stateNode;BO(g,s.type,d,l),g[Fi]=l}catch(S){ve(s,s.return,S)}}function Nf(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&pu(s.type)||s.tag===4}function ml(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Nf(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&pu(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gl(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=k0));else if(g!==4&&(g===27&&pu(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for(gl(s,l,d),s=s.sibling;s!==null;)gl(s,l,d),s=s.sibling}function vl(s,l,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(g!==4&&(g===27&&pu(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(vl(s,l,d),s=s.sibling;s!==null;)vl(s,l,d),s=s.sibling}function yl(s){var l=s.stateNode,d=s.memoizedProps;try{for(var g=s.type,S=l.attributes;S.length;)l.removeAttributeNode(S[0]);Qr(l,g,d),l[wi]=s,l[Fi]=d}catch(C){ve(s,s.return,C)}}var zs=!1,di=!1,lu=!1,Ra=typeof WeakSet=="function"?WeakSet:Set,oi=null;function sr(s,l){if(s=s.containerInfo,Ub=J0,s=im(s),lf(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var S=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var z=0,j=-1,oe=-1,Re=0,Ke=0,tt=s,Ne=null;t:for(;;){for(var ze;tt!==d||S!==0&&tt.nodeType!==3||(j=z+S),tt!==C||g!==0&&tt.nodeType!==3||(oe=z+g),tt.nodeType===3&&(z+=tt.nodeValue.length),(ze=tt.firstChild)!==null;)Ne=tt,tt=ze;for(;;){if(tt===s)break t;if(Ne===d&&++Re===S&&(j=z),Ne===C&&++Ke===g&&(oe=z),(ze=tt.nextSibling)!==null)break;tt=Ne,Ne=tt.parentNode}tt=ze}d=j===-1||oe===-1?null:{start:j,end:oe}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nb={focusedElem:s,selectionRange:d},J0=!1,oi=l;oi!==null;)if(l=oi,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,oi=s;else for(;oi!==null;){switch(l=oi,C=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,d=l,S=C.memoizedProps,C=C.memoizedState,g=d.stateNode;try{var an=Ls(d.type,S,d.elementType===d.type);s=g.getSnapshotBeforeUpdate(an,C),g.__reactInternalSnapshotBeforeUpdate=s}catch($t){ve(d,d.return,$t)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)Pb(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Pb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,oi=s;break}oi=l.return}}function Mo(s,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:Zr(s,d),g&4&&ql(5,d);break;case 1:if(Zr(s,d),g&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(z){ve(d,d.return,z)}else{var S=Ls(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(S,l,s.__reactInternalSnapshotBeforeUpdate)}catch(z){ve(d,d.return,z)}}g&64&&Kl(d),g&512&&Jl(d,d.return);break;case 3:if(Zr(s,d),g&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Qv(s,l)}catch(z){ve(d,d.return,z)}}break;case 27:l===null&&g&4&&yl(d);case 26:case 5:Zr(s,d),l===null&&g&4&&ou(d),g&512&&Jl(d,d.return);break;case 12:Zr(s,d);break;case 13:Zr(s,d),g&4&&_l(s,d),g&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=bi.bind(null,d),PO(s,d))));break;case 22:if(g=d.memoizedState!==null||zs,!g){l=l!==null&&l.memoizedState!==null||di,S=zs;var C=di;zs=g,(di=l)&&!C?Fs(s,d,(d.subtreeFlags&8772)!==0):Zr(s,d),zs=S,di=C}break;case 30:break;default:Zr(s,d)}}function bn(s){var l=s.alternate;l!==null&&(s.alternate=null,bn(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&qn(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Wt=null,Ln=!1;function $a(s,l,d){for(d=d.child;d!==null;)Zl(s,l,d),d=d.sibling}function Zl(s,l,d){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Be,d)}catch{}switch(d.tag){case 26:di||Ps(d,l),$a(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:di||Ps(d,l);var g=Wt,S=Ln;pu(d.type)&&(Wt=d.stateNode,Ln=!1),$a(s,l,d),Ym(d.stateNode),Wt=g,Ln=S;break;case 5:di||Ps(d,l);case 6:if(g=Wt,S=Ln,Wt=null,$a(s,l,d),Wt=g,Ln=S,Wt!==null)if(Ln)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(d.stateNode)}catch(C){ve(d,l,C)}else try{Wt.removeChild(d.stateNode)}catch(C){ve(d,l,C)}break;case 18:Wt!==null&&(Ln?(s=Wt,AM(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),Qm(s)):AM(Wt,d.stateNode));break;case 4:g=Wt,S=Ln,Wt=d.stateNode.containerInfo,Ln=!0,$a(s,l,d),Wt=g,Ln=S;break;case 0:case 11:case 14:case 15:di||Ca(2,d,l),di||Ca(4,d,l),$a(s,l,d);break;case 1:di||(Ps(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&Eo(d,l,g)),$a(s,l,d);break;case 21:$a(s,l,d);break;case 22:di=(g=di)||d.memoizedState!==null,$a(s,l,d),di=g;break;default:$a(s,l,d)}}function _l(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Qm(s)}catch(d){ve(l,l.return,d)}}function Md(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new Ra),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new Ra),l;default:throw Error(i(435,s.tag))}}function $l(s,l){var d=Md(s);l.forEach(function(g){var S=nn.bind(null,s,g);d.has(g)||(d.add(g),g.then(S,S))})}function vr(s,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var S=d[g],C=s,z=l,j=z;e:for(;j!==null;){switch(j.tag){case 27:if(pu(j.type)){Wt=j.stateNode,Ln=!1;break e}break;case 5:Wt=j.stateNode,Ln=!1;break e;case 3:case 4:Wt=j.stateNode.containerInfo,Ln=!0;break e}j=j.return}if(Wt===null)throw Error(i(160));Zl(C,z,S),Wt=null,Ln=!1,C=S.alternate,C!==null&&(C.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Td(l,s),l=l.sibling}var ys=null;function Td(s,l){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:vr(l,s),Di(s),g&4&&(Ca(3,s,s.return),ql(3,s),Ca(5,s,s.return));break;case 1:vr(l,s),Di(s),g&512&&(di||d===null||Ps(d,d.return)),g&64&&zs&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var S=ys;if(vr(l,s),Di(s),g&512&&(di||d===null||Ps(d,d.return)),g&4){var C=d!==null?d.memoizedState:null;if(g=s.memoizedState,d===null)if(g===null)if(s.stateNode===null){e:{g=s.type,d=s.memoizedProps,S=S.ownerDocument||S;t:switch(g){case"title":C=S.getElementsByTagName("title")[0],(!C||C[ia]||C[wi]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=S.createElement(g),S.head.insertBefore(C,S.querySelector("head > title"))),Qr(C,g,d),C[wi]=s,Ue(C),g=C;break e;case"link":var z=DM("link","href",S).get(g+(d.href||""));if(z){for(var j=0;j<z.length;j++)if(C=z[j],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){z.splice(j,1);break t}}C=S.createElement(g),Qr(C,g,d),S.head.appendChild(C);break;case"meta":if(z=DM("meta","content",S).get(g+(d.content||""))){for(j=0;j<z.length;j++)if(C=z[j],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){z.splice(j,1);break t}}C=S.createElement(g),Qr(C,g,d),S.head.appendChild(C);break;default:throw Error(i(468,g))}C[wi]=s,Ue(C),g=C}s.stateNode=g}else OM(S,s.type,s.stateNode);else s.stateNode=BM(S,g,s.memoizedProps);else C!==g?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,g===null?OM(S,s.type,s.stateNode):BM(S,g,s.memoizedProps)):g===null&&s.stateNode!==null&&Uf(s,s.memoizedProps,d.memoizedProps)}break;case 27:vr(l,s),Di(s),g&512&&(di||d===null||Ps(d,d.return)),d!==null&&g&4&&Uf(s,s.memoizedProps,d.memoizedProps);break;case 5:if(vr(l,s),Di(s),g&512&&(di||d===null||Ps(d,d.return)),s.flags&32){S=s.stateNode;try{Xr(S,"")}catch(ze){ve(s,s.return,ze)}}g&4&&s.stateNode!=null&&(S=s.memoizedProps,Uf(s,S,d!==null?d.memoizedProps:S)),g&1024&&(lu=!0);break;case 6:if(vr(l,s),Di(s),g&4){if(s.stateNode===null)throw Error(i(162));g=s.memoizedProps,d=s.stateNode;try{d.nodeValue=g}catch(ze){ve(s,s.return,ze)}}break;case 3:if(W0=null,S=ys,ys=Y0(l.containerInfo),vr(l,s),ys=S,Di(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Qm(l.containerInfo)}catch(ze){ve(s,s.return,ze)}lu&&(lu=!1,xl(s));break;case 4:g=ys,ys=Y0(s.stateNode.containerInfo),vr(l,s),Di(s),ys=g;break;case 12:vr(l,s),Di(s);break;case 13:vr(l,s),Di(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(ii=Ze()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,$l(s,g)));break;case 22:S=s.memoizedState!==null;var oe=d!==null&&d.memoizedState!==null,Re=zs,Ke=di;if(zs=Re||S,di=Ke||oe,vr(l,s),di=Ke,zs=Re,Di(s),g&8192)e:for(l=s.stateNode,l._visibility=S?l._visibility&-2:l._visibility|1,S&&(d===null||oe||zs||di||wa(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){oe=d=l;try{if(C=oe.stateNode,S)z=C.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{j=oe.stateNode;var tt=oe.memoizedProps.style,Ne=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;j.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(ze){ve(oe,oe.return,ze)}}}else if(l.tag===6){if(d===null){oe=l;try{oe.stateNode.nodeValue=S?"":oe.memoizedProps}catch(ze){ve(oe,oe.return,ze)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,$l(s,d))));break;case 19:vr(l,s),Di(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,$l(s,g)));break;case 30:break;case 21:break;default:vr(l,s),Di(s)}}function Di(s){var l=s.flags;if(l&2){try{for(var d,g=s.return;g!==null;){if(Nf(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var S=d.stateNode,C=ml(s);vl(s,C,S);break;case 5:var z=d.stateNode;d.flags&32&&(Xr(z,""),d.flags&=-33);var j=ml(s);vl(s,j,z);break;case 3:case 4:var oe=d.stateNode.containerInfo,Re=ml(s);gl(s,Re,oe);break;default:throw Error(i(161))}}catch(Ke){ve(s,s.return,Ke)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function xl(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;xl(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Zr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Mo(s,l.alternate,l),l=l.sibling}function wa(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Ca(4,l,l.return),wa(l);break;case 1:Ps(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&Eo(l,l.return,d),wa(l);break;case 27:Ym(l.stateNode);case 26:case 5:Ps(l,l.return),wa(l);break;case 22:l.memoizedState===null&&wa(l);break;case 30:wa(l);break;default:wa(l)}s=s.sibling}}function Fs(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,S=s,C=l,z=C.flags;switch(C.tag){case 0:case 11:case 15:Fs(S,C,d),ql(4,C);break;case 1:if(Fs(S,C,d),g=C,S=g.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Re){ve(g,g.return,Re)}if(g=C,S=g.updateQueue,S!==null){var j=g.stateNode;try{var oe=S.shared.hiddenCallbacks;if(oe!==null)for(S.shared.hiddenCallbacks=null,S=0;S<oe.length;S++)Zc(oe[S],j)}catch(Re){ve(g,g.return,Re)}}d&&z&64&&Kl(C),Jl(C,C.return);break;case 27:yl(C);case 26:case 5:Fs(S,C,d),d&&g===null&&z&4&&ou(C),Jl(C,C.return);break;case 12:Fs(S,C,d);break;case 13:Fs(S,C,d),d&&z&4&&_l(S,C);break;case 22:C.memoizedState===null&&Fs(S,C,d),Jl(C,C.return);break;case 30:break;default:Fs(S,C,d)}l=l.sibling}}function Cd(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Yc(d))}function Rd(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yc(s))}function li(s,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)wd(s,l,d,g),l=l.sibling}function wd(s,l,d,g){var S=l.flags;switch(l.tag){case 0:case 11:case 15:li(s,l,d,g),S&2048&&ql(9,l);break;case 1:li(s,l,d,g);break;case 3:li(s,l,d,g),S&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yc(s)));break;case 12:if(S&2048){li(s,l,d,g),s=l.stateNode;try{var C=l.memoizedProps,z=C.id,j=C.onPostCommit;typeof j=="function"&&j(z,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(oe){ve(l,l.return,oe)}}else li(s,l,d,g);break;case 13:li(s,l,d,g);break;case 23:break;case 22:C=l.stateNode,z=l.alternate,l.memoizedState!==null?C._visibility&2?li(s,l,d,g):_s(s,l):C._visibility&2?li(s,l,d,g):(C._visibility|=2,To(s,l,d,g,(l.subtreeFlags&10256)!==0)),S&2048&&Cd(z,l);break;case 24:li(s,l,d,g),S&2048&&Rd(l.alternate,l);break;default:li(s,l,d,g)}}function To(s,l,d,g,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var C=s,z=l,j=d,oe=g,Re=z.flags;switch(z.tag){case 0:case 11:case 15:To(C,z,j,oe,S),ql(8,z);break;case 23:break;case 22:var Ke=z.stateNode;z.memoizedState!==null?Ke._visibility&2?To(C,z,j,oe,S):_s(C,z):(Ke._visibility|=2,To(C,z,j,oe,S)),S&&Re&2048&&Cd(z.alternate,z);break;case 24:To(C,z,j,oe,S),S&&Re&2048&&Rd(z.alternate,z);break;default:To(C,z,j,oe,S)}l=l.sibling}}function _s(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,g=l,S=g.flags;switch(g.tag){case 22:_s(d,g),S&2048&&Cd(g.alternate,g);break;case 24:_s(d,g),S&2048&&Rd(g.alternate,g);break;default:_s(d,g)}l=l.sibling}}var Ba=8192;function cu(s){if(s.subtreeFlags&Ba)for(s=s.child;s!==null;)F0(s),s=s.sibling}function F0(s){switch(s.tag){case 26:cu(s),s.flags&Ba&&s.memoizedState!==null&&JO(ys,s.memoizedState,s.memoizedProps);break;case 5:cu(s);break;case 3:case 4:var l=ys;ys=Y0(s.stateNode.containerInfo),cu(s),ys=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Ba,Ba=16777216,cu(s),Ba=l):cu(s));break;default:cu(s)}}function H0(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function pi(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];oi=g,Gs(g,s)}H0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hm(s),s=s.sibling}function Hm(s){switch(s.tag){case 0:case 11:case 15:pi(s),s.flags&2048&&Ca(9,s,s.return);break;case 3:pi(s);break;case 12:pi(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Hs(s)):pi(s);break;default:pi(s)}}function Hs(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];oi=g,Gs(g,s)}H0(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Ca(8,l,l.return),Hs(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Hs(l));break;default:Hs(l)}s=s.sibling}}function Gs(s,l){for(;oi!==null;){var d=oi;switch(d.tag){case 0:case 11:case 15:Ca(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Yc(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,oi=g;else e:for(d=s;oi!==null;){g=oi;var S=g.sibling,C=g.return;if(bn(g),g===d){oi=null;break e}if(S!==null){S.return=C,oi=S;break e}oi=C}}}var Oi={getCacheForType:function(s){var l=Bi(Zi),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d}},Gm=typeof WeakMap=="function"?WeakMap:Map,Jn=0,ln=null,Mn=null,Xt=0,vn=0,Ti=null,Da=!1,uu=!1,fu=!1,Qa=0,xi=0,xs=0,Vs=0,Ql=0,es=0,In=0,Zn=null,Kt=null,Cn=!1,ii=0,Lr=1/0,ts=null,Oa=null,or=0,Ir=null,ci=null,Ua=0,Co=0,Lf=null,Na=null,ks=0,ec=null;function Ui(){if((Jn&2)!==0&&Xt!==0)return Xt&-Xt;if(X.T!==null){var s=hn;return s!==0?s:Tb()}return on()}function Bd(){es===0&&(es=(Xt&536870912)===0||kn?pe():536870912);var s=si.current;return s!==null&&(s.flags|=32),es}function $r(s,l,d){(s===ln&&(vn===2||vn===9)||s.cancelPendingCommit!==null)&&(Sl(s,0),bs(s,Xt,es,!1)),Ye(s,d),((Jn&2)===0||s!==ln)&&(s===ln&&((Jn&2)===0&&(Vs|=d),xi===4&&bs(s,Xt,es,!1)),Ml(s))}function hu(s,l,d){if((Jn&6)!==0)throw Error(i(327));var g=!d&&(l&124)===0&&(l&s.expiredLanes)===0||Pe(s,l),S=g?E(s,l):h(s,l,!0),C=g;do{if(S===0){uu&&!g&&bs(s,l,0,!1);break}else{if(d=s.current.alternate,C&&!bl(d)){S=h(s,l,!1),C=!1;continue}if(S===2){if(C=l,s.errorRecoveryDisabledLanes&C)var z=0;else z=s.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){l=z;e:{var j=s;S=Zn;var oe=j.current.memoizedState.isDehydrated;if(oe&&(Sl(j,z).flags|=256),z=h(j,z,!1),z!==2){if(fu&&!oe){j.errorRecoveryDisabledLanes|=C,Vs|=C,S=4;break e}C=Kt,Kt=S,C!==null&&(Kt===null?Kt=C:Kt.push.apply(Kt,C))}S=z}if(C=!1,S!==2)continue}}if(S===1){Sl(s,0),bs(s,l,0,!0);break}e:{switch(g=s,C=S,C){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:bs(g,l,es,!Da);break e;case 2:Kt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(S=ii+300-Ze(),10<S)){if(bs(g,l,es,!Da),de(g,0,!0)!==0)break e;g.timeoutHandle=bM(If.bind(null,g,d,Kt,ts,Cn,l,es,Vs,In,Da,C,2,-0,0),S);break e}If(g,d,Kt,ts,Cn,l,es,Vs,In,Da,C,0,-0,0)}}break}while(!0);Ml(s)}function If(s,l,d,g,S,C,z,j,oe,Re,Ke,tt,Ne,ze){if(s.timeoutHandle=-1,tt=l.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(qm={stylesheets:null,count:0,unsuspend:KO},F0(l),tt=ZO(),tt!==null)){s.cancelPendingCommit=tt(ht.bind(null,s,l,C,d,g,S,z,j,oe,Ke,1,Ne,ze)),bs(s,C,z,!Re);return}ht(s,l,C,d,g,S,z,j,oe)}function bl(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var S=d[g],C=S.getSnapshot;S=S.value;try{if(!aa(C(),S))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bs(s,l,d,g){l&=~Ql,l&=~Vs,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var S=l;0<S;){var C=31-pt(S),z=1<<C;g[C]=-1,S&=~z}d!==0&&gt(s,d,l)}function Xs(){return(Jn&6)===0?(Vm(0),!1):!0}function tc(){if(Mn!==null){if(vn===0)var s=Mn.return;else s=Mn,mo=al=null,Am(s),Fl=null,Rf=0,s=Mn;for(;s!==null;)su(s.alternate,s),s=s.return;Mn=null}}function Sl(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,OO(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),tc(),ln=s,Mn=d=Gi(s.current,null),Xt=l,vn=0,Ti=null,Da=!1,uu=Pe(s,l),fu=!1,In=es=Ql=Vs=xs=xi=0,Kt=Zn=null,Cn=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var S=31-pt(g),C=1<<S;l|=s[S],g&=~C}return Qa=l,ff(),d}function Dd(s,l){dn=null,X.H=Cf,l===bf||l===hs?(l=ym(),vn=3):l===vm?(l=ym(),vn=4):vn=l===z0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ti=l,Mn===null&&(xi=1,Sd(s,Ar(l,s.current)))}function du(){var s=X.H;return X.H=Cf,s===null?Cf:s}function Od(){var s=X.A;return X.A=Oi,s}function u(){xi=4,Da||(Xt&4194048)!==Xt&&si.current!==null||(uu=!0),(xs&134217727)===0&&(Vs&134217727)===0||ln===null||bs(ln,Xt,es,!1)}function h(s,l,d){var g=Jn;Jn|=2;var S=du(),C=Od();(ln!==s||Xt!==l)&&(ts=null,Sl(s,l)),l=!1;var z=xi;e:do try{if(vn!==0&&Mn!==null){var j=Mn,oe=Ti;switch(vn){case 8:tc(),z=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(l=!0);var Re=vn;if(vn=0,Ti=null,ue(s,j,oe,Re),d&&uu){z=0;break e}break;default:Re=vn,vn=0,Ti=null,ue(s,j,oe,Re)}}_(),z=xi;break}catch(Ke){Dd(s,Ke)}while(!0);return l&&s.shellSuspendCounter++,mo=al=null,Jn=g,X.H=S,X.A=C,Mn===null&&(ln=null,Xt=0,ff()),z}function _(){for(;Mn!==null;)O(Mn)}function E(s,l){var d=Jn;Jn|=2;var g=du(),S=Od();ln!==s||Xt!==l?(ts=null,Lr=Ze()+500,Sl(s,l)):uu=Pe(s,l);e:do try{if(vn!==0&&Mn!==null){l=Mn;var C=Ti;t:switch(vn){case 1:vn=0,Ti=null,ue(s,l,C,1);break;case 2:case 9:if(od(C)){vn=0,Ti=null,q(l);break}l=function(){vn!==2&&vn!==9||ln!==s||(vn=7),Ml(s)},C.then(l,l);break e;case 3:vn=7;break e;case 4:vn=5;break e;case 7:od(C)?(vn=0,Ti=null,q(l)):(vn=0,Ti=null,ue(s,l,C,7));break;case 5:var z=null;switch(Mn.tag){case 26:z=Mn.memoizedState;case 5:case 27:var j=Mn;if(!z||UM(z)){vn=0,Ti=null;var oe=j.sibling;if(oe!==null)Mn=oe;else{var Re=j.return;Re!==null?(Mn=Re,Ee(Re)):Mn=null}break t}}vn=0,Ti=null,ue(s,l,C,5);break;case 6:vn=0,Ti=null,ue(s,l,C,6);break;case 8:tc(),xi=6;break e;default:throw Error(i(462))}}R();break}catch(Ke){Dd(s,Ke)}while(!0);return mo=al=null,X.H=g,X.A=S,Jn=d,Mn!==null?0:(ln=null,Xt=0,ff(),xi)}function R(){for(;Mn!==null&&!lt();)O(Mn)}function O(s){var l=jl(s.alternate,s,Qa);s.memoizedProps=s.pendingProps,l===null?Ee(s):Mn=l}function q(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=Ma(d,l,l.pendingProps,l.type,void 0,Xt);break;case 11:l=Ma(d,l,l.pendingProps,l.type.render,l.ref,Xt);break;case 5:Am(l);default:su(d,l),l=Mn=um(l,Qa),l=jl(d,l,Qa)}s.memoizedProps=s.pendingProps,l===null?Ee(s):Mn=l}function ue(s,l,d,g){mo=al=null,Am(l),Fl=null,Rf=0;var S=l.return;try{if(Eb(s,S,l,d,Xt)){xi=1,Sd(s,Ar(d,s.current)),Mn=null;return}}catch(C){if(S!==null)throw Mn=S,C;xi=1,Sd(s,Ar(d,s.current)),Mn=null;return}l.flags&32768?(kn||g===1?s=!0:uu||(Xt&536870912)!==0?s=!1:(Da=s=!0,(g===2||g===9||g===3||g===6)&&(g=si.current,g!==null&&g.tag===13&&(g.flags|=16384))),qe(l,s)):Ee(l)}function Ee(s){var l=s;do{if((l.flags&32768)!==0){qe(l,Da);return}s=l.return;var d=Fm(l.alternate,l,Qa);if(d!==null){Mn=d;return}if(l=l.sibling,l!==null){Mn=l;return}Mn=l=s}while(l!==null);xi===0&&(xi=5)}function qe(s,l){do{var d=au(s.alternate,s);if(d!==null){d.flags&=32767,Mn=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){Mn=s;return}Mn=s=d}while(s!==null);xi=6,Mn=null}function ht(s,l,d,g,S,C,z,j,oe){s.cancelPendingCommit=null;do Al();while(or!==0);if((Jn&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(C=l.lanes|l.childLanes,C|=$h,bt(s,d,C,z,j,oe),s===ln&&(Mn=ln=null,Xt=0),ci=l,Ir=s,Ua=d,Co=C,Lf=S,Na=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Xn(J,function(){return El(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=X.T,X.T=null,S=te.p,te.p=2,z=Jn,Jn|=4;try{sr(s,l,d)}finally{Jn=z,te.p=S,X.T=g}}or=1,Mt(),Ct(),cn()}}function Mt(){if(or===1){or=0;var s=Ir,l=ci,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=X.T,X.T=null;var g=te.p;te.p=2;var S=Jn;Jn|=4;try{Td(l,s);var C=Nb,z=im(s.containerInfo),j=C.focusedElem,oe=C.selectionRange;if(z!==j&&j&&j.ownerDocument&&nm(j.ownerDocument.documentElement,j)){if(oe!==null&&lf(j)){var Re=oe.start,Ke=oe.end;if(Ke===void 0&&(Ke=Re),"selectionStart"in j)j.selectionStart=Re,j.selectionEnd=Math.min(Ke,j.value.length);else{var tt=j.ownerDocument||document,Ne=tt&&tt.defaultView||window;if(Ne.getSelection){var ze=Ne.getSelection(),an=j.textContent.length,$t=Math.min(oe.start,an),gi=oe.end===void 0?$t:Math.min(oe.end,an);!ze.extend&&$t>gi&&(z=gi,gi=$t,$t=z);var Se=tm(j,$t),_e=tm(j,gi);if(Se&&_e&&(ze.rangeCount!==1||ze.anchorNode!==Se.node||ze.anchorOffset!==Se.offset||ze.focusNode!==_e.node||ze.focusOffset!==_e.offset)){var Me=tt.createRange();Me.setStart(Se.node,Se.offset),ze.removeAllRanges(),$t>gi?(ze.addRange(Me),ze.extend(_e.node,_e.offset)):(Me.setEnd(_e.node,_e.offset),ze.addRange(Me))}}}}for(tt=[],ze=j;ze=ze.parentNode;)ze.nodeType===1&&tt.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<tt.length;j++){var $e=tt[j];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}J0=!!Ub,Nb=Ub=null}finally{Jn=S,te.p=g,X.T=d}}s.current=l,or=2}}function Ct(){if(or===2){or=0;var s=Ir,l=ci,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=X.T,X.T=null;var g=te.p;te.p=2;var S=Jn;Jn|=4;try{Mo(s,l.alternate,l)}finally{Jn=S,te.p=g,X.T=d}}or=3}}function cn(){if(or===4||or===3){or=0,et();var s=Ir,l=ci,d=Ua,g=Na;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?or=5:(or=0,ci=Ir=null,La(s,s.pendingLanes));var S=s.pendingLanes;if(S===0&&(Oa=null),Vn(d),l=l.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Be,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=X.T,S=te.p,te.p=2,X.T=null;try{for(var C=s.onRecoverableError,z=0;z<g.length;z++){var j=g[z];C(j.value,{componentStack:j.stack})}}finally{X.T=l,te.p=S}}(Ua&3)!==0&&Al(),Ml(s),S=s.pendingLanes,(d&4194090)!==0&&(S&42)!==0?s===ec?ks++:(ks=0,ec=s):ks=0,Vm(0)}}function La(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Yc(l)))}function Al(s){return Mt(),Ct(),cn(),El()}function El(){if(or!==5)return!1;var s=Ir,l=Co;Co=0;var d=Vn(Ua),g=X.T,S=te.p;try{te.p=32>d?32:d,X.T=null,d=Lf,Lf=null;var C=Ir,z=Ua;if(or=0,ci=Ir=null,Ua=0,(Jn&6)!==0)throw Error(i(331));var j=Jn;if(Jn|=4,Hm(C.current),wd(C,C.current,z,d),Jn=j,Vm(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Be,C)}catch{}return!0}finally{te.p=S,X.T=g,La(s,l)}}function Oe(s,l,d){l=Ar(d,l),l=Ad(s.stateNode,l,2),s=yo(s,l,2),s!==null&&(Ye(s,2),Ml(s))}function ve(s,l,d){if(s.tag===3)Oe(s,s,d);else for(;l!==null;){if(l.tag===3){Oe(l,s,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Oa===null||!Oa.has(g))){s=Ar(d,s),d=P0(2),g=yo(l,d,2),g!==null&&(Ed(d,g,l,s),Ye(g,2),Ml(g));break}}l=l.return}}function Fe(s,l,d){var g=s.pingCache;if(g===null){g=s.pingCache=new Gm;var S=new Set;g.set(l,S)}else S=g.get(l),S===void 0&&(S=new Set,g.set(l,S));S.has(d)||(fu=!0,S.add(d),s=ft.bind(null,s,l,d),l.then(s,s))}function ft(s,l,d){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,ln===s&&(Xt&d)===d&&(xi===4||xi===3&&(Xt&62914560)===Xt&&300>Ze()-ii?(Jn&2)===0&&Sl(s,0):Ql|=d,In===Xt&&(In=0)),Ml(s)}function Ft(s,l){l===0&&(l=Te()),s=ho(s,l),s!==null&&(Ye(s,l),Ml(s))}function bi(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),Ft(s,d)}function nn(s,l){var d=0;switch(s.tag){case 13:var g=s.stateNode,S=s.memoizedState;S!==null&&(d=S.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(l),Ft(s,d)}function Xn(s,l){return Rt(s,l)}var Yi=null,Tn=null,Ys=!1,Ud=!1,Mb=!1,Pf=0;function Ml(s){s!==Tn&&s.next===null&&(Tn===null?Yi=Tn=s:Tn=Tn.next=s),Ud=!0,Ys||(Ys=!0,AO())}function Vm(s,l){if(!Mb&&Ud){Mb=!0;do for(var d=!1,g=Yi;g!==null;){if(s!==0){var S=g.pendingLanes;if(S===0)var C=0;else{var z=g.suspendedLanes,j=g.pingedLanes;C=(1<<31-pt(42|s)+1)-1,C&=S&~(z&~j),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,fM(g,C))}else C=Xt,C=de(g,g===ln?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Pe(g,C)||(d=!0,fM(g,C));g=g.next}while(d);Mb=!1}}function SO(){lM()}function lM(){Ud=Ys=!1;var s=0;Pf!==0&&(DO()&&(s=Pf),Pf=0);for(var l=Ze(),d=null,g=Yi;g!==null;){var S=g.next,C=cM(g,l);C===0?(g.next=null,d===null?Yi=S:d.next=S,S===null&&(Tn=d)):(d=g,(s!==0||(C&3)!==0)&&(Ud=!0)),g=S}Vm(s)}function cM(s,l){for(var d=s.suspendedLanes,g=s.pingedLanes,S=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var z=31-pt(C),j=1<<z,oe=S[z];oe===-1?((j&d)===0||(j&g)!==0)&&(S[z]=st(j,l)):oe<=l&&(s.expiredLanes|=j),C&=~j}if(l=ln,d=Xt,d=de(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,d===0||s===l&&(vn===2||vn===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Z(g),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Pe(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(g!==null&&Z(g),Vn(d)){case 2:case 8:d=Je;break;case 32:d=J;break;case 268435456:d=re;break;default:d=J}return g=uM.bind(null,s),d=Rt(d,g),s.callbackPriority=l,s.callbackNode=d,l}return g!==null&&g!==null&&Z(g),s.callbackPriority=2,s.callbackNode=null,2}function uM(s,l){if(or!==0&&or!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(Al()&&s.callbackNode!==d)return null;var g=Xt;return g=de(s,s===ln?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(hu(s,g,l),cM(s,Ze()),s.callbackNode!=null&&s.callbackNode===d?uM.bind(null,s):null)}function fM(s,l){if(Al())return null;hu(s,l,!0)}function AO(){UO(function(){(Jn&6)!==0?Rt(yt,SO):lM()})}function Tb(){return Pf===0&&(Pf=pe()),Pf}function hM(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qu(""+s)}function dM(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function EO(s,l,d,g,S){if(l==="submit"&&d&&d.stateNode===S){var C=hM((S[Fi]||null).action),z=g.submitter;z&&(l=(l=z[Fi]||null)?hM(l.formAction):z.getAttribute("formAction"),l!==null&&(C=l,z=null));var j=new Oc("action","action",null,g,S);s.push({event:j,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Pf!==0){var oe=z?dM(S,z):new FormData(S);Lm(d,{pending:!0,data:oe,method:S.method,action:C},null,oe)}}else typeof C=="function"&&(j.preventDefault(),oe=z?dM(S,z):new FormData(S),Lm(d,{pending:!0,data:oe,method:S.method,action:C},C,oe))},currentTarget:S}]})}}for(var Cb=0;Cb<uf.length;Cb++){var Rb=uf[Cb],MO=Rb.toLowerCase(),TO=Rb[0].toUpperCase()+Rb.slice(1);dr(MO,"on"+TO)}dr(jr,"onAnimationEnd"),dr(sm,"onAnimationIteration"),dr(oa,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(Kv,"onTransitionRun"),dr(uo,"onTransitionStart"),dr(Hc,"onTransitionCancel"),dr(fo,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(km));function pM(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],S=g.event;g=g.listeners;e:{var C=void 0;if(l)for(var z=g.length-1;0<=z;z--){var j=g[z],oe=j.instance,Re=j.currentTarget;if(j=j.listener,oe!==C&&S.isPropagationStopped())break e;C=j,S.currentTarget=Re;try{C(S)}catch(Ke){Gl(Ke)}S.currentTarget=null,C=oe}else for(z=0;z<g.length;z++){if(j=g[z],oe=j.instance,Re=j.currentTarget,j=j.listener,oe!==C&&S.isPropagationStopped())break e;C=j,S.currentTarget=Re;try{C(S)}catch(Ke){Gl(Ke)}S.currentTarget=null,C=oe}}}}function Bn(s,l){var d=l[Or];d===void 0&&(d=l[Or]=new Set);var g=s+"__bubble";d.has(g)||(mM(l,s,2,!1),d.add(g))}function wb(s,l,d){var g=0;l&&(g|=4),mM(d,s,g,l)}var G0="_reactListening"+Math.random().toString(36).slice(2);function Bb(s){if(!s[G0]){s[G0]=!0,Ge.forEach(function(d){d!=="selectionchange"&&(CO.has(d)||wb(d,!1,s),wb(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[G0]||(l[G0]=!0,wb("selectionchange",!1,l))}}function mM(s,l,d,g){switch(FM(l)){case 2:var S=eU;break;case 8:S=tU;break;default:S=Xb}d=S.bind(null,l,d,s),S=void 0,!Ju||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),g?S!==void 0?s.addEventListener(l,d,{capture:!0,passive:S}):s.addEventListener(l,d,!0):S!==void 0?s.addEventListener(l,d,{passive:S}):s.addEventListener(l,d,!1)}function Db(s,l,d,g,S){var C=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var j=g.stateNode.containerInfo;if(j===S)break;if(z===4)for(z=g.return;z!==null;){var oe=z.tag;if((oe===3||oe===4)&&z.stateNode.containerInfo===S)return;z=z.return}for(;j!==null;){if(z=G(j),z===null)return;if(oe=z.tag,oe===5||oe===6||oe===26||oe===27){g=C=z;continue e}j=j.parentNode}}g=g.return}kp(function(){var Re=C,Ke=Fh(d),tt=[];e:{var Ne=Zh.get(s);if(Ne!==void 0){var ze=Oc,an=s;switch(s){case"keypress":if(Wo(d)===0)break e;case"keydown":case"keyup":ze=qp;break;case"focusin":an="focus",ze=Gh;break;case"focusout":an="blur",ze=Gh;break;case"beforeblur":case"afterblur":ze=Gh;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=Jp;break;case jr:case sm:case oa:ze=Nv;break;case fo:ze=so;break;case"scroll":case"scrollend":ze=Dv;break;case"wheel":ze=pb;break;case"copy":case"cut":case"paste":ze=Iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=kh;break;case"toggle":case"beforetoggle":ze=Ko}var $t=(l&4)!==0,gi=!$t&&(s==="scroll"||s==="scrollend"),Se=$t?Ne!==null?Ne+"Capture":null:Ne;$t=[];for(var _e=Re,Me;_e!==null;){var $e=_e;if(Me=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Me===null||Se===null||($e=wc(_e,Se),$e!=null&&$t.push(Xm(_e,$e,Me))),gi)break;_e=_e.return}0<$t.length&&(Ne=new ze(Ne,an,null,d,Ke),tt.push({event:Ne,listeners:$t}))}}if((l&7)===0){e:{if(Ne=s==="mouseover"||s==="pointerover",ze=s==="mouseout"||s==="pointerout",Ne&&d!==zh&&(an=d.relatedTarget||d.fromElement)&&(G(an)||an[Hi]))break e;if((ze||Ne)&&(Ne=Ke.window===Ke?Ke:(Ne=Ke.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,ze?(an=d.relatedTarget||d.toElement,ze=Re,an=an?G(an):null,an!==null&&(gi=a(an),$t=an.tag,an!==gi||$t!==5&&$t!==27&&$t!==6)&&(an=null)):(ze=null,an=Re),ze!==an)){if($t=jp,$e="onMouseLeave",Se="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&($t=kh,$e="onPointerLeave",Se="onPointerEnter",_e="pointer"),gi=ze==null?Ne:me(ze),Me=an==null?Ne:me(an),Ne=new $t($e,_e+"leave",ze,d,Ke),Ne.target=gi,Ne.relatedTarget=Me,$e=null,G(Ke)===Re&&($t=new $t(Se,_e+"enter",an,d,Ke),$t.target=Me,$t.relatedTarget=gi,$e=$t),gi=$e,ze&&an)t:{for($t=ze,Se=an,_e=0,Me=$t;Me;Me=Nd(Me))_e++;for(Me=0,$e=Se;$e;$e=Nd($e))Me++;for(;0<_e-Me;)$t=Nd($t),_e--;for(;0<Me-_e;)Se=Nd(Se),Me--;for(;_e--;){if($t===Se||Se!==null&&$t===Se.alternate)break t;$t=Nd($t),Se=Nd(Se)}$t=null}else $t=null;ze!==null&&gM(tt,Ne,ze,$t,!1),an!==null&&gi!==null&&gM(tt,gi,an,$t,!0)}}e:{if(Ne=Re?me(Re):window,ze=Ne.nodeName&&Ne.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Ne.type==="file")var Nt=Yh;else if(em(Ne))if(jh)Nt=$o;else{Nt=jv;var Rn=mb}else ze=Ne.nodeName,!ze||ze.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Re&&Ph(Re.elementType)&&(Nt=Yh):Nt=of;if(Nt&&(Nt=Nt(s,Re))){ra(tt,Nt,d,Ke);break e}Rn&&Rn(s,Ne,Re),s==="focusout"&&Re&&Ne.type==="number"&&Re.memoizedProps.value!=null&&_i(Ne,"number",Ne.value)}switch(Rn=Re?me(Re):window,s){case"focusin":(em(Rn)||Rn.contentEditable==="true")&&(lo=Rn,qh=Re,cf=null);break;case"focusout":cf=qh=lo=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,am(tt,d,Ke);break;case"selectionchange":if(rm)break;case"keydown":case"keyup":am(tt,d,Ke)}var Gt;if(ef)e:{switch(s){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else Zo?rf(s,d)&&(Qt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Qt="onCompositionStart");Qt&&(nf&&d.locale!=="ko"&&(Zo||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&Zo&&(Gt=Yp()):(ro=Ke,Xp="value"in ro?ro.value:ro.textContent,Zo=!0)),Rn=V0(Re,Qt),0<Rn.length&&(Qt=new Vh(Qt,s,null,d,Ke),tt.push({event:Qt,listeners:Rn}),Gt?Qt.data=Gt:(Gt=$p(d),Gt!==null&&(Qt.data=Gt)))),(Gt=tf?af(s,d):Qp(s,d))&&(Qt=V0(Re,"onBeforeInput"),0<Qt.length&&(Rn=new Vh("onBeforeInput","beforeinput",null,d,Ke),tt.push({event:Rn,listeners:Qt}),Rn.data=Gt)),EO(tt,s,Re,d,Ke)}pM(tt,l)})}function Xm(s,l,d){return{instance:s,listener:l,currentTarget:d}}function V0(s,l){for(var d=l+"Capture",g=[];s!==null;){var S=s,C=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||C===null||(S=wc(s,d),S!=null&&g.unshift(Xm(s,S,C)),S=wc(s,l),S!=null&&g.push(Xm(s,S,C))),s.tag===3)return g;s=s.return}return[]}function Nd(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gM(s,l,d,g,S){for(var C=l._reactName,z=[];d!==null&&d!==g;){var j=d,oe=j.alternate,Re=j.stateNode;if(j=j.tag,oe!==null&&oe===g)break;j!==5&&j!==26&&j!==27||Re===null||(oe=Re,S?(Re=wc(d,C),Re!=null&&z.unshift(Xm(d,Re,oe))):S||(Re=wc(d,C),Re!=null&&z.push(Xm(d,Re,oe)))),d=d.return}z.length!==0&&s.push({event:l,listeners:z})}var RO=/\r\n?/g,wO=/\u0000|\uFFFD/g;function vM(s){return(typeof s=="string"?s:""+s).replace(RO,`
`).replace(wO,"")}function yM(s,l){return l=vM(l),vM(s)===l}function k0(){}function mi(s,l,d,g,S,C){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Xr(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Xr(s,""+g);break;case"className":ke(s,"class",g);break;case"tabIndex":ke(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ke(s,d,g);break;case"style":Wu(s,g,C);break;case"data":if(l!=="object"){ke(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=qu(""+g),s.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(l!=="input"&&mi(s,l,"name",S.name,S,null),mi(s,l,"formEncType",S.formEncType,S,null),mi(s,l,"formMethod",S.formMethod,S,null),mi(s,l,"formTarget",S.formTarget,S,null)):(mi(s,l,"encType",S.encType,S,null),mi(s,l,"method",S.method,S,null),mi(s,l,"target",S.target,S,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=qu(""+g),s.setAttribute(d,g);break;case"onClick":g!=null&&(s.onclick=k0);break;case"onScroll":g!=null&&Bn("scroll",s);break;case"onScrollEnd":g!=null&&Bn("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}d=qu(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""+g):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":g===!0?s.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,g):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(d,g):s.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(d):s.setAttribute(d,g);break;case"popover":Bn("beforetoggle",s),Bn("toggle",s),Ce(s,"popover",g);break;case"xlinkActuate":We(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":We(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":We(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":We(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":We(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":We(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":We(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":We(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":We(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ce(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Gp.get(d)||d,Ce(s,d,g))}}function Ob(s,l,d,g,S,C){switch(d){case"style":Wu(s,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(S.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof g=="string"?Xr(s,g):(typeof g=="number"||typeof g=="bigint")&&Xr(s,""+g);break;case"onScroll":g!=null&&Bn("scroll",s);break;case"onScrollEnd":g!=null&&Bn("scrollend",s);break;case"onClick":g!=null&&(s.onclick=k0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ct.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(S=d.endsWith("Capture"),l=d.slice(2,S?d.length-7:void 0),C=s[Fi]||null,C=C!=null?C[d]:null,typeof C=="function"&&s.removeEventListener(l,C,S),typeof g=="function")){typeof C!="function"&&C!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,g,S);break e}d in s?s[d]=g:g===!0?s.setAttribute(d,""):Ce(s,d,g)}}}function Qr(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bn("error",s),Bn("load",s);var g=!1,S=!1,C;for(C in d)if(d.hasOwnProperty(C)){var z=d[C];if(z!=null)switch(C){case"src":g=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:mi(s,l,C,z,d,null)}}S&&mi(s,l,"srcSet",d.srcSet,d,null),g&&mi(s,l,"src",d.src,d,null);return;case"input":Bn("invalid",s);var j=C=z=S=null,oe=null,Re=null;for(g in d)if(d.hasOwnProperty(g)){var Ke=d[g];if(Ke!=null)switch(g){case"name":S=Ke;break;case"type":z=Ke;break;case"checked":oe=Ke;break;case"defaultChecked":Re=Ke;break;case"value":C=Ke;break;case"defaultValue":j=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(i(137,l));break;default:mi(s,l,g,Ke,d,null)}}gn(s,C,j,oe,Re,z,S,!1),ti(s);return;case"select":Bn("invalid",s),g=z=C=null;for(S in d)if(d.hasOwnProperty(S)&&(j=d[S],j!=null))switch(S){case"value":C=j;break;case"defaultValue":z=j;break;case"multiple":g=j;default:mi(s,l,S,j,d,null)}l=C,d=z,s.multiple=!!g,l!=null?On(s,!!g,l,!1):d!=null&&On(s,!!g,d,!0);return;case"textarea":Bn("invalid",s),C=S=g=null;for(z in d)if(d.hasOwnProperty(z)&&(j=d[z],j!=null))switch(z){case"value":g=j;break;case"defaultValue":S=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:mi(s,l,z,j,d,null)}hr(s,g,S,C),ti(s);return;case"option":for(oe in d)if(d.hasOwnProperty(oe)&&(g=d[oe],g!=null))switch(oe){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:mi(s,l,oe,g,d,null)}return;case"dialog":Bn("beforetoggle",s),Bn("toggle",s),Bn("cancel",s),Bn("close",s);break;case"iframe":case"object":Bn("load",s);break;case"video":case"audio":for(g=0;g<km.length;g++)Bn(km[g],s);break;case"image":Bn("error",s),Bn("load",s);break;case"details":Bn("toggle",s);break;case"embed":case"source":case"link":Bn("error",s),Bn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in d)if(d.hasOwnProperty(Re)&&(g=d[Re],g!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:mi(s,l,Re,g,d,null)}return;default:if(Ph(l)){for(Ke in d)d.hasOwnProperty(Ke)&&(g=d[Ke],g!==void 0&&Ob(s,l,Ke,g,d,void 0));return}}for(j in d)d.hasOwnProperty(j)&&(g=d[j],g!=null&&mi(s,l,j,g,d,null))}function BO(s,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,C=null,z=null,j=null,oe=null,Re=null,Ke=null;for(ze in d){var tt=d[ze];if(d.hasOwnProperty(ze)&&tt!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":oe=tt;default:g.hasOwnProperty(ze)||mi(s,l,ze,null,g,tt)}}for(var Ne in g){var ze=g[Ne];if(tt=d[Ne],g.hasOwnProperty(Ne)&&(ze!=null||tt!=null))switch(Ne){case"type":C=ze;break;case"name":S=ze;break;case"checked":Re=ze;break;case"defaultChecked":Ke=ze;break;case"value":z=ze;break;case"defaultValue":j=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(i(137,l));break;default:ze!==tt&&mi(s,l,Ne,ze,g,tt)}}xn(s,z,j,oe,Re,Ke,C,S);return;case"select":ze=z=j=Ne=null;for(C in d)if(oe=d[C],d.hasOwnProperty(C)&&oe!=null)switch(C){case"value":break;case"multiple":ze=oe;default:g.hasOwnProperty(C)||mi(s,l,C,null,g,oe)}for(S in g)if(C=g[S],oe=d[S],g.hasOwnProperty(S)&&(C!=null||oe!=null))switch(S){case"value":Ne=C;break;case"defaultValue":j=C;break;case"multiple":z=C;default:C!==oe&&mi(s,l,S,C,g,oe)}l=j,d=z,g=ze,Ne!=null?On(s,!!d,Ne,!1):!!g!=!!d&&(l!=null?On(s,!!d,l,!0):On(s,!!d,d?[]:"",!1));return;case"textarea":ze=Ne=null;for(j in d)if(S=d[j],d.hasOwnProperty(j)&&S!=null&&!g.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:mi(s,l,j,null,g,S)}for(z in g)if(S=g[z],C=d[z],g.hasOwnProperty(z)&&(S!=null||C!=null))switch(z){case"value":Ne=S;break;case"defaultValue":ze=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:S!==C&&mi(s,l,z,S,g,C)}ai(s,Ne,ze);return;case"option":for(var an in d)if(Ne=d[an],d.hasOwnProperty(an)&&Ne!=null&&!g.hasOwnProperty(an))switch(an){case"selected":s.selected=!1;break;default:mi(s,l,an,null,g,Ne)}for(oe in g)if(Ne=g[oe],ze=d[oe],g.hasOwnProperty(oe)&&Ne!==ze&&(Ne!=null||ze!=null))switch(oe){case"selected":s.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:mi(s,l,oe,Ne,g,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in d)Ne=d[$t],d.hasOwnProperty($t)&&Ne!=null&&!g.hasOwnProperty($t)&&mi(s,l,$t,null,g,Ne);for(Re in g)if(Ne=g[Re],ze=d[Re],g.hasOwnProperty(Re)&&Ne!==ze&&(Ne!=null||ze!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,l));break;default:mi(s,l,Re,Ne,g,ze)}return;default:if(Ph(l)){for(var gi in d)Ne=d[gi],d.hasOwnProperty(gi)&&Ne!==void 0&&!g.hasOwnProperty(gi)&&Ob(s,l,gi,void 0,g,Ne);for(Ke in g)Ne=g[Ke],ze=d[Ke],!g.hasOwnProperty(Ke)||Ne===ze||Ne===void 0&&ze===void 0||Ob(s,l,Ke,Ne,g,ze);return}}for(var Se in d)Ne=d[Se],d.hasOwnProperty(Se)&&Ne!=null&&!g.hasOwnProperty(Se)&&mi(s,l,Se,null,g,Ne);for(tt in g)Ne=g[tt],ze=d[tt],!g.hasOwnProperty(tt)||Ne===ze||Ne==null&&ze==null||mi(s,l,tt,Ne,g,ze)}var Ub=null,Nb=null;function X0(s){return s.nodeType===9?s:s.ownerDocument}function _M(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xM(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Lb(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ib=null;function DO(){var s=window.event;return s&&s.type==="popstate"?s===Ib?!1:(Ib=s,!0):(Ib=null,!1)}var bM=typeof setTimeout=="function"?setTimeout:void 0,OO=typeof clearTimeout=="function"?clearTimeout:void 0,SM=typeof Promise=="function"?Promise:void 0,UO=typeof queueMicrotask=="function"?queueMicrotask:typeof SM<"u"?function(s){return SM.resolve(null).then(s).catch(NO)}:bM;function NO(s){setTimeout(function(){throw s})}function pu(s){return s==="head"}function AM(s,l){var d=l,g=0,S=0;do{var C=d.nextSibling;if(s.removeChild(d),C&&C.nodeType===8)if(d=C.data,d==="/$"){if(0<g&&8>g){d=g;var z=s.ownerDocument;if(d&1&&Ym(z.documentElement),d&2&&Ym(z.body),d&4)for(d=z.head,Ym(d),z=d.firstChild;z;){var j=z.nextSibling,oe=z.nodeName;z[ia]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&z.rel.toLowerCase()==="stylesheet"||d.removeChild(z),z=j}}if(S===0){s.removeChild(C),Qm(l);return}S--}else d==="$"||d==="$?"||d==="$!"?S++:g=d.charCodeAt(0)-48;else g=0;d=C}while(d);Qm(l)}function Pb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Pb(d),qn(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function LO(s,l,d,g){for(;s.nodeType===1;){var S=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ia])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==S.rel||s.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var C=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=Ro(s.nextSibling),s===null)break}return null}function IO(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Ro(s.nextSibling),s===null))return null;return s}function zb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function PO(s,l){var d=s.ownerDocument;if(s.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Ro(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Fb=null;function EM(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}function MM(s,l,d){switch(l=X0(d),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ym(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);qn(s)}var js=new Map,TM=new Set;function Y0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var nc=te.d;te.d={f:zO,r:FO,D:HO,C:GO,L:VO,m:kO,X:YO,S:XO,M:jO};function zO(){var s=nc.f(),l=Xs();return s||l}function FO(s){var l=K(s);l!==null&&l.tag===5&&l.type==="form"?E0(l):nc.r(s)}var Ld=typeof document>"u"?null:document;function CM(s,l,d){var g=Ld;if(g&&typeof l=="string"&&l){var S=Yt(l);S='link[rel="'+s+'"][href="'+S+'"]',typeof d=="string"&&(S+='[crossorigin="'+d+'"]'),TM.has(S)||(TM.add(S),s={rel:s,crossOrigin:d,href:l},g.querySelector(S)===null&&(l=g.createElement("link"),Qr(l,"link",s),Ue(l),g.head.appendChild(l)))}}function HO(s){nc.D(s),CM("dns-prefetch",s,null)}function GO(s,l){nc.C(s,l),CM("preconnect",s,l)}function VO(s,l,d){nc.L(s,l,d);var g=Ld;if(g&&s&&l){var S='link[rel="preload"][as="'+Yt(l)+'"]';l==="image"&&d&&d.imageSrcSet?(S+='[imagesrcset="'+Yt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(S+='[imagesizes="'+Yt(d.imageSizes)+'"]')):S+='[href="'+Yt(s)+'"]';var C=S;switch(l){case"style":C=Id(s);break;case"script":C=Pd(s)}js.has(C)||(s=m({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),js.set(C,s),g.querySelector(S)!==null||l==="style"&&g.querySelector(jm(C))||l==="script"&&g.querySelector(Wm(C))||(l=g.createElement("link"),Qr(l,"link",s),Ue(l),g.head.appendChild(l)))}}function kO(s,l){nc.m(s,l);var d=Ld;if(d&&s){var g=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+Yt(g)+'"][href="'+Yt(s)+'"]',C=S;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Pd(s)}if(!js.has(C)&&(s=m({rel:"modulepreload",href:s},l),js.set(C,s),d.querySelector(S)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Wm(C)))return}g=d.createElement("link"),Qr(g,"link",s),Ue(g),d.head.appendChild(g)}}}function XO(s,l,d){nc.S(s,l,d);var g=Ld;if(g&&s){var S=we(g).hoistableStyles,C=Id(s);l=l||"default";var z=S.get(C);if(!z){var j={loading:0,preload:null};if(z=g.querySelector(jm(C)))j.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":l},d),(d=js.get(C))&&Hb(s,d);var oe=z=g.createElement("link");Ue(oe),Qr(oe,"link",s),oe._p=new Promise(function(Re,Ke){oe.onload=Re,oe.onerror=Ke}),oe.addEventListener("load",function(){j.loading|=1}),oe.addEventListener("error",function(){j.loading|=2}),j.loading|=4,j0(z,l,g)}z={type:"stylesheet",instance:z,count:1,state:j},S.set(C,z)}}}function YO(s,l){nc.X(s,l);var d=Ld;if(d&&s){var g=we(d).hoistableScripts,S=Pd(s),C=g.get(S);C||(C=d.querySelector(Wm(S)),C||(s=m({src:s,async:!0},l),(l=js.get(S))&&Gb(s,l),C=d.createElement("script"),Ue(C),Qr(C,"link",s),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(S,C))}}function jO(s,l){nc.M(s,l);var d=Ld;if(d&&s){var g=we(d).hoistableScripts,S=Pd(s),C=g.get(S);C||(C=d.querySelector(Wm(S)),C||(s=m({src:s,async:!0,type:"module"},l),(l=js.get(S))&&Gb(s,l),C=d.createElement("script"),Ue(C),Qr(C,"link",s),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(S,C))}}function RM(s,l,d,g){var S=(S=Le.current)?Y0(S):null;if(!S)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Id(d.href),d=we(S).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Id(d.href);var C=we(S).hoistableStyles,z=C.get(s);if(z||(S=S.ownerDocument||S,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,z),(C=S.querySelector(jm(s)))&&!C._p&&(z.instance=C,z.state.loading=5),js.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},js.set(s,d),C||WO(S,s,d,z.state))),l&&g===null)throw Error(i(528,""));return z}if(l&&g!==null)throw Error(i(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Pd(d),d=we(S).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Id(s){return'href="'+Yt(s)+'"'}function jm(s){return'link[rel="stylesheet"]['+s+"]"}function wM(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function WO(s,l,d,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Qr(l,"link",d),Ue(l),s.head.appendChild(l))}function Pd(s){return'[src="'+Yt(s)+'"]'}function Wm(s){return"script[async]"+s}function BM(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+Yt(d.href)+'"]');if(g)return l.instance=g,Ue(g),g;var S=m({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Ue(g),Qr(g,"style",S),j0(g,d.precedence,s),l.instance=g;case"stylesheet":S=Id(d.href);var C=s.querySelector(jm(S));if(C)return l.state.loading|=4,l.instance=C,Ue(C),C;g=wM(d),(S=js.get(S))&&Hb(g,S),C=(s.ownerDocument||s).createElement("link"),Ue(C);var z=C;return z._p=new Promise(function(j,oe){z.onload=j,z.onerror=oe}),Qr(C,"link",g),l.state.loading|=4,j0(C,d.precedence,s),l.instance=C;case"script":return C=Pd(d.src),(S=s.querySelector(Wm(C)))?(l.instance=S,Ue(S),S):(g=d,(S=js.get(C))&&(g=m({},d),Gb(g,S)),s=s.ownerDocument||s,S=s.createElement("script"),Ue(S),Qr(S,"link",g),s.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,j0(g,d.precedence,s));return l.instance}function j0(s,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=g.length?g[g.length-1]:null,C=S,z=0;z<g.length;z++){var j=g[z];if(j.dataset.precedence===l)C=j;else if(C!==S)break}C?C.parentNode.insertBefore(s,C.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function Hb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Gb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var W0=null;function DM(s,l,d){if(W0===null){var g=new Map,S=W0=new Map;S.set(d,g)}else S=W0,g=S.get(d),g||(g=new Map,S.set(d,g));if(g.has(s))return g;for(g.set(s,null),d=d.getElementsByTagName(s),S=0;S<d.length;S++){var C=d[S];if(!(C[ia]||C[wi]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var z=C.getAttribute(l)||"";z=s+z;var j=g.get(z);j?j.push(C):g.set(z,[C])}}return g}function OM(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function qO(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function UM(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var qm=null;function KO(){}function JO(s,l,d){if(qm===null)throw Error(i(475));var g=qm;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var S=Id(d.href),C=s.querySelector(jm(S));if(C){s=C._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(g.count++,g=q0.bind(g),s.then(g,g)),l.state.loading|=4,l.instance=C,Ue(C);return}C=s.ownerDocument||s,d=wM(d),(S=js.get(S))&&Hb(d,S),C=C.createElement("link"),Ue(C);var z=C;z._p=new Promise(function(j,oe){z.onload=j,z.onerror=oe}),Qr(C,"link",d),l.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=q0.bind(g),s.addEventListener("load",l),s.addEventListener("error",l))}}function ZO(){if(qm===null)throw Error(i(475));var s=qm;return s.stylesheets&&s.count===0&&Vb(s,s.stylesheets),0<s.count?function(l){var d=setTimeout(function(){if(s.stylesheets&&Vb(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d)}}:null}function q0(){if(this.count--,this.count===0){if(this.stylesheets)Vb(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var K0=null;function Vb(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,K0=new Map,l.forEach($O,s),K0=null,q0.call(s))}function $O(s,l){if(!(l.state.loading&4)){var d=K0.get(s);if(d)var g=d.get(null);else{d=new Map,K0.set(s,d);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<S.length;C++){var z=S[C];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(d.set(z.dataset.precedence,z),g=z)}g&&d.set(null,g)}S=l.instance,z=S.getAttribute("data-precedence"),C=d.get(z)||g,C===g&&d.set(null,S),d.set(z,S),this.count++,g=q0.bind(this),S.addEventListener("load",g),S.addEventListener("error",g),C?C.parentNode.insertBefore(S,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),l.state.loading|=4}}var Km={$$typeof:B,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function QO(s,l,d,g,S,C,z,j){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=g,this.onUncaughtError=S,this.onCaughtError=C,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function NM(s,l,d,g,S,C,z,j,oe,Re,Ke,tt){return s=new QO(s,l,d,z,j,oe,Re,tt),l=1,C===!0&&(l|=24),C=la(3,null,null,l),s.current=C,C.stateNode=s,l=rd(),l.refCount++,s.pooledCache=l,l.refCount++,C.memoizedState={element:g,isDehydrated:d,cache:l},_m(C),s}function LM(s){return s?(s=tl,s):tl}function IM(s,l,d,g,S,C){S=LM(S),g.context===null?g.context=S:g.pendingContext=S,g=Us(l),g.payload={element:d},C=C===void 0?null:C,C!==null&&(g.callback=C),d=yo(s,g,l),d!==null&&($r(d,s,l),zl(d,s,l))}function PM(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function kb(s,l){PM(s,l),(s=s.alternate)&&PM(s,l)}function zM(s){if(s.tag===13){var l=ho(s,67108864);l!==null&&$r(l,s,67108864),kb(s,67108864)}}var J0=!0;function eU(s,l,d,g){var S=X.T;X.T=null;var C=te.p;try{te.p=2,Xb(s,l,d,g)}finally{te.p=C,X.T=S}}function tU(s,l,d,g){var S=X.T;X.T=null;var C=te.p;try{te.p=8,Xb(s,l,d,g)}finally{te.p=C,X.T=S}}function Xb(s,l,d,g){if(J0){var S=Yb(g);if(S===null)Db(s,l,g,Z0,d),HM(s,g);else if(iU(S,s,l,d,g))g.stopPropagation();else if(HM(s,g),l&4&&-1<nU.indexOf(s)){for(;S!==null;){var C=K(S);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var z=dt(C.pendingLanes);if(z!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;z;){var oe=1<<31-pt(z);j.entanglements[1]|=oe,z&=~oe}Ml(C),(Jn&6)===0&&(Lr=Ze()+500,Vm(0))}}break;case 13:j=ho(C,2),j!==null&&$r(j,C,2),Xs(),kb(C,2)}if(C=Yb(g),C===null&&Db(s,l,g,Z0,d),C===S)break;S=C}S!==null&&g.stopPropagation()}else Db(s,l,g,null,d)}}function Yb(s){return s=Fh(s),jb(s)}var Z0=null;function jb(s){if(Z0=null,s=G(s),s!==null){var l=a(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=o(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Z0=s,null}function FM(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case yt:return 2;case Je:return 8;case J:case k:return 32;case re:return 268435456;default:return 32}default:return 32}}var Wb=!1,mu=null,gu=null,vu=null,Jm=new Map,Zm=new Map,yu=[],nU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HM(s,l){switch(s){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":Jm.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zm.delete(l.pointerId)}}function $m(s,l,d,g,S,C){return s===null||s.nativeEvent!==C?(s={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:C,targetContainers:[S]},l!==null&&(l=K(l),l!==null&&zM(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function iU(s,l,d,g,S){switch(l){case"focusin":return mu=$m(mu,s,l,d,g,S),!0;case"dragenter":return gu=$m(gu,s,l,d,g,S),!0;case"mouseover":return vu=$m(vu,s,l,d,g,S),!0;case"pointerover":var C=S.pointerId;return Jm.set(C,$m(Jm.get(C)||null,s,l,d,g,S)),!0;case"gotpointercapture":return C=S.pointerId,Zm.set(C,$m(Zm.get(C)||null,s,l,d,g,S)),!0}return!1}function GM(s){var l=G(s.target);if(l!==null){var d=a(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){s.blockedOn=l,Ri(s.priority,function(){if(d.tag===13){var g=Ui();g=mn(g);var S=ho(d,g);S!==null&&$r(S,d,g),kb(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $0(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Yb(s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);zh=g,d.target.dispatchEvent(g),zh=null}else return l=K(d),l!==null&&zM(l),s.blockedOn=d,!1;l.shift()}return!0}function VM(s,l,d){$0(s)&&d.delete(l)}function rU(){Wb=!1,mu!==null&&$0(mu)&&(mu=null),gu!==null&&$0(gu)&&(gu=null),vu!==null&&$0(vu)&&(vu=null),Jm.forEach(VM),Zm.forEach(VM)}function Q0(s,l){s.blockedOn===l&&(s.blockedOn=null,Wb||(Wb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,rU)))}var ey=null;function kM(s){ey!==s&&(ey=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ey===s&&(ey=null);for(var l=0;l<s.length;l+=3){var d=s[l],g=s[l+1],S=s[l+2];if(typeof g!="function"){if(jb(g||d)===null)continue;break}var C=K(d);C!==null&&(s.splice(l,3),l-=3,Lm(C,{pending:!0,data:S,method:d.method,action:g},g,S))}}))}function Qm(s){function l(oe){return Q0(oe,s)}mu!==null&&Q0(mu,s),gu!==null&&Q0(gu,s),vu!==null&&Q0(vu,s),Jm.forEach(l),Zm.forEach(l);for(var d=0;d<yu.length;d++){var g=yu[d];g.blockedOn===s&&(g.blockedOn=null)}for(;0<yu.length&&(d=yu[0],d.blockedOn===null);)GM(d),d.blockedOn===null&&yu.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var S=d[g],C=d[g+1],z=S[Fi]||null;if(typeof C=="function")z||kM(d);else if(z){var j=null;if(C&&C.hasAttribute("formAction")){if(S=C,z=C[Fi]||null)j=z.formAction;else if(jb(S)!==null)continue}else j=z.action;typeof j=="function"?d[g+1]=j:(d.splice(g,3),g-=3),kM(d)}}}function qb(s){this._internalRoot=s}ty.prototype.render=qb.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var d=l.current,g=Ui();IM(d,g,s,l,null,null)},ty.prototype.unmount=qb.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;IM(s.current,2,null,s,null,null),Xs(),l[Hi]=null}};function ty(s){this._internalRoot=s}ty.prototype.unstable_scheduleHydration=function(s){if(s){var l=on();s={blockedOn:null,target:s,priority:l};for(var d=0;d<yu.length&&l!==0&&l<yu[d].priority;d++);yu.splice(d,0,s),d===0&&GM(s)}};var XM=e.version;if(XM!=="19.1.0")throw Error(i(527,XM,"19.1.0"));te.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var aU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Be=ny.inject(aU),ut=ny}catch{}}return tg.createRoot=function(s,l){if(!r(s))throw Error(i(299));var d=!1,g="",S=Bf,C=bd,z=I0,j=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(z=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(j=l.unstable_transitionCallbacks)),l=NM(s,1,!1,null,null,d,g,S,C,z,j,null),s[Hi]=l.current,Bb(s),new qb(l)},tg.hydrateRoot=function(s,l,d){if(!r(s))throw Error(i(299));var g=!1,S="",C=Bf,z=bd,j=I0,oe=null,Re=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(z=d.onCaughtError),d.onRecoverableError!==void 0&&(j=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(oe=d.unstable_transitionCallbacks),d.formState!==void 0&&(Re=d.formState)),l=NM(s,1,!0,l,d??null,g,S,C,z,j,oe,Re),l.context=LM(null),d=l.current,g=Ui(),g=mn(g),S=Us(g),S.callback=null,yo(d,S,g),d=g,l.current.lanes=d,Ye(l,d),Ml(l),s[Hi]=l.current,Bb(s),new ty(l)},tg.version="19.1.0",tg}var eT;function gU(){if(eT)return Zb.exports;eT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zb.exports=mU(),Zb.exports}var t2=gU();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Dh="176",$f={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Qf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},n2=0,z1=1,i2=2,vU=3,r2=0,Sx=1,Mg=2,Uo=3,Ho=0,Rr=1,ga=2,ea=0,hh=1,F1=2,H1=3,G1=4,a2=5,Du=100,s2=101,o2=102,l2=103,c2=104,u2=200,f2=201,h2=202,d2=203,p_=204,m_=205,p2=206,m2=207,g2=208,v2=209,y2=210,_2=211,x2=212,b2=213,S2=214,g_=0,v_=1,y_=2,yh=3,__=4,x_=5,b_=6,S_=7,iv=0,A2=1,E2=2,Po=0,M2=1,T2=2,C2=3,PA=4,R2=5,w2=6,B2=7,V1="attached",D2="detached",Iu=300,Dl=301,Pu=302,gp=303,Gg=304,Bp=306,zu=1e3,cr=1001,vp=1002,tr=1003,Ax=1004,yU=1004,rh=1005,_U=1005,Fn=1006,fp=1007,xU=1007,$s=1008,k1=1008,nr=1009,Ex=1010,Mx=1011,yp=1012,rv=1013,Go=1014,Li=1015,wr=1016,Tx=1017,Cx=1018,_h=1020,zA=35902,FA=1021,HA=1022,ur=1023,_p=1026,xh=1027,av=1028,sv=1029,GA=1030,Rx=1031,bU=1032,wx=1033,Tg=33776,Cg=33777,Rg=33778,wg=33779,A_=35840,E_=35841,M_=35842,T_=35843,C_=36196,R_=37492,w_=37496,B_=37808,D_=37809,O_=37810,U_=37811,N_=37812,L_=37813,I_=37814,P_=37815,z_=37816,F_=37817,H_=37818,G_=37819,V_=37820,k_=37821,Bg=36492,X_=36494,Y_=36495,VA=36283,j_=36284,W_=36285,q_=36286,O2=2200,U2=2201,N2=2202,xp=2300,bp=2301,o_=2302,ah=2400,sh=2401,Vg=2402,Bx=2500,kA=2501,L2=0,XA=1,K_=2,Vu=3200,I2=3201,SU=3202,AU=3203,ku=0,P2=1,Lo="",Wn="srgb",Ms="srgb-linear",kg="linear",ui="srgb",EU=0,eh=7680,MU=7681,TU=7682,CU=7683,RU=34055,wU=34056,BU=5386,DU=512,OU=513,UU=514,NU=515,LU=516,IU=517,PU=518,X1=519,z2=512,F2=513,H2=514,YA=515,G2=516,V2=517,k2=518,X2=519,Xg=35044,zU=35048,FU=35040,HU=35045,GU=35049,VU=35041,kU=35046,XU=35050,YU=35042,jU="100",Y1="300 es",Qs=2e3,Yg=2001,WU={COMPUTE:"compute",RENDER:"render"},qU={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},KU={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let Cs=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e);e.target=null}}};const da=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tT=1234567;const dh=Math.PI/180,Sp=180/Math.PI;function Es(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(da[n&255]+da[n>>8&255]+da[n>>16&255]+da[n>>24&255]+"-"+da[e&255]+da[e>>8&255]+"-"+da[e>>16&15|64]+da[e>>24&255]+"-"+da[t&63|128]+da[t>>8&255]+"-"+da[t>>16&255]+da[t>>24&255]+da[i&255]+da[i>>8&255]+da[i>>16&255]+da[i>>24&255]).toLowerCase()}function pn(n,e,t){return Math.max(e,Math.min(t,n))}function jA(n,e){return(n%e+e)%e}function JU(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function ZU(n,e,t){return n!==e?(t-n)/(e-n):0}function Dg(n,e,t){return(1-t)*n+t*e}function $U(n,e,t,i){return Dg(n,e,1-Math.exp(-t*i))}function QU(n,e=1){return e-Math.abs(jA(n,e*2)-e)}function eN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function tN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function nN(n,e){return n+Math.floor(Math.random()*(e-n+1))}function iN(n,e){return n+Math.random()*(e-n)}function rN(n){return n*(.5-Math.random())}function aN(n){n!==void 0&&(tT=n);let e=tT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sN(n){return n*dh}function oN(n){return n*Sp}function lN(n){return(n&n-1)===0&&n!==0}function cN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function uN(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function fN(n,e,t,i,r){const a=Math.cos,o=Math.sin,c=a(t/2),f=o(t/2),p=a((e+i)/2),m=o((e+i)/2),v=a((e-i)/2),y=o((e-i)/2),x=a((i-e)/2),b=o((i-e)/2);switch(r){case"XYX":n.set(c*m,f*v,f*y,c*p);break;case"YZY":n.set(f*y,c*m,f*v,c*p);break;case"ZXZ":n.set(f*v,f*y,c*m,c*p);break;case"XZX":n.set(c*m,f*b,f*x,c*p);break;case"YXY":n.set(f*x,c*m,f*b,c*p);break;case"ZYZ":n.set(f*b,f*x,c*m,c*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ga(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Y2={DEG2RAD:dh,RAD2DEG:Sp,generateUUID:Es,clamp:pn,euclideanModulo:jA,mapLinear:JU,inverseLerp:ZU,lerp:Dg,damp:$U,pingpong:QU,smoothstep:eN,smootherstep:tN,randInt:nN,randFloat:iN,randFloatSpread:rN,seededRandom:aN,degToRad:sN,radToDeg:oN,isPowerOfTwo:lN,ceilPowerOfTwo:cN,floorPowerOfTwo:uN,setQuaternionFromProperEuler:fN,normalize:Sn,denormalize:Ga};class Ve{constructor(e=0,t=0){Ve.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*i-o*r+e.x,this.y=a*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yn{constructor(e,t,i,r,a,o,c,f,p){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,o,c,f,p)}set(e,t,i,r,a,o,c,f,p){const m=this.elements;return m[0]=e,m[1]=r,m[2]=c,m[3]=t,m[4]=a,m[5]=f,m[6]=i,m[7]=o,m[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,o=i[0],c=i[3],f=i[6],p=i[1],m=i[4],v=i[7],y=i[2],x=i[5],b=i[8],T=r[0],M=r[3],A=r[6],w=r[1],B=r[4],D=r[7],I=r[2],N=r[5],H=r[8];return a[0]=o*T+c*w+f*I,a[3]=o*M+c*B+f*N,a[6]=o*A+c*D+f*H,a[1]=p*T+m*w+v*I,a[4]=p*M+m*B+v*N,a[7]=p*A+m*D+v*H,a[2]=y*T+x*w+b*I,a[5]=y*M+x*B+b*N,a[8]=y*A+x*D+b*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8];return t*o*m-t*c*p-i*a*m+i*c*f+r*a*p-r*o*f}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=m*o-c*p,y=c*f-m*a,x=p*a-o*f,b=t*v+i*y+r*x;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/b;return e[0]=v*T,e[1]=(r*p-m*i)*T,e[2]=(c*i-r*o)*T,e[3]=y*T,e[4]=(m*t-r*f)*T,e[5]=(r*a-c*t)*T,e[6]=x*T,e[7]=(i*f-p*t)*T,e[8]=(o*t-i*a)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,o,c){const f=Math.cos(a),p=Math.sin(a);return this.set(i*f,i*p,-i*(f*o+p*c)+o+e,-r*p,r*f,-r*(-p*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(tS.makeScale(e,t)),this}rotate(e){return this.premultiply(tS.makeRotation(-e)),this}translate(e,t){return this.premultiply(tS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tS=new yn;function j2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const hN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lp(n,e){return new hN[n](e)}function jg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function W2(){const n=jg("canvas");return n.style.display="block",n}const nT={};function l_(n){n in nT||(nT[n]=!0,console.warn(n))}function dN(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}function pN(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function mN(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const iT=new yn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),rT=new yn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function gN(){const n={enabled:!0,workingColorSpace:Ms,spaces:{},convert:function(r,a,o){return this.enabled===!1||a===o||!a||!o||(this.spaces[a].transfer===ui&&(r.r=yc(r.r),r.g=yc(r.g),r.b=yc(r.b)),this.spaces[a].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ui&&(r.r=hp(r.r),r.g=hp(r.g),r.b=hp(r.b))),r},fromWorkingColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},toWorkingColorSpace:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Lo?kg:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,o){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Ms]:{primaries:e,whitePoint:i,transfer:kg,toXYZ:iT,fromXYZ:rT,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Wn},outputColorSpaceConfig:{drawingBufferColorSpace:Wn}},[Wn]:{primaries:e,whitePoint:i,transfer:ui,toXYZ:iT,fromXYZ:rT,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Wn}}}),n}const Pn=gN();function yc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function hp(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zd;class q2{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{zd===void 0&&(zd=jg("canvas")),zd.width=e.width,zd.height=e.height;const r=zd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=zd}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=jg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let o=0;o<a.length;o++)a[o]=yc(a[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(yc(t[i]/255)*255):t[i]=yc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vN=0;class Ou{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vN++}),this.uuid=Es(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let o=0,c=r.length;o<c;o++)r[o].isDataTexture?a.push(nS(r[o].image)):a.push(nS(r[o]))}else a=nS(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function nS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?q2.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yN=0;class ei extends Cs{constructor(e=ei.DEFAULT_IMAGE,t=ei.DEFAULT_MAPPING,i=cr,r=cr,a=Fn,o=$s,c=ur,f=nr,p=ei.DEFAULT_ANISOTROPY,m=Lo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yN++}),this.uuid=Es(),this.name="",this.source=new Ou(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=o,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=f,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Iu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zu:e.x=e.x-Math.floor(e.x);break;case cr:e.x=e.x<0?0:1;break;case vp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zu:e.y=e.y-Math.floor(e.y);break;case cr:e.y=e.y<0?0:1;break;case vp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ei.DEFAULT_IMAGE=null;ei.DEFAULT_MAPPING=Iu;ei.DEFAULT_ANISOTROPY=1;class zn{constructor(e=0,t=0,i=0,r=1){zn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*a,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*a,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*a,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const f=e.elements,p=f[0],m=f[4],v=f[8],y=f[1],x=f[5],b=f[9],T=f[2],M=f[6],A=f[10];if(Math.abs(m-y)<.01&&Math.abs(v-T)<.01&&Math.abs(b-M)<.01){if(Math.abs(m+y)<.1&&Math.abs(v+T)<.1&&Math.abs(b+M)<.1&&Math.abs(p+x+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const B=(p+1)/2,D=(x+1)/2,I=(A+1)/2,N=(m+y)/4,H=(v+T)/4,P=(b+M)/4;return B>D&&B>I?B<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(B),r=N/i,a=H/i):D>I?D<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(D),i=N/r,a=P/r):I<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(I),i=H/a,r=P/a),this.set(i,r,a,t),this}let w=Math.sqrt((M-b)*(M-b)+(v-T)*(v-T)+(y-m)*(y-m));return Math.abs(w)<.001&&(w=1),this.x=(M-b)/w,this.y=(v-T)/w,this.z=(y-m)/w,this.w=Math.acos((p+x+A-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this.w=pn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this.w=pn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dx extends Cs{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new zn(0,0,e,t),this.scissorTest=!1,this.viewport=new zn(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const a=new ei(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let c=0;c<o;c++)this.textures[c]=a.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Ou(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ii extends Dx{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class ov extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=tr,this.minFilter=tr,this.wrapR=cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _N extends Ii{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new ov(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ox extends ei{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=tr,this.minFilter=tr,this.wrapR=cr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xN extends Ii{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Ox(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Gr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,o,c){let f=i[r+0],p=i[r+1],m=i[r+2],v=i[r+3];const y=a[o+0],x=a[o+1],b=a[o+2],T=a[o+3];if(c===0){e[t+0]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v;return}if(c===1){e[t+0]=y,e[t+1]=x,e[t+2]=b,e[t+3]=T;return}if(v!==T||f!==y||p!==x||m!==b){let M=1-c;const A=f*y+p*x+m*b+v*T,w=A>=0?1:-1,B=1-A*A;if(B>Number.EPSILON){const I=Math.sqrt(B),N=Math.atan2(I,A*w);M=Math.sin(M*N)/I,c=Math.sin(c*N)/I}const D=c*w;if(f=f*M+y*D,p=p*M+x*D,m=m*M+b*D,v=v*M+T*D,M===1-c){const I=1/Math.sqrt(f*f+p*p+m*m+v*v);f*=I,p*=I,m*=I,v*=I}}e[t]=f,e[t+1]=p,e[t+2]=m,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,r,a,o){const c=i[r],f=i[r+1],p=i[r+2],m=i[r+3],v=a[o],y=a[o+1],x=a[o+2],b=a[o+3];return e[t]=c*b+m*v+f*x-p*y,e[t+1]=f*b+m*y+p*v-c*x,e[t+2]=p*b+m*x+c*y-f*v,e[t+3]=m*b-c*v-f*y-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,o=e._order,c=Math.cos,f=Math.sin,p=c(i/2),m=c(r/2),v=c(a/2),y=f(i/2),x=f(r/2),b=f(a/2);switch(o){case"XYZ":this._x=y*m*v+p*x*b,this._y=p*x*v-y*m*b,this._z=p*m*b+y*x*v,this._w=p*m*v-y*x*b;break;case"YXZ":this._x=y*m*v+p*x*b,this._y=p*x*v-y*m*b,this._z=p*m*b-y*x*v,this._w=p*m*v+y*x*b;break;case"ZXY":this._x=y*m*v-p*x*b,this._y=p*x*v+y*m*b,this._z=p*m*b+y*x*v,this._w=p*m*v-y*x*b;break;case"ZYX":this._x=y*m*v-p*x*b,this._y=p*x*v+y*m*b,this._z=p*m*b-y*x*v,this._w=p*m*v+y*x*b;break;case"YZX":this._x=y*m*v+p*x*b,this._y=p*x*v+y*m*b,this._z=p*m*b-y*x*v,this._w=p*m*v-y*x*b;break;case"XZY":this._x=y*m*v-p*x*b,this._y=p*x*v-y*m*b,this._z=p*m*b+y*x*v,this._w=p*m*v+y*x*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],o=t[1],c=t[5],f=t[9],p=t[2],m=t[6],v=t[10],y=i+c+v;if(y>0){const x=.5/Math.sqrt(y+1);this._w=.25/x,this._x=(m-f)*x,this._y=(a-p)*x,this._z=(o-r)*x}else if(i>c&&i>v){const x=2*Math.sqrt(1+i-c-v);this._w=(m-f)/x,this._x=.25*x,this._y=(r+o)/x,this._z=(a+p)/x}else if(c>v){const x=2*Math.sqrt(1+c-i-v);this._w=(a-p)/x,this._x=(r+o)/x,this._y=.25*x,this._z=(f+m)/x}else{const x=2*Math.sqrt(1+v-i-c);this._w=(o-r)/x,this._x=(a+p)/x,this._y=(f+m)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,o=e._w,c=t._x,f=t._y,p=t._z,m=t._w;return this._x=i*m+o*c+r*p-a*f,this._y=r*m+o*f+a*c-i*p,this._z=a*m+o*p+i*f-r*c,this._w=o*m-i*c-r*f-a*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,o=this._w;let c=o*e._w+i*e._x+r*e._y+a*e._z;if(c<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,c=-c):this.copy(e),c>=1)return this._w=o,this._x=i,this._y=r,this._z=a,this;const f=1-c*c;if(f<=Number.EPSILON){const x=1-t;return this._w=x*o+t*this._w,this._x=x*i+t*this._x,this._y=x*r+t*this._y,this._z=x*a+t*this._z,this.normalize(),this}const p=Math.sqrt(f),m=Math.atan2(p,c),v=Math.sin((1-t)*m)/p,y=Math.sin(t*m)/p;return this._w=o*v+this._w*y,this._x=i*v+this._x*y,this._y=r*v+this._y*y,this._z=a*v+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ${constructor(e=0,t=0,i=0){$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(aT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,o=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*o,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*o,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,o=e.y,c=e.z,f=e.w,p=2*(o*r-c*i),m=2*(c*t-a*r),v=2*(a*i-o*t);return this.x=t+f*p+o*v-c*m,this.y=i+f*m+c*p-a*v,this.z=r+f*v+a*m-o*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(pn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,o=t.x,c=t.y,f=t.z;return this.x=r*f-a*c,this.y=a*o-i*f,this.z=i*c-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return iS.copy(this).projectOnVector(e),this.sub(iS)}reflect(e){return this.sub(iS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(pn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iS=new $,aT=new Gr;class Vr{constructor(e=new $(1/0,1/0,1/0),t=new $(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(wo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(wo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=wo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=a.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,wo):wo.fromBufferAttribute(a,o),wo.applyMatrix4(e.matrixWorld),this.expandByPoint(wo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),iy.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),iy.copy(i.boundingBox)),iy.applyMatrix4(e.matrixWorld),this.union(iy)}const r=e.children;for(let a=0,o=r.length;a<o;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,wo),wo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ng),ry.subVectors(this.max,ng),Fd.subVectors(e.a,ng),Hd.subVectors(e.b,ng),Gd.subVectors(e.c,ng),xu.subVectors(Hd,Fd),bu.subVectors(Gd,Hd),zf.subVectors(Fd,Gd);let t=[0,-xu.z,xu.y,0,-bu.z,bu.y,0,-zf.z,zf.y,xu.z,0,-xu.x,bu.z,0,-bu.x,zf.z,0,-zf.x,-xu.y,xu.x,0,-bu.y,bu.x,0,-zf.y,zf.x,0];return!rS(t,Fd,Hd,Gd,ry)||(t=[1,0,0,0,1,0,0,0,1],!rS(t,Fd,Hd,Gd,ry))?!1:(ay.crossVectors(xu,bu),t=[ay.x,ay.y,ay.z],rS(t,Fd,Hd,Gd,ry))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(wo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ic[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ic[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ic[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ic[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ic[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ic[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ic[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ic[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ic),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ic=[new $,new $,new $,new $,new $,new $,new $,new $],wo=new $,iy=new Vr,Fd=new $,Hd=new $,Gd=new $,xu=new $,bu=new $,zf=new $,ng=new $,ry=new $,ay=new $,Ff=new $;function rS(n,e,t,i,r){for(let a=0,o=n.length-3;a<=o;a+=3){Ff.fromArray(n,a);const c=r.x*Math.abs(Ff.x)+r.y*Math.abs(Ff.y)+r.z*Math.abs(Ff.z),f=e.dot(Ff),p=t.dot(Ff),m=i.dot(Ff);if(Math.max(-Math.max(f,p,m),Math.min(f,p,m))>c)return!1}return!0}const bN=new Vr,ig=new $,aS=new $;class kr{constructor(e=new $,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):bN.setFromPoints(e).getCenter(i);let r=0;for(let a=0,o=e.length;a<o;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ig.subVectors(e,this.center);const t=ig.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ig,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(aS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ig.copy(e.center).add(aS)),this.expandByPoint(ig.copy(e.center).sub(aS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const rc=new $,sS=new $,sy=new $,Su=new $,oS=new $,oy=new $,lS=new $;class Oh{constructor(e=new $,t=new $(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rc.copy(this.origin).addScaledVector(this.direction,t),rc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){sS.copy(e).add(t).multiplyScalar(.5),sy.copy(t).sub(e).normalize(),Su.copy(this.origin).sub(sS);const a=e.distanceTo(t)*.5,o=-this.direction.dot(sy),c=Su.dot(this.direction),f=-Su.dot(sy),p=Su.lengthSq(),m=Math.abs(1-o*o);let v,y,x,b;if(m>0)if(v=o*f-c,y=o*c-f,b=a*m,v>=0)if(y>=-b)if(y<=b){const T=1/m;v*=T,y*=T,x=v*(v+o*y+2*c)+y*(o*v+y+2*f)+p}else y=a,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;else y=-a,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;else y<=-b?(v=Math.max(0,-(-o*a+c)),y=v>0?-a:Math.min(Math.max(-a,-f),a),x=-v*v+y*(y+2*f)+p):y<=b?(v=0,y=Math.min(Math.max(-a,-f),a),x=y*(y+2*f)+p):(v=Math.max(0,-(o*a+c)),y=v>0?a:Math.min(Math.max(-a,-f),a),x=-v*v+y*(y+2*f)+p);else y=o>0?-a:a,v=Math.max(0,-(o*y+c)),x=-v*v+y*(y+2*f)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(sS).addScaledVector(sy,y),x}intersectSphere(e,t){rc.subVectors(e.center,this.origin);const i=rc.dot(this.direction),r=rc.dot(rc)-i*i,a=e.radius*e.radius;if(r>a)return null;const o=Math.sqrt(a-r),c=i-o,f=i+o;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,o,c,f;const p=1/this.direction.x,m=1/this.direction.y,v=1/this.direction.z,y=this.origin;return p>=0?(i=(e.min.x-y.x)*p,r=(e.max.x-y.x)*p):(i=(e.max.x-y.x)*p,r=(e.min.x-y.x)*p),m>=0?(a=(e.min.y-y.y)*m,o=(e.max.y-y.y)*m):(a=(e.max.y-y.y)*m,o=(e.min.y-y.y)*m),i>o||a>r||((a>i||isNaN(i))&&(i=a),(o<r||isNaN(r))&&(r=o),v>=0?(c=(e.min.z-y.z)*v,f=(e.max.z-y.z)*v):(c=(e.max.z-y.z)*v,f=(e.min.z-y.z)*v),i>f||c>r)||((c>i||i!==i)&&(i=c),(f<r||r!==r)&&(r=f),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,rc)!==null}intersectTriangle(e,t,i,r,a){oS.subVectors(t,e),oy.subVectors(i,e),lS.crossVectors(oS,oy);let o=this.direction.dot(lS),c;if(o>0){if(r)return null;c=1}else if(o<0)c=-1,o=-o;else return null;Su.subVectors(this.origin,e);const f=c*this.direction.dot(oy.crossVectors(Su,oy));if(f<0)return null;const p=c*this.direction.dot(oS.cross(Su));if(p<0||f+p>o)return null;const m=-c*Su.dot(lS);return m<0?null:this.at(m/o,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qt{constructor(e,t,i,r,a,o,c,f,p,m,v,y,x,b,T,M){qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,o,c,f,p,m,v,y,x,b,T,M)}set(e,t,i,r,a,o,c,f,p,m,v,y,x,b,T,M){const A=this.elements;return A[0]=e,A[4]=t,A[8]=i,A[12]=r,A[1]=a,A[5]=o,A[9]=c,A[13]=f,A[2]=p,A[6]=m,A[10]=v,A[14]=y,A[3]=x,A[7]=b,A[11]=T,A[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Vd.setFromMatrixColumn(e,0).length(),a=1/Vd.setFromMatrixColumn(e,1).length(),o=1/Vd.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,o=Math.cos(i),c=Math.sin(i),f=Math.cos(r),p=Math.sin(r),m=Math.cos(a),v=Math.sin(a);if(e.order==="XYZ"){const y=o*m,x=o*v,b=c*m,T=c*v;t[0]=f*m,t[4]=-f*v,t[8]=p,t[1]=x+b*p,t[5]=y-T*p,t[9]=-c*f,t[2]=T-y*p,t[6]=b+x*p,t[10]=o*f}else if(e.order==="YXZ"){const y=f*m,x=f*v,b=p*m,T=p*v;t[0]=y+T*c,t[4]=b*c-x,t[8]=o*p,t[1]=o*v,t[5]=o*m,t[9]=-c,t[2]=x*c-b,t[6]=T+y*c,t[10]=o*f}else if(e.order==="ZXY"){const y=f*m,x=f*v,b=p*m,T=p*v;t[0]=y-T*c,t[4]=-o*v,t[8]=b+x*c,t[1]=x+b*c,t[5]=o*m,t[9]=T-y*c,t[2]=-o*p,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const y=o*m,x=o*v,b=c*m,T=c*v;t[0]=f*m,t[4]=b*p-x,t[8]=y*p+T,t[1]=f*v,t[5]=T*p+y,t[9]=x*p-b,t[2]=-p,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const y=o*f,x=o*p,b=c*f,T=c*p;t[0]=f*m,t[4]=T-y*v,t[8]=b*v+x,t[1]=v,t[5]=o*m,t[9]=-c*m,t[2]=-p*m,t[6]=x*v+b,t[10]=y-T*v}else if(e.order==="XZY"){const y=o*f,x=o*p,b=c*f,T=c*p;t[0]=f*m,t[4]=-v,t[8]=p*m,t[1]=y*v+T,t[5]=o*m,t[9]=x*v-b,t[2]=b*v-x,t[6]=c*m,t[10]=T*v+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(SN,e,AN)}lookAt(e,t,i){const r=this.elements;return Ss.subVectors(e,t),Ss.lengthSq()===0&&(Ss.z=1),Ss.normalize(),Au.crossVectors(i,Ss),Au.lengthSq()===0&&(Math.abs(i.z)===1?Ss.x+=1e-4:Ss.z+=1e-4,Ss.normalize(),Au.crossVectors(i,Ss)),Au.normalize(),ly.crossVectors(Ss,Au),r[0]=Au.x,r[4]=ly.x,r[8]=Ss.x,r[1]=Au.y,r[5]=ly.y,r[9]=Ss.y,r[2]=Au.z,r[6]=ly.z,r[10]=Ss.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,o=i[0],c=i[4],f=i[8],p=i[12],m=i[1],v=i[5],y=i[9],x=i[13],b=i[2],T=i[6],M=i[10],A=i[14],w=i[3],B=i[7],D=i[11],I=i[15],N=r[0],H=r[4],P=r[8],L=r[12],U=r[1],Y=r[5],ie=r[9],Q=r[13],ae=r[2],he=r[6],X=r[10],te=r[14],ne=r[3],be=r[7],W=r[11],se=r[15];return a[0]=o*N+c*U+f*ae+p*ne,a[4]=o*H+c*Y+f*he+p*be,a[8]=o*P+c*ie+f*X+p*W,a[12]=o*L+c*Q+f*te+p*se,a[1]=m*N+v*U+y*ae+x*ne,a[5]=m*H+v*Y+y*he+x*be,a[9]=m*P+v*ie+y*X+x*W,a[13]=m*L+v*Q+y*te+x*se,a[2]=b*N+T*U+M*ae+A*ne,a[6]=b*H+T*Y+M*he+A*be,a[10]=b*P+T*ie+M*X+A*W,a[14]=b*L+T*Q+M*te+A*se,a[3]=w*N+B*U+D*ae+I*ne,a[7]=w*H+B*Y+D*he+I*be,a[11]=w*P+B*ie+D*X+I*W,a[15]=w*L+B*Q+D*te+I*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],o=e[1],c=e[5],f=e[9],p=e[13],m=e[2],v=e[6],y=e[10],x=e[14],b=e[3],T=e[7],M=e[11],A=e[15];return b*(+a*f*v-r*p*v-a*c*y+i*p*y+r*c*x-i*f*x)+T*(+t*f*x-t*p*y+a*o*y-r*o*x+r*p*m-a*f*m)+M*(+t*p*v-t*c*x-a*o*v+i*o*x+a*c*m-i*p*m)+A*(-r*c*m-t*f*v+t*c*y+r*o*v-i*o*y+i*f*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],o=e[4],c=e[5],f=e[6],p=e[7],m=e[8],v=e[9],y=e[10],x=e[11],b=e[12],T=e[13],M=e[14],A=e[15],w=v*M*p-T*y*p+T*f*x-c*M*x-v*f*A+c*y*A,B=b*y*p-m*M*p-b*f*x+o*M*x+m*f*A-o*y*A,D=m*T*p-b*v*p+b*c*x-o*T*x-m*c*A+o*v*A,I=b*v*f-m*T*f-b*c*y+o*T*y+m*c*M-o*v*M,N=t*w+i*B+r*D+a*I;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/N;return e[0]=w*H,e[1]=(T*y*a-v*M*a-T*r*x+i*M*x+v*r*A-i*y*A)*H,e[2]=(c*M*a-T*f*a+T*r*p-i*M*p-c*r*A+i*f*A)*H,e[3]=(v*f*a-c*y*a-v*r*p+i*y*p+c*r*x-i*f*x)*H,e[4]=B*H,e[5]=(m*M*a-b*y*a+b*r*x-t*M*x-m*r*A+t*y*A)*H,e[6]=(b*f*a-o*M*a-b*r*p+t*M*p+o*r*A-t*f*A)*H,e[7]=(o*y*a-m*f*a+m*r*p-t*y*p-o*r*x+t*f*x)*H,e[8]=D*H,e[9]=(b*v*a-m*T*a-b*i*x+t*T*x+m*i*A-t*v*A)*H,e[10]=(o*T*a-b*c*a+b*i*p-t*T*p-o*i*A+t*c*A)*H,e[11]=(m*c*a-o*v*a-m*i*p+t*v*p+o*i*x-t*c*x)*H,e[12]=I*H,e[13]=(m*T*r-b*v*r+b*i*y-t*T*y-m*i*M+t*v*M)*H,e[14]=(b*c*r-o*T*r-b*i*f+t*T*f+o*i*M-t*c*M)*H,e[15]=(o*v*r-m*c*r+m*i*f-t*v*f-o*i*y+t*c*y)*H,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,o=e.x,c=e.y,f=e.z,p=a*o,m=a*c;return this.set(p*o+i,p*c-r*f,p*f+r*c,0,p*c+r*f,m*c+i,m*f-r*o,0,p*f-r*c,m*f+r*o,a*f*f+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,o){return this.set(1,i,a,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,o=t._y,c=t._z,f=t._w,p=a+a,m=o+o,v=c+c,y=a*p,x=a*m,b=a*v,T=o*m,M=o*v,A=c*v,w=f*p,B=f*m,D=f*v,I=i.x,N=i.y,H=i.z;return r[0]=(1-(T+A))*I,r[1]=(x+D)*I,r[2]=(b-B)*I,r[3]=0,r[4]=(x-D)*N,r[5]=(1-(y+A))*N,r[6]=(M+w)*N,r[7]=0,r[8]=(b+B)*H,r[9]=(M-w)*H,r[10]=(1-(y+T))*H,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let a=Vd.set(r[0],r[1],r[2]).length();const o=Vd.set(r[4],r[5],r[6]).length(),c=Vd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Bo.copy(this);const p=1/a,m=1/o,v=1/c;return Bo.elements[0]*=p,Bo.elements[1]*=p,Bo.elements[2]*=p,Bo.elements[4]*=m,Bo.elements[5]*=m,Bo.elements[6]*=m,Bo.elements[8]*=v,Bo.elements[9]*=v,Bo.elements[10]*=v,t.setFromRotationMatrix(Bo),i.x=a,i.y=o,i.z=c,this}makePerspective(e,t,i,r,a,o,c=Qs){const f=this.elements,p=2*a/(t-e),m=2*a/(i-r),v=(t+e)/(t-e),y=(i+r)/(i-r);let x,b;if(c===Qs)x=-(o+a)/(o-a),b=-2*o*a/(o-a);else if(c===Yg)x=-o/(o-a),b=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return f[0]=p,f[4]=0,f[8]=v,f[12]=0,f[1]=0,f[5]=m,f[9]=y,f[13]=0,f[2]=0,f[6]=0,f[10]=x,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,i,r,a,o,c=Qs){const f=this.elements,p=1/(t-e),m=1/(i-r),v=1/(o-a),y=(t+e)*p,x=(i+r)*m;let b,T;if(c===Qs)b=(o+a)*v,T=-2*v;else if(c===Yg)b=a*v,T=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-y,f[1]=0,f[5]=2*m,f[9]=0,f[13]=-x,f[2]=0,f[6]=0,f[10]=T,f[14]=-b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Vd=new $,Bo=new qt,SN=new $(0,0,0),AN=new $(1,1,1),Au=new $,ly=new $,Ss=new $,sT=new qt,oT=new Gr;class Ts{constructor(e=0,t=0,i=0,r=Ts.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],o=r[4],c=r[8],f=r[1],p=r[5],m=r[9],v=r[2],y=r[6],x=r[10];switch(t){case"XYZ":this._y=Math.asin(pn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,x),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(y,p),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(f,p)):(this._y=Math.atan2(-v,a),this._z=0);break;case"ZXY":this._x=Math.asin(pn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-o,p)):(this._y=0,this._z=Math.atan2(f,a));break;case"ZYX":this._y=Math.asin(-pn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,x),this._z=Math.atan2(f,a)):(this._x=0,this._z=Math.atan2(-o,p));break;case"YZX":this._z=Math.asin(pn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-v,a)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,p),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-m,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return sT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(sT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oT.setFromEuler(this),this.setFromQuaternion(oT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ts.DEFAULT_ORDER="XYZ";class Ap{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let EN=0;const lT=new $,kd=new Gr,ac=new qt,cy=new $,rg=new $,MN=new $,TN=new Gr,cT=new $(1,0,0),uT=new $(0,1,0),fT=new $(0,0,1),hT={type:"added"},CN={type:"removed"},Xd={type:"childadded",child:null},cS={type:"childremoved",child:null};class Hn extends Cs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EN++}),this.uuid=Es(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DEFAULT_UP.clone();const e=new $,t=new Ts,i=new Gr,r=new $(1,1,1);function a(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qt},normalMatrix:{value:new yn}}),this.matrix=new qt,this.matrixWorld=new qt,this.matrixAutoUpdate=Hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Ap,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kd.setFromAxisAngle(e,t),this.quaternion.multiply(kd),this}rotateOnWorldAxis(e,t){return kd.setFromAxisAngle(e,t),this.quaternion.premultiply(kd),this}rotateX(e){return this.rotateOnAxis(cT,e)}rotateY(e){return this.rotateOnAxis(uT,e)}rotateZ(e){return this.rotateOnAxis(fT,e)}translateOnAxis(e,t){return lT.copy(e).applyQuaternion(this.quaternion),this.position.add(lT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cT,e)}translateY(e){return this.translateOnAxis(uT,e)}translateZ(e){return this.translateOnAxis(fT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ac.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?cy.copy(e):cy.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),rg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ac.lookAt(rg,cy,this.up):ac.lookAt(cy,rg,this.up),this.quaternion.setFromRotationMatrix(ac),r&&(ac.extractRotation(r.matrixWorld),kd.setFromRotationMatrix(ac),this.quaternion.premultiply(kd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(hT),Xd.child=e,this.dispatchEvent(Xd),Xd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(CN),cS.child=e,this.dispatchEvent(cS),cS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ac.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ac.multiply(e.parent.matrixWorld)),e.applyMatrix4(ac),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(hT),Xd.child=e,this.dispatchEvent(Xd),Xd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rg,e,MN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rg,TN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,o=r.length;a<o;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?{min:c.boundingBox.min.toArray(),max:c.boundingBox.max.toArray()}:void 0,boundingSphere:c.boundingSphere?{radius:c.boundingSphere.radius,center:c.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(c=>({...c})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function a(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let p=0,m=f.length;p<m;p++){const v=f[p];a(e.shapes,v)}else a(e.shapes,f)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,p=this.material.length;f<p;f++)c.push(a(e.materials,this.material[f]));r.material=c}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let c=0;c<this.children.length;c++)r.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];r.animations.push(a(e.animations,f))}}if(t){const c=o(e.geometries),f=o(e.materials),p=o(e.textures),m=o(e.images),v=o(e.shapes),y=o(e.skeletons),x=o(e.animations),b=o(e.nodes);c.length>0&&(i.geometries=c),f.length>0&&(i.materials=f),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),v.length>0&&(i.shapes=v),y.length>0&&(i.skeletons=y),x.length>0&&(i.animations=x),b.length>0&&(i.nodes=b)}return i.object=r,i;function o(c){const f=[];for(const p in c){const m=c[p];delete m.metadata,f.push(m)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Hn.DEFAULT_UP=new $(0,1,0);Hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Do=new $,sc=new $,uS=new $,oc=new $,Yd=new $,jd=new $,dT=new $,fS=new $,hS=new $,dS=new $,pS=new zn,mS=new zn,gS=new zn;class as{constructor(e=new $,t=new $,i=new $){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Do.subVectors(e,t),r.cross(Do);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Do.subVectors(r,t),sc.subVectors(i,t),uS.subVectors(e,t);const o=Do.dot(Do),c=Do.dot(sc),f=Do.dot(uS),p=sc.dot(sc),m=sc.dot(uS),v=o*p-c*c;if(v===0)return a.set(0,0,0),null;const y=1/v,x=(p*f-c*m)*y,b=(o*m-c*f)*y;return a.set(1-x-b,b,x)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,oc)===null?!1:oc.x>=0&&oc.y>=0&&oc.x+oc.y<=1}static getInterpolation(e,t,i,r,a,o,c,f){return this.getBarycoord(e,t,i,r,oc)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(a,oc.x),f.addScaledVector(o,oc.y),f.addScaledVector(c,oc.z),f)}static getInterpolatedAttribute(e,t,i,r,a,o){return pS.setScalar(0),mS.setScalar(0),gS.setScalar(0),pS.fromBufferAttribute(e,t),mS.fromBufferAttribute(e,i),gS.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(pS,a.x),o.addScaledVector(mS,a.y),o.addScaledVector(gS,a.z),o}static isFrontFacing(e,t,i,r){return Do.subVectors(i,t),sc.subVectors(e,t),Do.cross(sc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Do.subVectors(this.c,this.b),sc.subVectors(this.a,this.b),Do.cross(sc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return as.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return as.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return as.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return as.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return as.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let o,c;Yd.subVectors(r,i),jd.subVectors(a,i),fS.subVectors(e,i);const f=Yd.dot(fS),p=jd.dot(fS);if(f<=0&&p<=0)return t.copy(i);hS.subVectors(e,r);const m=Yd.dot(hS),v=jd.dot(hS);if(m>=0&&v<=m)return t.copy(r);const y=f*v-m*p;if(y<=0&&f>=0&&m<=0)return o=f/(f-m),t.copy(i).addScaledVector(Yd,o);dS.subVectors(e,a);const x=Yd.dot(dS),b=jd.dot(dS);if(b>=0&&x<=b)return t.copy(a);const T=x*p-f*b;if(T<=0&&p>=0&&b<=0)return c=p/(p-b),t.copy(i).addScaledVector(jd,c);const M=m*b-x*v;if(M<=0&&v-m>=0&&x-b>=0)return dT.subVectors(a,r),c=(v-m)/(v-m+(x-b)),t.copy(r).addScaledVector(dT,c);const A=1/(M+T+y);return o=T*A,c=y*A,t.copy(i).addScaledVector(Yd,o).addScaledVector(jd,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const K2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Eu={h:0,s:0,l:0},uy={h:0,s:0,l:0};function vS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let xt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Wn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Pn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Pn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Pn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Pn.workingColorSpace){if(e=jA(e,1),t=pn(t,0,1),i=pn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,o=2*i-a;this.r=vS(o,a,e+1/3),this.g=vS(o,a,e),this.b=vS(o,a,e-1/3)}return Pn.toWorkingColorSpace(this,r),this}setStyle(e,t=Wn){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const o=r[1],c=r[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Wn){const i=K2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=yc(e.r),this.g=yc(e.g),this.b=yc(e.b),this}copyLinearToSRGB(e){return this.r=hp(e.r),this.g=hp(e.g),this.b=hp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Wn){return Pn.fromWorkingColorSpace(pa.copy(this),e),Math.round(pn(pa.r*255,0,255))*65536+Math.round(pn(pa.g*255,0,255))*256+Math.round(pn(pa.b*255,0,255))}getHexString(e=Wn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Pn.workingColorSpace){Pn.fromWorkingColorSpace(pa.copy(this),t);const i=pa.r,r=pa.g,a=pa.b,o=Math.max(i,r,a),c=Math.min(i,r,a);let f,p;const m=(c+o)/2;if(c===o)f=0,p=0;else{const v=o-c;switch(p=m<=.5?v/(o+c):v/(2-o-c),o){case i:f=(r-a)/v+(r<a?6:0);break;case r:f=(a-i)/v+2;break;case a:f=(i-r)/v+4;break}f/=6}return e.h=f,e.s=p,e.l=m,e}getRGB(e,t=Pn.workingColorSpace){return Pn.fromWorkingColorSpace(pa.copy(this),t),e.r=pa.r,e.g=pa.g,e.b=pa.b,e}getStyle(e=Wn){Pn.fromWorkingColorSpace(pa.copy(this),e);const t=pa.r,i=pa.g,r=pa.b;return e!==Wn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Eu),this.setHSL(Eu.h+e,Eu.s+t,Eu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Eu),e.getHSL(uy);const i=Dg(Eu.h,uy.h,t),r=Dg(Eu.s,uy.s,t),a=Dg(Eu.l,uy.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const pa=new xt;xt.NAMES=K2;let RN=0;class fr extends Cs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RN++}),this.uuid=Es(),this.name="",this.type="Material",this.blending=hh,this.side=Ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=p_,this.blendDst=m_,this.blendEquation=Du,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=yh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=X1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eh,this.stencilZFail=eh,this.stencilZPass=eh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==hh&&(i.blending=this.blending),this.side!==Ho&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==p_&&(i.blendSrc=this.blendSrc),this.blendDst!==m_&&(i.blendDst=this.blendDst),this.blendEquation!==Du&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==yh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==X1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eh&&(i.stencilFail=this.stencilFail),this.stencilZFail!==eh&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==eh&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const o=[];for(const c in a){const f=a[c];delete f.metadata,o.push(f)}return o}if(t){const a=r(e.textures),o=r(e.images);a.length>0&&(i.textures=a),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ss extends fr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pc=wN();function wN(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let f=0;f<256;++f){const p=f-127;p<-27?(i[f]=0,i[f|256]=32768,r[f]=24,r[f|256]=24):p<-14?(i[f]=1024>>-p-14,i[f|256]=1024>>-p-14|32768,r[f]=-p-1,r[f|256]=-p-1):p<=15?(i[f]=p+15<<10,i[f|256]=p+15<<10|32768,r[f]=13,r[f|256]=13):p<128?(i[f]=31744,i[f|256]=64512,r[f]=24,r[f|256]=24):(i[f]=31744,i[f|256]=64512,r[f]=13,r[f|256]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let p=f<<13,m=0;for(;(p&8388608)===0;)p<<=1,m-=8388608;p&=-8388609,m+=947912704,a[f]=p|m}for(let f=1024;f<2048;++f)a[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:o,offsetTable:c}}function is(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=pn(n,-65504,65504),pc.floatView[0]=n;const e=pc.uint32View[0],t=e>>23&511;return pc.baseTable[t]+((e&8388607)>>pc.shiftTable[t])}function xg(n){const e=n>>10;return pc.uint32View[0]=pc.mantissaTable[pc.offsetTable[e]+(n&1023)]+pc.exponentTable[e],pc.floatView[0]}class oh{static toHalfFloat(e){return is(e)}static fromHalfFloat(e){return xg(e)}}const yr=new $,fy=new Ve;let BN=0;class Gn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:BN++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Xg,this.updateRanges=[],this.gpuType=Li,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)fy.fromBufferAttribute(this,t),fy.applyMatrix3(e),this.setXY(t,fy.x,fy.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix3(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)yr.fromBufferAttribute(this,t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ga(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ga(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ga(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ga(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ga(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array),a=Sn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Xg&&(e.usage=this.usage),e}}class DN extends Gn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class ON extends Gn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class UN extends Gn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class NN extends Gn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class WA extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class LN extends Gn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class qA extends Gn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class IN extends Gn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=xg(this.array[e*this.itemSize]);return this.normalized&&(t=Ga(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=is(t),this}getY(e){let t=xg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ga(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=is(t),this}getZ(e){let t=xg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ga(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=is(t),this}getW(e){let t=xg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ga(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=is(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this.array[e+2]=is(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array),a=Sn(a,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this.array[e+2]=is(r),this.array[e+3]=is(a),this}}class Lt extends Gn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let PN=0;const Ws=new qt,yS=new Hn,Wd=new $,As=new Vr,ag=new Vr,zr=new $;class un extends Cs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:PN++}),this.uuid=Es(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(j2(e)?qA:WA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new yn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ws.makeRotationFromQuaternion(e),this.applyMatrix4(Ws),this}rotateX(e){return Ws.makeRotationX(e),this.applyMatrix4(Ws),this}rotateY(e){return Ws.makeRotationY(e),this.applyMatrix4(Ws),this}rotateZ(e){return Ws.makeRotationZ(e),this.applyMatrix4(Ws),this}translate(e,t,i){return Ws.makeTranslation(e,t,i),this.applyMatrix4(Ws),this}scale(e,t,i){return Ws.makeScale(e,t,i),this.applyMatrix4(Ws),this}lookAt(e){return yS.lookAt(e),yS.updateMatrix(),this.applyMatrix4(yS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wd).negate(),this.translate(Wd.x,Wd.y,Wd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Lt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new $(-1/0,-1/0,-1/0),new $(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];As.setFromBufferAttribute(a),this.morphTargetsRelative?(zr.addVectors(this.boundingBox.min,As.min),this.boundingBox.expandByPoint(zr),zr.addVectors(this.boundingBox.max,As.max),this.boundingBox.expandByPoint(zr)):(this.boundingBox.expandByPoint(As.min),this.boundingBox.expandByPoint(As.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new $,1/0);return}if(e){const i=this.boundingSphere.center;if(As.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const c=t[a];ag.setFromBufferAttribute(c),this.morphTargetsRelative?(zr.addVectors(As.min,ag.min),As.expandByPoint(zr),zr.addVectors(As.max,ag.max),As.expandByPoint(zr)):(As.expandByPoint(ag.min),As.expandByPoint(ag.max))}As.getCenter(i);let r=0;for(let a=0,o=e.count;a<o;a++)zr.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(zr));if(t)for(let a=0,o=t.length;a<o;a++){const c=t[a],f=this.morphTargetsRelative;for(let p=0,m=c.count;p<m;p++)zr.fromBufferAttribute(c,p),f&&(Wd.fromBufferAttribute(e,p),zr.add(Wd)),r=Math.max(r,i.distanceToSquared(zr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let P=0;P<i.count;P++)c[P]=new $,f[P]=new $;const p=new $,m=new $,v=new $,y=new Ve,x=new Ve,b=new Ve,T=new $,M=new $;function A(P,L,U){p.fromBufferAttribute(i,P),m.fromBufferAttribute(i,L),v.fromBufferAttribute(i,U),y.fromBufferAttribute(a,P),x.fromBufferAttribute(a,L),b.fromBufferAttribute(a,U),m.sub(p),v.sub(p),x.sub(y),b.sub(y);const Y=1/(x.x*b.y-b.x*x.y);isFinite(Y)&&(T.copy(m).multiplyScalar(b.y).addScaledVector(v,-x.y).multiplyScalar(Y),M.copy(v).multiplyScalar(x.x).addScaledVector(m,-b.x).multiplyScalar(Y),c[P].add(T),c[L].add(T),c[U].add(T),f[P].add(M),f[L].add(M),f[U].add(M))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let P=0,L=w.length;P<L;++P){const U=w[P],Y=U.start,ie=U.count;for(let Q=Y,ae=Y+ie;Q<ae;Q+=3)A(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const B=new $,D=new $,I=new $,N=new $;function H(P){I.fromBufferAttribute(r,P),N.copy(I);const L=c[P];B.copy(L),B.sub(I.multiplyScalar(I.dot(L))).normalize(),D.crossVectors(N,L);const Y=D.dot(f[P])<0?-1:1;o.setXYZW(P,B.x,B.y,B.z,Y)}for(let P=0,L=w.length;P<L;++P){const U=w[P],Y=U.start,ie=U.count;for(let Q=Y,ae=Y+ie;Q<ae;Q+=3)H(e.getX(Q+0)),H(e.getX(Q+1)),H(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,x=i.count;y<x;y++)i.setXYZ(y,0,0,0);const r=new $,a=new $,o=new $,c=new $,f=new $,p=new $,m=new $,v=new $;if(e)for(let y=0,x=e.count;y<x;y+=3){const b=e.getX(y+0),T=e.getX(y+1),M=e.getX(y+2);r.fromBufferAttribute(t,b),a.fromBufferAttribute(t,T),o.fromBufferAttribute(t,M),m.subVectors(o,a),v.subVectors(r,a),m.cross(v),c.fromBufferAttribute(i,b),f.fromBufferAttribute(i,T),p.fromBufferAttribute(i,M),c.add(m),f.add(m),p.add(m),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(T,f.x,f.y,f.z),i.setXYZ(M,p.x,p.y,p.z)}else for(let y=0,x=t.count;y<x;y+=3)r.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),m.subVectors(o,a),v.subVectors(r,a),m.cross(v),i.setXYZ(y+0,m.x,m.y,m.z),i.setXYZ(y+1,m.x,m.y,m.z),i.setXYZ(y+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)zr.fromBufferAttribute(e,t),zr.normalize(),e.setXYZ(t,zr.x,zr.y,zr.z)}toNonIndexed(){function e(c,f){const p=c.array,m=c.itemSize,v=c.normalized,y=new p.constructor(f.length*m);let x=0,b=0;for(let T=0,M=f.length;T<M;T++){c.isInterleavedBufferAttribute?x=f[T]*c.data.stride+c.offset:x=f[T]*m;for(let A=0;A<m;A++)y[b++]=p[x++]}return new Gn(y,m,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new un,i=this.index.array,r=this.attributes;for(const c in r){const f=r[c],p=e(f,i);t.setAttribute(c,p)}const a=this.morphAttributes;for(const c in a){const f=[],p=a[c];for(let m=0,v=p.length;m<v;m++){const y=p[m],x=e(y,i);f.push(x)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const p=o[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const f in i){const p=i[f];e.data.attributes[f]=p.toJSON(e.data)}const r={};let a=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v];m.push(x.toJSON(e.data))}m.length>0&&(r[f]=m,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const p in r){const m=r[p];this.setAttribute(p,m.clone(t))}const a=e.morphAttributes;for(const p in a){const m=[],v=a[p];for(let y=0,x=v.length;y<x;y++)m.push(v[y].clone(t));this.morphAttributes[p]=m}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let p=0,m=o.length;p<m;p++){const v=o[p];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pT=new qt,Hf=new Oh,hy=new kr,mT=new $,dy=new $,py=new $,my=new $,_S=new $,gy=new $,gT=new $,vy=new $;class Ei extends Hn{constructor(e=new un,t=new ss){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const c=this.morphTargetInfluences;if(a&&c){gy.set(0,0,0);for(let f=0,p=a.length;f<p;f++){const m=c[f],v=a[f];m!==0&&(_S.fromBufferAttribute(v,e),o?gy.addScaledVector(_S,m):gy.addScaledVector(_S.sub(t),m))}t.add(gy)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),hy.copy(i.boundingSphere),hy.applyMatrix4(a),Hf.copy(e.ray).recast(e.near),!(hy.containsPoint(Hf.origin)===!1&&(Hf.intersectSphere(hy,mT)===null||Hf.origin.distanceToSquared(mT)>(e.far-e.near)**2))&&(pT.copy(a).invert(),Hf.copy(e.ray).applyMatrix4(pT),!(i.boundingBox!==null&&Hf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Hf)))}_computeIntersections(e,t,i){let r;const a=this.geometry,o=this.material,c=a.index,f=a.attributes.position,p=a.attributes.uv,m=a.attributes.uv1,v=a.attributes.normal,y=a.groups,x=a.drawRange;if(c!==null)if(Array.isArray(o))for(let b=0,T=y.length;b<T;b++){const M=y[b],A=o[M.materialIndex],w=Math.max(M.start,x.start),B=Math.min(c.count,Math.min(M.start+M.count,x.start+x.count));for(let D=w,I=B;D<I;D+=3){const N=c.getX(D),H=c.getX(D+1),P=c.getX(D+2);r=yy(this,A,e,i,p,m,v,N,H,P),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const b=Math.max(0,x.start),T=Math.min(c.count,x.start+x.count);for(let M=b,A=T;M<A;M+=3){const w=c.getX(M),B=c.getX(M+1),D=c.getX(M+2);r=yy(this,o,e,i,p,m,v,w,B,D),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}else if(f!==void 0)if(Array.isArray(o))for(let b=0,T=y.length;b<T;b++){const M=y[b],A=o[M.materialIndex],w=Math.max(M.start,x.start),B=Math.min(f.count,Math.min(M.start+M.count,x.start+x.count));for(let D=w,I=B;D<I;D+=3){const N=D,H=D+1,P=D+2;r=yy(this,A,e,i,p,m,v,N,H,P),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const b=Math.max(0,x.start),T=Math.min(f.count,x.start+x.count);for(let M=b,A=T;M<A;M+=3){const w=M,B=M+1,D=M+2;r=yy(this,o,e,i,p,m,v,w,B,D),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}}}function zN(n,e,t,i,r,a,o,c){let f;if(e.side===Rr?f=i.intersectTriangle(o,a,r,!0,c):f=i.intersectTriangle(r,a,o,e.side===Ho,c),f===null)return null;vy.copy(c),vy.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(vy);return p<t.near||p>t.far?null:{distance:p,point:vy.clone(),object:n}}function yy(n,e,t,i,r,a,o,c,f,p){n.getVertexPosition(c,dy),n.getVertexPosition(f,py),n.getVertexPosition(p,my);const m=zN(n,e,t,i,dy,py,my,gT);if(m){const v=new $;as.getBarycoord(gT,dy,py,my,v),r&&(m.uv=as.getInterpolatedAttribute(r,c,f,p,v,new Ve)),a&&(m.uv1=as.getInterpolatedAttribute(a,c,f,p,v,new Ve)),o&&(m.normal=as.getInterpolatedAttribute(o,c,f,p,v,new $),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const y={a:c,b:f,c:p,normal:new $,materialIndex:0};as.getNormal(dy,py,my,y.normal),m.face=y,m.barycoord=v}return m}class Uh extends un{constructor(e=1,t=1,i=1,r=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:o};const c=this;r=Math.floor(r),a=Math.floor(a),o=Math.floor(o);const f=[],p=[],m=[],v=[];let y=0,x=0;b("z","y","x",-1,-1,i,t,e,o,a,0),b("z","y","x",1,-1,i,t,-e,o,a,1),b("x","z","y",1,1,e,i,t,r,o,2),b("x","z","y",1,-1,e,i,-t,r,o,3),b("x","y","z",1,-1,e,t,i,r,a,4),b("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(f),this.setAttribute("position",new Lt(p,3)),this.setAttribute("normal",new Lt(m,3)),this.setAttribute("uv",new Lt(v,2));function b(T,M,A,w,B,D,I,N,H,P,L){const U=D/H,Y=I/P,ie=D/2,Q=I/2,ae=N/2,he=H+1,X=P+1;let te=0,ne=0;const be=new $;for(let W=0;W<X;W++){const se=W*Y-Q;for(let Ae=0;Ae<he;Ae++){const De=Ae*U-ie;be[T]=De*w,be[M]=se*B,be[A]=ae,p.push(be.x,be.y,be.z),be[T]=0,be[M]=0,be[A]=N>0?1:-1,m.push(be.x,be.y,be.z),v.push(Ae/H),v.push(1-W/P),te+=1}}for(let W=0;W<P;W++)for(let se=0;se<H;se++){const Ae=y+se+he*W,De=y+se+he*(W+1),ge=y+(se+1)+he*(W+1),He=y+(se+1)+he*W;f.push(Ae,De,He),f.push(De,ge,He),ne+=6}c.addGroup(x,ne,L),x+=ne,y+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ep(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function za(n){const e={};for(let t=0;t<n.length;t++){const i=Ep(n[t]);for(const r in i)e[r]=i[r]}return e}function FN(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function J2(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Pn.workingColorSpace}const Z2={clone:Ep,merge:za};var HN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Pi extends fr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HN,this.fragmentShader=GN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ep(e.uniforms),this.uniformsGroups=FN(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class lv extends Hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qt,this.projectionMatrix=new qt,this.projectionMatrixInverse=new qt,this.coordinateSystem=Qs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Mu=new $,vT=new Ve,yT=new Ve;class qi extends lv{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sp*2*Math.atan(Math.tan(dh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Mu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Mu.x,Mu.y).multiplyScalar(-e/Mu.z),Mu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Mu.x,Mu.y).multiplyScalar(-e/Mu.z)}getViewSize(e,t){return this.getViewBounds(e,vT,yT),t.subVectors(yT,vT)}setViewOffset(e,t,i,r,a,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(dh*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,p=o.fullHeight;a+=o.offsetX*r/f,t-=o.offsetY*i/p,r*=o.width/f,i*=o.height/p}const c=this.filmOffset;c!==0&&(a+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qd=-90,Kd=1;class $2 extends Hn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new qi(qd,Kd,e,t);r.layers=this.layers,this.add(r);const a=new qi(qd,Kd,e,t);a.layers=this.layers,this.add(a);const o=new qi(qd,Kd,e,t);o.layers=this.layers,this.add(o);const c=new qi(qd,Kd,e,t);c.layers=this.layers,this.add(c);const f=new qi(qd,Kd,e,t);f.layers=this.layers,this.add(f);const p=new qi(qd,Kd,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,o,c,f]=t;for(const p of t)this.remove(p);if(e===Qs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===Yg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,o,c,f,p,m]=this.children,v=e.getRenderTarget(),y=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const T=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,c),e.setRenderTarget(i,3,r),e.render(t,f),e.setRenderTarget(i,4,r),e.render(t,p),i.texture.generateMipmaps=T,e.setRenderTarget(i,5,r),e.render(t,m),e.setRenderTarget(v,y,x),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class cv extends ei{constructor(e=[],t=Dl,i,r,a,o,c,f,p,m){super(e,t,i,r,a,o,c,f,p,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class KA extends Ii{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new cv(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Uh(5,5,5),a=new Pi({name:"CubemapFromEquirect",uniforms:Ep(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Rr,blending:ea});a.uniforms.tEquirect.value=t;const o=new Ei(r,a),c=t.minFilter;return t.minFilter===$s&&(t.minFilter=Fn),new $2(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(a)}}class gc extends Hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const VN={type:"move"};class c_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,o=null;const c=this._targetRay,f=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){o=!0;for(const T of e.hand.values()){const M=t.getJointPose(T,i),A=this._getHandJoint(p,T);M!==null&&(A.matrix.fromArray(M.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=M.radius),A.visible=M!==null}const m=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],y=m.position.distanceTo(v.position),x=.02,b=.005;p.inputState.pinching&&y>x+b?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&y<=x-b&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,a.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(a.linearVelocity)):f.hasLinearVelocity=!1,a.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(a.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(VN)))}return c!==null&&(c.visible=r!==null),f!==null&&(f.visible=a!==null),p!==null&&(p.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new gc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Ux{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=t}clone(){return new Ux(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Nx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=t,this.far=i}clone(){return new Nx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let bh=class extends Hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ts,this.environmentIntensity=1,this.environmentRotation=new Ts,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class uv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Xg,this.updateRanges=[],this.version=0,this.uuid=Es()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Es()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ia=new $;class Fu{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ia.fromBufferAttribute(this,t),Ia.applyMatrix4(e),this.setXYZ(t,Ia.x,Ia.y,Ia.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ia.fromBufferAttribute(this,t),Ia.applyNormalMatrix(e),this.setXYZ(t,Ia.x,Ia.y,Ia.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ia.fromBufferAttribute(this,t),Ia.transformDirection(e),this.setXYZ(t,Ia.x,Ia.y,Ia.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ga(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ga(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ga(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ga(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ga(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array),a=Sn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new Gn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class JA extends fr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jd;const sg=new $,Zd=new $,$d=new $,Qd=new Ve,og=new Ve,Q2=new qt,_y=new $,lg=new $,xy=new $,_T=new Ve,xS=new Ve,xT=new Ve;class eB extends Hn{constructor(e=new JA){if(super(),this.isSprite=!0,this.type="Sprite",Jd===void 0){Jd=new un;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new uv(t,5);Jd.setIndex([0,1,2,0,2,3]),Jd.setAttribute("position",new Fu(i,3,0,!1)),Jd.setAttribute("uv",new Fu(i,2,3,!1))}this.geometry=Jd,this.material=e,this.center=new Ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zd.setFromMatrixScale(this.matrixWorld),Q2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),$d.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zd.multiplyScalar(-$d.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const o=this.center;by(_y.set(-.5,-.5,0),$d,o,Zd,r,a),by(lg.set(.5,-.5,0),$d,o,Zd,r,a),by(xy.set(.5,.5,0),$d,o,Zd,r,a),_T.set(0,0),xS.set(1,0),xT.set(1,1);let c=e.ray.intersectTriangle(_y,lg,xy,!1,sg);if(c===null&&(by(lg.set(-.5,.5,0),$d,o,Zd,r,a),xS.set(0,1),c=e.ray.intersectTriangle(_y,xy,lg,!1,sg),c===null))return;const f=e.ray.origin.distanceTo(sg);f<e.near||f>e.far||t.push({distance:f,point:sg.clone(),uv:as.getInterpolation(sg,_y,lg,xy,_T,xS,xT,new Ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function by(n,e,t,i,r,a){Qd.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(og.x=a*Qd.x-r*Qd.y,og.y=r*Qd.x+a*Qd.y):og.copy(Qd),n.copy(e),n.x+=og.x,n.y+=og.y,n.applyMatrix4(Q2)}const Sy=new $,bT=new $;class tB extends Hn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Sy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Sy);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Sy.setFromMatrixPosition(e.matrixWorld),bT.setFromMatrixPosition(this.matrixWorld);const i=Sy.distanceTo(bT)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const ST=new $,AT=new zn,ET=new zn,kN=new $,MT=new qt,Ay=new $,bS=new kr,TT=new qt,SS=new Oh;class ZA extends Ei{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=V1,this.bindMatrix=new qt,this.bindMatrixInverse=new qt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ay),this.boundingBox.expandByPoint(Ay)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new kr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ay),this.boundingSphere.expandByPoint(Ay)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bS.copy(this.boundingSphere),bS.applyMatrix4(r),e.ray.intersectsSphere(bS)!==!1&&(TT.copy(r).invert(),SS.copy(e.ray).applyMatrix4(TT),!(this.boundingBox!==null&&SS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,SS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===V1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===D2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;AT.fromBufferAttribute(r.attributes.skinIndex,e),ET.fromBufferAttribute(r.attributes.skinWeight,e),ST.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const o=ET.getComponent(a);if(o!==0){const c=AT.getComponent(a);MT.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(kN.copy(ST).applyMatrix4(MT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Lx extends Hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zo extends ei{constructor(e=null,t=1,i=1,r,a,o,c,f,p=tr,m=tr,v,y){super(null,o,c,f,p,m,r,a,v,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const CT=new qt,XN=new qt;class fv{constructor(e=[],t=[]){this.uuid=Es(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new qt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,o=e.length;a<o;a++){const c=e[a]?e[a].matrixWorld:XN;CT.multiplyMatrices(c,t[a]),CT.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new fv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zo(t,e,e,ur,Li);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let o=t[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new Lx),this.bones.push(o),this.boneInverses.push(new qt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const o=t[r];e.bones.push(o.uuid);const c=i[r];e.boneInverses.push(c.toArray())}return e}}class Sh extends Gn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ep=new qt,RT=new qt,Ey=[],wT=new Vr,YN=new qt,cg=new Ei,ug=new kr;class $A extends Ei{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Sh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,YN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ep),wT.copy(e.boundingBox).applyMatrix4(ep),this.boundingBox.union(wT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new kr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ep),ug.copy(e.boundingSphere).applyMatrix4(ep),this.boundingSphere.union(ug)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,o=e*a+1;for(let c=0;c<i.length;c++)i[c]=r[o+c]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(cg.geometry=this.geometry,cg.material=this.material,cg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ug.copy(this.boundingSphere),ug.applyMatrix4(i),e.ray.intersectsSphere(ug)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,ep),RT.multiplyMatrices(i,ep),cg.matrixWorld=RT,cg.raycast(e,Ey);for(let o=0,c=Ey.length;o<c;o++){const f=Ey[o];f.instanceId=a,f.object=this,t.push(f)}Ey.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Sh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new zo(new Float32Array(r*this.count),r,this.count,av,Li));const a=this.morphTexture.source.data.data;let o=0;for(let p=0;p<i.length;p++)o+=i[p];const c=this.geometry.morphTargetsRelative?1:1-o,f=r*e;a[f]=c,a.set(i,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const AS=new $,jN=new $,WN=new yn;class hc{constructor(e=new $(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=AS.subVectors(i,t).cross(jN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(AS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WN.getNormalMatrix(e),r=this.coplanarPoint(AS).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gf=new kr,My=new $;class Dp{constructor(e=new hc,t=new hc,i=new hc,r=new hc,a=new hc,o=new hc){this.planes=[e,t,i,r,a,o]}set(e,t,i,r,a,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(r),c[4].copy(a),c[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Qs){const i=this.planes,r=e.elements,a=r[0],o=r[1],c=r[2],f=r[3],p=r[4],m=r[5],v=r[6],y=r[7],x=r[8],b=r[9],T=r[10],M=r[11],A=r[12],w=r[13],B=r[14],D=r[15];if(i[0].setComponents(f-a,y-p,M-x,D-A).normalize(),i[1].setComponents(f+a,y+p,M+x,D+A).normalize(),i[2].setComponents(f+o,y+m,M+b,D+w).normalize(),i[3].setComponents(f-o,y-m,M-b,D-w).normalize(),i[4].setComponents(f-c,y-v,M-T,D-B).normalize(),t===Qs)i[5].setComponents(f+c,y+v,M+T,D+B).normalize();else if(t===Yg)i[5].setComponents(c,v,T,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Gf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Gf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gf)}intersectsSprite(e){return Gf.center.set(0,0,0),Gf.radius=.7071067811865476,Gf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gf)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(My.x=r.normal.x>0?e.max.x:e.min.x,My.y=r.normal.y>0?e.max.y:e.min.y,My.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(My)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Tl=new qt,Cl=new Dp;class Ix{constructor(){this.coordinateSystem=Qs}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Tl,this.coordinateSystem),Cl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Tl,this.coordinateSystem),Cl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Tl,this.coordinateSystem),Cl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Tl,this.coordinateSystem),Cl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Cl.setFromProjectionMatrix(Tl,this.coordinateSystem),Cl.containsPoint(e))return!0}return!1}clone(){return new Ix}}function ES(n,e){return n-e}function qN(n,e){return n.z-e.z}function KN(n,e){return e.z-n.z}class JN{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,o=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const c=a[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=i,c.index=r}reset(){this.list.length=0,this.index=0}}const ns=new qt,ZN=new xt(1,1,1),BT=new Dp,$N=new Ix,Ty=new Vr,Vf=new kr,fg=new $,DT=new $,QN=new $,MS=new JN,ma=new Ei,Cy=[];function eL(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let o=0;o<i;o++)e.setComponent(a+t,o,n.getComponent(a,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function kf(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class nB extends Ei{constructor(e,t,i=t*2,r){super(new un,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new zo(t,e,e,ur,Li);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new zo(t,e,e,sv,Go);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new zo(t,e,e,ur,Li);i.colorSpace=Pn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const o=e.getAttribute(a),{array:c,itemSize:f,normalized:p}=o,m=new c.constructor(i*f),v=new Gn(m,f,p);t.setAttribute(a,v)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Gn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,ns),this.getBoundingBoxAt(a,Ty).applyMatrix4(ns),e.union(Ty)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,ns),this.getBoundingSphereAt(a,Vf).applyMatrix4(ns),e.union(Vf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ES),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;ns.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const o=this._colorsTexture;return o&&(ZN.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ES),f=this._availableGeometryIds.shift(),a[f]=r):(f=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(f,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(r&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const m in i.attributes){const v=t.getAttribute(m),y=i.getAttribute(m);eL(v,y,f);const x=v.itemSize;for(let b=v.count,T=p;b<T;b++){const M=f+b;for(let A=0;A<x;A++)y.setComponent(M,A,0)}y.needsUpdate=!0,y.addUpdateRange(f*x,p*x)}if(r){const m=c.indexStart,v=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let y=0;y<o.count;y++)a.setX(m+y,f+o.getX(y));for(let y=o.count,x=v;y<x;y++)a.setX(m+y,f);a.needsUpdate=!0,a.addUpdateRange(m,c.reservedIndexCount)}return c.start=r?c.indexStart:c.vertexStart,c.count=r?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,c)=>c).sort((o,c)=>i[o].vertexStart-i[c].vertexStart),a=this.geometry;for(let o=0,c=i.length;o<c;o++){const f=r[o],p=i[f];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==t){const{indexStart:m,vertexStart:v,reservedIndexCount:y}=p,x=a.index,b=x.array,T=e-v;for(let M=m;M<m+y;M++)b[M]=b[M]+T;x.array.copyWithin(t,m,m+y),x.addUpdateRange(t,y),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:m,reservedVertexCount:v}=p,y=a.attributes;for(const x in y){const b=y[x],{array:T,itemSize:M}=b;T.copyWithin(e*M,m*M,(m+v)*M),b.addUpdateRange(e*M,v*M)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new Vr,o=i.index,c=i.attributes.position;for(let f=r.start,p=r.start+r.count;f<p;f++){let m=f;o&&(m=o.getX(m)),a.expandByPoint(fg.fromBufferAttribute(c,m))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new kr;this.getBoundingBoxAt(e,Ty),Ty.getCenter(a.center);const o=i.index,c=i.attributes.position;let f=0;for(let p=r.start,m=r.start+r.count;p<m;p++){let v=p;o&&(v=o.getX(v)),fg.fromBufferAttribute(c,v),f=Math.max(f,a.center.distanceToSquared(fg))}a.radius=Math.sqrt(f),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(ES);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);kf(this._multiDrawCounts,r),kf(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),kf(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),kf(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),kf(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new un,this._initializeGeometry(a));const o=this.geometry;a.index&&kf(a.index.array,o.index.array);for(const c in a.attributes)kf(a.attributes[c].array,o.attributes[c].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,o=this.geometry;ma.material=this.material,ma.geometry.index=o.index,ma.geometry.attributes=o.attributes,ma.geometry.boundingBox===null&&(ma.geometry.boundingBox=new Vr),ma.geometry.boundingSphere===null&&(ma.geometry.boundingSphere=new kr);for(let c=0,f=i.length;c<f;c++){if(!i[c].visible||!i[c].active)continue;const p=i[c].geometryIndex,m=r[p];ma.geometry.setDrawRange(m.start,m.count),this.getMatrixAt(c,ma.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,ma.geometry.boundingBox),this.getBoundingSphereAt(p,ma.geometry.boundingSphere),ma.raycast(e,Cy);for(let v=0,y=Cy.length;v<y;v++){const x=Cy[v];x.object=this,x.batchId=c,t.push(x)}Cy.length=0}ma.material=null,ma.geometry.index=null,ma.geometry.attributes={},ma.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,p=this._multiDrawStarts,m=this._multiDrawCounts,v=this._geometryInfo,y=this.perObjectFrustumCulled,x=this._indirectTexture,b=x.image.data,T=i.isArrayCamera?$N:BT;y&&!i.isArrayCamera&&(ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),BT.setFromProjectionMatrix(ns,e.coordinateSystem));let M=0;if(this.sortObjects){ns.copy(this.matrixWorld).invert(),fg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ns),DT.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ns);for(let B=0,D=f.length;B<D;B++)if(f[B].visible&&f[B].active){const I=f[B].geometryIndex;this.getMatrixAt(B,ns),this.getBoundingSphereAt(I,Vf).applyMatrix4(ns);let N=!1;if(y&&(N=!T.intersectsSphere(Vf,i)),!N){const H=v[I],P=QN.subVectors(Vf.center,fg).dot(DT);MS.push(H.start,H.count,P,B)}}const A=MS.list,w=this.customSort;w===null?A.sort(a.transparent?KN:qN):w.call(this,A,i);for(let B=0,D=A.length;B<D;B++){const I=A[B];p[M]=I.start*c,m[M]=I.count,b[M]=I.index,M++}MS.reset()}else for(let A=0,w=f.length;A<w;A++)if(f[A].visible&&f[A].active){const B=f[A].geometryIndex;let D=!1;if(y&&(this.getMatrixAt(A,ns),this.getBoundingSphereAt(B,Vf).applyMatrix4(ns),D=!T.intersectsSphere(Vf,i)),!D){const I=v[B];p[M]=I.start*c,m[M]=I.count,b[M]=A,M++}}x.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,o){this.onBeforeRender(e,null,r,a,o)}}class _a extends fr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const J_=new $,Z_=new $,OT=new qt,hg=new Oh,Ry=new kr,TS=new $,UT=new $;class Ac extends Hn{constructor(e=new un,t=new _a){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)J_.fromBufferAttribute(t,r-1),Z_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=J_.distanceTo(Z_);e.setAttribute("lineDistance",new Lt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ry.copy(i.boundingSphere),Ry.applyMatrix4(r),Ry.radius+=a,e.ray.intersectsSphere(Ry)===!1)return;OT.copy(r).invert(),hg.copy(e.ray).applyMatrix4(OT);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=this.isLineSegments?2:1,m=i.index,y=i.attributes.position;if(m!==null){const x=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let T=x,M=b-1;T<M;T+=p){const A=m.getX(T),w=m.getX(T+1),B=wy(this,e,hg,f,A,w,T);B&&t.push(B)}if(this.isLineLoop){const T=m.getX(b-1),M=m.getX(x),A=wy(this,e,hg,f,T,M,b-1);A&&t.push(A)}}else{const x=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count);for(let T=x,M=b-1;T<M;T+=p){const A=wy(this,e,hg,f,T,T+1,T);A&&t.push(A)}if(this.isLineLoop){const T=wy(this,e,hg,f,b-1,x,b-1);T&&t.push(T)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}}function wy(n,e,t,i,r,a,o){const c=n.geometry.attributes.position;if(J_.fromBufferAttribute(c,r),Z_.fromBufferAttribute(c,a),t.distanceSqToSegment(J_,Z_,TS,UT)>i)return;TS.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(TS);if(!(p<e.near||p>e.far))return{distance:p,point:UT.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const NT=new $,LT=new $;class ko extends Ac{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)NT.fromBufferAttribute(t,r),LT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+NT.distanceTo(LT);e.setAttribute("lineDistance",new Lt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class QA extends Ac{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Px extends fr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const IT=new qt,j1=new Oh,By=new kr,Dy=new $;class eE extends Hn{constructor(e=new un,t=new Px){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),By.copy(i.boundingSphere),By.applyMatrix4(r),By.radius+=a,e.ray.intersectsSphere(By)===!1)return;IT.copy(r).invert(),j1.copy(e.ray).applyMatrix4(IT);const c=a/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,p=i.index,v=i.attributes.position;if(p!==null){const y=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let b=y,T=x;b<T;b++){const M=p.getX(b);Dy.fromBufferAttribute(v,M),PT(Dy,M,f,r,e,t,this)}}else{const y=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let b=y,T=x;b<T;b++)Dy.fromBufferAttribute(v,b),PT(Dy,b,f,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=r.length;a<o;a++){const c=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}}function PT(n,e,t,i,r,a,o){const c=j1.distanceSqToPoint(n);if(c<t){const f=new $;j1.closestPointToPoint(n,f),f.applyMatrix4(i);const p=r.ray.origin.distanceTo(f);if(p<r.near||p>r.far)return;a.push({distance:p,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class iB extends ei{constructor(e,t,i,r,a=Fn,o=Fn,c,f,p){super(e,t,i,r,a,o,c,f,p),this.isVideoTexture=!0,this.generateMipmaps=!1;const m=this;function v(){m.needsUpdate=!0,e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class tL extends iB{constructor(e,t,i,r,a,o,c,f){super({},e,t,i,r,a,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class nL extends ei{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=tr,this.minFilter=tr,this.generateMipmaps=!1,this.needsUpdate=!0}}class zx extends ei{constructor(e,t,i,r,a,o,c,f,p,m,v,y){super(null,o,c,f,p,m,r,a,v,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class iL extends zx{constructor(e,t,i,r,a,o){super(e,t,i,a,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=cr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rL extends zx{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Dl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class aL extends ei{constructor(e,t,i,r,a,o,c,f,p){super(e,t,i,r,a,o,c,f,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class hv extends ei{constructor(e,t,i=Go,r,a,o,c=tr,f=tr,p,m=_p){if(m!==_p&&m!==xh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,a,o,c,f,m,i,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ou(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class sL extends hv{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fx extends un{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const o=[],c=[],f=[],p=[],m=t/2,v=Math.PI/2*e,y=t,x=2*v+y,b=i*2+a,T=r+1,M=new $,A=new $;for(let w=0;w<=b;w++){let B=0,D=0,I=0,N=0;if(w<=i){const L=w/i,U=L*Math.PI/2;D=-m-e*Math.cos(U),I=e*Math.sin(U),N=-e*Math.cos(U),B=L*v}else if(w<=i+a){const L=(w-i)/a;D=-m+L*t,I=e,N=0,B=v+L*y}else{const L=(w-i-a)/i,U=L*Math.PI/2;D=m+e*Math.sin(U),I=e*Math.cos(U),N=e*Math.sin(U),B=v+y+L*v}const H=Math.max(0,Math.min(1,B/x));let P=0;w===0?P=.5/r:w===b&&(P=-.5/r);for(let L=0;L<=r;L++){const U=L/r,Y=U*Math.PI*2,ie=Math.sin(Y),Q=Math.cos(Y);A.x=-I*Q,A.y=D,A.z=I*ie,c.push(A.x,A.y,A.z),M.set(-I*Q,N,I*ie),M.normalize(),f.push(M.x,M.y,M.z),p.push(U+P,H)}if(w>0){const L=(w-1)*T;for(let U=0;U<r;U++){const Y=L+U,ie=L+U+1,Q=w*T+U,ae=w*T+U+1;o.push(Y,ie,Q),o.push(ie,ae,Q)}}}this.setIndex(o),this.setAttribute("position",new Lt(c,3)),this.setAttribute("normal",new Lt(f,3)),this.setAttribute("uv",new Lt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fx(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Hx extends un{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],o=[],c=[],f=[],p=new $,m=new Ve;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let v=0,y=3;v<=t;v++,y+=3){const x=i+v/t*r;p.x=e*Math.cos(x),p.y=e*Math.sin(x),o.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(o[y]/e+1)/2,m.y=(o[y+1]/e+1)/2,f.push(m.x,m.y)}for(let v=1;v<=t;v++)a.push(v,v+1,0);this.setIndex(a),this.setAttribute("position",new Lt(o,3)),this.setAttribute("normal",new Lt(c,3)),this.setAttribute("uv",new Lt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class dv extends un{constructor(e=1,t=1,i=1,r=32,a=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:f};const p=this;r=Math.floor(r),a=Math.floor(a);const m=[],v=[],y=[],x=[];let b=0;const T=[],M=i/2;let A=0;w(),o===!1&&(e>0&&B(!0),t>0&&B(!1)),this.setIndex(m),this.setAttribute("position",new Lt(v,3)),this.setAttribute("normal",new Lt(y,3)),this.setAttribute("uv",new Lt(x,2));function w(){const D=new $,I=new $;let N=0;const H=(t-e)/i;for(let P=0;P<=a;P++){const L=[],U=P/a,Y=U*(t-e)+e;for(let ie=0;ie<=r;ie++){const Q=ie/r,ae=Q*f+c,he=Math.sin(ae),X=Math.cos(ae);I.x=Y*he,I.y=-U*i+M,I.z=Y*X,v.push(I.x,I.y,I.z),D.set(he,H,X).normalize(),y.push(D.x,D.y,D.z),x.push(Q,1-U),L.push(b++)}T.push(L)}for(let P=0;P<r;P++)for(let L=0;L<a;L++){const U=T[L][P],Y=T[L+1][P],ie=T[L+1][P+1],Q=T[L][P+1];(e>0||L!==0)&&(m.push(U,Y,Q),N+=3),(t>0||L!==a-1)&&(m.push(Y,ie,Q),N+=3)}p.addGroup(A,N,0),A+=N}function B(D){const I=b,N=new Ve,H=new $;let P=0;const L=D===!0?e:t,U=D===!0?1:-1;for(let ie=1;ie<=r;ie++)v.push(0,M*U,0),y.push(0,U,0),x.push(.5,.5),b++;const Y=b;for(let ie=0;ie<=r;ie++){const ae=ie/r*f+c,he=Math.cos(ae),X=Math.sin(ae);H.x=L*X,H.y=M*U,H.z=L*he,v.push(H.x,H.y,H.z),y.push(0,U,0),N.x=he*.5+.5,N.y=X*.5*U+.5,x.push(N.x,N.y),b++}for(let ie=0;ie<r;ie++){const Q=I+ie,ae=Y+ie;D===!0?m.push(ae,ae+1,Q):m.push(ae+1,ae,Q),P+=3}p.addGroup(A,P,D===!0?1:2),A+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pv extends dv{constructor(e=1,t=1,i=32,r=1,a=!1,o=0,c=Math.PI*2){super(0,e,t,i,r,a,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:c}}static fromJSON(e){return new pv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xu extends un{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],o=[];c(r),p(i),m(),this.setAttribute("position",new Lt(a,3)),this.setAttribute("normal",new Lt(a.slice(),3)),this.setAttribute("uv",new Lt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function c(w){const B=new $,D=new $,I=new $;for(let N=0;N<t.length;N+=3)x(t[N+0],B),x(t[N+1],D),x(t[N+2],I),f(B,D,I,w)}function f(w,B,D,I){const N=I+1,H=[];for(let P=0;P<=N;P++){H[P]=[];const L=w.clone().lerp(D,P/N),U=B.clone().lerp(D,P/N),Y=N-P;for(let ie=0;ie<=Y;ie++)ie===0&&P===N?H[P][ie]=L:H[P][ie]=L.clone().lerp(U,ie/Y)}for(let P=0;P<N;P++)for(let L=0;L<2*(N-P)-1;L++){const U=Math.floor(L/2);L%2===0?(y(H[P][U+1]),y(H[P+1][U]),y(H[P][U])):(y(H[P][U+1]),y(H[P+1][U+1]),y(H[P+1][U]))}}function p(w){const B=new $;for(let D=0;D<a.length;D+=3)B.x=a[D+0],B.y=a[D+1],B.z=a[D+2],B.normalize().multiplyScalar(w),a[D+0]=B.x,a[D+1]=B.y,a[D+2]=B.z}function m(){const w=new $;for(let B=0;B<a.length;B+=3){w.x=a[B+0],w.y=a[B+1],w.z=a[B+2];const D=M(w)/2/Math.PI+.5,I=A(w)/Math.PI+.5;o.push(D,1-I)}b(),v()}function v(){for(let w=0;w<o.length;w+=6){const B=o[w+0],D=o[w+2],I=o[w+4],N=Math.max(B,D,I),H=Math.min(B,D,I);N>.9&&H<.1&&(B<.2&&(o[w+0]+=1),D<.2&&(o[w+2]+=1),I<.2&&(o[w+4]+=1))}}function y(w){a.push(w.x,w.y,w.z)}function x(w,B){const D=w*3;B.x=e[D+0],B.y=e[D+1],B.z=e[D+2]}function b(){const w=new $,B=new $,D=new $,I=new $,N=new Ve,H=new Ve,P=new Ve;for(let L=0,U=0;L<a.length;L+=9,U+=6){w.set(a[L+0],a[L+1],a[L+2]),B.set(a[L+3],a[L+4],a[L+5]),D.set(a[L+6],a[L+7],a[L+8]),N.set(o[U+0],o[U+1]),H.set(o[U+2],o[U+3]),P.set(o[U+4],o[U+5]),I.copy(w).add(B).add(D).divideScalar(3);const Y=M(I);T(N,U+0,w,Y),T(H,U+2,B,Y),T(P,U+4,D,Y)}}function T(w,B,D,I){I<0&&w.x===1&&(o[B]=w.x-1),D.x===0&&D.z===0&&(o[B]=I/2/Math.PI+.5)}function M(w){return Math.atan2(w.z,-w.x)}function A(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.vertices,e.indices,e.radius,e.details)}}class Gx extends Xu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gx(e.radius,e.detail)}}const Oy=new $,Uy=new $,CS=new $,Ny=new as;class rB extends un{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(dh*t),o=e.getIndex(),c=e.getAttribute("position"),f=o?o.count:c.count,p=[0,0,0],m=["a","b","c"],v=new Array(3),y={},x=[];for(let b=0;b<f;b+=3){o?(p[0]=o.getX(b),p[1]=o.getX(b+1),p[2]=o.getX(b+2)):(p[0]=b,p[1]=b+1,p[2]=b+2);const{a:T,b:M,c:A}=Ny;if(T.fromBufferAttribute(c,p[0]),M.fromBufferAttribute(c,p[1]),A.fromBufferAttribute(c,p[2]),Ny.getNormal(CS),v[0]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,v[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,v[2]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let w=0;w<3;w++){const B=(w+1)%3,D=v[w],I=v[B],N=Ny[m[w]],H=Ny[m[B]],P=`${D}_${I}`,L=`${I}_${D}`;L in y&&y[L]?(CS.dot(y[L].normal)<=a&&(x.push(N.x,N.y,N.z),x.push(H.x,H.y,H.z)),y[L]=null):P in y||(y[P]={index0:p[w],index1:p[B],normal:CS.clone()})}}for(const b in y)if(y[b]){const{index0:T,index1:M}=y[b];Oy.fromBufferAttribute(c,T),Uy.fromBufferAttribute(c,M),x.push(Oy.x,Oy.y,Oy.z),x.push(Uy.x,Uy.y,Uy.z)}this.setAttribute("position",new Lt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Xo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let o;t?o=t:o=e*i[a-1];let c=0,f=a-1,p;for(;c<=f;)if(r=Math.floor(c+(f-c)/2),p=i[r]-o,p<0)c=r+1;else if(p>0)f=r-1;else{f=r;break}if(r=f,i[r]===o)return r/(a-1);const m=i[r],y=i[r+1]-m,x=(o-m)/y;return(r+x)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const o=this.getPoint(r),c=this.getPoint(a),f=t||(o.isVector2?new Ve:new $);return f.copy(c).sub(o).normalize(),f}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new $,r=[],a=[],o=[],c=new $,f=new qt;for(let x=0;x<=e;x++){const b=x/e;r[x]=this.getTangentAt(b,new $)}a[0]=new $,o[0]=new $;let p=Number.MAX_VALUE;const m=Math.abs(r[0].x),v=Math.abs(r[0].y),y=Math.abs(r[0].z);m<=p&&(p=m,i.set(1,0,0)),v<=p&&(p=v,i.set(0,1,0)),y<=p&&i.set(0,0,1),c.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],c),o[0].crossVectors(r[0],a[0]);for(let x=1;x<=e;x++){if(a[x]=a[x-1].clone(),o[x]=o[x-1].clone(),c.crossVectors(r[x-1],r[x]),c.length()>Number.EPSILON){c.normalize();const b=Math.acos(pn(r[x-1].dot(r[x]),-1,1));a[x].applyMatrix4(f.makeRotationAxis(c,b))}o[x].crossVectors(r[x],a[x])}if(t===!0){let x=Math.acos(pn(a[0].dot(a[e]),-1,1));x/=e,r[0].dot(c.crossVectors(a[0],a[e]))>0&&(x=-x);for(let b=1;b<=e;b++)a[b].applyMatrix4(f.makeRotationAxis(r[b],x*b)),o[b].crossVectors(r[b],a[b])}return{tangents:r,normals:a,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Vx extends Xo{constructor(e=0,t=0,i=1,r=1,a=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new Ve){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(o?a=0:a=r),this.aClockwise===!0&&!o&&(a===r?a=-r:a=a-r);const c=this.aStartAngle+e*a;let f=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const m=Math.cos(this.aRotation),v=Math.sin(this.aRotation),y=f-this.aX,x=p-this.aY;f=y*m-x*v+this.aX,p=y*v+x*m+this.aY}return i.set(f,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class aB extends Vx{constructor(e,t,i,r,a,o){super(e,t,i,i,r,a,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tE(){let n=0,e=0,t=0,i=0;function r(a,o,c,f){n=a,e=c,t=-3*a+3*o-2*c-f,i=2*a-2*o+c+f}return{initCatmullRom:function(a,o,c,f,p){r(o,c,p*(c-a),p*(f-o))},initNonuniformCatmullRom:function(a,o,c,f,p,m,v){let y=(o-a)/p-(c-a)/(p+m)+(c-o)/m,x=(c-o)/m-(f-o)/(m+v)+(f-c)/v;y*=m,x*=m,r(o,c,y,x)},calc:function(a){const o=a*a,c=o*a;return n+e*a+t*o+i*c}}}const Ly=new $,RS=new tE,wS=new tE,BS=new tE;class sB extends Xo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new $){const i=t,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/a)+1)*a:f===0&&c===a-1&&(c=a-2,f=1);let p,m;this.closed||c>0?p=r[(c-1)%a]:(Ly.subVectors(r[0],r[1]).add(r[0]),p=Ly);const v=r[c%a],y=r[(c+1)%a];if(this.closed||c+2<a?m=r[(c+2)%a]:(Ly.subVectors(r[a-1],r[a-2]).add(r[a-1]),m=Ly),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let b=Math.pow(p.distanceToSquared(v),x),T=Math.pow(v.distanceToSquared(y),x),M=Math.pow(y.distanceToSquared(m),x);T<1e-4&&(T=1),b<1e-4&&(b=T),M<1e-4&&(M=T),RS.initNonuniformCatmullRom(p.x,v.x,y.x,m.x,b,T,M),wS.initNonuniformCatmullRom(p.y,v.y,y.y,m.y,b,T,M),BS.initNonuniformCatmullRom(p.z,v.z,y.z,m.z,b,T,M)}else this.curveType==="catmullrom"&&(RS.initCatmullRom(p.x,v.x,y.x,m.x,this.tension),wS.initCatmullRom(p.y,v.y,y.y,m.y,this.tension),BS.initCatmullRom(p.z,v.z,y.z,m.z,this.tension));return i.set(RS.calc(f),wS.calc(f),BS.calc(f)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new $().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zT(n,e,t,i,r){const a=(i-e)*.5,o=(r-t)*.5,c=n*n,f=n*c;return(2*t-2*i+a+o)*f+(-3*t+3*i-2*a-o)*c+a*n+t}function oL(n,e){const t=1-n;return t*t*e}function lL(n,e){return 2*(1-n)*n*e}function cL(n,e){return n*n*e}function Og(n,e,t,i){return oL(n,e)+lL(n,t)+cL(n,i)}function uL(n,e){const t=1-n;return t*t*t*e}function fL(n,e){const t=1-n;return 3*t*t*n*e}function hL(n,e){return 3*(1-n)*n*n*e}function dL(n,e){return n*n*n*e}function Ug(n,e,t,i,r){return uL(n,e)+fL(n,t)+hL(n,i)+dL(n,r)}class nE extends Xo{constructor(e=new Ve,t=new Ve,i=new Ve,r=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ve){const i=t,r=this.v0,a=this.v1,o=this.v2,c=this.v3;return i.set(Ug(e,r.x,a.x,o.x,c.x),Ug(e,r.y,a.y,o.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oB extends Xo{constructor(e=new $,t=new $,i=new $,r=new $){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new $){const i=t,r=this.v0,a=this.v1,o=this.v2,c=this.v3;return i.set(Ug(e,r.x,a.x,o.x,c.x),Ug(e,r.y,a.y,o.y,c.y),Ug(e,r.z,a.z,o.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iE extends Xo{constructor(e=new Ve,t=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lB extends Xo{constructor(e=new $,t=new $){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new $){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rE extends Xo{constructor(e=new Ve,t=new Ve,i=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ve){const i=t,r=this.v0,a=this.v1,o=this.v2;return i.set(Og(e,r.x,a.x,o.x),Og(e,r.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aE extends Xo{constructor(e=new $,t=new $,i=new $){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $){const i=t,r=this.v0,a=this.v1,o=this.v2;return i.set(Og(e,r.x,a.x,o.x),Og(e,r.y,a.y,o.y),Og(e,r.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sE extends Xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const i=t,r=this.points,a=(r.length-1)*e,o=Math.floor(a),c=a-o,f=r[o===0?o:o-1],p=r[o],m=r[o>r.length-2?r.length-1:o+1],v=r[o>r.length-3?r.length-1:o+2];return i.set(zT(c,f.x,p.x,m.x,v.x),zT(c,f.y,p.y,m.y,v.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ve().fromArray(r))}return this}}var $_=Object.freeze({__proto__:null,ArcCurve:aB,CatmullRomCurve3:sB,CubicBezierCurve:nE,CubicBezierCurve3:oB,EllipseCurve:Vx,LineCurve:iE,LineCurve3:lB,QuadraticBezierCurve:rE,QuadraticBezierCurve3:aE,SplineCurve:sE});class cB extends Xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new $_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const o=r[a]-i,c=this.curves[a],f=c.getLength(),p=f===0?0:1-o/f;return c.getPointAt(p,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const o=a[r],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(c);for(let p=0;p<f.length;p++){const m=f[p];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new $_[r.type]().fromJSON(r))}return this}}class Q_ extends cB{constructor(e){super(),this.type="Path",this.currentPoint=new Ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new iE(this.currentPoint.clone(),new Ve(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new rE(this.currentPoint.clone(),new Ve(e,t),new Ve(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,o){const c=new nE(this.currentPoint.clone(),new Ve(e,t),new Ve(i,r),new Ve(a,o));return this.curves.push(c),this.currentPoint.set(a,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new sE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,i,r,a,o),this}absarc(e,t,i,r,a,o){return this.absellipse(e,t,i,i,r,a,o),this}ellipse(e,t,i,r,a,o,c,f){const p=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+p,t+m,i,r,a,o,c,f),this}absellipse(e,t,i,r,a,o,c,f){const p=new Vx(e,t,i,r,a,o,c,f);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const m=p.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ph extends Q_{constructor(e){super(e),this.uuid=Es(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Q_().fromJSON(r))}return this}}function pL(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=uB(n,0,r,t,!0);const o=[];if(!a||a.next===a.prev)return o;let c,f,p;if(i&&(a=_L(n,e,a,t)),n.length>80*t){c=1/0,f=1/0;let m=-1/0,v=-1/0;for(let y=t;y<r;y+=t){const x=n[y],b=n[y+1];x<c&&(c=x),b<f&&(f=b),x>m&&(m=x),b>v&&(v=b)}p=Math.max(m-c,v-f),p=p!==0?32767/p:0}return Wg(a,o,t,c,f,p,0),o}function uB(n,e,t,i,r){let a;if(r===BL(n,e,t,i)>0)for(let o=e;o<t;o+=i)a=FT(o/i|0,n[o],n[o+1],a);else for(let o=t-i;o>=e;o-=i)a=FT(o/i|0,n[o],n[o+1],a);return a&&Mp(a,a.next)&&(Kg(a),a=a.next),a}function Ah(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Mp(t,t.next)||Ki(t.prev,t,t.next)===0)){if(Kg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Wg(n,e,t,i,r,a,o){if(!n)return;!o&&a&&EL(n,i,r,a);let c=n;for(;n.prev!==n.next;){const f=n.prev,p=n.next;if(a?gL(n,i,r,a):mL(n)){e.push(f.i,n.i,p.i),Kg(n),n=p.next,c=p.next;continue}if(n=p,n===c){o?o===1?(n=vL(Ah(n),e),Wg(n,e,t,i,r,a,2)):o===2&&yL(n,e,t,i,r,a):Wg(Ah(n),e,t,i,r,a,1);break}}}function mL(n){const e=n.prev,t=n,i=n.next;if(Ki(e,t,i)>=0)return!1;const r=e.x,a=t.x,o=i.x,c=e.y,f=t.y,p=i.y,m=Math.min(r,a,o),v=Math.min(c,f,p),y=Math.max(r,a,o),x=Math.max(c,f,p);let b=i.next;for(;b!==e;){if(b.x>=m&&b.x<=y&&b.y>=v&&b.y<=x&&bg(r,c,a,f,o,p,b.x,b.y)&&Ki(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function gL(n,e,t,i){const r=n.prev,a=n,o=n.next;if(Ki(r,a,o)>=0)return!1;const c=r.x,f=a.x,p=o.x,m=r.y,v=a.y,y=o.y,x=Math.min(c,f,p),b=Math.min(m,v,y),T=Math.max(c,f,p),M=Math.max(m,v,y),A=W1(x,b,e,t,i),w=W1(T,M,e,t,i);let B=n.prevZ,D=n.nextZ;for(;B&&B.z>=A&&D&&D.z<=w;){if(B.x>=x&&B.x<=T&&B.y>=b&&B.y<=M&&B!==r&&B!==o&&bg(c,m,f,v,p,y,B.x,B.y)&&Ki(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=x&&D.x<=T&&D.y>=b&&D.y<=M&&D!==r&&D!==o&&bg(c,m,f,v,p,y,D.x,D.y)&&Ki(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=A;){if(B.x>=x&&B.x<=T&&B.y>=b&&B.y<=M&&B!==r&&B!==o&&bg(c,m,f,v,p,y,B.x,B.y)&&Ki(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=w;){if(D.x>=x&&D.x<=T&&D.y>=b&&D.y<=M&&D!==r&&D!==o&&bg(c,m,f,v,p,y,D.x,D.y)&&Ki(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function vL(n,e){let t=n;do{const i=t.prev,r=t.next.next;!Mp(i,r)&&hB(i,t,t.next,r)&&qg(i,r)&&qg(r,i)&&(e.push(i.i,t.i,r.i),Kg(t),Kg(t.next),t=n=r),t=t.next}while(t!==n);return Ah(t)}function yL(n,e,t,i,r,a){let o=n;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&CL(o,c)){let f=dB(o,c);o=Ah(o,o.next),f=Ah(f,f.next),Wg(o,e,t,i,r,a,0),Wg(f,e,t,i,r,a,0);return}c=c.next}o=o.next}while(o!==n)}function _L(n,e,t,i){const r=[];for(let a=0,o=e.length;a<o;a++){const c=e[a]*i,f=a<o-1?e[a+1]*i:n.length,p=uB(n,c,f,i,!1);p===p.next&&(p.steiner=!0),r.push(TL(p))}r.sort(xL);for(let a=0;a<r.length;a++)t=bL(r[a],t);return t}function xL(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function bL(n,e){const t=SL(n,e);if(!t)return e;const i=dB(t,n);return Ah(i,i.next),Ah(t,t.next)}function SL(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,o;if(Mp(n,t))return t;do{if(Mp(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const v=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>a&&(a=v,o=t.x<t.next.x?t:t.next,v===i))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,f=o.x,p=o.y;let m=1/0;t=o;do{if(i>=t.x&&t.x>=f&&i!==t.x&&fB(r<p?i:a,r,f,p,r<p?a:i,r,t.x,t.y)){const v=Math.abs(r-t.y)/(i-t.x);qg(t,n)&&(v<m||v===m&&(t.x>o.x||t.x===o.x&&AL(o,t)))&&(o=t,m=v)}t=t.next}while(t!==c);return o}function AL(n,e){return Ki(n.prev,n,e.prev)<0&&Ki(e.next,n,n.next)<0}function EL(n,e,t,i){let r=n;do r.z===0&&(r.z=W1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,ML(r)}function ML(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let o=i,c=0;for(let p=0;p<t&&(c++,o=o.nextZ,!!o);p++);let f=t;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||i.z<=o.z)?(r=i,i=i.nextZ,c--):(r=o,o=o.nextZ,f--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=o}a.nextZ=null,t*=2}while(e>1);return n}function W1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function TL(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function fB(n,e,t,i,r,a,o,c){return(r-o)*(e-c)>=(n-o)*(a-c)&&(n-o)*(i-c)>=(t-o)*(e-c)&&(t-o)*(a-c)>=(r-o)*(i-c)}function bg(n,e,t,i,r,a,o,c){return!(n===o&&e===c)&&fB(n,e,t,i,r,a,o,c)}function CL(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!RL(n,e)&&(qg(n,e)&&qg(e,n)&&wL(n,e)&&(Ki(n.prev,n,e.prev)||Ki(n,e.prev,e))||Mp(n,e)&&Ki(n.prev,n,n.next)>0&&Ki(e.prev,e,e.next)>0)}function Ki(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Mp(n,e){return n.x===e.x&&n.y===e.y}function hB(n,e,t,i){const r=Py(Ki(n,e,t)),a=Py(Ki(n,e,i)),o=Py(Ki(t,i,n)),c=Py(Ki(t,i,e));return!!(r!==a&&o!==c||r===0&&Iy(n,t,e)||a===0&&Iy(n,i,e)||o===0&&Iy(t,n,i)||c===0&&Iy(t,e,i))}function Iy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Py(n){return n>0?1:n<0?-1:0}function RL(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hB(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function qg(n,e){return Ki(n.prev,n,n.next)<0?Ki(n,e,n.next)>=0&&Ki(n,n.prev,e)>=0:Ki(n,e,n.prev)<0||Ki(n,n.next,e)<0}function wL(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function dB(n,e){const t=q1(n.i,n.x,n.y),i=q1(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function FT(n,e,t,i){const r=q1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Kg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function q1(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function BL(n,e,t,i){let r=0;for(let a=e,o=t-i;a<t;a+=i)r+=(n[o]-n[a])*(n[a+1]+n[o+1]),o=a;return r}class DL{static triangulate(e,t,i=2){return pL(e,t,i)}}class Io{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Io.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];HT(e),GT(i,e);let o=e.length;t.forEach(HT);for(let f=0;f<t.length;f++)r.push(o),o+=t[f].length,GT(i,t[f]);const c=DL.triangulate(i,r);for(let f=0;f<c.length;f+=3)a.push(c.slice(f,f+3));return a}}function HT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function GT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class kx extends un{constructor(e=new ph([new Ve(.5,.5),new Ve(-.5,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let c=0,f=e.length;c<f;c++){const p=e[c];o(p)}this.setAttribute("position",new Lt(r,3)),this.setAttribute("uv",new Lt(a,2)),this.computeVertexNormals();function o(c){const f=[],p=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:x-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:OL;let B,D=!1,I,N,H,P;A&&(B=A.getSpacedPoints(m),D=!0,y=!1,I=A.computeFrenetFrames(m,!1),N=new $,H=new $,P=new $),y||(M=0,x=0,b=0,T=0);const L=c.extractPoints(p);let U=L.shape;const Y=L.holes;if(!Io.isClockWise(U)){U=U.reverse();for(let Z=0,lt=Y.length;Z<lt;Z++){const et=Y[Z];Io.isClockWise(et)&&(Y[Z]=et.reverse())}}function Q(Z){const et=10000000000000001e-36;let Ze=Z[0];for(let je=1;je<=Z.length;je++){const yt=je%Z.length,Je=Z[yt],J=Je.x-Ze.x,k=Je.y-Ze.y,re=J*J+k*k,xe=Math.max(Math.abs(Je.x),Math.abs(Je.y),Math.abs(Ze.x),Math.abs(Ze.y)),Xe=et*xe*xe;if(re<=Xe){Z.splice(yt,1),je--;continue}Ze=Je}}Q(U),Y.forEach(Q);const ae=Y.length,he=U;for(let Z=0;Z<ae;Z++){const lt=Y[Z];U=U.concat(lt)}function X(Z,lt,et){return lt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(lt,et)}const te=U.length;function ne(Z,lt,et){let Ze,je,yt;const Je=Z.x-lt.x,J=Z.y-lt.y,k=et.x-Z.x,re=et.y-Z.y,xe=Je*Je+J*J,Xe=Je*re-J*k;if(Math.abs(Xe)>Number.EPSILON){const Be=Math.sqrt(xe),ut=Math.sqrt(k*k+re*re),ot=lt.x-J/Be,pt=lt.y+Je/Be,Pt=et.x-re/ut,at=et.y+k/ut,_t=((Pt-ot)*re-(at-pt)*k)/(Je*re-J*k);Ze=ot+Je*_t-Z.x,je=pt+J*_t-Z.y;const Et=Ze*Ze+je*je;if(Et<=2)return new Ve(Ze,je);yt=Math.sqrt(Et/2)}else{let Be=!1;Je>Number.EPSILON?k>Number.EPSILON&&(Be=!0):Je<-Number.EPSILON?k<-Number.EPSILON&&(Be=!0):Math.sign(J)===Math.sign(re)&&(Be=!0),Be?(Ze=-J,je=Je,yt=Math.sqrt(xe)):(Ze=Je,je=J,yt=Math.sqrt(xe/2))}return new Ve(Ze/yt,je/yt)}const be=[];for(let Z=0,lt=he.length,et=lt-1,Ze=Z+1;Z<lt;Z++,et++,Ze++)et===lt&&(et=0),Ze===lt&&(Ze=0),be[Z]=ne(he[Z],he[et],he[Ze]);const W=[];let se,Ae=be.concat();for(let Z=0,lt=ae;Z<lt;Z++){const et=Y[Z];se=[];for(let Ze=0,je=et.length,yt=je-1,Je=Ze+1;Ze<je;Ze++,yt++,Je++)yt===je&&(yt=0),Je===je&&(Je=0),se[Ze]=ne(et[Ze],et[yt],et[Je]);W.push(se),Ae=Ae.concat(se)}let De;if(M===0)De=Io.triangulateShape(he,Y);else{const Z=[],lt=[];for(let et=0;et<M;et++){const Ze=et/M,je=x*Math.cos(Ze*Math.PI/2),yt=b*Math.sin(Ze*Math.PI/2)+T;for(let Je=0,J=he.length;Je<J;Je++){const k=X(he[Je],be[Je],yt);Bt(k.x,k.y,-je),Ze===0&&Z.push(k)}for(let Je=0,J=ae;Je<J;Je++){const k=Y[Je];se=W[Je];const re=[];for(let xe=0,Xe=k.length;xe<Xe;xe++){const Be=X(k[xe],se[xe],yt);Bt(Be.x,Be.y,-je),Ze===0&&re.push(Be)}Ze===0&&lt.push(re)}}De=Io.triangulateShape(Z,lt)}const ge=De.length,He=b+T;for(let Z=0;Z<te;Z++){const lt=y?X(U[Z],Ae[Z],He):U[Z];D?(H.copy(I.normals[0]).multiplyScalar(lt.x),N.copy(I.binormals[0]).multiplyScalar(lt.y),P.copy(B[0]).add(H).add(N),Bt(P.x,P.y,P.z)):Bt(lt.x,lt.y,0)}for(let Z=1;Z<=m;Z++)for(let lt=0;lt<te;lt++){const et=y?X(U[lt],Ae[lt],He):U[lt];D?(H.copy(I.normals[Z]).multiplyScalar(et.x),N.copy(I.binormals[Z]).multiplyScalar(et.y),P.copy(B[Z]).add(H).add(N),Bt(P.x,P.y,P.z)):Bt(et.x,et.y,v/m*Z)}for(let Z=M-1;Z>=0;Z--){const lt=Z/M,et=x*Math.cos(lt*Math.PI/2),Ze=b*Math.sin(lt*Math.PI/2)+T;for(let je=0,yt=he.length;je<yt;je++){const Je=X(he[je],be[je],Ze);Bt(Je.x,Je.y,v+et)}for(let je=0,yt=Y.length;je<yt;je++){const Je=Y[je];se=W[je];for(let J=0,k=Je.length;J<k;J++){const re=X(Je[J],se[J],Ze);D?Bt(re.x,re.y+B[m-1].y,B[m-1].x+et):Bt(re.x,re.y,v+et)}}}Le(),Qe();function Le(){const Z=r.length/3;if(y){let lt=0,et=te*lt;for(let Ze=0;Ze<ge;Ze++){const je=De[Ze];wt(je[2]+et,je[1]+et,je[0]+et)}lt=m+M*2,et=te*lt;for(let Ze=0;Ze<ge;Ze++){const je=De[Ze];wt(je[0]+et,je[1]+et,je[2]+et)}}else{for(let lt=0;lt<ge;lt++){const et=De[lt];wt(et[2],et[1],et[0])}for(let lt=0;lt<ge;lt++){const et=De[lt];wt(et[0]+te*m,et[1]+te*m,et[2]+te*m)}}i.addGroup(Z,r.length/3-Z,0)}function Qe(){const Z=r.length/3;let lt=0;rt(he,lt),lt+=he.length;for(let et=0,Ze=Y.length;et<Ze;et++){const je=Y[et];rt(je,lt),lt+=je.length}i.addGroup(Z,r.length/3-Z,1)}function rt(Z,lt){let et=Z.length;for(;--et>=0;){const Ze=et;let je=et-1;je<0&&(je=Z.length-1);for(let yt=0,Je=m+M*2;yt<Je;yt++){const J=te*yt,k=te*(yt+1),re=lt+Ze+J,xe=lt+je+J,Xe=lt+je+k,Be=lt+Ze+k;fn(re,xe,Xe,Be)}}}function Bt(Z,lt,et){f.push(Z),f.push(lt),f.push(et)}function wt(Z,lt,et){Vt(Z),Vt(lt),Vt(et);const Ze=r.length/3,je=w.generateTopUV(i,r,Ze-3,Ze-2,Ze-1);Rt(je[0]),Rt(je[1]),Rt(je[2])}function fn(Z,lt,et,Ze){Vt(Z),Vt(lt),Vt(Ze),Vt(lt),Vt(et),Vt(Ze);const je=r.length/3,yt=w.generateSideWallUV(i,r,je-6,je-3,je-2,je-1);Rt(yt[0]),Rt(yt[1]),Rt(yt[3]),Rt(yt[1]),Rt(yt[2]),Rt(yt[3])}function Vt(Z){r.push(f[Z*3+0]),r.push(f[Z*3+1]),r.push(f[Z*3+2])}function Rt(Z){a.push(Z.x),a.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return UL(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,o=e.shapes.length;a<o;a++){const c=t[e.shapes[a]];i.push(c)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new $_[r.type]().fromJSON(r)),new kx(i,e.options)}}const OL={generateTopUV:function(n,e,t,i,r){const a=e[t*3],o=e[t*3+1],c=e[i*3],f=e[i*3+1],p=e[r*3],m=e[r*3+1];return[new Ve(a,o),new Ve(c,f),new Ve(p,m)]},generateSideWallUV:function(n,e,t,i,r,a){const o=e[t*3],c=e[t*3+1],f=e[t*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],y=e[r*3],x=e[r*3+1],b=e[r*3+2],T=e[a*3],M=e[a*3+1],A=e[a*3+2];return Math.abs(c-m)<Math.abs(o-p)?[new Ve(o,1-f),new Ve(p,1-v),new Ve(y,1-b),new Ve(T,1-A)]:[new Ve(c,1-f),new Ve(m,1-v),new Ve(x,1-b),new Ve(M,1-A)]}};function UL(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class mv extends Xu{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mv(e.radius,e.detail)}}class Xx extends un{constructor(e=[new Ve(0,-.5),new Ve(.5,0),new Ve(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=pn(r,0,Math.PI*2);const a=[],o=[],c=[],f=[],p=[],m=1/t,v=new $,y=new Ve,x=new $,b=new $,T=new $;let M=0,A=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:M=e[w+1].x-e[w].x,A=e[w+1].y-e[w].y,x.x=A*1,x.y=-M,x.z=A*0,T.copy(x),x.normalize(),f.push(x.x,x.y,x.z);break;case e.length-1:f.push(T.x,T.y,T.z);break;default:M=e[w+1].x-e[w].x,A=e[w+1].y-e[w].y,x.x=A*1,x.y=-M,x.z=A*0,b.copy(x),x.x+=T.x,x.y+=T.y,x.z+=T.z,x.normalize(),f.push(x.x,x.y,x.z),T.copy(b)}for(let w=0;w<=t;w++){const B=i+w*m*r,D=Math.sin(B),I=Math.cos(B);for(let N=0;N<=e.length-1;N++){v.x=e[N].x*D,v.y=e[N].y,v.z=e[N].x*I,o.push(v.x,v.y,v.z),y.x=w/t,y.y=N/(e.length-1),c.push(y.x,y.y);const H=f[3*N+0]*D,P=f[3*N+1],L=f[3*N+0]*I;p.push(H,P,L)}}for(let w=0;w<t;w++)for(let B=0;B<e.length-1;B++){const D=B+w*e.length,I=D,N=D+e.length,H=D+e.length+1,P=D+1;a.push(I,N,P),a.push(H,P,N)}this.setIndex(a),this.setAttribute("position",new Lt(o,3)),this.setAttribute("uv",new Lt(c,2)),this.setAttribute("normal",new Lt(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xx(e.points,e.segments,e.phiStart,e.phiLength)}}class gv extends Xu{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gv(e.radius,e.detail)}}class Tc extends un{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,o=t/2,c=Math.floor(i),f=Math.floor(r),p=c+1,m=f+1,v=e/c,y=t/f,x=[],b=[],T=[],M=[];for(let A=0;A<m;A++){const w=A*y-o;for(let B=0;B<p;B++){const D=B*v-a;b.push(D,-w,0),T.push(0,0,1),M.push(B/c),M.push(1-A/f)}}for(let A=0;A<f;A++)for(let w=0;w<c;w++){const B=w+p*A,D=w+p*(A+1),I=w+1+p*(A+1),N=w+1+p*A;x.push(B,D,N),x.push(D,I,N)}this.setIndex(x),this.setAttribute("position",new Lt(b,3)),this.setAttribute("normal",new Lt(T,3)),this.setAttribute("uv",new Lt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tc(e.width,e.height,e.widthSegments,e.heightSegments)}}class Yx extends un{constructor(e=.5,t=1,i=32,r=1,a=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const c=[],f=[],p=[],m=[];let v=e;const y=(t-e)/r,x=new $,b=new Ve;for(let T=0;T<=r;T++){for(let M=0;M<=i;M++){const A=a+M/i*o;x.x=v*Math.cos(A),x.y=v*Math.sin(A),f.push(x.x,x.y,x.z),p.push(0,0,1),b.x=(x.x/t+1)/2,b.y=(x.y/t+1)/2,m.push(b.x,b.y)}v+=y}for(let T=0;T<r;T++){const M=T*(i+1);for(let A=0;A<i;A++){const w=A+M,B=w,D=w+i+1,I=w+i+2,N=w+1;c.push(B,D,N),c.push(D,I,N)}}this.setIndex(c),this.setAttribute("position",new Lt(f,3)),this.setAttribute("normal",new Lt(p,3)),this.setAttribute("uv",new Lt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class jx extends un{constructor(e=new ph([new Ve(0,.5),new Ve(-.5,-.5),new Ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],o=[];let c=0,f=0;if(Array.isArray(e)===!1)p(e);else for(let m=0;m<e.length;m++)p(e[m]),this.addGroup(c,f,m),c+=f,f=0;this.setIndex(i),this.setAttribute("position",new Lt(r,3)),this.setAttribute("normal",new Lt(a,3)),this.setAttribute("uv",new Lt(o,2));function p(m){const v=r.length/3,y=m.extractPoints(t);let x=y.shape;const b=y.holes;Io.isClockWise(x)===!1&&(x=x.reverse());for(let M=0,A=b.length;M<A;M++){const w=b[M];Io.isClockWise(w)===!0&&(b[M]=w.reverse())}const T=Io.triangulateShape(x,b);for(let M=0,A=b.length;M<A;M++){const w=b[M];x=x.concat(w)}for(let M=0,A=x.length;M<A;M++){const w=x[M];r.push(w.x,w.y,0),a.push(0,0,1),o.push(w.x,w.y)}for(let M=0,A=T.length;M<A;M++){const w=T[M],B=w[0]+v,D=w[1]+v,I=w[2]+v;i.push(B,D,I),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return NL(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=t[e.shapes[r]];i.push(o)}return new jx(i,e.curveSegments)}}function NL(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class vv extends un{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const f=Math.min(o+c,Math.PI);let p=0;const m=[],v=new $,y=new $,x=[],b=[],T=[],M=[];for(let A=0;A<=i;A++){const w=[],B=A/i;let D=0;A===0&&o===0?D=.5/t:A===i&&f===Math.PI&&(D=-.5/t);for(let I=0;I<=t;I++){const N=I/t;v.x=-e*Math.cos(r+N*a)*Math.sin(o+B*c),v.y=e*Math.cos(o+B*c),v.z=e*Math.sin(r+N*a)*Math.sin(o+B*c),b.push(v.x,v.y,v.z),y.copy(v).normalize(),T.push(y.x,y.y,y.z),M.push(N+D,1-B),w.push(p++)}m.push(w)}for(let A=0;A<i;A++)for(let w=0;w<t;w++){const B=m[A][w+1],D=m[A][w],I=m[A+1][w],N=m[A+1][w+1];(A!==0||o>0)&&x.push(B,D,N),(A!==i-1||f<Math.PI)&&x.push(D,I,N)}this.setIndex(x),this.setAttribute("position",new Lt(b,3)),this.setAttribute("normal",new Lt(T,3)),this.setAttribute("uv",new Lt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Wx extends Xu{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wx(e.radius,e.detail)}}class qx extends un{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const o=[],c=[],f=[],p=[],m=new $,v=new $,y=new $;for(let x=0;x<=i;x++)for(let b=0;b<=r;b++){const T=b/r*a,M=x/i*Math.PI*2;v.x=(e+t*Math.cos(M))*Math.cos(T),v.y=(e+t*Math.cos(M))*Math.sin(T),v.z=t*Math.sin(M),c.push(v.x,v.y,v.z),m.x=e*Math.cos(T),m.y=e*Math.sin(T),y.subVectors(v,m).normalize(),f.push(y.x,y.y,y.z),p.push(b/r),p.push(x/i)}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const T=(r+1)*x+b-1,M=(r+1)*(x-1)+b-1,A=(r+1)*(x-1)+b,w=(r+1)*x+b;o.push(T,M,w),o.push(M,A,w)}this.setIndex(o),this.setAttribute("position",new Lt(c,3)),this.setAttribute("normal",new Lt(f,3)),this.setAttribute("uv",new Lt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Kx extends un{constructor(e=1,t=.4,i=64,r=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:o},i=Math.floor(i),r=Math.floor(r);const c=[],f=[],p=[],m=[],v=new $,y=new $,x=new $,b=new $,T=new $,M=new $,A=new $;for(let B=0;B<=i;++B){const D=B/i*a*Math.PI*2;w(D,a,o,e,x),w(D+.01,a,o,e,b),M.subVectors(b,x),A.addVectors(b,x),T.crossVectors(M,A),A.crossVectors(T,M),T.normalize(),A.normalize();for(let I=0;I<=r;++I){const N=I/r*Math.PI*2,H=-t*Math.cos(N),P=t*Math.sin(N);v.x=x.x+(H*A.x+P*T.x),v.y=x.y+(H*A.y+P*T.y),v.z=x.z+(H*A.z+P*T.z),f.push(v.x,v.y,v.z),y.subVectors(v,x).normalize(),p.push(y.x,y.y,y.z),m.push(B/i),m.push(I/r)}}for(let B=1;B<=i;B++)for(let D=1;D<=r;D++){const I=(r+1)*(B-1)+(D-1),N=(r+1)*B+(D-1),H=(r+1)*B+D,P=(r+1)*(B-1)+D;c.push(I,N,P),c.push(N,H,P)}this.setIndex(c),this.setAttribute("position",new Lt(f,3)),this.setAttribute("normal",new Lt(p,3)),this.setAttribute("uv",new Lt(m,2));function w(B,D,I,N,H){const P=Math.cos(B),L=Math.sin(B),U=I/D*B,Y=Math.cos(U);H.x=N*(2+Y)*.5*P,H.y=N*(2+Y)*L*.5,H.z=N*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Jx extends un{constructor(e=new aE(new $(-1,-1,0),new $(-1,1,0),new $(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new $,f=new $,p=new Ve;let m=new $;const v=[],y=[],x=[],b=[];T(),this.setIndex(b),this.setAttribute("position",new Lt(v,3)),this.setAttribute("normal",new Lt(y,3)),this.setAttribute("uv",new Lt(x,2));function T(){for(let B=0;B<t;B++)M(B);M(a===!1?t:0),w(),A()}function M(B){m=e.getPointAt(B/t,m);const D=o.normals[B],I=o.binormals[B];for(let N=0;N<=r;N++){const H=N/r*Math.PI*2,P=Math.sin(H),L=-Math.cos(H);f.x=L*D.x+P*I.x,f.y=L*D.y+P*I.y,f.z=L*D.z+P*I.z,f.normalize(),y.push(f.x,f.y,f.z),c.x=m.x+i*f.x,c.y=m.y+i*f.y,c.z=m.z+i*f.z,v.push(c.x,c.y,c.z)}}function A(){for(let B=1;B<=t;B++)for(let D=1;D<=r;D++){const I=(r+1)*(B-1)+(D-1),N=(r+1)*B+(D-1),H=(r+1)*B+D,P=(r+1)*(B-1)+D;b.push(I,N,P),b.push(N,H,P)}}function w(){for(let B=0;B<=t;B++)for(let D=0;D<=r;D++)p.x=B/t,p.y=D/r,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Jx(new $_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class pB extends un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new $,a=new $;if(e.index!==null){const o=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,m=f.length;p<m;++p){const v=f[p],y=v.start,x=v.count;for(let b=y,T=y+x;b<T;b+=3)for(let M=0;M<3;M++){const A=c.getX(b+M),w=c.getX(b+(M+1)%3);r.fromBufferAttribute(o,A),a.fromBufferAttribute(o,w),VT(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const o=e.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let p=0;p<3;p++){const m=3*c+p,v=3*c+(p+1)%3;r.fromBufferAttribute(o,m),a.fromBufferAttribute(o,v),VT(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Lt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function VT(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var kT=Object.freeze({__proto__:null,BoxGeometry:Uh,CapsuleGeometry:Fx,CircleGeometry:Hx,ConeGeometry:pv,CylinderGeometry:dv,DodecahedronGeometry:Gx,EdgesGeometry:rB,ExtrudeGeometry:kx,IcosahedronGeometry:mv,LatheGeometry:Xx,OctahedronGeometry:gv,PlaneGeometry:Tc,PolyhedronGeometry:Xu,RingGeometry:Yx,ShapeGeometry:jx,SphereGeometry:vv,TetrahedronGeometry:Wx,TorusGeometry:qx,TorusKnotGeometry:Kx,TubeGeometry:Jx,WireframeGeometry:pB});class mB extends fr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class gB extends Pi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class yv extends fr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class to extends yv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class vB extends fr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yB extends fr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oE extends fr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _B extends fr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=iv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zx extends fr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Vu,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class lE extends fr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class xB extends fr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ku,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bB extends _a{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lh(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function SB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function AB(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function K1(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,o=0;o!==i;++a){const c=t[a]*e;for(let f=0;f!==e;++f)r[o++]=n[c+f]}return r}function cE(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(e.push(a.time),t.push(...o)),a=n[r++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(e.push(a.time),o.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do o=a[i],o!==void 0&&(e.push(a.time),t.push(o)),a=n[r++];while(a!==void 0)}function LL(n,e,t,i,r=30){const a=n.clone();a.name=e;const o=[];for(let f=0;f<a.tracks.length;++f){const p=a.tracks[f],m=p.getValueSize(),v=[],y=[];for(let x=0;x<p.times.length;++x){const b=p.times[x]*r;if(!(b<t||b>=i)){v.push(p.times[x]);for(let T=0;T<m;++T)y.push(p.values[x*m+T])}}v.length!==0&&(p.times=lh(v,p.times.constructor),p.values=lh(y,p.values.constructor),o.push(p))}a.tracks=o;let c=1/0;for(let f=0;f<a.tracks.length;++f)c>a.tracks[f].times[0]&&(c=a.tracks[f].times[0]);for(let f=0;f<a.tracks.length;++f)a.tracks[f].shift(-1*c);return a.resetDuration(),a}function IL(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let o=0;o<r;++o){const c=t.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const p=n.tracks.find(function(A){return A.name===c.name&&A.ValueTypeName===f});if(p===void 0)continue;let m=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);let y=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);const b=c.times.length-1;let T;if(a<=c.times[0]){const A=m,w=v-m;T=c.values.slice(A,w)}else if(a>=c.times[b]){const A=b*v+m,w=A+v-m;T=c.values.slice(A,w)}else{const A=c.createInterpolant(),w=m,B=v-m;A.evaluate(a),T=A.resultBuffer.slice(w,B)}f==="quaternion"&&new Gr().fromArray(T).normalize().conjugate().toArray(T);const M=p.times.length;for(let A=0;A<M;++A){const w=A*x+y;if(f==="quaternion")Gr.multiplyQuaternionsFlat(p.values,w,T,0,p.values,w);else{const B=x-y*2;for(let D=0;D<B;++D)p.values[w+D]-=T[D]}}}return n.blendMode=kA,n}class PL{static convertArray(e,t){return lh(e,t)}static isTypedArray(e){return SB(e)}static getKeyframeOrder(e){return AB(e)}static sortedArray(e,t,i){return K1(e,t,i)}static flattenJSON(e,t,i,r){cE(e,t,i,r)}static subclip(e,t,i,r,a=30){return LL(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return IL(e,t,i,r)}}class Op{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let c=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(a=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=a)){const c=t[1];e<c&&(i=2,a=c);for(let f=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===f)break;if(r=a,a=t[--i-1],e>=a)break t}o=i,i=0;break n}break e}for(;i<o;){const c=i+o>>>1;e<t[c]?o=c:i=c+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let o=0;o!==r;++o)t[o]=i[a+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class EB extends Op{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ah,endingEnd:ah}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,o=e+1,c=r[a],f=r[o];if(c===void 0)switch(this.getSettings_().endingStart){case sh:a=e,c=2*t-i;break;case Vg:a=r.length-2,c=t+r[a]-r[a+1];break;default:a=e,c=i}if(f===void 0)switch(this.getSettings_().endingEnd){case sh:o=e,f=2*i-t;break;case Vg:o=1,f=i+r[1]-r[0];break;default:o=e-1,f=t}const p=(i-t)*.5,m=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(f-i),this._offsetPrev=a*m,this._offsetNext=o*m}interpolate_(e,t,i,r){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,x=this._weightNext,b=(i-t)/(r-t),T=b*b,M=T*b,A=-y*M+2*y*T-y*b,w=(1+y)*M+(-1.5-2*y)*T+(-.5+y)*b+1,B=(-1-x)*M+(1.5+x)*T+.5*b,D=x*M-x*T;for(let I=0;I!==c;++I)a[I]=A*o[m+I]+w*o[p+I]+B*o[f+I]+D*o[v+I];return a}}class uE extends Op{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,p=f-c,m=(i-t)/(r-t),v=1-m;for(let y=0;y!==c;++y)a[y]=o[p+y]*v+o[f+y]*m;return a}}class MB extends Op{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class no{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lh(t,this.TimeBufferType),this.values=lh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:lh(e.times,Array),values:lh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new MB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new uE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new EB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xp:t=this.InterpolantFactoryMethodDiscrete;break;case bp:t=this.InterpolantFactoryMethodLinear;break;case o_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xp;case this.InterpolantFactoryMethodLinear:return bp;case this.InterpolantFactoryMethodSmooth:return o_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,o=r-1;for(;a!==r&&i[a]<e;)++a;for(;o!==-1&&i[o]>t;)--o;if(++o,a!==0||o!==r){a>=o&&(o=Math.max(o,1),a=o-1);const c=this.getValueSize();this.times=i.slice(a,o),this.values=this.values.slice(a*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==a;c++){const f=i[c];if(typeof f=="number"&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(o!==null&&o>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,f,o),e=!1;break}o=f}if(r!==void 0&&SB(r))for(let c=0,f=r.length;c!==f;++c){const p=r[c];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===o_,a=e.length-1;let o=1;for(let c=1;c<a;++c){let f=!1;const p=e[c],m=e[c+1];if(p!==m&&(c!==1||p!==e[0]))if(r)f=!0;else{const v=c*i,y=v-i,x=v+i;for(let b=0;b!==i;++b){const T=t[v+b];if(T!==t[y+b]||T!==t[x+b]){f=!0;break}}}if(f){if(c!==o){e[o]=e[c];const v=c*i,y=o*i;for(let x=0;x!==i;++x)t[y+x]=t[v+x]}++o}}if(a>0){e[o]=e[a];for(let c=a*i,f=o*i,p=0;p!==i;++p)t[f+p]=t[c+p];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}no.prototype.ValueTypeName="";no.prototype.TimeBufferType=Float32Array;no.prototype.ValueBufferType=Float32Array;no.prototype.DefaultInterpolation=bp;class Nh extends no{constructor(e,t,i){super(e,t,i)}}Nh.prototype.ValueTypeName="bool";Nh.prototype.ValueBufferType=Array;Nh.prototype.DefaultInterpolation=xp;Nh.prototype.InterpolantFactoryMethodLinear=void 0;Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class fE extends no{constructor(e,t,i,r){super(e,t,i,r)}}fE.prototype.ValueTypeName="color";class Eh extends no{constructor(e,t,i,r){super(e,t,i,r)}}Eh.prototype.ValueTypeName="number";class TB extends Op{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(i-t)/(r-t);let p=e*c;for(let m=p+c;p!==m;p+=4)Gr.slerpFlat(a,0,o,p-c,o,p,f);return a}}class Mh extends no{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new TB(this.times,this.values,this.getValueSize(),e)}}Mh.prototype.ValueTypeName="quaternion";Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class Lh extends no{constructor(e,t,i){super(e,t,i)}}Lh.prototype.ValueTypeName="string";Lh.prototype.ValueBufferType=Array;Lh.prototype.DefaultInterpolation=xp;Lh.prototype.InterpolantFactoryMethodLinear=void 0;Lh.prototype.InterpolantFactoryMethodSmooth=void 0;class Th extends no{constructor(e,t,i,r){super(e,t,i,r)}}Th.prototype.ValueTypeName="vector";class Tp{constructor(e="",t=-1,i=[],r=Bx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Es(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,c=i.length;o!==c;++o)t.push(FL(i[o]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,o=i.length;a!==o;++a)t.push(no.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,o=[];for(let c=0;c<a;c++){let f=[],p=[];f.push((c+a-1)%a,c,(c+1)%a),p.push(0,1,0);const m=AB(f);f=K1(f,1,m),p=K1(p,1,m),!r&&f[0]===0&&(f.push(a),p.push(p[0])),o.push(new Eh(".morphTargetInfluences["+t[c].name+"]",f,p).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const p=e[c],m=p.name.match(a);if(m&&m.length>1){const v=m[1];let y=r[v];y||(r[v]=y=[]),y.push(p)}}const o=[];for(const c in r)o.push(this.CreateFromMorphTargetSequence(c,r[c],t,i));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(v,y,x,b,T){if(x.length!==0){const M=[],A=[];cE(x,M,A,b),M.length!==0&&T.push(new v(y,M,A))}},r=[],a=e.name||"default",o=e.fps||30,c=e.blendMode;let f=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const y=p[v].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const x={};let b;for(b=0;b<y.length;b++)if(y[b].morphTargets)for(let T=0;T<y[b].morphTargets.length;T++)x[y[b].morphTargets[T]]=-1;for(const T in x){const M=[],A=[];for(let w=0;w!==y[b].morphTargets.length;++w){const B=y[b];M.push(B.time),A.push(B.morphTarget===T?1:0)}r.push(new Eh(".morphTargetInfluence["+T+"]",M,A))}f=x.length*o}else{const x=".bones["+t[v].name+"]";i(Th,x+".position",y,"pos",r),i(Mh,x+".quaternion",y,"rot",r),i(Th,x+".scale",y,"scl",r)}}return r.length===0?null:new this(a,f,r,c)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zL(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Eh;case"vector":case"vector2":case"vector3":case"vector4":return Th;case"color":return fE;case"quaternion":return Mh;case"bool":case"boolean":return Nh;case"string":return Lh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function FL(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zL(n.type);if(n.times===void 0){const t=[],i=[];cE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $x{constructor(e,t,i){const r=this;let a=!1,o=0,c=0,f;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){c++,a===!1&&r.onStart!==void 0&&r.onStart(m,o,c),a=!0},this.itemEnd=function(m){o++,r.onProgress!==void 0&&r.onProgress(m,o,c),o===c&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(m){r.onError!==void 0&&r.onError(m)},this.resolveURL=function(m){return f?f(m):m},this.setURLModifier=function(m){return f=m,this},this.addHandler=function(m,v){return p.push(m,v),this},this.removeHandler=function(m){const v=p.indexOf(m);return v!==-1&&p.splice(v,2),this},this.getHandler=function(m){for(let v=0,y=p.length;v<y;v+=2){const x=p[v],b=p[v+1];if(x.global&&(x.lastIndex=0),x.test(m))return b}return null}}}const CB=new $x;class na{constructor(e){this.manager=e!==void 0?e:CB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}na.DEFAULT_MATERIAL_NAME="__DEFAULT";const lc={};class HL extends Error{constructor(e,t){super(e),this.response=t}}class ta extends na{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=vc.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(lc[e]!==void 0){lc[e].push({onLoad:t,onProgress:i,onError:r});return}lc[e]=[],lc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,f=this.responseType;fetch(o).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const m=lc[e],v=p.body.getReader(),y=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=y?parseInt(y):0,b=x!==0;let T=0;const M=new ReadableStream({start(A){w();function w(){v.read().then(({done:B,value:D})=>{if(B)A.close();else{T+=D.byteLength;const I=new ProgressEvent("progress",{lengthComputable:b,loaded:T,total:x});for(let N=0,H=m.length;N<H;N++){const P=m[N];P.onProgress&&P.onProgress(I)}A.enqueue(D),w()}},B=>{A.error(B)})}}});return new Response(M)}else throw new HL(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(f){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(m=>new DOMParser().parseFromString(m,c));case"json":return p.json();default:if(c==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),y=v&&v[1]?v[1].toLowerCase():void 0,x=new TextDecoder(y);return p.arrayBuffer().then(b=>x.decode(b))}}}).then(p=>{vc.add(e,p);const m=lc[e];delete lc[e];for(let v=0,y=m.length;v<y;v++){const x=m[v];x.onLoad&&x.onLoad(p)}}).catch(p=>{const m=lc[e];if(m===void 0)throw this.manager.itemError(e),p;delete lc[e];for(let v=0,y=m.length;v<y;v++){const x=m[v];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class GL extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=new ta(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Tp.parse(e[i]);t.push(r)}return t}}class VL extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=[],c=new zx,f=new ta(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(a.withCredentials);let p=0;function m(v){f.load(e[v],function(y){const x=a.parse(y,!0);o[v]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(c.minFilter=Fn),c.image=o,c.format=x.format,c.needsUpdate=!0,t&&t(c))},i,r)}if(Array.isArray(e))for(let v=0,y=e.length;v<y;++v)m(v);else f.load(e,function(v){const y=a.parse(v,!0);if(y.isCubemap){const x=y.mipmaps.length/y.mipmapCount;for(let b=0;b<x;b++){o[b]={mipmaps:[]};for(let T=0;T<y.mipmapCount;T++)o[b].mipmaps.push(y.mipmaps[b*y.mipmapCount+T]),o[b].format=y.format,o[b].width=y.width,o[b].height=y.height}c.image=o}else c.image.width=y.width,c.image.height=y.height,c.mipmaps=y.mipmaps;y.mipmapCount===1&&(c.minFilter=Fn),c.format=y.format,c.needsUpdate=!0,t&&t(c)},i,r);return c}}class Jg extends na{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=vc.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;const c=jg("img");function f(){m(),vc.add(e,this),t&&t(this),a.manager.itemEnd(e)}function p(v){m(),r&&r(v),a.manager.itemError(e),a.manager.itemEnd(e)}function m(){c.removeEventListener("load",f,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),a.manager.itemStart(e),c.src=e,c}}class RB extends na{constructor(e){super(e)}load(e,t,i,r){const a=new cv;a.colorSpace=Wn;const o=new Jg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(p){o.load(e[p],function(m){a.images[p]=m,c++,c===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let p=0;p<e.length;++p)f(p);return a}}class hE extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=new zo,c=new ta(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(a.withCredentials),c.load(e,function(f){let p;try{p=a.parse(f)}catch(m){if(r!==void 0)r(m);else{console.error(m);return}}p.image!==void 0?o.image=p.image:p.data!==void 0&&(o.image.width=p.width,o.image.height=p.height,o.image.data=p.data),o.wrapS=p.wrapS!==void 0?p.wrapS:cr,o.wrapT=p.wrapT!==void 0?p.wrapT:cr,o.magFilter=p.magFilter!==void 0?p.magFilter:Fn,o.minFilter=p.minFilter!==void 0?p.minFilter:Fn,o.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(o.colorSpace=p.colorSpace),p.flipY!==void 0&&(o.flipY=p.flipY),p.format!==void 0&&(o.format=p.format),p.type!==void 0&&(o.type=p.type),p.mipmaps!==void 0&&(o.mipmaps=p.mipmaps,o.minFilter=$s),p.mipmapCount===1&&(o.minFilter=Fn),p.generateMipmaps!==void 0&&(o.generateMipmaps=p.generateMipmaps),o.needsUpdate=!0,t&&t(o,p)},i,r),o}}class wB extends na{constructor(e){super(e)}load(e,t,i,r){const a=new ei,o=new Jg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){a.image=c,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class Yu extends Hn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class BB extends Yu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DS=new qt,XT=new $,YT=new $;class dE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.mapType=nr,this.map=null,this.mapPass=null,this.matrix=new qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dp,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;XT.setFromMatrixPosition(e.matrixWorld),t.position.copy(XT),YT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(YT),t.updateMatrixWorld(),DS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(DS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kL extends dE{constructor(){super(new qi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Sp*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class pE extends Yu{constructor(e,t,i=0,r=Math.PI/3,a=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=o,this.map=null,this.shadow=new kL}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jT=new qt,dg=new $,OS=new $;class XL extends dE{constructor(){super(new qi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new zn(2,1,1,1),new zn(0,1,1,1),new zn(3,1,1,1),new zn(1,1,1,1),new zn(3,0,1,1),new zn(1,0,1,1)],this._cubeDirections=[new $(1,0,0),new $(-1,0,0),new $(0,0,1),new $(0,0,-1),new $(0,1,0),new $(0,-1,0)],this._cubeUps=[new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,1,0),new $(0,0,1),new $(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),dg.setFromMatrixPosition(e.matrixWorld),i.position.copy(dg),OS.copy(i.position),OS.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(OS),i.updateMatrixWorld(),r.makeTranslation(-dg.x,-dg.y,-dg.z),jT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jT)}}class mE extends Yu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new XL}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Bl extends lv{constructor(e=-1,t=1,i=1,r=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,o=i+e,c=r+t,f=r-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,o=a+p*this.view.width,c-=m*this.view.offsetY,f=c-m*this.view.height}this.projectionMatrix.makeOrthographic(a,o,c,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class YL extends dE{constructor(){super(new Bl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gE extends Yu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hn.DEFAULT_UP),this.updateMatrix(),this.target=new Hn,this.shadow=new YL}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class DB extends Yu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OB extends Yu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class UB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new $)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*a),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*a)),t.addScaledVector(o[6],.315392*(3*a*a-1)),t.addScaledVector(o[7],1.092548*(i*a)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*a),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*a),t.addScaledVector(o[6],.743125*a*a-.247708),t.addScaledVector(o[7],2*.429043*i*a),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class NB extends Yu{constructor(e=new UB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Qx extends na{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,o=new ta(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=new xt().setHex(o.value);break;case"v2":r.uniforms[a].value=new Ve().fromArray(o.value);break;case"v3":r.uniforms[a].value=new $().fromArray(o.value);break;case"v4":r.uniforms[a].value=new zn().fromArray(o.value);break;case"m3":r.uniforms[a].value=new yn().fromArray(o.value);break;case"m4":r.uniforms[a].value=new qt().fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Ve().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ve().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Qx.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:mB,SpriteMaterial:JA,RawShaderMaterial:gB,ShaderMaterial:Pi,PointsMaterial:Px,MeshPhysicalMaterial:to,MeshStandardMaterial:yv,MeshPhongMaterial:vB,MeshToonMaterial:yB,MeshNormalMaterial:oE,MeshLambertMaterial:_B,MeshDepthMaterial:Zx,MeshDistanceMaterial:lE,MeshBasicMaterial:ss,MeshMatcapMaterial:xB,LineDashedMaterial:bB,LineBasicMaterial:_a,Material:fr};return new t[e]}}class Nu{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class LB extends un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class IB extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=new ta(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(c){try{t(a.parse(JSON.parse(c)))}catch(f){r?r(f):console.error(f),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(x,b){if(t[b]!==void 0)return t[b];const M=x.interleavedBuffers[b],A=a(x,M.buffer),w=lp(M.type,A),B=new uv(w,M.stride);return B.uuid=M.uuid,t[b]=B,B}function a(x,b){if(i[b]!==void 0)return i[b];const M=x.arrayBuffers[b],A=new Uint32Array(M).buffer;return i[b]=A,A}const o=e.isInstancedBufferGeometry?new LB:new un,c=e.data.index;if(c!==void 0){const x=lp(c.type,c.array);o.setIndex(new Gn(x,1))}const f=e.data.attributes;for(const x in f){const b=f[x];let T;if(b.isInterleavedBufferAttribute){const M=r(e.data,b.data);T=new Fu(M,b.itemSize,b.offset,b.normalized)}else{const M=lp(b.type,b.array),A=b.isInstancedBufferAttribute?Sh:Gn;T=new A(M,b.itemSize,b.normalized)}b.name!==void 0&&(T.name=b.name),b.usage!==void 0&&T.setUsage(b.usage),o.setAttribute(x,T)}const p=e.data.morphAttributes;if(p)for(const x in p){const b=p[x],T=[];for(let M=0,A=b.length;M<A;M++){const w=b[M];let B;if(w.isInterleavedBufferAttribute){const D=r(e.data,w.data);B=new Fu(D,w.itemSize,w.offset,w.normalized)}else{const D=lp(w.type,w.array);B=new Gn(D,w.itemSize,w.normalized)}w.name!==void 0&&(B.name=w.name),T.push(B)}o.morphAttributes[x]=T}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let x=0,b=v.length;x!==b;++x){const T=v[x];o.addGroup(T.start,T.count,T.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const x=new $;y.center!==void 0&&x.fromArray(y.center),o.boundingSphere=new kr(x,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class jL extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=this.path===""?Nu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new ta(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let p=null;try{p=JSON.parse(f)}catch(v){r!==void 0&&r(v),console.error("THREE:ObjectLoader: Can't parse "+e+".",v.message);return}const m=p.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(p,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Nu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ta(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const o=await a.loadAsync(e,t),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,a,f,c,i),m=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,m),this.bindLightTargets(p),t!==void 0){let v=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,r,c,o,t),p=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,p),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new ph().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,o=e.length;a<o;a++){const c=new fv().fromJSON(e[a],r);i[c.uuid]=c}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new IB;for(let a=0,o=e.length;a<o;a++){let c;const f=e[a];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=r.parse(f);break;default:f.type in kT?c=kT[f.type].fromJSON(f,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),i[f.uuid]=c}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new Qx;a.setTextures(t);for(let o=0,c=e.length;o<c;o++){const f=e[o];i[f.uuid]===void 0&&(i[f.uuid]=a.parse(f)),r[f.uuid]=i[f.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Tp.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function o(f){return i.manager.itemStart(f),a.load(f,function(){i.manager.itemEnd(f)},void 0,function(){i.manager.itemError(f),i.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const p=f,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return o(m)}else return f.data?{data:lp(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new $x(t);a=new Jg(f),a.setCrossOrigin(this.crossOrigin);for(let p=0,m=e.length;p<m;p++){const v=e[p],y=v.url;if(Array.isArray(y)){const x=[];for(let b=0,T=y.length;b<T;b++){const M=y[b],A=c(M);A!==null&&(A instanceof HTMLImageElement?x.push(A):x.push(new zo(A.data,A.width,A.height)))}r[v.uuid]=new Ou(x)}else{const x=c(v.url);r[v.uuid]=new Ou(x)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await r.loadAsync(f)}else return o.data?{data:lp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Jg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const f=e[o],p=f.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v],b=await a(x);b!==null&&(b instanceof HTMLImageElement?m.push(b):m.push(new zo(b.data,b.width,b.height)))}i[f.uuid]=new Ou(m)}else{const m=await a(f.url);i[f.uuid]=new Ou(m)}}}return i}parseTextures(e,t){function i(a,o){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),o[a])}const r={};if(e!==void 0)for(let a=0,o=e.length;a<o;a++){const c=e[a];c.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",c.image);const f=t[c.image],p=f.data;let m;Array.isArray(p)?(m=new cv,p.length===6&&(m.needsUpdate=!0)):(p&&p.data?m=new zo:m=new ei,p&&(m.needsUpdate=!0)),m.source=f,m.uuid=c.uuid,c.name!==void 0&&(m.name=c.name),c.mapping!==void 0&&(m.mapping=i(c.mapping,WL)),c.channel!==void 0&&(m.channel=c.channel),c.offset!==void 0&&m.offset.fromArray(c.offset),c.repeat!==void 0&&m.repeat.fromArray(c.repeat),c.center!==void 0&&m.center.fromArray(c.center),c.rotation!==void 0&&(m.rotation=c.rotation),c.wrap!==void 0&&(m.wrapS=i(c.wrap[0],WT),m.wrapT=i(c.wrap[1],WT)),c.format!==void 0&&(m.format=c.format),c.internalFormat!==void 0&&(m.internalFormat=c.internalFormat),c.type!==void 0&&(m.type=c.type),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace),c.minFilter!==void 0&&(m.minFilter=i(c.minFilter,qT)),c.magFilter!==void 0&&(m.magFilter=i(c.magFilter,qT)),c.anisotropy!==void 0&&(m.anisotropy=c.anisotropy),c.flipY!==void 0&&(m.flipY=c.flipY),c.generateMipmaps!==void 0&&(m.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(m.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(m.compareFunction=c.compareFunction),c.userData!==void 0&&(m.userData=c.userData),r[c.uuid]=m}return r}parseObject(e,t,i,r,a){let o;function c(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function f(y){if(y!==void 0){if(Array.isArray(y)){const x=[];for(let b=0,T=y.length;b<T;b++){const M=y[b];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),x.push(i[M])}return x}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function p(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let m,v;switch(e.type){case"Scene":o=new bh,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new xt(e.background):o.background=p(e.background)),e.environment!==void 0&&(o.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Nx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ux(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new qi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Bl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new DB(e.color,e.intensity);break;case"DirectionalLight":o=new gE(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new mE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new OB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new pE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new BB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new NB().fromJSON(e);break;case"SkinnedMesh":m=c(e.geometry),v=f(e.material),o=new ZA(m,v),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":m=c(e.geometry),v=f(e.material),o=new Ei(m,v);break;case"InstancedMesh":m=c(e.geometry),v=f(e.material);const y=e.count,x=e.instanceMatrix,b=e.instanceColor;o=new $A(m,v,y),o.instanceMatrix=new Sh(new Float32Array(x.array),16),b!==void 0&&(o.instanceColor=new Sh(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":m=c(e.geometry),v=f(e.material),o=new nB(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),o.geometry=m,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(T=>{let M=null,A=null;return T.boundingBox!==void 0&&(M=new Vr,M.min.fromArray(T.boundingBox.min),M.max.fromArray(T.boundingBox.max)),T.boundingSphere!==void 0&&(A=new kr,A.radius=T.boundingSphere.radius,A.center.fromArray(T.boundingSphere.center)),{...T,boundingBox:M,boundingSphere:A}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=p(e.matricesTexture.uuid),o._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new kr,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(o.boundingBox=new Vr,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":o=new tB;break;case"Line":o=new Ac(c(e.geometry),f(e.material));break;case"LineLoop":o=new QA(c(e.geometry),f(e.material));break;case"LineSegments":o=new ko(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new eE(c(e.geometry),f(e.material));break;case"Sprite":o=new eB(f(e.material));break;case"Group":o=new gc;break;case"Bone":o=new Lx;break;default:o=new Hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let x=0;x<y.length;x++)o.add(this.parseObject(y[x],t,i,r,a))}if(e.animations!==void 0){const y=e.animations;for(let x=0;x<y.length;x++){const b=y[x];o.animations.push(a[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let x=0;x<y.length;x++){const b=y[x],T=o.getObjectByProperty("uuid",b.object);T!==void 0&&o.addLevel(T,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Hn}})}}const WL={UVMapping:Iu,CubeReflectionMapping:Dl,CubeRefractionMapping:Pu,EquirectangularReflectionMapping:gp,EquirectangularRefractionMapping:Gg,CubeUVReflectionMapping:Bp},WT={RepeatWrapping:zu,ClampToEdgeWrapping:cr,MirroredRepeatWrapping:vp},qT={NearestFilter:tr,NearestMipmapNearestFilter:Ax,NearestMipmapLinearFilter:rh,LinearFilter:Fn,LinearMipmapNearestFilter:fp,LinearMipmapLinearFilter:$s};class PB extends na{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,o=vc.get(e);if(o!==void 0){if(a.manager.itemStart(e),o.then){o.then(p=>{t&&t(p),a.manager.itemEnd(e)}).catch(p=>{r&&r(p)});return}return setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader;const f=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return vc.add(e,p),t&&t(p),a.manager.itemEnd(e),p}).catch(function(p){r&&r(p),vc.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});vc.add(e,f),a.manager.itemStart(e)}}let zy;class vE{static getContext(){return zy===void 0&&(zy=new(window.AudioContext||window.webkitAudioContext)),zy}static setContext(e){zy=e}}class qL extends na{constructor(e){super(e)}load(e,t,i,r){const a=this,o=new ta(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const p=f.slice(0);vE.getContext().decodeAudioData(p,function(v){t(v)}).catch(c)}catch(p){c(p)}},i,r);function c(f){r?r(f):console.error(f),a.manager.itemError(e)}}}const KT=new qt,JT=new qt,Xf=new qt;class KL{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new qi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new qi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Xf.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,o=t.near*Math.tan(dh*t.fov*.5)/t.zoom;let c,f;JT.elements[12]=-r,KT.elements[12]=r,c=-o*t.aspect+a,f=o*t.aspect+a,Xf.elements[0]=2*t.near/(f-c),Xf.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(Xf),c=-o*t.aspect-a,f=o*t.aspect-a,Xf.elements[0]=2*t.near/(f-c),Xf.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(Xf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(KT)}}class zB extends qi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class yE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ZT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ZT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ZT(){return performance.now()}const Yf=new $,$T=new Gr,JL=new $,jf=new $;class ZL extends Hn{constructor(){super(),this.type="AudioListener",this.context=vE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yf,$T,JL),jf.set(0,0,-1).applyQuaternion($T),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yf.x,r),t.positionY.linearRampToValueAtTime(Yf.y,r),t.positionZ.linearRampToValueAtTime(Yf.z,r),t.forwardX.linearRampToValueAtTime(jf.x,r),t.forwardY.linearRampToValueAtTime(jf.y,r),t.forwardZ.linearRampToValueAtTime(jf.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Yf.x,Yf.y,Yf.z),t.setOrientation(jf.x,jf.y,jf.z,i.x,i.y,i.z)}}class FB extends Hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Wf=new $,QT=new Gr,$L=new $,qf=new $;class QL extends FB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Wf,QT,$L),qf.set(0,0,1).applyQuaternion(QT);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wf.x,i),t.positionY.linearRampToValueAtTime(Wf.y,i),t.positionZ.linearRampToValueAtTime(Wf.z,i),t.orientationX.linearRampToValueAtTime(qf.x,i),t.orientationY.linearRampToValueAtTime(qf.y,i),t.orientationZ.linearRampToValueAtTime(qf.z,i)}else t.setPosition(Wf.x,Wf.y,Wf.z),t.setOrientation(qf.x,qf.y,qf.z)}}class eI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class HB{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,o;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==r;++c)i[a+c]=i[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(i,a,0,c,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const f=t*this._origIndex;this._mixBufferRegion(i,r,f,1-a,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let f=t,p=t+t;f!==p;++f)if(i[f]!==i[f+t]){c.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,o=r;a!==o;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let o=0;o!==a;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Gr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const o=this._workIndex*a;Gr.multiplyQuaternionsFlat(e,o,e,t,e,i),Gr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,a){const o=1-r;for(let c=0;c!==a;++c){const f=t+c;e[f]=e[f]*o+e[i+c]*r}}_lerpAdditive(e,t,i,r,a){for(let o=0;o!==a;++o){const c=t+o;e[c]=e[c]+e[i+o]*r}}}const _E="\\[\\]\\.:\\/",tI=new RegExp("["+_E+"]","g"),xE="[^"+_E+"]",nI="[^"+_E.replace("\\.","")+"]",iI=/((?:WC+[\/:])*)/.source.replace("WC",xE),rI=/(WCOD+)?/.source.replace("WCOD",nI),aI=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xE),sI=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xE),oI=new RegExp("^"+iI+rI+aI+sI+"$"),lI=["material","materials","bones","map"];class cI{constructor(e,t,i){const r=i||Yn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Yn{constructor(e,t,i){this.path=t,this.parsedPath=i||Yn.parseTrackName(t),this.node=Yn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Yn.Composite(e,t,i):new Yn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(tI,"")}static parseTrackName(e){const t=oI.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);lI.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let o=0;o<a.length;o++){const c=a[o];if(c.name===t||c.uuid===t)return c;const f=i(c.children);if(f)return f}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=Yn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===p){p=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const o=e[r];if(o===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+r+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Yn.Composite=cI;Yn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Yn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Yn.prototype.GetterByBindingType=[Yn.prototype._getValue_direct,Yn.prototype._getValue_array,Yn.prototype._getValue_arrayElement,Yn.prototype._getValue_toArray];Yn.prototype.SetterByBindingTypeAndVersioning=[[Yn.prototype._setValue_direct,Yn.prototype._setValue_direct_setNeedsUpdate,Yn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_array,Yn.prototype._setValue_array_setNeedsUpdate,Yn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_arrayElement,Yn.prototype._setValue_arrayElement_setNeedsUpdate,Yn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yn.prototype._setValue_fromArray,Yn.prototype._setValue_fromArray_setNeedsUpdate,Yn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uI{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Es(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length;let c,f=e.length,p=this.nCachedObjects_;for(let m=0,v=arguments.length;m!==v;++m){const y=arguments[m],x=y.uuid;let b=t[x];if(b===void 0){b=f++,t[x]=b,e.push(y);for(let T=0,M=o;T!==M;++T)a[T].push(new Yn(y,i[T],r[T]))}else if(b<p){c=e[b];const T=--p,M=e[T];t[M.uuid]=b,e[b]=M,t[x]=T,e[T]=y;for(let A=0,w=o;A!==w;++A){const B=a[A],D=B[T];let I=B[b];B[b]=D,I===void 0&&(I=new Yn(y,i[A],r[A])),B[T]=I}}else e[b]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],p=f.uuid,m=t[p];if(m!==void 0&&m>=a){const v=a++,y=e[v];t[y.uuid]=m,e[m]=y,t[p]=v,e[v]=f;for(let x=0,b=r;x!==b;++x){const T=i[x],M=T[v],A=T[m];T[m]=M,T[v]=A}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,o=e.length;for(let c=0,f=arguments.length;c!==f;++c){const p=arguments[c],m=p.uuid,v=t[m];if(v!==void 0)if(delete t[m],v<a){const y=--a,x=e[y],b=--o,T=e[b];t[x.uuid]=v,e[v]=x,t[T.uuid]=y,e[y]=T,e.pop();for(let M=0,A=r;M!==A;++M){const w=i[M],B=w[y],D=w[b];w[v]=B,w[y]=D,w.pop()}}else{const y=--o,x=e[y];y>0&&(t[x.uuid]=v),e[v]=x,e.pop();for(let b=0,T=r;b!==T;++b){const M=i[b];M[v]=M[y],M.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const o=this._paths,c=this._parsedPaths,f=this._objects,p=f.length,m=this.nCachedObjects_,v=new Array(p);r=a.length,i[e]=r,o.push(e),c.push(t),a.push(v);for(let y=m,x=f.length;y!==x;++y){const b=f[y];v[y]=new Yn(b,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],p=e[c];t[p]=i,o[i]=f,o.pop(),a[i]=a[c],a.pop(),r[i]=r[c],r.pop()}}}class GB{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,o=a.length,c=new Array(o),f={endingStart:ah,endingEnd:ah};for(let p=0;p!==o;++p){const m=a[p].createInterpolant(null);c[p]=m,m.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=U2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,o=a/r,c=r/a;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,p=c.sampleValues;return f[0]=a,f[1]=a+i,p[0]=e/o,p[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const f=(e-a)*i;f<0||i===0?t=0:(this._startTime=null,t=i*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case kA:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulateAdditive(c);break;case Bx:default:for(let m=0,v=f.length;m!==v;++m)f[m].evaluate(o),p[m].accumulate(r,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const o=i===N2;if(e===0)return a===-1?r:o&&(a&1)===1?t-r:r;if(i===O2){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const c=Math.floor(r/t);r-=t*c,a+=Math.abs(c);const f=this.repetitions-a;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const p=e<0;this._setEndings(p,!p,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=r;if(o&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=sh,r.endingEnd=sh):(e?r.endingStart=this.zeroSlopeAtStart?sh:ah:r.endingStart=Vg,t?r.endingEnd=this.zeroSlopeAtEnd?sh:ah:r.endingEnd=Vg)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=a,f[0]=t,c[1]=a+e,f[1]=i,this}}const fI=new Float32Array(1);class hI extends Cs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,o=e._propertyBindings,c=e._interpolants,f=i.uuid,p=this._bindingsByRootAndName;let m=p[f];m===void 0&&(m={},p[f]=m);for(let v=0;v!==a;++v){const y=r[v],x=y.name;let b=m[x];if(b!==void 0)++b.referenceCount,o[v]=b;else{if(b=o[v],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,f,x));continue}const T=t&&t._propertyBindings[v].binding.parsedPath;b=new HB(Yn.create(i,x,T),y.ValueTypeName,y.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,f,x),o[v]=b}c[v].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,o=this._actionsByClip,c=o[a],f=c.knownActions,p=f[f.length-1],m=e._byClipCacheIndex;p._byClipCacheIndex=m,f[m]=p,f.pop(),e._byClipCacheIndex=null;const v=c.actionByRoot,y=(e._localRoot||this._root).uuid;delete v[y],f.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,o=this._bindingsByRootAndName,c=o[r],f=t[t.length-1],p=e._cacheIndex;f._cacheIndex=p,t[p]=f,t.pop(),delete c[a],Object.keys(c).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new uE(new Float32Array(2),new Float32Array(2),1,fI),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let o=typeof e=="string"?Tp.findByName(r,e):e;const c=o!==null?o.uuid:e,f=this._actionsByClip[c];let p=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Bx),f!==void 0){const v=f.actionByRoot[a];if(v!==void 0&&v.blendMode===i)return v;p=f.knownActions[0],o===null&&(o=p._clip)}if(o===null)return null;const m=new GB(this,o,t,i);return this._bindAction(m,p),this._addInactiveAction(m,c,a),m}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?Tp.findByName(i,e):e,o=a?a.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(r,e,a,o);const c=this._bindings,f=this._nActiveBindings;for(let p=0;p!==f;++p)c[p].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const o=a.knownActions;for(let c=0,f=o.length;c!==f;++c){const p=o[c];this._deactivateAction(p);const m=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=m,t[m]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const o in a){const c=a[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class dI extends Dx{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Ox(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class pI extends Dx{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new ov(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jn{constructor(e){this.value=e}clone(){return new jn(this.value.clone===void 0?this.value:this.value.clone())}}let mI=0;class gI extends Cs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:mI++}),this.name="",this.usage=Xg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<a.length;o++)this.uniforms.push(a[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class vI extends uv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class yI{constructor(e,t,i,r,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const eC=new qt;class bE{constructor(e,t,i=0,r=1/0){this.ray=new Oh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ap,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return eC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(eC),this}intersectObject(e,t=!0,i=[]){return J1(e,this,i,t),i.sort(tC),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)J1(e[r],this,i,t);return i.sort(tC),i}}function tC(n,e){return n.distance-e.distance}function J1(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let o=0,c=a.length;o<c;o++)J1(a[o],e,t,!0)}}class Z1{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=pn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(pn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class _I{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class SE{constructor(e,t,i,r){SE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const nC=new Ve;class xI{constructor(e=new Ve(1/0,1/0),t=new Ve(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=nC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,nC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iC=new $,Fy=new $;class bI{constructor(e=new $,t=new $){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){iC.subVectors(e,this.start),Fy.subVectors(this.end,this.start);const i=Fy.dot(Fy);let a=Fy.dot(iC)/i;return t&&(a=pn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rC=new $;class SI extends Hn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new un,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const p=o/f*Math.PI*2,m=c/f*Math.PI*2;r.push(Math.cos(p),Math.sin(p),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Lt(r,3));const a=new _a({fog:!1,toneMapped:!1});this.cone=new ko(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tu=new $,Hy=new qt,US=new qt;class AI extends ko{constructor(e){const t=VB(e),i=new un,r=[],a=[],o=new xt(0,0,1),c=new xt(0,1,0);for(let p=0;p<t.length;p++){const m=t[p];m.parent&&m.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(c.r,c.g,c.b))}i.setAttribute("position",new Lt(r,3)),i.setAttribute("color",new Lt(a,3));const f=new _a({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,f),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");US.copy(this.root.matrixWorld).invert();for(let a=0,o=0;a<t.length;a++){const c=t[a];c.parent&&c.parent.isBone&&(Hy.multiplyMatrices(US,c.matrixWorld),Tu.setFromMatrixPosition(Hy),r.setXYZ(o,Tu.x,Tu.y,Tu.z),Hy.multiplyMatrices(US,c.parent.matrixWorld),Tu.setFromMatrixPosition(Hy),r.setXYZ(o+1,Tu.x,Tu.y,Tu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function VB(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...VB(n.children[t]));return e}class EI extends Ei{constructor(e,t,i){const r=new vv(t,4,2),a=new ss({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const MI=new $,aC=new xt,sC=new xt;class TI extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new gv(t);r.rotateY(Math.PI*.5),this.material=new ss({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),o=new Float32Array(a.count*3);r.setAttribute("color",new Gn(o,3)),this.add(new Ei(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");aC.copy(this.light.color),sC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?aC:sC;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(MI.setFromMatrixPosition(this.light.matrixWorld).negate())}}class CI extends ko{constructor(e=10,t=10,i=4473924,r=8947848){i=new xt(i),r=new xt(r);const a=t/2,o=e/t,c=e/2,f=[],p=[];for(let y=0,x=0,b=-c;y<=t;y++,b+=o){f.push(-c,0,b,c,0,b),f.push(b,0,-c,b,0,c);const T=y===a?i:r;T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3,T.toArray(p,x),x+=3}const m=new un;m.setAttribute("position",new Lt(f,3)),m.setAttribute("color",new Lt(p,3));const v=new _a({vertexColors:!0,toneMapped:!1});super(m,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class RI extends ko{constructor(e=10,t=16,i=8,r=64,a=4473924,o=8947848){a=new xt(a),o=new xt(o);const c=[],f=[];if(t>1)for(let v=0;v<t;v++){const y=v/t*(Math.PI*2),x=Math.sin(y)*e,b=Math.cos(y)*e;c.push(0,0,0),c.push(x,0,b);const T=v&1?a:o;f.push(T.r,T.g,T.b),f.push(T.r,T.g,T.b)}for(let v=0;v<i;v++){const y=v&1?a:o,x=e-e/i*v;for(let b=0;b<r;b++){let T=b/r*(Math.PI*2),M=Math.sin(T)*x,A=Math.cos(T)*x;c.push(M,0,A),f.push(y.r,y.g,y.b),T=(b+1)/r*(Math.PI*2),M=Math.sin(T)*x,A=Math.cos(T)*x,c.push(M,0,A),f.push(y.r,y.g,y.b)}}const p=new un;p.setAttribute("position",new Lt(c,3)),p.setAttribute("color",new Lt(f,3));const m=new _a({vertexColors:!0,toneMapped:!1});super(p,m),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const oC=new $,Gy=new $,lC=new $;class wI extends Hn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new un;r.setAttribute("position",new Lt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new _a({fog:!1,toneMapped:!1});this.lightPlane=new Ac(r,a),this.add(this.lightPlane),r=new un,r.setAttribute("position",new Lt([0,0,0,0,0,1],3)),this.targetLine=new Ac(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),oC.setFromMatrixPosition(this.light.matrixWorld),Gy.setFromMatrixPosition(this.light.target.matrixWorld),lC.subVectors(Gy,oC),this.lightPlane.lookAt(Gy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gy),this.targetLine.scale.z=lC.length()}}const Vy=new $,er=new lv;class BI extends ko{constructor(e){const t=new un,i=new _a({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(b,T){f(b),f(T)}function f(b){r.push(0,0,0),a.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(r.length/3-1)}t.setAttribute("position",new Lt(r,3)),t.setAttribute("color",new Lt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const p=new xt(16755200),m=new xt(16711680),v=new xt(43775),y=new xt(16777215),x=new xt(3355443);this.setColors(p,m,v,y,x)}setColors(e,t,i,r,a){const c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,r.r,r.g,r.b),c.setXYZ(39,r.r,r.g,r.b),c.setXYZ(40,a.r,a.g,a.b),c.setXYZ(41,a.r,a.g,a.b),c.setXYZ(42,a.r,a.g,a.b),c.setXYZ(43,a.r,a.g,a.b),c.setXYZ(44,a.r,a.g,a.b),c.setXYZ(45,a.r,a.g,a.b),c.setXYZ(46,a.r,a.g,a.b),c.setXYZ(47,a.r,a.g,a.b),c.setXYZ(48,a.r,a.g,a.b),c.setXYZ(49,a.r,a.g,a.b),c.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;er.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===Qs?-1:0;lr("c",t,e,er,0,0,a),lr("t",t,e,er,0,0,1),lr("n1",t,e,er,-1,-1,a),lr("n2",t,e,er,i,-1,a),lr("n3",t,e,er,-1,r,a),lr("n4",t,e,er,i,r,a),lr("f1",t,e,er,-1,-1,1),lr("f2",t,e,er,i,-1,1),lr("f3",t,e,er,-1,r,1),lr("f4",t,e,er,i,r,1),lr("u1",t,e,er,i*.7,r*1.1,a),lr("u2",t,e,er,-1*.7,r*1.1,a),lr("u3",t,e,er,0,r*2,a),lr("cf1",t,e,er,-1,0,1),lr("cf2",t,e,er,i,0,1),lr("cf3",t,e,er,0,-1,1),lr("cf4",t,e,er,0,r,1),lr("cn1",t,e,er,-1,0,a),lr("cn2",t,e,er,i,0,a),lr("cn3",t,e,er,0,-1,a),lr("cn4",t,e,er,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function lr(n,e,t,i,r,a,o){Vy.set(r,a,o).unproject(i);const c=e[n];if(c!==void 0){const f=t.getAttribute("position");for(let p=0,m=c.length;p<m;p++)f.setXYZ(c[p],Vy.x,Vy.y,Vy.z)}}const ky=new Vr;class DI extends ko{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),a=new un;a.setIndex(new Gn(i,1)),a.setAttribute("position",new Gn(r,3)),super(a,new _a({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&ky.setFromObject(this.object),ky.isEmpty())return;const e=ky.min,t=ky.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class OI extends ko{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new un;a.setIndex(new Gn(i,1)),a.setAttribute("position",new Lt(r,3)),super(a,new _a({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class UI extends Ac{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new un;o.setAttribute("position",new Lt(a,3)),o.computeBoundingSphere(),super(o,new _a({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new un;f.setAttribute("position",new Lt(c,3)),f.computeBoundingSphere(),this.add(new Ei(f,new ss({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const cC=new $;let Xy,NS;class NI extends Hn{constructor(e=new $(0,0,1),t=new $(0,0,0),i=1,r=16776960,a=i*.2,o=a*.2){super(),this.type="ArrowHelper",Xy===void 0&&(Xy=new un,Xy.setAttribute("position",new Lt([0,0,0,0,1,0],3)),NS=new pv(.5,1,5,1),NS.translate(0,-.5,0)),this.position.copy(t),this.line=new Ac(Xy,new _a({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ei(NS,new ss({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class LI extends ko{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new un;r.setAttribute("position",new Lt(t,3)),r.setAttribute("color",new Lt(i,3));const a=new _a({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new xt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class II{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Q_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,o){return this.currentPath.bezierCurveTo(e,t,i,r,a,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(A){const w=[];for(let B=0,D=A.length;B<D;B++){const I=A[B],N=new ph;N.curves=I.curves,w.push(N)}return w}function i(A,w){const B=w.length;let D=!1;for(let I=B-1,N=0;N<B;I=N++){let H=w[I],P=w[N],L=P.x-H.x,U=P.y-H.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(H=w[N],L=-L,P=w[I],U=-U),A.y<H.y||A.y>P.y)continue;if(A.y===H.y){if(A.x===H.x)return!0}else{const Y=U*(A.x-H.x)-L*(A.y-H.y);if(Y===0)return!0;if(Y<0)continue;D=!D}}else{if(A.y!==H.y)continue;if(P.x<=A.x&&A.x<=H.x||H.x<=A.x&&A.x<=P.x)return!0}}return D}const r=Io.isClockWise,a=this.subPaths;if(a.length===0)return[];let o,c,f;const p=[];if(a.length===1)return c=a[0],f=new ph,f.curves=c.curves,p.push(f),p;let m=!r(a[0].getPoints());m=e?!m:m;const v=[],y=[];let x=[],b=0,T;y[b]=void 0,x[b]=[];for(let A=0,w=a.length;A<w;A++)c=a[A],T=c.getPoints(),o=r(T),o=e?!o:o,o?(!m&&y[b]&&b++,y[b]={s:new ph,p:T},y[b].s.curves=c.curves,m&&b++,x[b]=[]):x[b].push({h:c,p:T[0]});if(!y[0])return t(a);if(y.length>1){let A=!1,w=0;for(let B=0,D=y.length;B<D;B++)v[B]=[];for(let B=0,D=y.length;B<D;B++){const I=x[B];for(let N=0;N<I.length;N++){const H=I[N];let P=!0;for(let L=0;L<y.length;L++)i(H.p,y[L].p)&&(B!==L&&w++,P?(P=!1,v[L].push(H)):A=!0);P&&v[B].push(H)}}w>0&&A===!1&&(x=v)}let M;for(let A=0,w=y.length;A<w;A++){f=y[A].s,p.push(f),M=x[A];for(let B=0,D=M.length;B<D;B++)f.holes.push(M[B].h)}return p}}class PI extends Cs{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function zI(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function FI(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function HI(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function $1(n,e,t,i){const r=GI(i);switch(t){case FA:return n*e;case av:return n*e/r.components*r.byteLength;case sv:return n*e/r.components*r.byteLength;case GA:return n*e*2/r.components*r.byteLength;case Rx:return n*e*2/r.components*r.byteLength;case HA:return n*e*3/r.components*r.byteLength;case ur:return n*e*4/r.components*r.byteLength;case wx:return n*e*4/r.components*r.byteLength;case Tg:case Cg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Rg:case wg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case E_:case T_:return Math.max(n,16)*Math.max(e,8)/4;case A_:case M_:return Math.max(n,8)*Math.max(e,8)/2;case C_:case R_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case w_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case B_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case D_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case O_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case U_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case N_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case L_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case I_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case P_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case z_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case F_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case H_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case G_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case V_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case k_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Bg:case X_:case Y_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case VA:case j_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case W_:case q_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function GI(n){switch(n){case nr:case Ex:return{byteLength:1,components:1};case yp:case Mx:case wr:return{byteLength:2,components:1};case Tx:case Cx:return{byteLength:2,components:4};case Go:case rv:case Li:return{byteLength:4,components:1};case zA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class VI{static contain(e,t){return zI(e,t)}static cover(e,t){return FI(e,t)}static fill(e){return HI(e)}static getByteLength(e,t,i,r){return $1(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Dh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Dh);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kB(){let n=null,e=!1,t=null,i=null;function r(a,o){t(a,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function kI(n){const e=new WeakMap;function t(c,f){const p=c.array,m=c.usage,v=p.byteLength,y=n.createBuffer();n.bindBuffer(f,y),n.bufferData(f,p,m),c.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function i(c,f,p){const m=f.array,v=f.updateRanges;if(n.bindBuffer(p,c),v.length===0)n.bufferSubData(p,0,m);else{v.sort((x,b)=>x.start-b.start);let y=0;for(let x=1;x<v.length;x++){const b=v[y],T=v[x];T.start<=b.start+b.count+1?b.count=Math.max(b.count,T.start+T.count-b.start):(++y,v[y]=T)}v.length=y+1;for(let x=0,b=v.length;x<b;x++){const T=v[x];n.bufferSubData(p,T.start*m.BYTES_PER_ELEMENT,m,T.start,T.count)}f.clearUpdateRanges()}f.onUploadCallback()}function r(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(n.deleteBuffer(f.buffer),e.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const m=e.get(c);(!m||m.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,f));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,c,f),p.version=c.version}}return{get:r,remove:a,update:o}}var XI=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,YI=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,WI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qI=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,KI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,JI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ZI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$I=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,QI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,eP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,tP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,nP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,aP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,sP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,oP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,uP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,fP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,hP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,dP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,pP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,yP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_P=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xP="gl_FragColor = linearToOutputTexel( gl_FragColor );",bP=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,SP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,EP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,TP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,RP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,BP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,DP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,OP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,NP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,LP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,PP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,FP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,HP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,GP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,VP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,XP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,YP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jP=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,WP=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qP=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KP=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,JP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ZP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$P=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,QP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ez=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,tz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,nz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,iz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,rz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,az=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,sz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,oz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,lz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,hz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,dz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,pz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,mz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,gz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,vz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,yz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,_z=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Sz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Az=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ez=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Mz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Tz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Cz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Rz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Bz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Dz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Oz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Uz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Nz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Lz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Iz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Pz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Fz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Hz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Gz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Vz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Xz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Jz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Zz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$z=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Qz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,e4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,t4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,n4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,i4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,r4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,s4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,o4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,l4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,u4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,f4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,p4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,g4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,y4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_4=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,x4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,b4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,S4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,En={alphahash_fragment:XI,alphahash_pars_fragment:YI,alphamap_fragment:jI,alphamap_pars_fragment:WI,alphatest_fragment:qI,alphatest_pars_fragment:KI,aomap_fragment:JI,aomap_pars_fragment:ZI,batching_pars_vertex:$I,batching_vertex:QI,begin_vertex:eP,beginnormal_vertex:tP,bsdfs:nP,iridescence_fragment:iP,bumpmap_pars_fragment:rP,clipping_planes_fragment:aP,clipping_planes_pars_fragment:sP,clipping_planes_pars_vertex:oP,clipping_planes_vertex:lP,color_fragment:cP,color_pars_fragment:uP,color_pars_vertex:fP,color_vertex:hP,common:dP,cube_uv_reflection_fragment:pP,defaultnormal_vertex:mP,displacementmap_pars_vertex:gP,displacementmap_vertex:vP,emissivemap_fragment:yP,emissivemap_pars_fragment:_P,colorspace_fragment:xP,colorspace_pars_fragment:bP,envmap_fragment:SP,envmap_common_pars_fragment:AP,envmap_pars_fragment:EP,envmap_pars_vertex:MP,envmap_physical_pars_fragment:IP,envmap_vertex:TP,fog_vertex:CP,fog_pars_vertex:RP,fog_fragment:wP,fog_pars_fragment:BP,gradientmap_pars_fragment:DP,lightmap_pars_fragment:OP,lights_lambert_fragment:UP,lights_lambert_pars_fragment:NP,lights_pars_begin:LP,lights_toon_fragment:PP,lights_toon_pars_fragment:zP,lights_phong_fragment:FP,lights_phong_pars_fragment:HP,lights_physical_fragment:GP,lights_physical_pars_fragment:VP,lights_fragment_begin:kP,lights_fragment_maps:XP,lights_fragment_end:YP,logdepthbuf_fragment:jP,logdepthbuf_pars_fragment:WP,logdepthbuf_pars_vertex:qP,logdepthbuf_vertex:KP,map_fragment:JP,map_pars_fragment:ZP,map_particle_fragment:$P,map_particle_pars_fragment:QP,metalnessmap_fragment:ez,metalnessmap_pars_fragment:tz,morphinstance_vertex:nz,morphcolor_vertex:iz,morphnormal_vertex:rz,morphtarget_pars_vertex:az,morphtarget_vertex:sz,normal_fragment_begin:oz,normal_fragment_maps:lz,normal_pars_fragment:cz,normal_pars_vertex:uz,normal_vertex:fz,normalmap_pars_fragment:hz,clearcoat_normal_fragment_begin:dz,clearcoat_normal_fragment_maps:pz,clearcoat_pars_fragment:mz,iridescence_pars_fragment:gz,opaque_fragment:vz,packing:yz,premultiplied_alpha_fragment:_z,project_vertex:xz,dithering_fragment:bz,dithering_pars_fragment:Sz,roughnessmap_fragment:Az,roughnessmap_pars_fragment:Ez,shadowmap_pars_fragment:Mz,shadowmap_pars_vertex:Tz,shadowmap_vertex:Cz,shadowmask_pars_fragment:Rz,skinbase_vertex:wz,skinning_pars_vertex:Bz,skinning_vertex:Dz,skinnormal_vertex:Oz,specularmap_fragment:Uz,specularmap_pars_fragment:Nz,tonemapping_fragment:Lz,tonemapping_pars_fragment:Iz,transmission_fragment:Pz,transmission_pars_fragment:zz,uv_pars_fragment:Fz,uv_pars_vertex:Hz,uv_vertex:Gz,worldpos_vertex:Vz,background_vert:kz,background_frag:Xz,backgroundCube_vert:Yz,backgroundCube_frag:jz,cube_vert:Wz,cube_frag:qz,depth_vert:Kz,depth_frag:Jz,distanceRGBA_vert:Zz,distanceRGBA_frag:$z,equirect_vert:Qz,equirect_frag:e4,linedashed_vert:t4,linedashed_frag:n4,meshbasic_vert:i4,meshbasic_frag:r4,meshlambert_vert:a4,meshlambert_frag:s4,meshmatcap_vert:o4,meshmatcap_frag:l4,meshnormal_vert:c4,meshnormal_frag:u4,meshphong_vert:f4,meshphong_frag:h4,meshphysical_vert:d4,meshphysical_frag:p4,meshtoon_vert:m4,meshtoon_frag:g4,points_vert:v4,points_frag:y4,shadow_vert:_4,shadow_frag:x4,sprite_vert:b4,sprite_frag:S4},Tt={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},No={basic:{uniforms:za([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.fog]),vertexShader:En.meshbasic_vert,fragmentShader:En.meshbasic_frag},lambert:{uniforms:za([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,Tt.lights,{emissive:{value:new xt(0)}}]),vertexShader:En.meshlambert_vert,fragmentShader:En.meshlambert_frag},phong:{uniforms:za([Tt.common,Tt.specularmap,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,Tt.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:En.meshphong_vert,fragmentShader:En.meshphong_frag},standard:{uniforms:za([Tt.common,Tt.envmap,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.roughnessmap,Tt.metalnessmap,Tt.fog,Tt.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag},toon:{uniforms:za([Tt.common,Tt.aomap,Tt.lightmap,Tt.emissivemap,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.gradientmap,Tt.fog,Tt.lights,{emissive:{value:new xt(0)}}]),vertexShader:En.meshtoon_vert,fragmentShader:En.meshtoon_frag},matcap:{uniforms:za([Tt.common,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,Tt.fog,{matcap:{value:null}}]),vertexShader:En.meshmatcap_vert,fragmentShader:En.meshmatcap_frag},points:{uniforms:za([Tt.points,Tt.fog]),vertexShader:En.points_vert,fragmentShader:En.points_frag},dashed:{uniforms:za([Tt.common,Tt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:En.linedashed_vert,fragmentShader:En.linedashed_frag},depth:{uniforms:za([Tt.common,Tt.displacementmap]),vertexShader:En.depth_vert,fragmentShader:En.depth_frag},normal:{uniforms:za([Tt.common,Tt.bumpmap,Tt.normalmap,Tt.displacementmap,{opacity:{value:1}}]),vertexShader:En.meshnormal_vert,fragmentShader:En.meshnormal_frag},sprite:{uniforms:za([Tt.sprite,Tt.fog]),vertexShader:En.sprite_vert,fragmentShader:En.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:En.background_vert,fragmentShader:En.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:En.backgroundCube_vert,fragmentShader:En.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:En.cube_vert,fragmentShader:En.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:En.equirect_vert,fragmentShader:En.equirect_frag},distanceRGBA:{uniforms:za([Tt.common,Tt.displacementmap,{referencePosition:{value:new $},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:En.distanceRGBA_vert,fragmentShader:En.distanceRGBA_frag},shadow:{uniforms:za([Tt.lights,Tt.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:En.shadow_vert,fragmentShader:En.shadow_frag}};No.physical={uniforms:za([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag};const Yy={r:0,b:0,g:0},Kf=new Ts,A4=new qt;function E4(n,e,t,i,r,a,o){const c=new xt(0);let f=a===!0?0:1,p,m,v=null,y=0,x=null;function b(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?t:e).get(D)),D}function T(B){let D=!1;const I=b(B);I===null?A(c,f):I&&I.isColor&&(A(I,1),D=!0);const N=n.xr.getEnvironmentBlendMode();N==="additive"?i.buffers.color.setClear(0,0,0,1,o):N==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function M(B,D){const I=b(D);I&&(I.isCubeTexture||I.mapping===Bp)?(m===void 0&&(m=new Ei(new Uh(1,1,1),new Pi({name:"BackgroundCubeMaterial",uniforms:Ep(No.backgroundCube.uniforms),vertexShader:No.backgroundCube.vertexShader,fragmentShader:No.backgroundCube.fragmentShader,side:Rr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(N,H,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(m)),Kf.copy(D.backgroundRotation),Kf.x*=-1,Kf.y*=-1,Kf.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Kf.y*=-1,Kf.z*=-1),m.material.uniforms.envMap.value=I,m.material.uniforms.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(A4.makeRotationFromEuler(Kf)),m.material.toneMapped=Pn.getTransfer(I.colorSpace)!==ui,(v!==I||y!==I.version||x!==n.toneMapping)&&(m.material.needsUpdate=!0,v=I,y=I.version,x=n.toneMapping),m.layers.enableAll(),B.unshift(m,m.geometry,m.material,0,0,null)):I&&I.isTexture&&(p===void 0&&(p=new Ei(new Tc(2,2),new Pi({name:"BackgroundMaterial",uniforms:Ep(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:Ho,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=I,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=Pn.getTransfer(I.colorSpace)!==ui,I.matrixAutoUpdate===!0&&I.updateMatrix(),p.material.uniforms.uvTransform.value.copy(I.matrix),(v!==I||y!==I.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,v=I,y=I.version,x=n.toneMapping),p.layers.enableAll(),B.unshift(p,p.geometry,p.material,0,0,null))}function A(B,D){B.getRGB(Yy,J2(n)),i.buffers.color.setClear(Yy.r,Yy.g,Yy.b,D,o)}function w(){m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(B,D=1){c.set(B),f=D,A(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(B){f=B,A(c,f)},render:T,addToRenderList:M,dispose:w}}function M4(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null);let a=r,o=!1;function c(U,Y,ie,Q,ae){let he=!1;const X=v(Q,ie,Y);a!==X&&(a=X,p(a.object)),he=x(U,Q,ie,ae),he&&b(U,Q,ie,ae),ae!==null&&e.update(ae,n.ELEMENT_ARRAY_BUFFER),(he||o)&&(o=!1,D(U,Y,ie,Q),ae!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function f(){return n.createVertexArray()}function p(U){return n.bindVertexArray(U)}function m(U){return n.deleteVertexArray(U)}function v(U,Y,ie){const Q=ie.wireframe===!0;let ae=i[U.id];ae===void 0&&(ae={},i[U.id]=ae);let he=ae[Y.id];he===void 0&&(he={},ae[Y.id]=he);let X=he[Q];return X===void 0&&(X=y(f()),he[Q]=X),X}function y(U){const Y=[],ie=[],Q=[];for(let ae=0;ae<t;ae++)Y[ae]=0,ie[ae]=0,Q[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ie,attributeDivisors:Q,object:U,attributes:{},index:null}}function x(U,Y,ie,Q){const ae=a.attributes,he=Y.attributes;let X=0;const te=ie.getAttributes();for(const ne in te)if(te[ne].location>=0){const W=ae[ne];let se=he[ne];if(se===void 0&&(ne==="instanceMatrix"&&U.instanceMatrix&&(se=U.instanceMatrix),ne==="instanceColor"&&U.instanceColor&&(se=U.instanceColor)),W===void 0||W.attribute!==se||se&&W.data!==se.data)return!0;X++}return a.attributesNum!==X||a.index!==Q}function b(U,Y,ie,Q){const ae={},he=Y.attributes;let X=0;const te=ie.getAttributes();for(const ne in te)if(te[ne].location>=0){let W=he[ne];W===void 0&&(ne==="instanceMatrix"&&U.instanceMatrix&&(W=U.instanceMatrix),ne==="instanceColor"&&U.instanceColor&&(W=U.instanceColor));const se={};se.attribute=W,W&&W.data&&(se.data=W.data),ae[ne]=se,X++}a.attributes=ae,a.attributesNum=X,a.index=Q}function T(){const U=a.newAttributes;for(let Y=0,ie=U.length;Y<ie;Y++)U[Y]=0}function M(U){A(U,0)}function A(U,Y){const ie=a.newAttributes,Q=a.enabledAttributes,ae=a.attributeDivisors;ie[U]=1,Q[U]===0&&(n.enableVertexAttribArray(U),Q[U]=1),ae[U]!==Y&&(n.vertexAttribDivisor(U,Y),ae[U]=Y)}function w(){const U=a.newAttributes,Y=a.enabledAttributes;for(let ie=0,Q=Y.length;ie<Q;ie++)Y[ie]!==U[ie]&&(n.disableVertexAttribArray(ie),Y[ie]=0)}function B(U,Y,ie,Q,ae,he,X){X===!0?n.vertexAttribIPointer(U,Y,ie,ae,he):n.vertexAttribPointer(U,Y,ie,Q,ae,he)}function D(U,Y,ie,Q){T();const ae=Q.attributes,he=ie.getAttributes(),X=Y.defaultAttributeValues;for(const te in he){const ne=he[te];if(ne.location>=0){let be=ae[te];if(be===void 0&&(te==="instanceMatrix"&&U.instanceMatrix&&(be=U.instanceMatrix),te==="instanceColor"&&U.instanceColor&&(be=U.instanceColor)),be!==void 0){const W=be.normalized,se=be.itemSize,Ae=e.get(be);if(Ae===void 0)continue;const De=Ae.buffer,ge=Ae.type,He=Ae.bytesPerElement,Le=ge===n.INT||ge===n.UNSIGNED_INT||be.gpuType===rv;if(be.isInterleavedBufferAttribute){const Qe=be.data,rt=Qe.stride,Bt=be.offset;if(Qe.isInstancedInterleavedBuffer){for(let wt=0;wt<ne.locationSize;wt++)A(ne.location+wt,Qe.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let wt=0;wt<ne.locationSize;wt++)M(ne.location+wt);n.bindBuffer(n.ARRAY_BUFFER,De);for(let wt=0;wt<ne.locationSize;wt++)B(ne.location+wt,se/ne.locationSize,ge,W,rt*He,(Bt+se/ne.locationSize*wt)*He,Le)}else{if(be.isInstancedBufferAttribute){for(let Qe=0;Qe<ne.locationSize;Qe++)A(ne.location+Qe,be.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Qe=0;Qe<ne.locationSize;Qe++)M(ne.location+Qe);n.bindBuffer(n.ARRAY_BUFFER,De);for(let Qe=0;Qe<ne.locationSize;Qe++)B(ne.location+Qe,se/ne.locationSize,ge,W,se*He,se/ne.locationSize*Qe*He,Le)}}else if(X!==void 0){const W=X[te];if(W!==void 0)switch(W.length){case 2:n.vertexAttrib2fv(ne.location,W);break;case 3:n.vertexAttrib3fv(ne.location,W);break;case 4:n.vertexAttrib4fv(ne.location,W);break;default:n.vertexAttrib1fv(ne.location,W)}}}}w()}function I(){P();for(const U in i){const Y=i[U];for(const ie in Y){const Q=Y[ie];for(const ae in Q)m(Q[ae].object),delete Q[ae];delete Y[ie]}delete i[U]}}function N(U){if(i[U.id]===void 0)return;const Y=i[U.id];for(const ie in Y){const Q=Y[ie];for(const ae in Q)m(Q[ae].object),delete Q[ae];delete Y[ie]}delete i[U.id]}function H(U){for(const Y in i){const ie=i[Y];if(ie[U.id]===void 0)continue;const Q=ie[U.id];for(const ae in Q)m(Q[ae].object),delete Q[ae];delete ie[U.id]}}function P(){L(),o=!0,a!==r&&(a=r,p(a.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:c,reset:P,resetDefaultState:L,dispose:I,releaseStatesOfGeometry:N,releaseStatesOfProgram:H,initAttributes:T,enableAttribute:M,disableUnusedAttributes:w}}function T4(n,e,t){let i;function r(p){i=p}function a(p,m){n.drawArrays(i,p,m),t.update(m,i,1)}function o(p,m,v){v!==0&&(n.drawArraysInstanced(i,p,m,v),t.update(m,i,v))}function c(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,m,0,v);let x=0;for(let b=0;b<v;b++)x+=m[b];t.update(x,i,1)}function f(p,m,v,y){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<p.length;b++)o(p[b],m[b],y[b]);else{x.multiDrawArraysInstancedWEBGL(i,p,0,m,0,y,0,v);let b=0;for(let T=0;T<v;T++)b+=m[T]*y[T];t.update(b,i,1)}}this.setMode=r,this.render=a,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function C4(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const H=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(H){return!(H!==ur&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(H){const P=H===wr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(H!==nr&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==Li&&!P)}function f(H){if(H==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const m=f(p);m!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",m,"instead."),p=m);const v=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=n.getParameter(n.MAX_TEXTURE_SIZE),M=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),B=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),I=b>0,N=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:v,reverseDepthBuffer:y,maxTextures:x,maxVertexTextures:b,maxTextureSize:T,maxCubemapSize:M,maxAttributes:A,maxVertexUniforms:w,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:I,maxSamples:N}}function R4(n){const e=this;let t=null,i=0,r=!1,a=!1;const o=new hc,c=new yn,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(v,y){const x=v.length!==0||y||i!==0||r;return r=y,i=v.length,x},this.beginShadows=function(){a=!0,m(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(v,y){t=m(v,y,0)},this.setState=function(v,y,x){const b=v.clippingPlanes,T=v.clipIntersection,M=v.clipShadows,A=n.get(v);if(!r||b===null||b.length===0||a&&!M)a?m(null):p();else{const w=a?0:i,B=w*4;let D=A.clippingState||null;f.value=D,D=m(b,y,B,x);for(let I=0;I!==B;++I)D[I]=t[I];A.clippingState=D,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=w}};function p(){f.value!==t&&(f.value=t,f.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(v,y,x,b){const T=v!==null?v.length:0;let M=null;if(T!==0){if(M=f.value,b!==!0||M===null){const A=x+T*4,w=y.matrixWorldInverse;c.getNormalMatrix(w),(M===null||M.length<A)&&(M=new Float32Array(A));for(let B=0,D=x;B!==T;++B,D+=4)o.copy(v[B]).applyMatrix4(w,c),o.normal.toArray(M,D),M[D+3]=o.constant}f.value=M,f.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,M}}function w4(n){let e=new WeakMap;function t(o,c){return c===gp?o.mapping=Dl:c===Gg&&(o.mapping=Pu),o}function i(o){if(o&&o.isTexture){const c=o.mapping;if(c===gp||c===Gg)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const p=new KA(f.height);return p.fromEquirectangularTexture(n,o),e.set(o,p),o.addEventListener("dispose",r),t(p.texture,o.mapping)}else return null}}return o}function r(o){const c=o.target;c.removeEventListener("dispose",r);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const cp=4,uC=[.125,.215,.35,.446,.526,.582],ih=20,LS=new Bl,fC=new xt;let IS=null,PS=0,zS=0,FS=!1;const th=(1+Math.sqrt(5))/2,tp=1/th,hC=[new $(-th,tp,0),new $(th,tp,0),new $(-tp,0,th),new $(tp,0,th),new $(0,th,-tp),new $(0,th,tp),new $(-1,1,-1),new $(1,1,-1),new $(-1,1,1),new $(1,1,1)],B4=new $;class Q1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,a={}){const{size:o=256,position:c=B4}=a;IS=this._renderer.getRenderTarget(),PS=this._renderer.getActiveCubeFace(),zS=this._renderer.getActiveMipmapLevel(),FS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,i,r,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IS,PS,zS),this._renderer.xr.enabled=FS,e.scissorTest=!1,jy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Dl||e.mapping===Pu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IS=this._renderer.getRenderTarget(),PS=this._renderer.getActiveCubeFace(),zS=this._renderer.getActiveMipmapLevel(),FS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Fn,minFilter:Fn,generateMipmaps:!1,type:wr,format:ur,colorSpace:Ms,depthBuffer:!1},r=dC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=dC(e,t,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=D4(a)),this._blurMaterial=O4(a,e,t)}return r}_compileMaterial(e){const t=new Ei(this._lodPlanes[0],e);this._renderer.compile(t,LS)}_sceneToCubeUV(e,t,i,r,a){const f=new qi(90,1,t,i),p=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],v=this._renderer,y=v.autoClear,x=v.toneMapping;v.getClearColor(fC),v.toneMapping=Po,v.autoClear=!1;const b=new ss({name:"PMREM.Background",side:Rr,depthWrite:!1,depthTest:!1}),T=new Ei(new Uh,b);let M=!1;const A=e.background;A?A.isColor&&(b.color.copy(A),e.background=null,M=!0):(b.color.copy(fC),M=!0);for(let w=0;w<6;w++){const B=w%3;B===0?(f.up.set(0,p[w],0),f.position.set(a.x,a.y,a.z),f.lookAt(a.x+m[w],a.y,a.z)):B===1?(f.up.set(0,0,p[w]),f.position.set(a.x,a.y,a.z),f.lookAt(a.x,a.y+m[w],a.z)):(f.up.set(0,p[w],0),f.position.set(a.x,a.y,a.z),f.lookAt(a.x,a.y,a.z+m[w]));const D=this._cubeSize;jy(r,B*D,w>2?D:0,D,D),v.setRenderTarget(r),M&&v.render(T,f),v.render(e,f)}T.geometry.dispose(),T.material.dispose(),v.toneMapping=x,v.autoClear=y,e.background=A}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Dl||e.mapping===Pu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=mC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pC());const a=r?this._cubemapMaterial:this._equirectMaterial,o=new Ei(this._lodPlanes[0],a),c=a.uniforms;c.envMap.value=e;const f=this._cubeSize;jy(t,0,0,3*f,2*f),i.setRenderTarget(t),i.render(o,LS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),c=hC[(r-a-1)%hC.length];this._blur(e,a-1,a,o,c)}t.autoClear=i}_blur(e,t,i,r,a){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",a),this._halfBlur(o,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,o,c){const f=this._renderer,p=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,v=new Ei(this._lodPlanes[r],p),y=p.uniforms,x=this._sizeLods[i]-1,b=isFinite(a)?Math.PI/(2*x):2*Math.PI/(2*ih-1),T=a/b,M=isFinite(a)?1+Math.floor(m*T):ih;M>ih&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${ih}`);const A=[];let w=0;for(let H=0;H<ih;++H){const P=H/T,L=Math.exp(-P*P/2);A.push(L),H===0?w+=L:H<M&&(w+=2*L)}for(let H=0;H<A.length;H++)A[H]=A[H]/w;y.envMap.value=e.texture,y.samples.value=M,y.weights.value=A,y.latitudinal.value=o==="latitudinal",c&&(y.poleAxis.value=c);const{_lodMax:B}=this;y.dTheta.value=b,y.mipInt.value=B-i;const D=this._sizeLods[r],I=3*D*(r>B-cp?r-B+cp:0),N=4*(this._cubeSize-D);jy(t,I,N,3*D,2*D),f.setRenderTarget(t),f.render(v,LS)}}function D4(n){const e=[],t=[],i=[];let r=n;const a=n-cp+1+uC.length;for(let o=0;o<a;o++){const c=Math.pow(2,r);t.push(c);let f=1/c;o>n-cp?f=uC[o-n+cp-1]:o===0&&(f=0),i.push(f);const p=1/(c-2),m=-p,v=1+p,y=[m,m,v,m,v,v,m,m,v,v,m,v],x=6,b=6,T=3,M=2,A=1,w=new Float32Array(T*b*x),B=new Float32Array(M*b*x),D=new Float32Array(A*b*x);for(let N=0;N<x;N++){const H=N%3*2/3-1,P=N>2?0:-1,L=[H,P,0,H+2/3,P,0,H+2/3,P+1,0,H,P,0,H+2/3,P+1,0,H,P+1,0];w.set(L,T*b*N),B.set(y,M*b*N);const U=[N,N,N,N,N,N];D.set(U,A*b*N)}const I=new un;I.setAttribute("position",new Gn(w,T)),I.setAttribute("uv",new Gn(B,M)),I.setAttribute("faceIndex",new Gn(D,A)),e.push(I),r>cp&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function dC(n,e,t){const i=new Ii(n,e,t);return i.texture.mapping=Bp,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function jy(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function O4(n,e,t){const i=new Float32Array(ih),r=new $(0,1,0);return new Pi({name:"SphericalGaussianBlur",defines:{n:ih,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:AE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function pC(){return new Pi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function mC(){return new Pi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function AE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function U4(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const f=c.mapping,p=f===gp||f===Gg,m=f===Dl||f===Pu;if(p||m){let v=e.get(c);const y=v!==void 0?v.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==y)return t===null&&(t=new Q1(n)),v=p?t.fromEquirectangular(c,v):t.fromCubemap(c,v),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),v.texture;if(v!==void 0)return v.texture;{const x=c.image;return p&&x&&x.height>0||m&&x&&r(x)?(t===null&&(t=new Q1(n)),v=p?t.fromEquirectangular(c):t.fromCubemap(c),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),c.addEventListener("dispose",a),v.texture):null}}}return c}function r(c){let f=0;const p=6;for(let m=0;m<p;m++)c[m]!==void 0&&f++;return f===p}function a(c){const f=c.target;f.removeEventListener("dispose",a);const p=e.get(f);p!==void 0&&(e.delete(f),p.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function N4(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&l_("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function L4(n,e,t,i){const r={},a=new WeakMap;function o(v){const y=v.target;y.index!==null&&e.remove(y.index);for(const b in y.attributes)e.remove(y.attributes[b]);y.removeEventListener("dispose",o),delete r[y.id];const x=a.get(y);x&&(e.remove(x),a.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function c(v,y){return r[y.id]===!0||(y.addEventListener("dispose",o),r[y.id]=!0,t.memory.geometries++),y}function f(v){const y=v.attributes;for(const x in y)e.update(y[x],n.ARRAY_BUFFER)}function p(v){const y=[],x=v.index,b=v.attributes.position;let T=0;if(x!==null){const w=x.array;T=x.version;for(let B=0,D=w.length;B<D;B+=3){const I=w[B+0],N=w[B+1],H=w[B+2];y.push(I,N,N,H,H,I)}}else if(b!==void 0){const w=b.array;T=b.version;for(let B=0,D=w.length/3-1;B<D;B+=3){const I=B+0,N=B+1,H=B+2;y.push(I,N,N,H,H,I)}}else return;const M=new(j2(y)?qA:WA)(y,1);M.version=T;const A=a.get(v);A&&e.remove(A),a.set(v,M)}function m(v){const y=a.get(v);if(y){const x=v.index;x!==null&&y.version<x.version&&p(v)}else p(v);return a.get(v)}return{get:c,update:f,getWireframeAttribute:m}}function I4(n,e,t){let i;function r(y){i=y}let a,o;function c(y){a=y.type,o=y.bytesPerElement}function f(y,x){n.drawElements(i,x,a,y*o),t.update(x,i,1)}function p(y,x,b){b!==0&&(n.drawElementsInstanced(i,x,a,y*o,b),t.update(x,i,b))}function m(y,x,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,a,y,0,b);let M=0;for(let A=0;A<b;A++)M+=x[A];t.update(M,i,1)}function v(y,x,b,T){if(b===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let A=0;A<y.length;A++)p(y[A]/o,x[A],T[A]);else{M.multiDrawElementsInstancedWEBGL(i,x,0,a,y,0,T,0,b);let A=0;for(let w=0;w<b;w++)A+=x[w]*T[w];t.update(A,i,1)}}this.setMode=r,this.setIndex=c,this.render=f,this.renderInstances=p,this.renderMultiDraw=m,this.renderMultiDrawInstances=v}function P4(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,c){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=c*(a/3);break;case n.LINES:t.lines+=c*(a/2);break;case n.LINE_STRIP:t.lines+=c*(a-1);break;case n.LINE_LOOP:t.lines+=c*a;break;case n.POINTS:t.points+=c*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function z4(n,e,t){const i=new WeakMap,r=new zn;function a(o,c,f){const p=o.morphTargetInfluences,m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=m!==void 0?m.length:0;let y=i.get(c);if(y===void 0||y.count!==v){let U=function(){P.dispose(),i.delete(c),c.removeEventListener("dispose",U)};var x=U;y!==void 0&&y.texture.dispose();const b=c.morphAttributes.position!==void 0,T=c.morphAttributes.normal!==void 0,M=c.morphAttributes.color!==void 0,A=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],B=c.morphAttributes.color||[];let D=0;b===!0&&(D=1),T===!0&&(D=2),M===!0&&(D=3);let I=c.attributes.position.count*D,N=1;I>e.maxTextureSize&&(N=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const H=new Float32Array(I*N*4*v),P=new ov(H,I,N,v);P.type=Li,P.needsUpdate=!0;const L=D*4;for(let Y=0;Y<v;Y++){const ie=A[Y],Q=w[Y],ae=B[Y],he=I*N*4*Y;for(let X=0;X<ie.count;X++){const te=X*L;b===!0&&(r.fromBufferAttribute(ie,X),H[he+te+0]=r.x,H[he+te+1]=r.y,H[he+te+2]=r.z,H[he+te+3]=0),T===!0&&(r.fromBufferAttribute(Q,X),H[he+te+4]=r.x,H[he+te+5]=r.y,H[he+te+6]=r.z,H[he+te+7]=0),M===!0&&(r.fromBufferAttribute(ae,X),H[he+te+8]=r.x,H[he+te+9]=r.y,H[he+te+10]=r.z,H[he+te+11]=ae.itemSize===4?r.w:1)}}y={count:v,texture:P,size:new Ve(I,N)},i.set(c,y),c.addEventListener("dispose",U)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let b=0;for(let M=0;M<p.length;M++)b+=p[M];const T=c.morphTargetsRelative?1:1-b;f.getUniforms().setValue(n,"morphTargetBaseInfluence",T),f.getUniforms().setValue(n,"morphTargetInfluences",p)}f.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:a}}function F4(n,e,t,i){let r=new WeakMap;function a(f){const p=i.render.frame,m=f.geometry,v=e.get(f,m);if(r.get(v)!==p&&(e.update(v),r.set(v,p)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),r.get(f)!==p&&(t.update(f.instanceMatrix,n.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,n.ARRAY_BUFFER),r.set(f,p))),f.isSkinnedMesh){const y=f.skeleton;r.get(y)!==p&&(y.update(),r.set(y,p))}return v}function o(){r=new WeakMap}function c(f){const p=f.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:a,dispose:o}}const XB=new ei,gC=new hv(1,1),YB=new ov,jB=new Ox,WB=new cv,vC=[],yC=[],_C=new Float32Array(16),xC=new Float32Array(9),bC=new Float32Array(4);function Up(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=vC[r];if(a===void 0&&(a=new Float32Array(r),vC[r]=a),e!==0){i.toArray(a,0);for(let o=1,c=0;o!==e;++o)c+=t,n[o].toArray(a,c)}return a}function Br(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Dr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function eb(n,e){let t=yC[e];t===void 0&&(t=new Int32Array(e),yC[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function H4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function G4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2fv(this.addr,e),Dr(t,e)}}function V4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Br(t,e))return;n.uniform3fv(this.addr,e),Dr(t,e)}}function k4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4fv(this.addr,e),Dr(t,e)}}function X4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Dr(t,e)}else{if(Br(t,i))return;bC.set(i),n.uniformMatrix2fv(this.addr,!1,bC),Dr(t,i)}}function Y4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Dr(t,e)}else{if(Br(t,i))return;xC.set(i),n.uniformMatrix3fv(this.addr,!1,xC),Dr(t,i)}}function j4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Dr(t,e)}else{if(Br(t,i))return;_C.set(i),n.uniformMatrix4fv(this.addr,!1,_C),Dr(t,i)}}function W4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function q4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2iv(this.addr,e),Dr(t,e)}}function K4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3iv(this.addr,e),Dr(t,e)}}function J4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4iv(this.addr,e),Dr(t,e)}}function Z4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function $4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2uiv(this.addr,e),Dr(t,e)}}function Q4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3uiv(this.addr,e),Dr(t,e)}}function eF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4uiv(this.addr,e),Dr(t,e)}}function tF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(gC.compareFunction=YA,a=gC):a=XB,t.setTexture2D(e||a,r)}function nF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||jB,r)}function iF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||WB,r)}function rF(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||YB,r)}function aF(n){switch(n){case 5126:return H4;case 35664:return G4;case 35665:return V4;case 35666:return k4;case 35674:return X4;case 35675:return Y4;case 35676:return j4;case 5124:case 35670:return W4;case 35667:case 35671:return q4;case 35668:case 35672:return K4;case 35669:case 35673:return J4;case 5125:return Z4;case 36294:return $4;case 36295:return Q4;case 36296:return eF;case 35678:case 36198:case 36298:case 36306:case 35682:return tF;case 35679:case 36299:case 36307:return nF;case 35680:case 36300:case 36308:case 36293:return iF;case 36289:case 36303:case 36311:case 36292:return rF}}function sF(n,e){n.uniform1fv(this.addr,e)}function oF(n,e){const t=Up(e,this.size,2);n.uniform2fv(this.addr,t)}function lF(n,e){const t=Up(e,this.size,3);n.uniform3fv(this.addr,t)}function cF(n,e){const t=Up(e,this.size,4);n.uniform4fv(this.addr,t)}function uF(n,e){const t=Up(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fF(n,e){const t=Up(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function hF(n,e){const t=Up(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function dF(n,e){n.uniform1iv(this.addr,e)}function pF(n,e){n.uniform2iv(this.addr,e)}function mF(n,e){n.uniform3iv(this.addr,e)}function gF(n,e){n.uniform4iv(this.addr,e)}function vF(n,e){n.uniform1uiv(this.addr,e)}function yF(n,e){n.uniform2uiv(this.addr,e)}function _F(n,e){n.uniform3uiv(this.addr,e)}function xF(n,e){n.uniform4uiv(this.addr,e)}function bF(n,e,t){const i=this.cache,r=e.length,a=eb(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),Dr(i,a));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||XB,a[o])}function SF(n,e,t){const i=this.cache,r=e.length,a=eb(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),Dr(i,a));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||jB,a[o])}function AF(n,e,t){const i=this.cache,r=e.length,a=eb(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),Dr(i,a));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||WB,a[o])}function EF(n,e,t){const i=this.cache,r=e.length,a=eb(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),Dr(i,a));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||YB,a[o])}function MF(n){switch(n){case 5126:return sF;case 35664:return oF;case 35665:return lF;case 35666:return cF;case 35674:return uF;case 35675:return fF;case 35676:return hF;case 5124:case 35670:return dF;case 35667:case 35671:return pF;case 35668:case 35672:return mF;case 35669:case 35673:return gF;case 5125:return vF;case 36294:return yF;case 36295:return _F;case 36296:return xF;case 35678:case 36198:case 36298:case 36306:case 35682:return bF;case 35679:case 36299:case 36307:return SF;case 35680:case 36300:case 36308:case 36293:return AF;case 36289:case 36303:case 36311:case 36292:return EF}}class TF{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=aF(t.type)}}class CF{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=MF(t.type)}}class RF{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,o=r.length;a!==o;++a){const c=r[a];c.setValue(e,t[c.id],i)}}}const HS=/(\w+)(\])?(\[|\.)?/g;function SC(n,e){n.seq.push(e),n.map[e.id]=e}function wF(n,e,t){const i=n.name,r=i.length;for(HS.lastIndex=0;;){const a=HS.exec(i),o=HS.lastIndex;let c=a[1];const f=a[2]==="]",p=a[3];if(f&&(c=c|0),p===void 0||p==="["&&o+2===r){SC(t,p===void 0?new TF(c,n,e):new CF(c,n,e));break}else{let v=t.map[c];v===void 0&&(v=new RF(c),SC(t,v)),t=v}}}class u_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(t,r),o=e.getUniformLocation(t,a.name);wF(a,o,this)}}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,o=t.length;a!==o;++a){const c=t[a],f=i[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function AC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const BF=37297;let DF=0;function OF(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let o=r;o<a;o++){const c=o+1;i.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return i.join(`
`)}const EC=new yn;function UF(n){Pn._getMatrix(EC,Pn.workingColorSpace,n);const e=`mat3( ${EC.elements.map(t=>t.toFixed(4))} )`;switch(Pn.getTransfer(n)){case kg:return[e,"LinearTransferOETF"];case ui:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function MC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+OF(n.getShaderSource(e),o)}else return r}function NF(n,e){const t=UF(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function LF(n,e){let t;switch(e){case M2:t="Linear";break;case T2:t="Reinhard";break;case C2:t="Cineon";break;case PA:t="ACESFilmic";break;case w2:t="AgX";break;case B2:t="Neutral";break;case R2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Wy=new $;function IF(){Pn.getLuminanceCoefficients(Wy);const n=Wy.x.toFixed(4),e=Wy.y.toFixed(4),t=Wy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function PF(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sg).join(`
`)}function zF(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function FF(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),o=a.name;let c=1;a.type===n.FLOAT_MAT2&&(c=2),a.type===n.FLOAT_MAT3&&(c=3),a.type===n.FLOAT_MAT4&&(c=4),t[o]={type:a.type,location:n.getAttribLocation(e,o),locationSize:c}}return t}function Sg(n){return n!==""}function TC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function CC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const HF=/^[ \t]*#include +<([\w\d./]+)>/gm;function eA(n){return n.replace(HF,VF)}const GF=new Map;function VF(n,e){let t=En[e];if(t===void 0){const i=GF.get(e);if(i!==void 0)t=En[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return eA(t)}const kF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RC(n){return n.replace(kF,XF)}function XF(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function wC(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function YF(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Sx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Mg?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Uo&&(e="SHADOWMAP_TYPE_VSM"),e}function jF(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Dl:case Pu:e="ENVMAP_TYPE_CUBE";break;case Bp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WF(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Pu:e="ENVMAP_MODE_REFRACTION";break}return e}function qF(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case iv:e="ENVMAP_BLENDING_MULTIPLY";break;case A2:e="ENVMAP_BLENDING_MIX";break;case E2:e="ENVMAP_BLENDING_ADD";break}return e}function KF(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function JF(n,e,t,i){const r=n.getContext(),a=t.defines;let o=t.vertexShader,c=t.fragmentShader;const f=YF(t),p=jF(t),m=WF(t),v=qF(t),y=KF(t),x=PF(t),b=zF(a),T=r.createProgram();let M,A,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Sg).join(`
`),M.length>0&&(M+=`
`),A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Sg).join(`
`),A.length>0&&(A+=`
`)):(M=[wC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sg).join(`
`),A=[wC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",t.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Po?"#define TONE_MAPPING":"",t.toneMapping!==Po?En.tonemapping_pars_fragment:"",t.toneMapping!==Po?LF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",En.colorspace_pars_fragment,NF("linearToOutputTexel",t.outputColorSpace),IF(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sg).join(`
`)),o=eA(o),o=TC(o,t),o=CC(o,t),c=eA(c),c=TC(c,t),c=CC(c,t),o=RC(o),c=RC(c),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,M=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,A=["#define varying in",t.glslVersion===Y1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Y1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const B=w+M+o,D=w+A+c,I=AC(r,r.VERTEX_SHADER,B),N=AC(r,r.FRAGMENT_SHADER,D);r.attachShader(T,I),r.attachShader(T,N),t.index0AttributeName!==void 0?r.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T);function H(Y){if(n.debug.checkShaderErrors){const ie=r.getProgramInfoLog(T).trim(),Q=r.getShaderInfoLog(I).trim(),ae=r.getShaderInfoLog(N).trim();let he=!0,X=!0;if(r.getProgramParameter(T,r.LINK_STATUS)===!1)if(he=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,T,I,N);else{const te=MC(r,I,"vertex"),ne=MC(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,r.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+ie+`
`+te+`
`+ne)}else ie!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ie):(Q===""||ae==="")&&(X=!1);X&&(Y.diagnostics={runnable:he,programLog:ie,vertexShader:{log:Q,prefix:M},fragmentShader:{log:ae,prefix:A}})}r.deleteShader(I),r.deleteShader(N),P=new u_(r,T),L=FF(r,T)}let P;this.getUniforms=function(){return P===void 0&&H(this),P};let L;this.getAttributes=function(){return L===void 0&&H(this),L};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=r.getProgramParameter(T,BF)),U},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=DF++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=I,this.fragmentShader=N,this}let ZF=0;class $F{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new QF(e),t.set(e,i)),i}}class QF{constructor(e){this.id=ZF++,this.code=e,this.usedTimes=0}}function eH(n,e,t,i,r,a,o){const c=new Ap,f=new $F,p=new Set,m=[],v=r.logarithmicDepthBuffer,y=r.vertexTextures;let x=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(L){return p.add(L),L===0?"uv":`uv${L}`}function M(L,U,Y,ie,Q){const ae=ie.fog,he=Q.geometry,X=L.isMeshStandardMaterial?ie.environment:null,te=(L.isMeshStandardMaterial?t:e).get(L.envMap||X),ne=te&&te.mapping===Bp?te.image.height:null,be=b[L.type];L.precision!==null&&(x=r.getMaxPrecision(L.precision),x!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const W=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,se=W!==void 0?W.length:0;let Ae=0;he.morphAttributes.position!==void 0&&(Ae=1),he.morphAttributes.normal!==void 0&&(Ae=2),he.morphAttributes.color!==void 0&&(Ae=3);let De,ge,He,Le;if(be){const on=No[be];De=on.vertexShader,ge=on.fragmentShader}else De=L.vertexShader,ge=L.fragmentShader,f.update(L),He=f.getVertexShaderID(L),Le=f.getFragmentShaderID(L);const Qe=n.getRenderTarget(),rt=n.state.buffers.depth.getReversed(),Bt=Q.isInstancedMesh===!0,wt=Q.isBatchedMesh===!0,fn=!!L.map,Vt=!!L.matcap,Rt=!!te,Z=!!L.aoMap,lt=!!L.lightMap,et=!!L.bumpMap,Ze=!!L.normalMap,je=!!L.displacementMap,yt=!!L.emissiveMap,Je=!!L.metalnessMap,J=!!L.roughnessMap,k=L.anisotropy>0,re=L.clearcoat>0,xe=L.dispersion>0,Xe=L.iridescence>0,Be=L.sheen>0,ut=L.transmission>0,ot=k&&!!L.anisotropyMap,pt=re&&!!L.clearcoatMap,Pt=re&&!!L.clearcoatNormalMap,at=re&&!!L.clearcoatRoughnessMap,_t=Xe&&!!L.iridescenceMap,Et=Xe&&!!L.iridescenceThicknessMap,vt=Be&&!!L.sheenColorMap,dt=Be&&!!L.sheenRoughnessMap,de=!!L.specularMap,Pe=!!L.specularColorMap,st=!!L.specularIntensityMap,pe=ut&&!!L.transmissionMap,Te=ut&&!!L.thicknessMap,Ie=!!L.gradientMap,Ye=!!L.alphaMap,bt=L.alphaTest>0,gt=!!L.alphaHash,zt=!!L.extensions;let mn=Po;L.toneMapped&&(Qe===null||Qe.isXRRenderTarget===!0)&&(mn=n.toneMapping);const Vn={shaderID:be,shaderType:L.type,shaderName:L.name,vertexShader:De,fragmentShader:ge,defines:L.defines,customVertexShaderID:He,customFragmentShaderID:Le,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:wt,batchingColor:wt&&Q._colorsTexture!==null,instancing:Bt,instancingColor:Bt&&Q.instanceColor!==null,instancingMorph:Bt&&Q.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Qe===null?n.outputColorSpace:Qe.isXRRenderTarget===!0?Qe.texture.colorSpace:Ms,alphaToCoverage:!!L.alphaToCoverage,map:fn,matcap:Vt,envMap:Rt,envMapMode:Rt&&te.mapping,envMapCubeUVHeight:ne,aoMap:Z,lightMap:lt,bumpMap:et,normalMap:Ze,displacementMap:y&&je,emissiveMap:yt,normalMapObjectSpace:Ze&&L.normalMapType===P2,normalMapTangentSpace:Ze&&L.normalMapType===ku,metalnessMap:Je,roughnessMap:J,anisotropy:k,anisotropyMap:ot,clearcoat:re,clearcoatMap:pt,clearcoatNormalMap:Pt,clearcoatRoughnessMap:at,dispersion:xe,iridescence:Xe,iridescenceMap:_t,iridescenceThicknessMap:Et,sheen:Be,sheenColorMap:vt,sheenRoughnessMap:dt,specularMap:de,specularColorMap:Pe,specularIntensityMap:st,transmission:ut,transmissionMap:pe,thicknessMap:Te,gradientMap:Ie,opaque:L.transparent===!1&&L.blending===hh&&L.alphaToCoverage===!1,alphaMap:Ye,alphaTest:bt,alphaHash:gt,combine:L.combine,mapUv:fn&&T(L.map.channel),aoMapUv:Z&&T(L.aoMap.channel),lightMapUv:lt&&T(L.lightMap.channel),bumpMapUv:et&&T(L.bumpMap.channel),normalMapUv:Ze&&T(L.normalMap.channel),displacementMapUv:je&&T(L.displacementMap.channel),emissiveMapUv:yt&&T(L.emissiveMap.channel),metalnessMapUv:Je&&T(L.metalnessMap.channel),roughnessMapUv:J&&T(L.roughnessMap.channel),anisotropyMapUv:ot&&T(L.anisotropyMap.channel),clearcoatMapUv:pt&&T(L.clearcoatMap.channel),clearcoatNormalMapUv:Pt&&T(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:at&&T(L.clearcoatRoughnessMap.channel),iridescenceMapUv:_t&&T(L.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&T(L.iridescenceThicknessMap.channel),sheenColorMapUv:vt&&T(L.sheenColorMap.channel),sheenRoughnessMapUv:dt&&T(L.sheenRoughnessMap.channel),specularMapUv:de&&T(L.specularMap.channel),specularColorMapUv:Pe&&T(L.specularColorMap.channel),specularIntensityMapUv:st&&T(L.specularIntensityMap.channel),transmissionMapUv:pe&&T(L.transmissionMap.channel),thicknessMapUv:Te&&T(L.thicknessMap.channel),alphaMapUv:Ye&&T(L.alphaMap.channel),vertexTangents:!!he.attributes.tangent&&(Ze||k),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!he.attributes.uv&&(fn||Ye),fog:!!ae,useFog:L.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:rt,skinning:Q.isSkinnedMesh===!0,morphTargets:he.morphAttributes.position!==void 0,morphNormals:he.morphAttributes.normal!==void 0,morphColors:he.morphAttributes.color!==void 0,morphTargetsCount:se,morphTextureStride:Ae,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&Y.length>0,shadowMapType:n.shadowMap.type,toneMapping:mn,decodeVideoTexture:fn&&L.map.isVideoTexture===!0&&Pn.getTransfer(L.map.colorSpace)===ui,decodeVideoTextureEmissive:yt&&L.emissiveMap.isVideoTexture===!0&&Pn.getTransfer(L.emissiveMap.colorSpace)===ui,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===ga,flipSided:L.side===Rr,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:zt&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(zt&&L.extensions.multiDraw===!0||wt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Vn.vertexUv1s=p.has(1),Vn.vertexUv2s=p.has(2),Vn.vertexUv3s=p.has(3),p.clear(),Vn}function A(L){const U=[];if(L.shaderID?U.push(L.shaderID):(U.push(L.customVertexShaderID),U.push(L.customFragmentShaderID)),L.defines!==void 0)for(const Y in L.defines)U.push(Y),U.push(L.defines[Y]);return L.isRawShaderMaterial===!1&&(w(U,L),B(U,L),U.push(n.outputColorSpace)),U.push(L.customProgramCacheKey),U.join()}function w(L,U){L.push(U.precision),L.push(U.outputColorSpace),L.push(U.envMapMode),L.push(U.envMapCubeUVHeight),L.push(U.mapUv),L.push(U.alphaMapUv),L.push(U.lightMapUv),L.push(U.aoMapUv),L.push(U.bumpMapUv),L.push(U.normalMapUv),L.push(U.displacementMapUv),L.push(U.emissiveMapUv),L.push(U.metalnessMapUv),L.push(U.roughnessMapUv),L.push(U.anisotropyMapUv),L.push(U.clearcoatMapUv),L.push(U.clearcoatNormalMapUv),L.push(U.clearcoatRoughnessMapUv),L.push(U.iridescenceMapUv),L.push(U.iridescenceThicknessMapUv),L.push(U.sheenColorMapUv),L.push(U.sheenRoughnessMapUv),L.push(U.specularMapUv),L.push(U.specularColorMapUv),L.push(U.specularIntensityMapUv),L.push(U.transmissionMapUv),L.push(U.thicknessMapUv),L.push(U.combine),L.push(U.fogExp2),L.push(U.sizeAttenuation),L.push(U.morphTargetsCount),L.push(U.morphAttributeCount),L.push(U.numDirLights),L.push(U.numPointLights),L.push(U.numSpotLights),L.push(U.numSpotLightMaps),L.push(U.numHemiLights),L.push(U.numRectAreaLights),L.push(U.numDirLightShadows),L.push(U.numPointLightShadows),L.push(U.numSpotLightShadows),L.push(U.numSpotLightShadowsWithMaps),L.push(U.numLightProbes),L.push(U.shadowMapType),L.push(U.toneMapping),L.push(U.numClippingPlanes),L.push(U.numClipIntersection),L.push(U.depthPacking)}function B(L,U){c.disableAll(),U.supportsVertexTextures&&c.enable(0),U.instancing&&c.enable(1),U.instancingColor&&c.enable(2),U.instancingMorph&&c.enable(3),U.matcap&&c.enable(4),U.envMap&&c.enable(5),U.normalMapObjectSpace&&c.enable(6),U.normalMapTangentSpace&&c.enable(7),U.clearcoat&&c.enable(8),U.iridescence&&c.enable(9),U.alphaTest&&c.enable(10),U.vertexColors&&c.enable(11),U.vertexAlphas&&c.enable(12),U.vertexUv1s&&c.enable(13),U.vertexUv2s&&c.enable(14),U.vertexUv3s&&c.enable(15),U.vertexTangents&&c.enable(16),U.anisotropy&&c.enable(17),U.alphaHash&&c.enable(18),U.batching&&c.enable(19),U.dispersion&&c.enable(20),U.batchingColor&&c.enable(21),L.push(c.mask),c.disableAll(),U.fog&&c.enable(0),U.useFog&&c.enable(1),U.flatShading&&c.enable(2),U.logarithmicDepthBuffer&&c.enable(3),U.reverseDepthBuffer&&c.enable(4),U.skinning&&c.enable(5),U.morphTargets&&c.enable(6),U.morphNormals&&c.enable(7),U.morphColors&&c.enable(8),U.premultipliedAlpha&&c.enable(9),U.shadowMapEnabled&&c.enable(10),U.doubleSided&&c.enable(11),U.flipSided&&c.enable(12),U.useDepthPacking&&c.enable(13),U.dithering&&c.enable(14),U.transmission&&c.enable(15),U.sheen&&c.enable(16),U.opaque&&c.enable(17),U.pointsUvs&&c.enable(18),U.decodeVideoTexture&&c.enable(19),U.decodeVideoTextureEmissive&&c.enable(20),U.alphaToCoverage&&c.enable(21),L.push(c.mask)}function D(L){const U=b[L.type];let Y;if(U){const ie=No[U];Y=Z2.clone(ie.uniforms)}else Y=L.uniforms;return Y}function I(L,U){let Y;for(let ie=0,Q=m.length;ie<Q;ie++){const ae=m[ie];if(ae.cacheKey===U){Y=ae,++Y.usedTimes;break}}return Y===void 0&&(Y=new JF(n,U,L,a),m.push(Y)),Y}function N(L){if(--L.usedTimes===0){const U=m.indexOf(L);m[U]=m[m.length-1],m.pop(),L.destroy()}}function H(L){f.remove(L)}function P(){f.dispose()}return{getParameters:M,getProgramCacheKey:A,getUniforms:D,acquireProgram:I,releaseProgram:N,releaseShaderCache:H,programs:m,dispose:P}}function tH(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let c=n.get(o);return c===void 0&&(c={},n.set(o,c)),c}function i(o){n.delete(o)}function r(o,c,f){n.get(o)[c]=f}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function nH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function BC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DC(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function o(v,y,x,b,T,M){let A=n[e];return A===void 0?(A={id:v.id,object:v,geometry:y,material:x,groupOrder:b,renderOrder:v.renderOrder,z:T,group:M},n[e]=A):(A.id=v.id,A.object=v,A.geometry=y,A.material=x,A.groupOrder=b,A.renderOrder=v.renderOrder,A.z=T,A.group=M),e++,A}function c(v,y,x,b,T,M){const A=o(v,y,x,b,T,M);x.transmission>0?i.push(A):x.transparent===!0?r.push(A):t.push(A)}function f(v,y,x,b,T,M){const A=o(v,y,x,b,T,M);x.transmission>0?i.unshift(A):x.transparent===!0?r.unshift(A):t.unshift(A)}function p(v,y){t.length>1&&t.sort(v||nH),i.length>1&&i.sort(y||BC),r.length>1&&r.sort(y||BC)}function m(){for(let v=e,y=n.length;v<y;v++){const x=n[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:c,unshift:f,finish:m,sort:p}}function iH(){let n=new WeakMap;function e(i,r){const a=n.get(i);let o;return a===void 0?(o=new DC,n.set(i,[o])):r>=a.length?(o=new DC,a.push(o)):o=a[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function rH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new $,color:new xt};break;case"SpotLight":t={position:new $,direction:new $,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new $,color:new xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new $,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":t={color:new xt,position:new $,halfWidth:new $,halfHeight:new $};break}return n[e.id]=t,t}}}function aH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let sH=0;function oH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function lH(n){const e=new rH,t=aH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new $);const r=new $,a=new qt,o=new qt;function c(p){let m=0,v=0,y=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let x=0,b=0,T=0,M=0,A=0,w=0,B=0,D=0,I=0,N=0,H=0;p.sort(oH);for(let L=0,U=p.length;L<U;L++){const Y=p[L],ie=Y.color,Q=Y.intensity,ae=Y.distance,he=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)m+=ie.r*Q,v+=ie.g*Q,y+=ie.b*Q;else if(Y.isLightProbe){for(let X=0;X<9;X++)i.probe[X].addScaledVector(Y.sh.coefficients[X],Q);H++}else if(Y.isDirectionalLight){const X=e.get(Y);if(X.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const te=Y.shadow,ne=t.get(Y);ne.shadowIntensity=te.intensity,ne.shadowBias=te.bias,ne.shadowNormalBias=te.normalBias,ne.shadowRadius=te.radius,ne.shadowMapSize=te.mapSize,i.directionalShadow[x]=ne,i.directionalShadowMap[x]=he,i.directionalShadowMatrix[x]=Y.shadow.matrix,w++}i.directional[x]=X,x++}else if(Y.isSpotLight){const X=e.get(Y);X.position.setFromMatrixPosition(Y.matrixWorld),X.color.copy(ie).multiplyScalar(Q),X.distance=ae,X.coneCos=Math.cos(Y.angle),X.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),X.decay=Y.decay,i.spot[T]=X;const te=Y.shadow;if(Y.map&&(i.spotLightMap[I]=Y.map,I++,te.updateMatrices(Y),Y.castShadow&&N++),i.spotLightMatrix[T]=te.matrix,Y.castShadow){const ne=t.get(Y);ne.shadowIntensity=te.intensity,ne.shadowBias=te.bias,ne.shadowNormalBias=te.normalBias,ne.shadowRadius=te.radius,ne.shadowMapSize=te.mapSize,i.spotShadow[T]=ne,i.spotShadowMap[T]=he,D++}T++}else if(Y.isRectAreaLight){const X=e.get(Y);X.color.copy(ie).multiplyScalar(Q),X.halfWidth.set(Y.width*.5,0,0),X.halfHeight.set(0,Y.height*.5,0),i.rectArea[M]=X,M++}else if(Y.isPointLight){const X=e.get(Y);if(X.color.copy(Y.color).multiplyScalar(Y.intensity),X.distance=Y.distance,X.decay=Y.decay,Y.castShadow){const te=Y.shadow,ne=t.get(Y);ne.shadowIntensity=te.intensity,ne.shadowBias=te.bias,ne.shadowNormalBias=te.normalBias,ne.shadowRadius=te.radius,ne.shadowMapSize=te.mapSize,ne.shadowCameraNear=te.camera.near,ne.shadowCameraFar=te.camera.far,i.pointShadow[b]=ne,i.pointShadowMap[b]=he,i.pointShadowMatrix[b]=Y.shadow.matrix,B++}i.point[b]=X,b++}else if(Y.isHemisphereLight){const X=e.get(Y);X.skyColor.copy(Y.color).multiplyScalar(Q),X.groundColor.copy(Y.groundColor).multiplyScalar(Q),i.hemi[A]=X,A++}}M>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Tt.LTC_FLOAT_1,i.rectAreaLTC2=Tt.LTC_FLOAT_2):(i.rectAreaLTC1=Tt.LTC_HALF_1,i.rectAreaLTC2=Tt.LTC_HALF_2)),i.ambient[0]=m,i.ambient[1]=v,i.ambient[2]=y;const P=i.hash;(P.directionalLength!==x||P.pointLength!==b||P.spotLength!==T||P.rectAreaLength!==M||P.hemiLength!==A||P.numDirectionalShadows!==w||P.numPointShadows!==B||P.numSpotShadows!==D||P.numSpotMaps!==I||P.numLightProbes!==H)&&(i.directional.length=x,i.spot.length=T,i.rectArea.length=M,i.point.length=b,i.hemi.length=A,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=B,i.pointShadowMap.length=B,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=B,i.spotLightMatrix.length=D+I-N,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=H,P.directionalLength=x,P.pointLength=b,P.spotLength=T,P.rectAreaLength=M,P.hemiLength=A,P.numDirectionalShadows=w,P.numPointShadows=B,P.numSpotShadows=D,P.numSpotMaps=I,P.numLightProbes=H,i.version=sH++)}function f(p,m){let v=0,y=0,x=0,b=0,T=0;const M=m.matrixWorldInverse;for(let A=0,w=p.length;A<w;A++){const B=p[A];if(B.isDirectionalLight){const D=i.directional[v];D.direction.setFromMatrixPosition(B.matrixWorld),r.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(M),v++}else if(B.isSpotLight){const D=i.spot[x];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(M),D.direction.setFromMatrixPosition(B.matrixWorld),r.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(M),x++}else if(B.isRectAreaLight){const D=i.rectArea[b];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(M),o.identity(),a.copy(B.matrixWorld),a.premultiply(M),o.extractRotation(a),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(o),D.halfHeight.applyMatrix4(o),b++}else if(B.isPointLight){const D=i.point[y];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(M),y++}else if(B.isHemisphereLight){const D=i.hemi[T];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(M),T++}}}return{setup:c,setupView:f,state:i}}function OC(n){const e=new lH(n),t=[],i=[];function r(m){p.camera=m,t.length=0,i.length=0}function a(m){t.push(m)}function o(m){i.push(m)}function c(){e.setup(t)}function f(m){e.setupView(t,m)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:p,setupLights:c,setupLightsView:f,pushLight:a,pushShadow:o}}function cH(n){let e=new WeakMap;function t(r,a=0){const o=e.get(r);let c;return o===void 0?(c=new OC(n),e.set(r,[c])):a>=o.length?(c=new OC(n),o.push(c)):c=o[a],c}function i(){e=new WeakMap}return{get:t,dispose:i}}const uH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hH(n,e,t){let i=new Dp;const r=new Ve,a=new Ve,o=new zn,c=new Zx({depthPacking:I2}),f=new lE,p={},m=t.maxTextureSize,v={[Ho]:Rr,[Rr]:Ho,[ga]:ga},y=new Pi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:uH,fragmentShader:fH}),x=y.clone();x.defines.HORIZONTAL_PASS=1;const b=new un;b.setAttribute("position",new Gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new Ei(b,y),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Sx;let A=this.type;this.render=function(N,H,P){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||N.length===0)return;const L=n.getRenderTarget(),U=n.getActiveCubeFace(),Y=n.getActiveMipmapLevel(),ie=n.state;ie.setBlending(ea),ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const Q=A!==Uo&&this.type===Uo,ae=A===Uo&&this.type!==Uo;for(let he=0,X=N.length;he<X;he++){const te=N[he],ne=te.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const be=ne.getFrameExtents();if(r.multiply(be),a.copy(ne.mapSize),(r.x>m||r.y>m)&&(r.x>m&&(a.x=Math.floor(m/be.x),r.x=a.x*be.x,ne.mapSize.x=a.x),r.y>m&&(a.y=Math.floor(m/be.y),r.y=a.y*be.y,ne.mapSize.y=a.y)),ne.map===null||Q===!0||ae===!0){const se=this.type!==Uo?{minFilter:tr,magFilter:tr}:{};ne.map!==null&&ne.map.dispose(),ne.map=new Ii(r.x,r.y,se),ne.map.texture.name=te.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const W=ne.getViewportCount();for(let se=0;se<W;se++){const Ae=ne.getViewport(se);o.set(a.x*Ae.x,a.y*Ae.y,a.x*Ae.z,a.y*Ae.w),ie.viewport(o),ne.updateMatrices(te,se),i=ne.getFrustum(),D(H,P,ne.camera,te,this.type)}ne.isPointLightShadow!==!0&&this.type===Uo&&w(ne,P),ne.needsUpdate=!1}A=this.type,M.needsUpdate=!1,n.setRenderTarget(L,U,Y)};function w(N,H){const P=e.update(T);y.defines.VSM_SAMPLES!==N.blurSamples&&(y.defines.VSM_SAMPLES=N.blurSamples,x.defines.VSM_SAMPLES=N.blurSamples,y.needsUpdate=!0,x.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Ii(r.x,r.y)),y.uniforms.shadow_pass.value=N.map.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(H,null,P,y,T,null),x.uniforms.shadow_pass.value=N.mapPass.texture,x.uniforms.resolution.value=N.mapSize,x.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(H,null,P,x,T,null)}function B(N,H,P,L){let U=null;const Y=P.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(Y!==void 0)U=Y;else if(U=P.isPointLight===!0?f:c,n.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0||H.alphaToCoverage===!0){const ie=U.uuid,Q=H.uuid;let ae=p[ie];ae===void 0&&(ae={},p[ie]=ae);let he=ae[Q];he===void 0&&(he=U.clone(),ae[Q]=he,H.addEventListener("dispose",I)),U=he}if(U.visible=H.visible,U.wireframe=H.wireframe,L===Uo?U.side=H.shadowSide!==null?H.shadowSide:H.side:U.side=H.shadowSide!==null?H.shadowSide:v[H.side],U.alphaMap=H.alphaMap,U.alphaTest=H.alphaToCoverage===!0?.5:H.alphaTest,U.map=H.map,U.clipShadows=H.clipShadows,U.clippingPlanes=H.clippingPlanes,U.clipIntersection=H.clipIntersection,U.displacementMap=H.displacementMap,U.displacementScale=H.displacementScale,U.displacementBias=H.displacementBias,U.wireframeLinewidth=H.wireframeLinewidth,U.linewidth=H.linewidth,P.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const ie=n.properties.get(U);ie.light=P}return U}function D(N,H,P,L,U){if(N.visible===!1)return;if(N.layers.test(H.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&U===Uo)&&(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,N.matrixWorld);const Q=e.update(N),ae=N.material;if(Array.isArray(ae)){const he=Q.groups;for(let X=0,te=he.length;X<te;X++){const ne=he[X],be=ae[ne.materialIndex];if(be&&be.visible){const W=B(N,be,L,U);N.onBeforeShadow(n,N,H,P,Q,W,ne),n.renderBufferDirect(P,null,Q,W,N,ne),N.onAfterShadow(n,N,H,P,Q,W,ne)}}}else if(ae.visible){const he=B(N,ae,L,U);N.onBeforeShadow(n,N,H,P,Q,he,null),n.renderBufferDirect(P,null,Q,he,N,null),N.onAfterShadow(n,N,H,P,Q,he,null)}}const ie=N.children;for(let Q=0,ae=ie.length;Q<ae;Q++)D(ie[Q],H,P,L,U)}function I(N){N.target.removeEventListener("dispose",I);for(const P in p){const L=p[P],U=N.target.uuid;U in L&&(L[U].dispose(),delete L[U])}}}const dH={[g_]:v_,[y_]:b_,[__]:S_,[yh]:x_,[v_]:g_,[b_]:y_,[S_]:__,[x_]:yh};function pH(n,e){function t(){let pe=!1;const Te=new zn;let Ie=null;const Ye=new zn(0,0,0,0);return{setMask:function(bt){Ie!==bt&&!pe&&(n.colorMask(bt,bt,bt,bt),Ie=bt)},setLocked:function(bt){pe=bt},setClear:function(bt,gt,zt,mn,Vn){Vn===!0&&(bt*=mn,gt*=mn,zt*=mn),Te.set(bt,gt,zt,mn),Ye.equals(Te)===!1&&(n.clearColor(bt,gt,zt,mn),Ye.copy(Te))},reset:function(){pe=!1,Ie=null,Ye.set(-1,0,0,0)}}}function i(){let pe=!1,Te=!1,Ie=null,Ye=null,bt=null;return{setReversed:function(gt){if(Te!==gt){const zt=e.get("EXT_clip_control");gt?zt.clipControlEXT(zt.LOWER_LEFT_EXT,zt.ZERO_TO_ONE_EXT):zt.clipControlEXT(zt.LOWER_LEFT_EXT,zt.NEGATIVE_ONE_TO_ONE_EXT),Te=gt;const mn=bt;bt=null,this.setClear(mn)}},getReversed:function(){return Te},setTest:function(gt){gt?Qe(n.DEPTH_TEST):rt(n.DEPTH_TEST)},setMask:function(gt){Ie!==gt&&!pe&&(n.depthMask(gt),Ie=gt)},setFunc:function(gt){if(Te&&(gt=dH[gt]),Ye!==gt){switch(gt){case g_:n.depthFunc(n.NEVER);break;case v_:n.depthFunc(n.ALWAYS);break;case y_:n.depthFunc(n.LESS);break;case yh:n.depthFunc(n.LEQUAL);break;case __:n.depthFunc(n.EQUAL);break;case x_:n.depthFunc(n.GEQUAL);break;case b_:n.depthFunc(n.GREATER);break;case S_:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ye=gt}},setLocked:function(gt){pe=gt},setClear:function(gt){bt!==gt&&(Te&&(gt=1-gt),n.clearDepth(gt),bt=gt)},reset:function(){pe=!1,Ie=null,Ye=null,bt=null,Te=!1}}}function r(){let pe=!1,Te=null,Ie=null,Ye=null,bt=null,gt=null,zt=null,mn=null,Vn=null;return{setTest:function(on){pe||(on?Qe(n.STENCIL_TEST):rt(n.STENCIL_TEST))},setMask:function(on){Te!==on&&!pe&&(n.stencilMask(on),Te=on)},setFunc:function(on,Ri,fi){(Ie!==on||Ye!==Ri||bt!==fi)&&(n.stencilFunc(on,Ri,fi),Ie=on,Ye=Ri,bt=fi)},setOp:function(on,Ri,fi){(gt!==on||zt!==Ri||mn!==fi)&&(n.stencilOp(on,Ri,fi),gt=on,zt=Ri,mn=fi)},setLocked:function(on){pe=on},setClear:function(on){Vn!==on&&(n.clearStencil(on),Vn=on)},reset:function(){pe=!1,Te=null,Ie=null,Ye=null,bt=null,gt=null,zt=null,mn=null,Vn=null}}}const a=new t,o=new i,c=new r,f=new WeakMap,p=new WeakMap;let m={},v={},y=new WeakMap,x=[],b=null,T=!1,M=null,A=null,w=null,B=null,D=null,I=null,N=null,H=new xt(0,0,0),P=0,L=!1,U=null,Y=null,ie=null,Q=null,ae=null;const he=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,te=0;const ne=n.getParameter(n.VERSION);ne.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec(ne)[1]),X=te>=1):ne.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),X=te>=2);let be=null,W={};const se=n.getParameter(n.SCISSOR_BOX),Ae=n.getParameter(n.VIEWPORT),De=new zn().fromArray(se),ge=new zn().fromArray(Ae);function He(pe,Te,Ie,Ye){const bt=new Uint8Array(4),gt=n.createTexture();n.bindTexture(pe,gt),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<Ie;zt++)pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?n.texImage3D(Te,0,n.RGBA,1,1,Ye,0,n.RGBA,n.UNSIGNED_BYTE,bt):n.texImage2D(Te+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,bt);return gt}const Le={};Le[n.TEXTURE_2D]=He(n.TEXTURE_2D,n.TEXTURE_2D,1),Le[n.TEXTURE_CUBE_MAP]=He(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Le[n.TEXTURE_2D_ARRAY]=He(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Le[n.TEXTURE_3D]=He(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),o.setClear(1),c.setClear(0),Qe(n.DEPTH_TEST),o.setFunc(yh),et(!1),Ze(z1),Qe(n.CULL_FACE),Z(ea);function Qe(pe){m[pe]!==!0&&(n.enable(pe),m[pe]=!0)}function rt(pe){m[pe]!==!1&&(n.disable(pe),m[pe]=!1)}function Bt(pe,Te){return v[pe]!==Te?(n.bindFramebuffer(pe,Te),v[pe]=Te,pe===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=Te),pe===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=Te),!0):!1}function wt(pe,Te){let Ie=x,Ye=!1;if(pe){Ie=y.get(Te),Ie===void 0&&(Ie=[],y.set(Te,Ie));const bt=pe.textures;if(Ie.length!==bt.length||Ie[0]!==n.COLOR_ATTACHMENT0){for(let gt=0,zt=bt.length;gt<zt;gt++)Ie[gt]=n.COLOR_ATTACHMENT0+gt;Ie.length=bt.length,Ye=!0}}else Ie[0]!==n.BACK&&(Ie[0]=n.BACK,Ye=!0);Ye&&n.drawBuffers(Ie)}function fn(pe){return b!==pe?(n.useProgram(pe),b=pe,!0):!1}const Vt={[Du]:n.FUNC_ADD,[s2]:n.FUNC_SUBTRACT,[o2]:n.FUNC_REVERSE_SUBTRACT};Vt[l2]=n.MIN,Vt[c2]=n.MAX;const Rt={[u2]:n.ZERO,[f2]:n.ONE,[h2]:n.SRC_COLOR,[p_]:n.SRC_ALPHA,[y2]:n.SRC_ALPHA_SATURATE,[g2]:n.DST_COLOR,[p2]:n.DST_ALPHA,[d2]:n.ONE_MINUS_SRC_COLOR,[m_]:n.ONE_MINUS_SRC_ALPHA,[v2]:n.ONE_MINUS_DST_COLOR,[m2]:n.ONE_MINUS_DST_ALPHA,[_2]:n.CONSTANT_COLOR,[x2]:n.ONE_MINUS_CONSTANT_COLOR,[b2]:n.CONSTANT_ALPHA,[S2]:n.ONE_MINUS_CONSTANT_ALPHA};function Z(pe,Te,Ie,Ye,bt,gt,zt,mn,Vn,on){if(pe===ea){T===!0&&(rt(n.BLEND),T=!1);return}if(T===!1&&(Qe(n.BLEND),T=!0),pe!==a2){if(pe!==M||on!==L){if((A!==Du||D!==Du)&&(n.blendEquation(n.FUNC_ADD),A=Du,D=Du),on)switch(pe){case hh:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case F1:n.blendFunc(n.ONE,n.ONE);break;case H1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case G1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case hh:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case F1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case H1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case G1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}w=null,B=null,I=null,N=null,H.set(0,0,0),P=0,M=pe,L=on}return}bt=bt||Te,gt=gt||Ie,zt=zt||Ye,(Te!==A||bt!==D)&&(n.blendEquationSeparate(Vt[Te],Vt[bt]),A=Te,D=bt),(Ie!==w||Ye!==B||gt!==I||zt!==N)&&(n.blendFuncSeparate(Rt[Ie],Rt[Ye],Rt[gt],Rt[zt]),w=Ie,B=Ye,I=gt,N=zt),(mn.equals(H)===!1||Vn!==P)&&(n.blendColor(mn.r,mn.g,mn.b,Vn),H.copy(mn),P=Vn),M=pe,L=!1}function lt(pe,Te){pe.side===ga?rt(n.CULL_FACE):Qe(n.CULL_FACE);let Ie=pe.side===Rr;Te&&(Ie=!Ie),et(Ie),pe.blending===hh&&pe.transparent===!1?Z(ea):Z(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),o.setFunc(pe.depthFunc),o.setTest(pe.depthTest),o.setMask(pe.depthWrite),a.setMask(pe.colorWrite);const Ye=pe.stencilWrite;c.setTest(Ye),Ye&&(c.setMask(pe.stencilWriteMask),c.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),c.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),yt(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),pe.alphaToCoverage===!0?Qe(n.SAMPLE_ALPHA_TO_COVERAGE):rt(n.SAMPLE_ALPHA_TO_COVERAGE)}function et(pe){U!==pe&&(pe?n.frontFace(n.CW):n.frontFace(n.CCW),U=pe)}function Ze(pe){pe!==n2?(Qe(n.CULL_FACE),pe!==Y&&(pe===z1?n.cullFace(n.BACK):pe===i2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):rt(n.CULL_FACE),Y=pe}function je(pe){pe!==ie&&(X&&n.lineWidth(pe),ie=pe)}function yt(pe,Te,Ie){pe?(Qe(n.POLYGON_OFFSET_FILL),(Q!==Te||ae!==Ie)&&(n.polygonOffset(Te,Ie),Q=Te,ae=Ie)):rt(n.POLYGON_OFFSET_FILL)}function Je(pe){pe?Qe(n.SCISSOR_TEST):rt(n.SCISSOR_TEST)}function J(pe){pe===void 0&&(pe=n.TEXTURE0+he-1),be!==pe&&(n.activeTexture(pe),be=pe)}function k(pe,Te,Ie){Ie===void 0&&(be===null?Ie=n.TEXTURE0+he-1:Ie=be);let Ye=W[Ie];Ye===void 0&&(Ye={type:void 0,texture:void 0},W[Ie]=Ye),(Ye.type!==pe||Ye.texture!==Te)&&(be!==Ie&&(n.activeTexture(Ie),be=Ie),n.bindTexture(pe,Te||Le[pe]),Ye.type=pe,Ye.texture=Te)}function re(){const pe=W[be];pe!==void 0&&pe.type!==void 0&&(n.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function xe(){try{n.compressedTexImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Xe(){try{n.compressedTexImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Be(){try{n.texSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ut(){try{n.texSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ot(){try{n.compressedTexSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function pt(){try{n.compressedTexSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Pt(){try{n.texStorage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function at(){try{n.texStorage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function _t(){try{n.texImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function Et(){try{n.texImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function vt(pe){De.equals(pe)===!1&&(n.scissor(pe.x,pe.y,pe.z,pe.w),De.copy(pe))}function dt(pe){ge.equals(pe)===!1&&(n.viewport(pe.x,pe.y,pe.z,pe.w),ge.copy(pe))}function de(pe,Te){let Ie=p.get(Te);Ie===void 0&&(Ie=new WeakMap,p.set(Te,Ie));let Ye=Ie.get(pe);Ye===void 0&&(Ye=n.getUniformBlockIndex(Te,pe.name),Ie.set(pe,Ye))}function Pe(pe,Te){const Ye=p.get(Te).get(pe);f.get(Te)!==Ye&&(n.uniformBlockBinding(Te,Ye,pe.__bindingPointIndex),f.set(Te,Ye))}function st(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},be=null,W={},v={},y=new WeakMap,x=[],b=null,T=!1,M=null,A=null,w=null,B=null,D=null,I=null,N=null,H=new xt(0,0,0),P=0,L=!1,U=null,Y=null,ie=null,Q=null,ae=null,De.set(0,0,n.canvas.width,n.canvas.height),ge.set(0,0,n.canvas.width,n.canvas.height),a.reset(),o.reset(),c.reset()}return{buffers:{color:a,depth:o,stencil:c},enable:Qe,disable:rt,bindFramebuffer:Bt,drawBuffers:wt,useProgram:fn,setBlending:Z,setMaterial:lt,setFlipSided:et,setCullFace:Ze,setLineWidth:je,setPolygonOffset:yt,setScissorTest:Je,activeTexture:J,bindTexture:k,unbindTexture:re,compressedTexImage2D:xe,compressedTexImage3D:Xe,texImage2D:_t,texImage3D:Et,updateUBOMapping:de,uniformBlockBinding:Pe,texStorage2D:Pt,texStorage3D:at,texSubImage2D:Be,texSubImage3D:ut,compressedTexSubImage2D:ot,compressedTexSubImage3D:pt,scissor:vt,viewport:dt,reset:st}}function mH(n,e,t,i,r,a,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ve,m=new WeakMap;let v;const y=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(J,k){return x?new OffscreenCanvas(J,k):jg("canvas")}function T(J,k,re){let xe=1;const Xe=Je(J);if((Xe.width>re||Xe.height>re)&&(xe=re/Math.max(Xe.width,Xe.height)),xe<1)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap||typeof VideoFrame<"u"&&J instanceof VideoFrame){const Be=Math.floor(xe*Xe.width),ut=Math.floor(xe*Xe.height);v===void 0&&(v=b(Be,ut));const ot=k?b(Be,ut):v;return ot.width=Be,ot.height=ut,ot.getContext("2d").drawImage(J,0,0,Be,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Xe.width+"x"+Xe.height+") to ("+Be+"x"+ut+")."),ot}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Xe.width+"x"+Xe.height+")."),J;return J}function M(J){return J.generateMipmaps}function A(J){n.generateMipmap(J)}function w(J){return J.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:J.isWebGL3DRenderTarget?n.TEXTURE_3D:J.isWebGLArrayRenderTarget||J.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function B(J,k,re,xe,Xe=!1){if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let Be=k;if(k===n.RED&&(re===n.FLOAT&&(Be=n.R32F),re===n.HALF_FLOAT&&(Be=n.R16F),re===n.UNSIGNED_BYTE&&(Be=n.R8)),k===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(Be=n.R8UI),re===n.UNSIGNED_SHORT&&(Be=n.R16UI),re===n.UNSIGNED_INT&&(Be=n.R32UI),re===n.BYTE&&(Be=n.R8I),re===n.SHORT&&(Be=n.R16I),re===n.INT&&(Be=n.R32I)),k===n.RG&&(re===n.FLOAT&&(Be=n.RG32F),re===n.HALF_FLOAT&&(Be=n.RG16F),re===n.UNSIGNED_BYTE&&(Be=n.RG8)),k===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(Be=n.RG8UI),re===n.UNSIGNED_SHORT&&(Be=n.RG16UI),re===n.UNSIGNED_INT&&(Be=n.RG32UI),re===n.BYTE&&(Be=n.RG8I),re===n.SHORT&&(Be=n.RG16I),re===n.INT&&(Be=n.RG32I)),k===n.RGB_INTEGER&&(re===n.UNSIGNED_BYTE&&(Be=n.RGB8UI),re===n.UNSIGNED_SHORT&&(Be=n.RGB16UI),re===n.UNSIGNED_INT&&(Be=n.RGB32UI),re===n.BYTE&&(Be=n.RGB8I),re===n.SHORT&&(Be=n.RGB16I),re===n.INT&&(Be=n.RGB32I)),k===n.RGBA_INTEGER&&(re===n.UNSIGNED_BYTE&&(Be=n.RGBA8UI),re===n.UNSIGNED_SHORT&&(Be=n.RGBA16UI),re===n.UNSIGNED_INT&&(Be=n.RGBA32UI),re===n.BYTE&&(Be=n.RGBA8I),re===n.SHORT&&(Be=n.RGBA16I),re===n.INT&&(Be=n.RGBA32I)),k===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(Be=n.RGB9_E5),k===n.RGBA){const ut=Xe?kg:Pn.getTransfer(xe);re===n.FLOAT&&(Be=n.RGBA32F),re===n.HALF_FLOAT&&(Be=n.RGBA16F),re===n.UNSIGNED_BYTE&&(Be=ut===ui?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(Be=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(Be=n.RGB5_A1)}return(Be===n.R16F||Be===n.R32F||Be===n.RG16F||Be===n.RG32F||Be===n.RGBA16F||Be===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Be}function D(J,k){let re;return J?k===null||k===Go||k===_h?re=n.DEPTH24_STENCIL8:k===Li?re=n.DEPTH32F_STENCIL8:k===yp&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Go||k===_h?re=n.DEPTH_COMPONENT24:k===Li?re=n.DEPTH_COMPONENT32F:k===yp&&(re=n.DEPTH_COMPONENT16),re}function I(J,k){return M(J)===!0||J.isFramebufferTexture&&J.minFilter!==tr&&J.minFilter!==Fn?Math.log2(Math.max(k.width,k.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?k.mipmaps.length:1}function N(J){const k=J.target;k.removeEventListener("dispose",N),P(k),k.isVideoTexture&&m.delete(k)}function H(J){const k=J.target;k.removeEventListener("dispose",H),U(k)}function P(J){const k=i.get(J);if(k.__webglInit===void 0)return;const re=J.source,xe=y.get(re);if(xe){const Xe=xe[k.__cacheKey];Xe.usedTimes--,Xe.usedTimes===0&&L(J),Object.keys(xe).length===0&&y.delete(re)}i.remove(J)}function L(J){const k=i.get(J);n.deleteTexture(k.__webglTexture);const re=J.source,xe=y.get(re);delete xe[k.__cacheKey],o.memory.textures--}function U(J){const k=i.get(J);if(J.depthTexture&&(J.depthTexture.dispose(),i.remove(J.depthTexture)),J.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(k.__webglFramebuffer[xe]))for(let Xe=0;Xe<k.__webglFramebuffer[xe].length;Xe++)n.deleteFramebuffer(k.__webglFramebuffer[xe][Xe]);else n.deleteFramebuffer(k.__webglFramebuffer[xe]);k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[xe])}else{if(Array.isArray(k.__webglFramebuffer))for(let xe=0;xe<k.__webglFramebuffer.length;xe++)n.deleteFramebuffer(k.__webglFramebuffer[xe]);else n.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let xe=0;xe<k.__webglColorRenderbuffer.length;xe++)k.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(k.__webglColorRenderbuffer[xe]);k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer)}const re=J.textures;for(let xe=0,Xe=re.length;xe<Xe;xe++){const Be=i.get(re[xe]);Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),o.memory.textures--),i.remove(re[xe])}i.remove(J)}let Y=0;function ie(){Y=0}function Q(){const J=Y;return J>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+r.maxTextures),Y+=1,J}function ae(J){const k=[];return k.push(J.wrapS),k.push(J.wrapT),k.push(J.wrapR||0),k.push(J.magFilter),k.push(J.minFilter),k.push(J.anisotropy),k.push(J.internalFormat),k.push(J.format),k.push(J.type),k.push(J.generateMipmaps),k.push(J.premultiplyAlpha),k.push(J.flipY),k.push(J.unpackAlignment),k.push(J.colorSpace),k.join()}function he(J,k){const re=i.get(J);if(J.isVideoTexture&&je(J),J.isRenderTargetTexture===!1&&J.version>0&&re.__version!==J.version){const xe=J.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(re,J,k);return}}t.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+k)}function X(J,k){const re=i.get(J);if(J.version>0&&re.__version!==J.version){ge(re,J,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+k)}function te(J,k){const re=i.get(J);if(J.version>0&&re.__version!==J.version){ge(re,J,k);return}t.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+k)}function ne(J,k){const re=i.get(J);if(J.version>0&&re.__version!==J.version){He(re,J,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+k)}const be={[zu]:n.REPEAT,[cr]:n.CLAMP_TO_EDGE,[vp]:n.MIRRORED_REPEAT},W={[tr]:n.NEAREST,[Ax]:n.NEAREST_MIPMAP_NEAREST,[rh]:n.NEAREST_MIPMAP_LINEAR,[Fn]:n.LINEAR,[fp]:n.LINEAR_MIPMAP_NEAREST,[$s]:n.LINEAR_MIPMAP_LINEAR},se={[z2]:n.NEVER,[X2]:n.ALWAYS,[F2]:n.LESS,[YA]:n.LEQUAL,[H2]:n.EQUAL,[k2]:n.GEQUAL,[G2]:n.GREATER,[V2]:n.NOTEQUAL};function Ae(J,k){if(k.type===Li&&e.has("OES_texture_float_linear")===!1&&(k.magFilter===Fn||k.magFilter===fp||k.magFilter===rh||k.magFilter===$s||k.minFilter===Fn||k.minFilter===fp||k.minFilter===rh||k.minFilter===$s)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(J,n.TEXTURE_WRAP_S,be[k.wrapS]),n.texParameteri(J,n.TEXTURE_WRAP_T,be[k.wrapT]),(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)&&n.texParameteri(J,n.TEXTURE_WRAP_R,be[k.wrapR]),n.texParameteri(J,n.TEXTURE_MAG_FILTER,W[k.magFilter]),n.texParameteri(J,n.TEXTURE_MIN_FILTER,W[k.minFilter]),k.compareFunction&&(n.texParameteri(J,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(J,n.TEXTURE_COMPARE_FUNC,se[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===tr||k.minFilter!==rh&&k.minFilter!==$s||k.type===Li&&e.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||i.get(k).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(J,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy}}}function De(J,k){let re=!1;J.__webglInit===void 0&&(J.__webglInit=!0,k.addEventListener("dispose",N));const xe=k.source;let Xe=y.get(xe);Xe===void 0&&(Xe={},y.set(xe,Xe));const Be=ae(k);if(Be!==J.__cacheKey){Xe[Be]===void 0&&(Xe[Be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,re=!0),Xe[Be].usedTimes++;const ut=Xe[J.__cacheKey];ut!==void 0&&(Xe[J.__cacheKey].usedTimes--,ut.usedTimes===0&&L(k)),J.__cacheKey=Be,J.__webglTexture=Xe[Be].texture}return re}function ge(J,k,re){let xe=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(xe=n.TEXTURE_3D);const Xe=De(J,k),Be=k.source;t.bindTexture(xe,J.__webglTexture,n.TEXTURE0+re);const ut=i.get(Be);if(Be.version!==ut.__version||Xe===!0){t.activeTexture(n.TEXTURE0+re);const ot=Pn.getPrimaries(Pn.workingColorSpace),pt=k.colorSpace===Lo?null:Pn.getPrimaries(k.colorSpace),Pt=k.colorSpace===Lo||ot===pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pt);let at=T(k.image,!1,r.maxTextureSize);at=yt(k,at);const _t=a.convert(k.format,k.colorSpace),Et=a.convert(k.type);let vt=B(k.internalFormat,_t,Et,k.colorSpace,k.isVideoTexture);Ae(xe,k);let dt;const de=k.mipmaps,Pe=k.isVideoTexture!==!0,st=ut.__version===void 0||Xe===!0,pe=Be.dataReady,Te=I(k,at);if(k.isDepthTexture)vt=D(k.format===xh,k.type),st&&(Pe?t.texStorage2D(n.TEXTURE_2D,1,vt,at.width,at.height):t.texImage2D(n.TEXTURE_2D,0,vt,at.width,at.height,0,_t,Et,null));else if(k.isDataTexture)if(de.length>0){Pe&&st&&t.texStorage2D(n.TEXTURE_2D,Te,vt,de[0].width,de[0].height);for(let Ie=0,Ye=de.length;Ie<Ye;Ie++)dt=de[Ie],Pe?pe&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,dt.width,dt.height,_t,Et,dt.data):t.texImage2D(n.TEXTURE_2D,Ie,vt,dt.width,dt.height,0,_t,Et,dt.data);k.generateMipmaps=!1}else Pe?(st&&t.texStorage2D(n.TEXTURE_2D,Te,vt,at.width,at.height),pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,at.width,at.height,_t,Et,at.data)):t.texImage2D(n.TEXTURE_2D,0,vt,at.width,at.height,0,_t,Et,at.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Pe&&st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,vt,de[0].width,de[0].height,at.depth);for(let Ie=0,Ye=de.length;Ie<Ye;Ie++)if(dt=de[Ie],k.format!==ur)if(_t!==null)if(Pe){if(pe)if(k.layerUpdates.size>0){const bt=$1(dt.width,dt.height,k.format,k.type);for(const gt of k.layerUpdates){const zt=dt.data.subarray(gt*bt/dt.data.BYTES_PER_ELEMENT,(gt+1)*bt/dt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,gt,dt.width,dt.height,1,_t,zt)}k.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,dt.width,dt.height,at.depth,_t,dt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ie,vt,dt.width,dt.height,at.depth,0,dt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Pe?pe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ie,0,0,0,dt.width,dt.height,at.depth,_t,Et,dt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ie,vt,dt.width,dt.height,at.depth,0,_t,Et,dt.data)}else{Pe&&st&&t.texStorage2D(n.TEXTURE_2D,Te,vt,de[0].width,de[0].height);for(let Ie=0,Ye=de.length;Ie<Ye;Ie++)dt=de[Ie],k.format!==ur?_t!==null?Pe?pe&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ie,0,0,dt.width,dt.height,_t,dt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ie,vt,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?pe&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,dt.width,dt.height,_t,Et,dt.data):t.texImage2D(n.TEXTURE_2D,Ie,vt,dt.width,dt.height,0,_t,Et,dt.data)}else if(k.isDataArrayTexture)if(Pe){if(st&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Te,vt,at.width,at.height,at.depth),pe)if(k.layerUpdates.size>0){const Ie=$1(at.width,at.height,k.format,k.type);for(const Ye of k.layerUpdates){const bt=at.data.subarray(Ye*Ie/at.data.BYTES_PER_ELEMENT,(Ye+1)*Ie/at.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ye,at.width,at.height,1,_t,Et,bt)}k.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,at.width,at.height,at.depth,_t,Et,at.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,vt,at.width,at.height,at.depth,0,_t,Et,at.data);else if(k.isData3DTexture)Pe?(st&&t.texStorage3D(n.TEXTURE_3D,Te,vt,at.width,at.height,at.depth),pe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,at.width,at.height,at.depth,_t,Et,at.data)):t.texImage3D(n.TEXTURE_3D,0,vt,at.width,at.height,at.depth,0,_t,Et,at.data);else if(k.isFramebufferTexture){if(st)if(Pe)t.texStorage2D(n.TEXTURE_2D,Te,vt,at.width,at.height);else{let Ie=at.width,Ye=at.height;for(let bt=0;bt<Te;bt++)t.texImage2D(n.TEXTURE_2D,bt,vt,Ie,Ye,0,_t,Et,null),Ie>>=1,Ye>>=1}}else if(de.length>0){if(Pe&&st){const Ie=Je(de[0]);t.texStorage2D(n.TEXTURE_2D,Te,vt,Ie.width,Ie.height)}for(let Ie=0,Ye=de.length;Ie<Ye;Ie++)dt=de[Ie],Pe?pe&&t.texSubImage2D(n.TEXTURE_2D,Ie,0,0,_t,Et,dt):t.texImage2D(n.TEXTURE_2D,Ie,vt,_t,Et,dt);k.generateMipmaps=!1}else if(Pe){if(st){const Ie=Je(at);t.texStorage2D(n.TEXTURE_2D,Te,vt,Ie.width,Ie.height)}pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,_t,Et,at)}else t.texImage2D(n.TEXTURE_2D,0,vt,_t,Et,at);M(k)&&A(xe),ut.__version=Be.version,k.onUpdate&&k.onUpdate(k)}J.__version=k.version}function He(J,k,re){if(k.image.length!==6)return;const xe=De(J,k),Xe=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+re);const Be=i.get(Xe);if(Xe.version!==Be.__version||xe===!0){t.activeTexture(n.TEXTURE0+re);const ut=Pn.getPrimaries(Pn.workingColorSpace),ot=k.colorSpace===Lo?null:Pn.getPrimaries(k.colorSpace),pt=k.colorSpace===Lo||ut===ot?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);const Pt=k.isCompressedTexture||k.image[0].isCompressedTexture,at=k.image[0]&&k.image[0].isDataTexture,_t=[];for(let Ye=0;Ye<6;Ye++)!Pt&&!at?_t[Ye]=T(k.image[Ye],!0,r.maxCubemapSize):_t[Ye]=at?k.image[Ye].image:k.image[Ye],_t[Ye]=yt(k,_t[Ye]);const Et=_t[0],vt=a.convert(k.format,k.colorSpace),dt=a.convert(k.type),de=B(k.internalFormat,vt,dt,k.colorSpace),Pe=k.isVideoTexture!==!0,st=Be.__version===void 0||xe===!0,pe=Xe.dataReady;let Te=I(k,Et);Ae(n.TEXTURE_CUBE_MAP,k);let Ie;if(Pt){Pe&&st&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,de,Et.width,Et.height);for(let Ye=0;Ye<6;Ye++){Ie=_t[Ye].mipmaps;for(let bt=0;bt<Ie.length;bt++){const gt=Ie[bt];k.format!==ur?vt!==null?Pe?pe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt,0,0,gt.width,gt.height,vt,gt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt,de,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt,0,0,gt.width,gt.height,vt,dt,gt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt,de,gt.width,gt.height,0,vt,dt,gt.data)}}}else{if(Ie=k.mipmaps,Pe&&st){Ie.length>0&&Te++;const Ye=Je(_t[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,de,Ye.width,Ye.height)}for(let Ye=0;Ye<6;Ye++)if(at){Pe?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,_t[Ye].width,_t[Ye].height,vt,dt,_t[Ye].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,de,_t[Ye].width,_t[Ye].height,0,vt,dt,_t[Ye].data);for(let bt=0;bt<Ie.length;bt++){const zt=Ie[bt].image[Ye].image;Pe?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt+1,0,0,zt.width,zt.height,vt,dt,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt+1,de,zt.width,zt.height,0,vt,dt,zt.data)}}else{Pe?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,0,0,vt,dt,_t[Ye]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,de,vt,dt,_t[Ye]);for(let bt=0;bt<Ie.length;bt++){const gt=Ie[bt];Pe?pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt+1,0,0,vt,dt,gt.image[Ye]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt+1,de,vt,dt,gt.image[Ye])}}}M(k)&&A(n.TEXTURE_CUBE_MAP),Be.__version=Xe.version,k.onUpdate&&k.onUpdate(k)}J.__version=k.version}function Le(J,k,re,xe,Xe,Be){const ut=a.convert(re.format,re.colorSpace),ot=a.convert(re.type),pt=B(re.internalFormat,ut,ot,re.colorSpace),Pt=i.get(k),at=i.get(re);if(at.__renderTarget=k,!Pt.__hasExternalTextures){const _t=Math.max(1,k.width>>Be),Et=Math.max(1,k.height>>Be);Xe===n.TEXTURE_3D||Xe===n.TEXTURE_2D_ARRAY?t.texImage3D(Xe,Be,pt,_t,Et,k.depth,0,ut,ot,null):t.texImage2D(Xe,Be,pt,_t,Et,0,ut,ot,null)}t.bindFramebuffer(n.FRAMEBUFFER,J),Ze(k)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,Xe,at.__webglTexture,0,et(k)):(Xe===n.TEXTURE_2D||Xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,Xe,at.__webglTexture,Be),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Qe(J,k,re){if(n.bindRenderbuffer(n.RENDERBUFFER,J),k.depthBuffer){const xe=k.depthTexture,Xe=xe&&xe.isDepthTexture?xe.type:null,Be=D(k.stencilBuffer,Xe),ut=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=et(k);Ze(k)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ot,Be,k.width,k.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,Be,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,Be,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,ut,n.RENDERBUFFER,J)}else{const xe=k.textures;for(let Xe=0;Xe<xe.length;Xe++){const Be=xe[Xe],ut=a.convert(Be.format,Be.colorSpace),ot=a.convert(Be.type),pt=B(Be.internalFormat,ut,ot,Be.colorSpace),Pt=et(k);re&&Ze(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,pt,k.width,k.height):Ze(k)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pt,pt,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,pt,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function rt(J,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,J),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const xe=i.get(k.depthTexture);xe.__renderTarget=k,(!xe.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),he(k.depthTexture,0);const Xe=xe.__webglTexture,Be=et(k);if(k.depthTexture.format===_p)Ze(k)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xe,0,Be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Xe,0);else if(k.depthTexture.format===xh)Ze(k)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xe,0,Be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Xe,0);else throw new Error("Unknown depthTexture format")}function Bt(J){const k=i.get(J),re=J.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==J.depthTexture){const xe=J.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),xe){const Xe=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,xe.removeEventListener("dispose",Xe)};xe.addEventListener("dispose",Xe),k.__depthDisposeCallback=Xe}k.__boundDepthTexture=xe}if(J.depthTexture&&!k.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");const xe=J.texture.mipmaps;xe&&xe.length>0?rt(k.__webglFramebuffer[0],J):rt(k.__webglFramebuffer,J)}else if(re){k.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)if(t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[xe]),k.__webglDepthbuffer[xe]===void 0)k.__webglDepthbuffer[xe]=n.createRenderbuffer(),Qe(k.__webglDepthbuffer[xe],J,!1);else{const Xe=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=k.__webglDepthbuffer[xe];n.bindRenderbuffer(n.RENDERBUFFER,Be),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xe,n.RENDERBUFFER,Be)}}else{const xe=J.texture.mipmaps;if(xe&&xe.length>0?t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=n.createRenderbuffer(),Qe(k.__webglDepthbuffer,J,!1);else{const Xe=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=k.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Be),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xe,n.RENDERBUFFER,Be)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function wt(J,k,re){const xe=i.get(J);k!==void 0&&Le(xe.__webglFramebuffer,J,J.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&Bt(J)}function fn(J){const k=J.texture,re=i.get(J),xe=i.get(k);J.addEventListener("dispose",H);const Xe=J.textures,Be=J.isWebGLCubeRenderTarget===!0,ut=Xe.length>1;if(ut||(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=k.version,o.memory.textures++),Be){re.__webglFramebuffer=[];for(let ot=0;ot<6;ot++)if(k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer[ot]=[];for(let pt=0;pt<k.mipmaps.length;pt++)re.__webglFramebuffer[ot][pt]=n.createFramebuffer()}else re.__webglFramebuffer[ot]=n.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){re.__webglFramebuffer=[];for(let ot=0;ot<k.mipmaps.length;ot++)re.__webglFramebuffer[ot]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(ut)for(let ot=0,pt=Xe.length;ot<pt;ot++){const Pt=i.get(Xe[ot]);Pt.__webglTexture===void 0&&(Pt.__webglTexture=n.createTexture(),o.memory.textures++)}if(J.samples>0&&Ze(J)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let ot=0;ot<Xe.length;ot++){const pt=Xe[ot];re.__webglColorRenderbuffer[ot]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[ot]);const Pt=a.convert(pt.format,pt.colorSpace),at=a.convert(pt.type),_t=B(pt.internalFormat,Pt,at,pt.colorSpace,J.isXRRenderTarget===!0),Et=et(J);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,_t,J.width,J.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ot,n.RENDERBUFFER,re.__webglColorRenderbuffer[ot])}n.bindRenderbuffer(n.RENDERBUFFER,null),J.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),Qe(re.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Be){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),Ae(n.TEXTURE_CUBE_MAP,k);for(let ot=0;ot<6;ot++)if(k.mipmaps&&k.mipmaps.length>0)for(let pt=0;pt<k.mipmaps.length;pt++)Le(re.__webglFramebuffer[ot][pt],J,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ot,pt);else Le(re.__webglFramebuffer[ot],J,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ot,0);M(k)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ut){for(let ot=0,pt=Xe.length;ot<pt;ot++){const Pt=Xe[ot],at=i.get(Pt);t.bindTexture(n.TEXTURE_2D,at.__webglTexture),Ae(n.TEXTURE_2D,Pt),Le(re.__webglFramebuffer,J,Pt,n.COLOR_ATTACHMENT0+ot,n.TEXTURE_2D,0),M(Pt)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let ot=n.TEXTURE_2D;if((J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(ot=J.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ot,xe.__webglTexture),Ae(ot,k),k.mipmaps&&k.mipmaps.length>0)for(let pt=0;pt<k.mipmaps.length;pt++)Le(re.__webglFramebuffer[pt],J,k,n.COLOR_ATTACHMENT0,ot,pt);else Le(re.__webglFramebuffer,J,k,n.COLOR_ATTACHMENT0,ot,0);M(k)&&A(ot),t.unbindTexture()}J.depthBuffer&&Bt(J)}function Vt(J){const k=J.textures;for(let re=0,xe=k.length;re<xe;re++){const Xe=k[re];if(M(Xe)){const Be=w(J),ut=i.get(Xe).__webglTexture;t.bindTexture(Be,ut),A(Be),t.unbindTexture()}}}const Rt=[],Z=[];function lt(J){if(J.samples>0){if(Ze(J)===!1){const k=J.textures,re=J.width,xe=J.height;let Xe=n.COLOR_BUFFER_BIT;const Be=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ut=i.get(J),ot=k.length>1;if(ot)for(let Pt=0;Pt<k.length;Pt++)t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer);const pt=J.texture.mipmaps;pt&&pt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let Pt=0;Pt<k.length;Pt++){if(J.resolveDepthBuffer&&(J.depthBuffer&&(Xe|=n.DEPTH_BUFFER_BIT),J.stencilBuffer&&J.resolveStencilBuffer&&(Xe|=n.STENCIL_BUFFER_BIT)),ot){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Pt]);const at=i.get(k[Pt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,at,0)}n.blitFramebuffer(0,0,re,xe,0,0,re,xe,Xe,n.NEAREST),f===!0&&(Rt.length=0,Z.length=0,Rt.push(n.COLOR_ATTACHMENT0+Pt),J.depthBuffer&&J.resolveDepthBuffer===!1&&(Rt.push(Be),Z.push(Be),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Z)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Rt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ot)for(let Pt=0;Pt<k.length;Pt++){t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Pt]);const at=i.get(k[Pt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pt,n.TEXTURE_2D,at,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(J.depthBuffer&&J.resolveDepthBuffer===!1&&f){const k=J.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[k])}}}function et(J){return Math.min(r.maxSamples,J.samples)}function Ze(J){const k=i.get(J);return J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function je(J){const k=o.render.frame;m.get(J)!==k&&(m.set(J,k),J.update())}function yt(J,k){const re=J.colorSpace,xe=J.format,Xe=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||re!==Ms&&re!==Lo&&(Pn.getTransfer(re)===ui?(xe!==ur||Xe!==nr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),k}function Je(J){return typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(p.width=J.naturalWidth||J.width,p.height=J.naturalHeight||J.height):typeof VideoFrame<"u"&&J instanceof VideoFrame?(p.width=J.displayWidth,p.height=J.displayHeight):(p.width=J.width,p.height=J.height),p}this.allocateTextureUnit=Q,this.resetTextureUnits=ie,this.setTexture2D=he,this.setTexture2DArray=X,this.setTexture3D=te,this.setTextureCube=ne,this.rebindTextures=wt,this.setupRenderTarget=fn,this.updateRenderTargetMipmap=Vt,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=Bt,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=Ze}function qB(n,e){function t(i,r=Lo){let a;const o=Pn.getTransfer(r);if(i===nr)return n.UNSIGNED_BYTE;if(i===Tx)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Cx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===zA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Ex)return n.BYTE;if(i===Mx)return n.SHORT;if(i===yp)return n.UNSIGNED_SHORT;if(i===rv)return n.INT;if(i===Go)return n.UNSIGNED_INT;if(i===Li)return n.FLOAT;if(i===wr)return n.HALF_FLOAT;if(i===FA)return n.ALPHA;if(i===HA)return n.RGB;if(i===ur)return n.RGBA;if(i===_p)return n.DEPTH_COMPONENT;if(i===xh)return n.DEPTH_STENCIL;if(i===av)return n.RED;if(i===sv)return n.RED_INTEGER;if(i===GA)return n.RG;if(i===Rx)return n.RG_INTEGER;if(i===wx)return n.RGBA_INTEGER;if(i===Tg||i===Cg||i===Rg||i===wg)if(o===ui)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Tg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Cg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Rg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===wg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Tg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Cg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Rg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===wg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===A_||i===E_||i===M_||i===T_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===A_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===E_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===M_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===T_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===C_||i===R_||i===w_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===C_||i===R_)return o===ui?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===w_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===B_||i===D_||i===O_||i===U_||i===N_||i===L_||i===I_||i===P_||i===z_||i===F_||i===H_||i===G_||i===V_||i===k_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===B_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===D_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===O_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===U_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===N_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===L_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===I_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===P_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===z_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===F_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===H_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===G_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===V_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===k_)return o===ui?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Bg||i===X_||i===Y_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===Bg)return o===ui?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===X_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Y_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===VA||i===j_||i===W_||i===q_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===Bg)return a.COMPRESSED_RED_RGTC1_EXT;if(i===j_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===W_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===q_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===_h?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const gH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,vH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class yH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new ei,a=e.properties.get(r);a.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Pi({vertexShader:gH,fragmentShader:vH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ei(new Tc(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class _H extends Cs{constructor(e,t){super();const i=this;let r=null,a=1,o=null,c="local-floor",f=1,p=null,m=null,v=null,y=null,x=null,b=null;const T=new yH,M=t.getContextAttributes();let A=null,w=null;const B=[],D=[],I=new Ve;let N=null;const H=new qi;H.viewport=new zn;const P=new qi;P.viewport=new zn;const L=[H,P],U=new zB;let Y=null,ie=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let He=B[ge];return He===void 0&&(He=new c_,B[ge]=He),He.getTargetRaySpace()},this.getControllerGrip=function(ge){let He=B[ge];return He===void 0&&(He=new c_,B[ge]=He),He.getGripSpace()},this.getHand=function(ge){let He=B[ge];return He===void 0&&(He=new c_,B[ge]=He),He.getHandSpace()};function Q(ge){const He=D.indexOf(ge.inputSource);if(He===-1)return;const Le=B[He];Le!==void 0&&(Le.update(ge.inputSource,ge.frame,p||o),Le.dispatchEvent({type:ge.type,data:ge.inputSource}))}function ae(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",ae),r.removeEventListener("inputsourceschange",he);for(let ge=0;ge<B.length;ge++){const He=D[ge];He!==null&&(D[ge]=null,B[ge].disconnect(He))}Y=null,ie=null,T.reset(),e.setRenderTarget(A),x=null,y=null,v=null,r=null,w=null,De.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){a=ge,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){c=ge,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||o},this.setReferenceSpace=function(ge){p=ge},this.getBaseLayer=function(){return y!==null?y:x},this.getBinding=function(){return v},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(ge){if(r=ge,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",ae),r.addEventListener("inputsourceschange",he),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(I),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Le=null,Qe=null,rt=null;M.depth&&(rt=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Le=M.stencil?xh:_p,Qe=M.stencil?_h:Go);const Bt={colorFormat:t.RGBA8,depthFormat:rt,scaleFactor:a};v=new XRWebGLBinding(r,t),y=v.createProjectionLayer(Bt),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),w=new Ii(y.textureWidth,y.textureHeight,{format:ur,type:nr,depthTexture:new hv(y.textureWidth,y.textureHeight,Qe,void 0,void 0,void 0,void 0,void 0,void 0,Le),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Le={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:a};x=new XRWebGLLayer(r,t,Le),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),w=new Ii(x.framebufferWidth,x.framebufferHeight,{format:ur,type:nr,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(f),p=null,o=await r.requestReferenceSpace(c),De.setContext(r),De.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function he(ge){for(let He=0;He<ge.removed.length;He++){const Le=ge.removed[He],Qe=D.indexOf(Le);Qe>=0&&(D[Qe]=null,B[Qe].disconnect(Le))}for(let He=0;He<ge.added.length;He++){const Le=ge.added[He];let Qe=D.indexOf(Le);if(Qe===-1){for(let Bt=0;Bt<B.length;Bt++)if(Bt>=D.length){D.push(Le),Qe=Bt;break}else if(D[Bt]===null){D[Bt]=Le,Qe=Bt;break}if(Qe===-1)break}const rt=B[Qe];rt&&rt.connect(Le)}}const X=new $,te=new $;function ne(ge,He,Le){X.setFromMatrixPosition(He.matrixWorld),te.setFromMatrixPosition(Le.matrixWorld);const Qe=X.distanceTo(te),rt=He.projectionMatrix.elements,Bt=Le.projectionMatrix.elements,wt=rt[14]/(rt[10]-1),fn=rt[14]/(rt[10]+1),Vt=(rt[9]+1)/rt[5],Rt=(rt[9]-1)/rt[5],Z=(rt[8]-1)/rt[0],lt=(Bt[8]+1)/Bt[0],et=wt*Z,Ze=wt*lt,je=Qe/(-Z+lt),yt=je*-Z;if(He.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(yt),ge.translateZ(je),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),rt[10]===-1)ge.projectionMatrix.copy(He.projectionMatrix),ge.projectionMatrixInverse.copy(He.projectionMatrixInverse);else{const Je=wt+je,J=fn+je,k=et-yt,re=Ze+(Qe-yt),xe=Vt*fn/J*Je,Xe=Rt*fn/J*Je;ge.projectionMatrix.makePerspective(k,re,xe,Xe,Je,J),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function be(ge,He){He===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(He.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(r===null)return;let He=ge.near,Le=ge.far;T.texture!==null&&(T.depthNear>0&&(He=T.depthNear),T.depthFar>0&&(Le=T.depthFar)),U.near=P.near=H.near=He,U.far=P.far=H.far=Le,(Y!==U.near||ie!==U.far)&&(r.updateRenderState({depthNear:U.near,depthFar:U.far}),Y=U.near,ie=U.far),H.layers.mask=ge.layers.mask|2,P.layers.mask=ge.layers.mask|4,U.layers.mask=H.layers.mask|P.layers.mask;const Qe=ge.parent,rt=U.cameras;be(U,Qe);for(let Bt=0;Bt<rt.length;Bt++)be(rt[Bt],Qe);rt.length===2?ne(U,H,P):U.projectionMatrix.copy(H.projectionMatrix),W(ge,U,Qe)};function W(ge,He,Le){Le===null?ge.matrix.copy(He.matrixWorld):(ge.matrix.copy(Le.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(He.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(He.projectionMatrix),ge.projectionMatrixInverse.copy(He.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=Sp*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(y===null&&x===null))return f},this.setFoveation=function(ge){f=ge,y!==null&&(y.fixedFoveation=ge),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ge)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(U)};let se=null;function Ae(ge,He){if(m=He.getViewerPose(p||o),b=He,m!==null){const Le=m.views;x!==null&&(e.setRenderTargetFramebuffer(w,x.framebuffer),e.setRenderTarget(w));let Qe=!1;Le.length!==U.cameras.length&&(U.cameras.length=0,Qe=!0);for(let wt=0;wt<Le.length;wt++){const fn=Le[wt];let Vt=null;if(x!==null)Vt=x.getViewport(fn);else{const Z=v.getViewSubImage(y,fn);Vt=Z.viewport,wt===0&&(e.setRenderTargetTextures(w,Z.colorTexture,Z.depthStencilTexture),e.setRenderTarget(w))}let Rt=L[wt];Rt===void 0&&(Rt=new qi,Rt.layers.enable(wt),Rt.viewport=new zn,L[wt]=Rt),Rt.matrix.fromArray(fn.transform.matrix),Rt.matrix.decompose(Rt.position,Rt.quaternion,Rt.scale),Rt.projectionMatrix.fromArray(fn.projectionMatrix),Rt.projectionMatrixInverse.copy(Rt.projectionMatrix).invert(),Rt.viewport.set(Vt.x,Vt.y,Vt.width,Vt.height),wt===0&&(U.matrix.copy(Rt.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),Qe===!0&&U.cameras.push(Rt)}const rt=r.enabledFeatures;if(rt&&rt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&v){const wt=v.getDepthInformation(Le[0]);wt&&wt.isValid&&wt.texture&&T.init(e,wt,r.renderState)}}for(let Le=0;Le<B.length;Le++){const Qe=D[Le],rt=B[Le];Qe!==null&&rt!==void 0&&rt.update(Qe,He,p||o)}se&&se(ge,He),He.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:He}),b=null}const De=new kB;De.setAnimationLoop(Ae),this.setAnimationLoop=function(ge){se=ge},this.dispose=function(){}}}const Jf=new Ts,xH=new qt;function bH(n,e){function t(M,A){M.matrixAutoUpdate===!0&&M.updateMatrix(),A.value.copy(M.matrix)}function i(M,A){A.color.getRGB(M.fogColor.value,J2(n)),A.isFog?(M.fogNear.value=A.near,M.fogFar.value=A.far):A.isFogExp2&&(M.fogDensity.value=A.density)}function r(M,A,w,B,D){A.isMeshBasicMaterial||A.isMeshLambertMaterial?a(M,A):A.isMeshToonMaterial?(a(M,A),v(M,A)):A.isMeshPhongMaterial?(a(M,A),m(M,A)):A.isMeshStandardMaterial?(a(M,A),y(M,A),A.isMeshPhysicalMaterial&&x(M,A,D)):A.isMeshMatcapMaterial?(a(M,A),b(M,A)):A.isMeshDepthMaterial?a(M,A):A.isMeshDistanceMaterial?(a(M,A),T(M,A)):A.isMeshNormalMaterial?a(M,A):A.isLineBasicMaterial?(o(M,A),A.isLineDashedMaterial&&c(M,A)):A.isPointsMaterial?f(M,A,w,B):A.isSpriteMaterial?p(M,A):A.isShadowMaterial?(M.color.value.copy(A.color),M.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function a(M,A){M.opacity.value=A.opacity,A.color&&M.diffuse.value.copy(A.color),A.emissive&&M.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(M.map.value=A.map,t(A.map,M.mapTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.bumpMap&&(M.bumpMap.value=A.bumpMap,t(A.bumpMap,M.bumpMapTransform),M.bumpScale.value=A.bumpScale,A.side===Rr&&(M.bumpScale.value*=-1)),A.normalMap&&(M.normalMap.value=A.normalMap,t(A.normalMap,M.normalMapTransform),M.normalScale.value.copy(A.normalScale),A.side===Rr&&M.normalScale.value.negate()),A.displacementMap&&(M.displacementMap.value=A.displacementMap,t(A.displacementMap,M.displacementMapTransform),M.displacementScale.value=A.displacementScale,M.displacementBias.value=A.displacementBias),A.emissiveMap&&(M.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,M.emissiveMapTransform)),A.specularMap&&(M.specularMap.value=A.specularMap,t(A.specularMap,M.specularMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest);const w=e.get(A),B=w.envMap,D=w.envMapRotation;B&&(M.envMap.value=B,Jf.copy(D),Jf.x*=-1,Jf.y*=-1,Jf.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Jf.y*=-1,Jf.z*=-1),M.envMapRotation.value.setFromMatrix4(xH.makeRotationFromEuler(Jf)),M.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=A.reflectivity,M.ior.value=A.ior,M.refractionRatio.value=A.refractionRatio),A.lightMap&&(M.lightMap.value=A.lightMap,M.lightMapIntensity.value=A.lightMapIntensity,t(A.lightMap,M.lightMapTransform)),A.aoMap&&(M.aoMap.value=A.aoMap,M.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,M.aoMapTransform))}function o(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,A.map&&(M.map.value=A.map,t(A.map,M.mapTransform))}function c(M,A){M.dashSize.value=A.dashSize,M.totalSize.value=A.dashSize+A.gapSize,M.scale.value=A.scale}function f(M,A,w,B){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.size.value=A.size*w,M.scale.value=B*.5,A.map&&(M.map.value=A.map,t(A.map,M.uvTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest)}function p(M,A){M.diffuse.value.copy(A.color),M.opacity.value=A.opacity,M.rotation.value=A.rotation,A.map&&(M.map.value=A.map,t(A.map,M.mapTransform)),A.alphaMap&&(M.alphaMap.value=A.alphaMap,t(A.alphaMap,M.alphaMapTransform)),A.alphaTest>0&&(M.alphaTest.value=A.alphaTest)}function m(M,A){M.specular.value.copy(A.specular),M.shininess.value=Math.max(A.shininess,1e-4)}function v(M,A){A.gradientMap&&(M.gradientMap.value=A.gradientMap)}function y(M,A){M.metalness.value=A.metalness,A.metalnessMap&&(M.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,M.metalnessMapTransform)),M.roughness.value=A.roughness,A.roughnessMap&&(M.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,M.roughnessMapTransform)),A.envMap&&(M.envMapIntensity.value=A.envMapIntensity)}function x(M,A,w){M.ior.value=A.ior,A.sheen>0&&(M.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),M.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(M.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,M.sheenColorMapTransform)),A.sheenRoughnessMap&&(M.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,M.sheenRoughnessMapTransform))),A.clearcoat>0&&(M.clearcoat.value=A.clearcoat,M.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(M.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,M.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(M.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===Rr&&M.clearcoatNormalScale.value.negate())),A.dispersion>0&&(M.dispersion.value=A.dispersion),A.iridescence>0&&(M.iridescence.value=A.iridescence,M.iridescenceIOR.value=A.iridescenceIOR,M.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(M.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,M.iridescenceMapTransform)),A.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),A.transmission>0&&(M.transmission.value=A.transmission,M.transmissionSamplerMap.value=w.texture,M.transmissionSamplerSize.value.set(w.width,w.height),A.transmissionMap&&(M.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,M.transmissionMapTransform)),M.thickness.value=A.thickness,A.thicknessMap&&(M.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=A.attenuationDistance,M.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(M.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(M.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=A.specularIntensity,M.specularColor.value.copy(A.specularColor),A.specularColorMap&&(M.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,M.specularColorMapTransform)),A.specularIntensityMap&&(M.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,M.specularIntensityMapTransform))}function b(M,A){A.matcap&&(M.matcap.value=A.matcap)}function T(M,A){const w=e.get(A).light;M.referencePosition.value.setFromMatrixPosition(w.matrixWorld),M.nearDistance.value=w.shadow.camera.near,M.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function SH(n,e,t,i){let r={},a={},o=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function f(w,B){const D=B.program;i.uniformBlockBinding(w,D)}function p(w,B){let D=r[w.id];D===void 0&&(b(w),D=m(w),r[w.id]=D,w.addEventListener("dispose",M));const I=B.program;i.updateUBOMapping(w,I);const N=e.render.frame;a[w.id]!==N&&(y(w),a[w.id]=N)}function m(w){const B=v();w.__bindingPointIndex=B;const D=n.createBuffer(),I=w.__size,N=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,I,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,B,D),D}function v(){for(let w=0;w<c;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(w){const B=r[w.id],D=w.uniforms,I=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,B);for(let N=0,H=D.length;N<H;N++){const P=Array.isArray(D[N])?D[N]:[D[N]];for(let L=0,U=P.length;L<U;L++){const Y=P[L];if(x(Y,N,L,I)===!0){const ie=Y.__offset,Q=Array.isArray(Y.value)?Y.value:[Y.value];let ae=0;for(let he=0;he<Q.length;he++){const X=Q[he],te=T(X);typeof X=="number"||typeof X=="boolean"?(Y.__data[0]=X,n.bufferSubData(n.UNIFORM_BUFFER,ie+ae,Y.__data)):X.isMatrix3?(Y.__data[0]=X.elements[0],Y.__data[1]=X.elements[1],Y.__data[2]=X.elements[2],Y.__data[3]=0,Y.__data[4]=X.elements[3],Y.__data[5]=X.elements[4],Y.__data[6]=X.elements[5],Y.__data[7]=0,Y.__data[8]=X.elements[6],Y.__data[9]=X.elements[7],Y.__data[10]=X.elements[8],Y.__data[11]=0):(X.toArray(Y.__data,ae),ae+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ie,Y.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(w,B,D,I){const N=w.value,H=B+"_"+D;if(I[H]===void 0)return typeof N=="number"||typeof N=="boolean"?I[H]=N:I[H]=N.clone(),!0;{const P=I[H];if(typeof N=="number"||typeof N=="boolean"){if(P!==N)return I[H]=N,!0}else if(P.equals(N)===!1)return P.copy(N),!0}return!1}function b(w){const B=w.uniforms;let D=0;const I=16;for(let H=0,P=B.length;H<P;H++){const L=Array.isArray(B[H])?B[H]:[B[H]];for(let U=0,Y=L.length;U<Y;U++){const ie=L[U],Q=Array.isArray(ie.value)?ie.value:[ie.value];for(let ae=0,he=Q.length;ae<he;ae++){const X=Q[ae],te=T(X),ne=D%I,be=ne%te.boundary,W=ne+be;D+=be,W!==0&&I-W<te.storage&&(D+=I-W),ie.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=D,D+=te.storage}}}const N=D%I;return N>0&&(D+=I-N),w.__size=D,w.__cache={},this}function T(w){const B={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(B.boundary=4,B.storage=4):w.isVector2?(B.boundary=8,B.storage=8):w.isVector3||w.isColor?(B.boundary=16,B.storage=12):w.isVector4?(B.boundary=16,B.storage=16):w.isMatrix3?(B.boundary=48,B.storage=48):w.isMatrix4?(B.boundary=64,B.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),B}function M(w){const B=w.target;B.removeEventListener("dispose",M);const D=o.indexOf(B.__bindingPointIndex);o.splice(D,1),n.deleteBuffer(r[B.id]),delete r[B.id],delete a[B.id]}function A(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},a={}}return{bind:f,update:p,dispose:A}}class EE{constructor(e={}){const{canvas:t=W2(),context:i=null,depth:r=!0,stencil:a=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=o;const b=new Uint32Array(4),T=new Int32Array(4);let M=null,A=null;const w=[],B=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Po,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let I=!1;this._outputColorSpace=Wn;let N=0,H=0,P=null,L=-1,U=null;const Y=new zn,ie=new zn;let Q=null;const ae=new xt(0);let he=0,X=t.width,te=t.height,ne=1,be=null,W=null;const se=new zn(0,0,X,te),Ae=new zn(0,0,X,te);let De=!1;const ge=new Dp;let He=!1,Le=!1;const Qe=new qt,rt=new qt,Bt=new $,wt=new zn,fn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Vt=!1;function Rt(){return P===null?ne:1}let Z=i;function lt(V,ee){return t.getContext(V,ee)}try{const V={alpha:!0,depth:r,stencil:a,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:m,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Dh}`),t.addEventListener("webglcontextlost",Ye,!1),t.addEventListener("webglcontextrestored",bt,!1),t.addEventListener("webglcontextcreationerror",gt,!1),Z===null){const ee="webgl2";if(Z=lt(ee,V),Z===null)throw lt(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let et,Ze,je,yt,Je,J,k,re,xe,Xe,Be,ut,ot,pt,Pt,at,_t,Et,vt,dt,de,Pe,st,pe;function Te(){et=new N4(Z),et.init(),Pe=new qB(Z,et),Ze=new C4(Z,et,e,Pe),je=new pH(Z,et),Ze.reverseDepthBuffer&&y&&je.buffers.depth.setReversed(!0),yt=new P4(Z),Je=new tH,J=new mH(Z,et,je,Je,Ze,Pe,yt),k=new w4(D),re=new U4(D),xe=new kI(Z),st=new M4(Z,xe),Xe=new L4(Z,xe,yt,st),Be=new F4(Z,Xe,xe,yt),vt=new z4(Z,Ze,J),at=new R4(Je),ut=new eH(D,k,re,et,Ze,st,at),ot=new bH(D,Je),pt=new iH,Pt=new cH(et),Et=new E4(D,k,re,je,Be,x,f),_t=new hH(D,Be,Ze),pe=new SH(Z,yt,Ze,je),dt=new T4(Z,et,yt),de=new I4(Z,et,yt),yt.programs=ut.programs,D.capabilities=Ze,D.extensions=et,D.properties=Je,D.renderLists=pt,D.shadowMap=_t,D.state=je,D.info=yt}Te();const Ie=new _H(D,Z);this.xr=Ie,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const V=et.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=et.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(V){V!==void 0&&(ne=V,this.setSize(X,te,!1))},this.getSize=function(V){return V.set(X,te)},this.setSize=function(V,ee,le=!0){if(Ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=V,te=ee,t.width=Math.floor(V*ne),t.height=Math.floor(ee*ne),le===!0&&(t.style.width=V+"px",t.style.height=ee+"px"),this.setViewport(0,0,V,ee)},this.getDrawingBufferSize=function(V){return V.set(X*ne,te*ne).floor()},this.setDrawingBufferSize=function(V,ee,le){X=V,te=ee,ne=le,t.width=Math.floor(V*le),t.height=Math.floor(ee*le),this.setViewport(0,0,V,ee)},this.getCurrentViewport=function(V){return V.copy(Y)},this.getViewport=function(V){return V.copy(se)},this.setViewport=function(V,ee,le,ce){V.isVector4?se.set(V.x,V.y,V.z,V.w):se.set(V,ee,le,ce),je.viewport(Y.copy(se).multiplyScalar(ne).round())},this.getScissor=function(V){return V.copy(Ae)},this.setScissor=function(V,ee,le,ce){V.isVector4?Ae.set(V.x,V.y,V.z,V.w):Ae.set(V,ee,le,ce),je.scissor(ie.copy(Ae).multiplyScalar(ne).round())},this.getScissorTest=function(){return De},this.setScissorTest=function(V){je.setScissorTest(De=V)},this.setOpaqueSort=function(V){be=V},this.setTransparentSort=function(V){W=V},this.getClearColor=function(V){return V.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor(...arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha(...arguments)},this.clear=function(V=!0,ee=!0,le=!0){let ce=0;if(V){let ye=!1;if(P!==null){const Ce=P.texture.format;ye=Ce===wx||Ce===Rx||Ce===sv}if(ye){const Ce=P.texture.type,ke=Ce===nr||Ce===Go||Ce===yp||Ce===_h||Ce===Tx||Ce===Cx,We=Et.getClearColor(),nt=Et.getClearAlpha(),St=We.r,mt=We.g,At=We.b;ke?(b[0]=St,b[1]=mt,b[2]=At,b[3]=nt,Z.clearBufferuiv(Z.COLOR,0,b)):(T[0]=St,T[1]=mt,T[2]=At,T[3]=nt,Z.clearBufferiv(Z.COLOR,0,T))}else ce|=Z.COLOR_BUFFER_BIT}ee&&(ce|=Z.DEPTH_BUFFER_BIT),le&&(ce|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ye,!1),t.removeEventListener("webglcontextrestored",bt,!1),t.removeEventListener("webglcontextcreationerror",gt,!1),Et.dispose(),pt.dispose(),Pt.dispose(),Je.dispose(),k.dispose(),re.dispose(),Be.dispose(),st.dispose(),pe.dispose(),ut.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",wi),Ie.removeEventListener("sessionend",Fi),Hi.stop()};function Ye(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const V=yt.autoReset,ee=_t.enabled,le=_t.autoUpdate,ce=_t.needsUpdate,ye=_t.type;Te(),yt.autoReset=V,_t.enabled=ee,_t.autoUpdate=le,_t.needsUpdate=ce,_t.type=ye}function gt(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function zt(V){const ee=V.target;ee.removeEventListener("dispose",zt),mn(ee)}function mn(V){Vn(V),Je.remove(V)}function Vn(V){const ee=Je.get(V).programs;ee!==void 0&&(ee.forEach(function(le){ut.releaseProgram(le)}),V.isShaderMaterial&&ut.releaseShaderCache(V))}this.renderBufferDirect=function(V,ee,le,ce,ye,Ce){ee===null&&(ee=fn);const ke=ye.isMesh&&ye.matrixWorld.determinant()<0,We=me(V,ee,le,ce,ye);je.setMaterial(ce,ke);let nt=le.index,St=1;if(ce.wireframe===!0){if(nt=Xe.getWireframeAttribute(le),nt===void 0)return;St=2}const mt=le.drawRange,At=le.attributes.position;let kt=mt.start*St,It=(mt.start+mt.count)*St;Ce!==null&&(kt=Math.max(kt,Ce.start*St),It=Math.min(It,(Ce.start+Ce.count)*St)),nt!==null?(kt=Math.max(kt,0),It=Math.min(It,nt.count)):At!=null&&(kt=Math.max(kt,0),It=Math.min(It,At.count));const wn=It-kt;if(wn<0||wn===1/0)return;st.setup(ye,ce,We,le,nt);let Dt,Ht=dt;if(nt!==null&&(Dt=xe.get(nt),Ht=de,Ht.setIndex(Dt)),ye.isMesh)ce.wireframe===!0?(je.setLineWidth(ce.wireframeLinewidth*Rt()),Ht.setMode(Z.LINES)):Ht.setMode(Z.TRIANGLES);else if(ye.isLine){let Ot=ce.linewidth;Ot===void 0&&(Ot=1),je.setLineWidth(Ot*Rt()),ye.isLineSegments?Ht.setMode(Z.LINES):ye.isLineLoop?Ht.setMode(Z.LINE_LOOP):Ht.setMode(Z.LINE_STRIP)}else ye.isPoints?Ht.setMode(Z.POINTS):ye.isSprite&&Ht.setMode(Z.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)l_("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ht.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(et.get("WEBGL_multi_draw"))Ht.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const Ot=ye._multiDrawStarts,ti=ye._multiDrawCounts,en=ye._multiDrawCount,sn=nt?xe.get(nt).bytesPerElement:1,ri=Je.get(ce).currentProgram.getUniforms();for(let Yt=0;Yt<en;Yt++)ri.setValue(Z,"_gl_DrawID",Yt),Ht.render(Ot[Yt]/sn,ti[Yt])}else if(ye.isInstancedMesh)Ht.renderInstances(kt,wn,ye.count);else if(le.isInstancedBufferGeometry){const Ot=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,ti=Math.min(le.instanceCount,Ot);Ht.renderInstances(kt,wn,ti)}else Ht.render(kt,wn)};function on(V,ee,le){V.transparent===!0&&V.side===ga&&V.forceSinglePass===!1?(V.side=Rr,V.needsUpdate=!0,qn(V,ee,le),V.side=Ho,V.needsUpdate=!0,qn(V,ee,le),V.side=ga):qn(V,ee,le)}this.compile=function(V,ee,le=null){le===null&&(le=V),A=Pt.get(le),A.init(ee),B.push(A),le.traverseVisible(function(ye){ye.isLight&&ye.layers.test(ee.layers)&&(A.pushLight(ye),ye.castShadow&&A.pushShadow(ye))}),V!==le&&V.traverseVisible(function(ye){ye.isLight&&ye.layers.test(ee.layers)&&(A.pushLight(ye),ye.castShadow&&A.pushShadow(ye))}),A.setupLights();const ce=new Set;return V.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const Ce=ye.material;if(Ce)if(Array.isArray(Ce))for(let ke=0;ke<Ce.length;ke++){const We=Ce[ke];on(We,le,ye),ce.add(We)}else on(Ce,le,ye),ce.add(Ce)}),A=B.pop(),ce},this.compileAsync=function(V,ee,le=null){const ce=this.compile(V,ee,le);return new Promise(ye=>{function Ce(){if(ce.forEach(function(ke){Je.get(ke).currentProgram.isReady()&&ce.delete(ke)}),ce.size===0){ye(V);return}setTimeout(Ce,10)}et.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let Ri=null;function fi(V){Ri&&Ri(V)}function wi(){Hi.stop()}function Fi(){Hi.start()}const Hi=new kB;Hi.setAnimationLoop(fi),typeof self<"u"&&Hi.setContext(self),this.setAnimationLoop=function(V){Ri=V,Ie.setAnimationLoop(V),V===null?Hi.stop():Hi.start()},Ie.addEventListener("sessionstart",wi),Ie.addEventListener("sessionend",Fi),this.render=function(V,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(Ie.cameraAutoUpdate===!0&&Ie.updateCamera(ee),ee=Ie.getCamera()),V.isScene===!0&&V.onBeforeRender(D,V,ee,P),A=Pt.get(V,B.length),A.init(ee),B.push(A),rt.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),ge.setFromProjectionMatrix(rt),Le=this.localClippingEnabled,He=at.init(this.clippingPlanes,Le),M=pt.get(V,w.length),M.init(),w.push(M),Ie.enabled===!0&&Ie.isPresenting===!0){const Ce=D.xr.getDepthSensingMesh();Ce!==null&&Or(Ce,ee,-1/0,D.sortObjects)}Or(V,ee,0,D.sortObjects),M.finish(),D.sortObjects===!0&&M.sort(be,W),Vt=Ie.enabled===!1||Ie.isPresenting===!1||Ie.hasDepthSensing()===!1,Vt&&Et.addToRenderList(M,V),this.info.render.frame++,He===!0&&at.beginShadows();const le=A.state.shadowsArray;_t.render(le,V,ee),He===!0&&at.endShadows(),this.info.autoReset===!0&&this.info.reset();const ce=M.opaque,ye=M.transmissive;if(A.setupLights(),ee.isArrayCamera){const Ce=ee.cameras;if(ye.length>0)for(let ke=0,We=Ce.length;ke<We;ke++){const nt=Ce[ke];_r(ce,ye,V,nt)}Vt&&Et.render(V);for(let ke=0,We=Ce.length;ke<We;ke++){const nt=Ce[ke];cs(M,V,nt,nt.viewport)}}else ye.length>0&&_r(ce,ye,V,ee),Vt&&Et.render(V),cs(M,V,ee);P!==null&&H===0&&(J.updateMultisampleRenderTarget(P),J.updateRenderTargetMipmap(P)),V.isScene===!0&&V.onAfterRender(D,V,ee),st.resetDefaultState(),L=-1,U=null,B.pop(),B.length>0?(A=B[B.length-1],He===!0&&at.setGlobalState(D.clippingPlanes,A.state.camera)):A=null,w.pop(),w.length>0?M=w[w.length-1]:M=null};function Or(V,ee,le,ce){if(V.visible===!1)return;if(V.layers.test(ee.layers)){if(V.isGroup)le=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(ee);else if(V.isLight)A.pushLight(V),V.castShadow&&A.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ge.intersectsSprite(V)){ce&&wt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(rt);const ke=Be.update(V),We=V.material;We.visible&&M.push(V,ke,We,le,wt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ge.intersectsObject(V))){const ke=Be.update(V),We=V.material;if(ce&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),wt.copy(V.boundingSphere.center)):(ke.boundingSphere===null&&ke.computeBoundingSphere(),wt.copy(ke.boundingSphere.center)),wt.applyMatrix4(V.matrixWorld).applyMatrix4(rt)),Array.isArray(We)){const nt=ke.groups;for(let St=0,mt=nt.length;St<mt;St++){const At=nt[St],kt=We[At.materialIndex];kt&&kt.visible&&M.push(V,ke,kt,le,wt.z,At)}}else We.visible&&M.push(V,ke,We,le,wt.z,null)}}const Ce=V.children;for(let ke=0,We=Ce.length;ke<We;ke++)Or(Ce[ke],ee,le,ce)}function cs(V,ee,le,ce){const ye=V.opaque,Ce=V.transmissive,ke=V.transparent;A.setupLightsView(le),He===!0&&at.setGlobalState(D.clippingPlanes,le),ce&&je.viewport(Y.copy(ce)),ye.length>0&&jt(ye,ee,le),Ce.length>0&&jt(Ce,ee,le),ke.length>0&&jt(ke,ee,le),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function _r(V,ee,le,ce){if((le.isScene===!0?le.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[ce.id]===void 0&&(A.state.transmissionRenderTarget[ce.id]=new Ii(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")||et.has("EXT_color_buffer_float")?wr:nr,minFilter:$s,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pn.workingColorSpace}));const Ce=A.state.transmissionRenderTarget[ce.id],ke=ce.viewport||Y;Ce.setSize(ke.z*D.transmissionResolutionScale,ke.w*D.transmissionResolutionScale);const We=D.getRenderTarget();D.setRenderTarget(Ce),D.getClearColor(ae),he=D.getClearAlpha(),he<1&&D.setClearColor(16777215,.5),D.clear(),Vt&&Et.render(le);const nt=D.toneMapping;D.toneMapping=Po;const St=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),A.setupLightsView(ce),He===!0&&at.setGlobalState(D.clippingPlanes,ce),jt(V,le,ce),J.updateMultisampleRenderTarget(Ce),J.updateRenderTargetMipmap(Ce),et.has("WEBGL_multisampled_render_to_texture")===!1){let mt=!1;for(let At=0,kt=ee.length;At<kt;At++){const It=ee[At],wn=It.object,Dt=It.geometry,Ht=It.material,Ot=It.group;if(Ht.side===ga&&wn.layers.test(ce.layers)){const ti=Ht.side;Ht.side=Rr,Ht.needsUpdate=!0,ia(wn,le,ce,Dt,Ht,Ot),Ht.side=ti,Ht.needsUpdate=!0,mt=!0}}mt===!0&&(J.updateMultisampleRenderTarget(Ce),J.updateRenderTargetMipmap(Ce))}D.setRenderTarget(We),D.setClearColor(ae,he),St!==void 0&&(ce.viewport=St),D.toneMapping=nt}function jt(V,ee,le){const ce=ee.isScene===!0?ee.overrideMaterial:null;for(let ye=0,Ce=V.length;ye<Ce;ye++){const ke=V[ye],We=ke.object,nt=ke.geometry,St=ke.group;let mt=ke.material;mt.allowOverride===!0&&ce!==null&&(mt=ce),We.layers.test(le.layers)&&ia(We,ee,le,nt,mt,St)}}function ia(V,ee,le,ce,ye,Ce){V.onBeforeRender(D,ee,le,ce,ye,Ce),V.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ye.onBeforeRender(D,ee,le,ce,V,Ce),ye.transparent===!0&&ye.side===ga&&ye.forceSinglePass===!1?(ye.side=Rr,ye.needsUpdate=!0,D.renderBufferDirect(le,ee,ce,ye,V,Ce),ye.side=Ho,ye.needsUpdate=!0,D.renderBufferDirect(le,ee,ce,ye,V,Ce),ye.side=ga):D.renderBufferDirect(le,ee,ce,ye,V,Ce),V.onAfterRender(D,ee,le,ce,ye,Ce)}function qn(V,ee,le){ee.isScene!==!0&&(ee=fn);const ce=Je.get(V),ye=A.state.lights,Ce=A.state.shadowsArray,ke=ye.state.version,We=ut.getParameters(V,ye.state,Ce,ee,le),nt=ut.getProgramCacheKey(We);let St=ce.programs;ce.environment=V.isMeshStandardMaterial?ee.environment:null,ce.fog=ee.fog,ce.envMap=(V.isMeshStandardMaterial?re:k).get(V.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&V.envMap===null?ee.environmentRotation:V.envMapRotation,St===void 0&&(V.addEventListener("dispose",zt),St=new Map,ce.programs=St);let mt=St.get(nt);if(mt!==void 0){if(ce.currentProgram===mt&&ce.lightsStateVersion===ke)return K(V,We),mt}else We.uniforms=ut.getUniforms(V),V.onBeforeCompile(We,D),mt=ut.acquireProgram(We,nt),St.set(nt,mt),ce.uniforms=We.uniforms;const At=ce.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(At.clippingPlanes=at.uniform),K(V,We),ce.needsLights=Ue(V),ce.lightsStateVersion=ke,ce.needsLights&&(At.ambientLightColor.value=ye.state.ambient,At.lightProbe.value=ye.state.probe,At.directionalLights.value=ye.state.directional,At.directionalLightShadows.value=ye.state.directionalShadow,At.spotLights.value=ye.state.spot,At.spotLightShadows.value=ye.state.spotShadow,At.rectAreaLights.value=ye.state.rectArea,At.ltc_1.value=ye.state.rectAreaLTC1,At.ltc_2.value=ye.state.rectAreaLTC2,At.pointLights.value=ye.state.point,At.pointLightShadows.value=ye.state.pointShadow,At.hemisphereLights.value=ye.state.hemi,At.directionalShadowMap.value=ye.state.directionalShadowMap,At.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,At.spotShadowMap.value=ye.state.spotShadowMap,At.spotLightMatrix.value=ye.state.spotLightMatrix,At.spotLightMap.value=ye.state.spotLightMap,At.pointShadowMap.value=ye.state.pointShadowMap,At.pointShadowMatrix.value=ye.state.pointShadowMatrix),ce.currentProgram=mt,ce.uniformsList=null,mt}function G(V){if(V.uniformsList===null){const ee=V.currentProgram.getUniforms();V.uniformsList=u_.seqWithValue(ee.seq,V.uniforms)}return V.uniformsList}function K(V,ee){const le=Je.get(V);le.outputColorSpace=ee.outputColorSpace,le.batching=ee.batching,le.batchingColor=ee.batchingColor,le.instancing=ee.instancing,le.instancingColor=ee.instancingColor,le.instancingMorph=ee.instancingMorph,le.skinning=ee.skinning,le.morphTargets=ee.morphTargets,le.morphNormals=ee.morphNormals,le.morphColors=ee.morphColors,le.morphTargetsCount=ee.morphTargetsCount,le.numClippingPlanes=ee.numClippingPlanes,le.numIntersection=ee.numClipIntersection,le.vertexAlphas=ee.vertexAlphas,le.vertexTangents=ee.vertexTangents,le.toneMapping=ee.toneMapping}function me(V,ee,le,ce,ye){ee.isScene!==!0&&(ee=fn),J.resetTextureUnits();const Ce=ee.fog,ke=ce.isMeshStandardMaterial?ee.environment:null,We=P===null?D.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Ms,nt=(ce.isMeshStandardMaterial?re:k).get(ce.envMap||ke),St=ce.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,mt=!!le.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),At=!!le.morphAttributes.position,kt=!!le.morphAttributes.normal,It=!!le.morphAttributes.color;let wn=Po;ce.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(wn=D.toneMapping);const Dt=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Ht=Dt!==void 0?Dt.length:0,Ot=Je.get(ce),ti=A.state.lights;if(He===!0&&(Le===!0||V!==U)){const ai=V===U&&ce.id===L;at.setState(ce,V,ai)}let en=!1;ce.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==ti.state.version||Ot.outputColorSpace!==We||ye.isBatchedMesh&&Ot.batching===!1||!ye.isBatchedMesh&&Ot.batching===!0||ye.isBatchedMesh&&Ot.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&Ot.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&Ot.instancing===!1||!ye.isInstancedMesh&&Ot.instancing===!0||ye.isSkinnedMesh&&Ot.skinning===!1||!ye.isSkinnedMesh&&Ot.skinning===!0||ye.isInstancedMesh&&Ot.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&Ot.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&Ot.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&Ot.instancingMorph===!1&&ye.morphTexture!==null||Ot.envMap!==nt||ce.fog===!0&&Ot.fog!==Ce||Ot.numClippingPlanes!==void 0&&(Ot.numClippingPlanes!==at.numPlanes||Ot.numIntersection!==at.numIntersection)||Ot.vertexAlphas!==St||Ot.vertexTangents!==mt||Ot.morphTargets!==At||Ot.morphNormals!==kt||Ot.morphColors!==It||Ot.toneMapping!==wn||Ot.morphTargetsCount!==Ht)&&(en=!0):(en=!0,Ot.__version=ce.version);let sn=Ot.currentProgram;en===!0&&(sn=qn(ce,ee,ye));let ri=!1,Yt=!1,xn=!1;const gn=sn.getUniforms(),_i=Ot.uniforms;if(je.useProgram(sn.program)&&(ri=!0,Yt=!0,xn=!0),ce.id!==L&&(L=ce.id,Yt=!0),ri||U!==V){je.buffers.depth.getReversed()?(Qe.copy(V.projectionMatrix),pN(Qe),mN(Qe),gn.setValue(Z,"projectionMatrix",Qe)):gn.setValue(Z,"projectionMatrix",V.projectionMatrix),gn.setValue(Z,"viewMatrix",V.matrixWorldInverse);const hr=gn.map.cameraPosition;hr!==void 0&&hr.setValue(Z,Bt.setFromMatrixPosition(V.matrixWorld)),Ze.logarithmicDepthBuffer&&gn.setValue(Z,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&gn.setValue(Z,"isOrthographic",V.isOrthographicCamera===!0),U!==V&&(U=V,Yt=!0,xn=!0)}if(ye.isSkinnedMesh){gn.setOptional(Z,ye,"bindMatrix"),gn.setOptional(Z,ye,"bindMatrixInverse");const ai=ye.skeleton;ai&&(ai.boneTexture===null&&ai.computeBoneTexture(),gn.setValue(Z,"boneTexture",ai.boneTexture,J))}ye.isBatchedMesh&&(gn.setOptional(Z,ye,"batchingTexture"),gn.setValue(Z,"batchingTexture",ye._matricesTexture,J),gn.setOptional(Z,ye,"batchingIdTexture"),gn.setValue(Z,"batchingIdTexture",ye._indirectTexture,J),gn.setOptional(Z,ye,"batchingColorTexture"),ye._colorsTexture!==null&&gn.setValue(Z,"batchingColorTexture",ye._colorsTexture,J));const On=le.morphAttributes;if((On.position!==void 0||On.normal!==void 0||On.color!==void 0)&&vt.update(ye,le,sn),(Yt||Ot.receiveShadow!==ye.receiveShadow)&&(Ot.receiveShadow=ye.receiveShadow,gn.setValue(Z,"receiveShadow",ye.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(_i.envMap.value=nt,_i.flipEnvMap.value=nt.isCubeTexture&&nt.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&ee.environment!==null&&(_i.envMapIntensity.value=ee.environmentIntensity),Yt&&(gn.setValue(Z,"toneMappingExposure",D.toneMappingExposure),Ot.needsLights&&we(_i,xn),Ce&&ce.fog===!0&&ot.refreshFogUniforms(_i,Ce),ot.refreshMaterialUniforms(_i,ce,ne,te,A.state.transmissionRenderTarget[V.id]),u_.upload(Z,G(Ot),_i,J)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(u_.upload(Z,G(Ot),_i,J),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&gn.setValue(Z,"center",ye.center),gn.setValue(Z,"modelViewMatrix",ye.modelViewMatrix),gn.setValue(Z,"normalMatrix",ye.normalMatrix),gn.setValue(Z,"modelMatrix",ye.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const ai=ce.uniformsGroups;for(let hr=0,Xr=ai.length;hr<Xr;hr++){const Rs=ai[hr];pe.update(Rs,sn),pe.bind(Rs,sn)}}return sn}function we(V,ee){V.ambientLightColor.needsUpdate=ee,V.lightProbe.needsUpdate=ee,V.directionalLights.needsUpdate=ee,V.directionalLightShadows.needsUpdate=ee,V.pointLights.needsUpdate=ee,V.pointLightShadows.needsUpdate=ee,V.spotLights.needsUpdate=ee,V.spotLightShadows.needsUpdate=ee,V.rectAreaLights.needsUpdate=ee,V.hemisphereLights.needsUpdate=ee}function Ue(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(V,ee,le){const ce=Je.get(V);ce.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,ce.__autoAllocateDepthBuffer===!1&&(ce.__useRenderToTexture=!1),Je.get(V.texture).__webglTexture=ee,Je.get(V.depthTexture).__webglTexture=ce.__autoAllocateDepthBuffer?void 0:le,ce.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,ee){const le=Je.get(V);le.__webglFramebuffer=ee,le.__useDefaultFramebuffer=ee===void 0};const Ge=Z.createFramebuffer();this.setRenderTarget=function(V,ee=0,le=0){P=V,N=ee,H=le;let ce=!0,ye=null,Ce=!1,ke=!1;if(V){const nt=Je.get(V);if(nt.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(Z.FRAMEBUFFER,null),ce=!1;else if(nt.__webglFramebuffer===void 0)J.setupRenderTarget(V);else if(nt.__hasExternalTextures)J.rebindTextures(V,Je.get(V.texture).__webglTexture,Je.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const At=V.depthTexture;if(nt.__boundDepthTexture!==At){if(At!==null&&Je.has(At)&&(V.width!==At.image.width||V.height!==At.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");J.setupDepthRenderbuffer(V)}}const St=V.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(ke=!0);const mt=Je.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(mt[ee])?ye=mt[ee][le]:ye=mt[ee],Ce=!0):V.samples>0&&J.useMultisampledRTT(V)===!1?ye=Je.get(V).__webglMultisampledFramebuffer:Array.isArray(mt)?ye=mt[le]:ye=mt,Y.copy(V.viewport),ie.copy(V.scissor),Q=V.scissorTest}else Y.copy(se).multiplyScalar(ne).floor(),ie.copy(Ae).multiplyScalar(ne).floor(),Q=De;if(le!==0&&(ye=Ge),je.bindFramebuffer(Z.FRAMEBUFFER,ye)&&ce&&je.drawBuffers(V,ye),je.viewport(Y),je.scissor(ie),je.setScissorTest(Q),Ce){const nt=Je.get(V.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+ee,nt.__webglTexture,le)}else if(ke){const nt=Je.get(V.texture),St=ee;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,nt.__webglTexture,le,St)}else if(V!==null&&le!==0){const nt=Je.get(V.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,nt.__webglTexture,le)}L=-1},this.readRenderTargetPixels=function(V,ee,le,ce,ye,Ce,ke){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=Je.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ke!==void 0&&(We=We[ke]),We){je.bindFramebuffer(Z.FRAMEBUFFER,We);try{const nt=V.texture,St=nt.format,mt=nt.type;if(!Ze.textureFormatReadable(St)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=V.width-ce&&le>=0&&le<=V.height-ye&&Z.readPixels(ee,le,ce,ye,Pe.convert(St),Pe.convert(mt),Ce)}finally{const nt=P!==null?Je.get(P).__webglFramebuffer:null;je.bindFramebuffer(Z.FRAMEBUFFER,nt)}}},this.readRenderTargetPixelsAsync=async function(V,ee,le,ce,ye,Ce,ke){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let We=Je.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ke!==void 0&&(We=We[ke]),We)if(ee>=0&&ee<=V.width-ce&&le>=0&&le<=V.height-ye){je.bindFramebuffer(Z.FRAMEBUFFER,We);const nt=V.texture,St=nt.format,mt=nt.type;if(!Ze.textureFormatReadable(St))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const At=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,At),Z.bufferData(Z.PIXEL_PACK_BUFFER,Ce.byteLength,Z.STREAM_READ),Z.readPixels(ee,le,ce,ye,Pe.convert(St),Pe.convert(mt),0);const kt=P!==null?Je.get(P).__webglFramebuffer:null;je.bindFramebuffer(Z.FRAMEBUFFER,kt);const It=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await dN(Z,It,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,At),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,Ce),Z.deleteBuffer(At),Z.deleteSync(It),Ce}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,ee=null,le=0){const ce=Math.pow(2,-le),ye=Math.floor(V.image.width*ce),Ce=Math.floor(V.image.height*ce),ke=ee!==null?ee.x:0,We=ee!==null?ee.y:0;J.setTexture2D(V,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,le,0,0,ke,We,ye,Ce),je.unbindTexture()};const ct=Z.createFramebuffer(),it=Z.createFramebuffer();this.copyTextureToTexture=function(V,ee,le=null,ce=null,ye=0,Ce=null){Ce===null&&(ye!==0?(l_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ce=ye,ye=0):Ce=0);let ke,We,nt,St,mt,At,kt,It,wn;const Dt=V.isCompressedTexture?V.mipmaps[Ce]:V.image;if(le!==null)ke=le.max.x-le.min.x,We=le.max.y-le.min.y,nt=le.isBox3?le.max.z-le.min.z:1,St=le.min.x,mt=le.min.y,At=le.isBox3?le.min.z:0;else{const On=Math.pow(2,-ye);ke=Math.floor(Dt.width*On),We=Math.floor(Dt.height*On),V.isDataArrayTexture?nt=Dt.depth:V.isData3DTexture?nt=Math.floor(Dt.depth*On):nt=1,St=0,mt=0,At=0}ce!==null?(kt=ce.x,It=ce.y,wn=ce.z):(kt=0,It=0,wn=0);const Ht=Pe.convert(ee.format),Ot=Pe.convert(ee.type);let ti;ee.isData3DTexture?(J.setTexture3D(ee,0),ti=Z.TEXTURE_3D):ee.isDataArrayTexture||ee.isCompressedArrayTexture?(J.setTexture2DArray(ee,0),ti=Z.TEXTURE_2D_ARRAY):(J.setTexture2D(ee,0),ti=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ee.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ee.unpackAlignment);const en=Z.getParameter(Z.UNPACK_ROW_LENGTH),sn=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),ri=Z.getParameter(Z.UNPACK_SKIP_PIXELS),Yt=Z.getParameter(Z.UNPACK_SKIP_ROWS),xn=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Dt.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Dt.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,St),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,mt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,At);const gn=V.isDataArrayTexture||V.isData3DTexture,_i=ee.isDataArrayTexture||ee.isData3DTexture;if(V.isDepthTexture){const On=Je.get(V),ai=Je.get(ee),hr=Je.get(On.__renderTarget),Xr=Je.get(ai.__renderTarget);je.bindFramebuffer(Z.READ_FRAMEBUFFER,hr.__webglFramebuffer),je.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Xr.__webglFramebuffer);for(let Rs=0;Rs<nt;Rs++)gn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Je.get(V).__webglTexture,ye,At+Rs),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Je.get(ee).__webglTexture,Ce,wn+Rs)),Z.blitFramebuffer(St,mt,ke,We,kt,It,ke,We,Z.DEPTH_BUFFER_BIT,Z.NEAREST);je.bindFramebuffer(Z.READ_FRAMEBUFFER,null),je.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(ye!==0||V.isRenderTargetTexture||Je.has(V)){const On=Je.get(V),ai=Je.get(ee);je.bindFramebuffer(Z.READ_FRAMEBUFFER,ct),je.bindFramebuffer(Z.DRAW_FRAMEBUFFER,it);for(let hr=0;hr<nt;hr++)gn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,On.__webglTexture,ye,At+hr):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,On.__webglTexture,ye),_i?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,ai.__webglTexture,Ce,wn+hr):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,ai.__webglTexture,Ce),ye!==0?Z.blitFramebuffer(St,mt,ke,We,kt,It,ke,We,Z.COLOR_BUFFER_BIT,Z.NEAREST):_i?Z.copyTexSubImage3D(ti,Ce,kt,It,wn+hr,St,mt,ke,We):Z.copyTexSubImage2D(ti,Ce,kt,It,St,mt,ke,We);je.bindFramebuffer(Z.READ_FRAMEBUFFER,null),je.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else _i?V.isDataTexture||V.isData3DTexture?Z.texSubImage3D(ti,Ce,kt,It,wn,ke,We,nt,Ht,Ot,Dt.data):ee.isCompressedArrayTexture?Z.compressedTexSubImage3D(ti,Ce,kt,It,wn,ke,We,nt,Ht,Dt.data):Z.texSubImage3D(ti,Ce,kt,It,wn,ke,We,nt,Ht,Ot,Dt):V.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Ce,kt,It,ke,We,Ht,Ot,Dt.data):V.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Ce,kt,It,Dt.width,Dt.height,Ht,Dt.data):Z.texSubImage2D(Z.TEXTURE_2D,Ce,kt,It,ke,We,Ht,Ot,Dt);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,en),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,sn),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,ri),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Yt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,xn),Ce===0&&ee.generateMipmaps&&Z.generateMipmap(ti),je.unbindTexture()},this.copyTextureToTexture3D=function(V,ee,le=null,ce=null,ye=0){return l_('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,ee,le,ce,ye)},this.initRenderTarget=function(V){Je.get(V).__webglFramebuffer===void 0&&J.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?J.setTextureCube(V,0):V.isData3DTexture?J.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?J.setTexture2DArray(V,0):J.setTexture2D(V,0),je.unbindTexture()},this.resetState=function(){N=0,H=0,P=null,je.reset(),st.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Pn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Pn._getUnpackColorSpace()}}const AH=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:PA,AddEquation:Du,AddOperation:E2,AdditiveAnimationBlendMode:kA,AdditiveBlending:F1,AgXToneMapping:w2,AlphaFormat:FA,AlwaysCompare:X2,AlwaysDepth:v_,AlwaysStencilFunc:X1,AmbientLight:DB,AnimationAction:GB,AnimationClip:Tp,AnimationLoader:GL,AnimationMixer:hI,AnimationObjectGroup:uI,AnimationUtils:PL,ArcCurve:aB,ArrayCamera:zB,ArrowHelper:NI,AttachedBindMode:V1,Audio:FB,AudioAnalyser:eI,AudioContext:vE,AudioListener:ZL,AudioLoader:qL,AxesHelper:LI,BackSide:Rr,BasicDepthPacking:Vu,BasicShadowMap:r2,BatchedMesh:nB,Bone:Lx,BooleanKeyframeTrack:Nh,Box2:xI,Box3:Vr,Box3Helper:OI,BoxGeometry:Uh,BoxHelper:DI,BufferAttribute:Gn,BufferGeometry:un,BufferGeometryLoader:IB,ByteType:Ex,Cache:vc,Camera:lv,CameraHelper:BI,CanvasTexture:aL,CapsuleGeometry:Fx,CatmullRomCurve3:sB,CineonToneMapping:C2,CircleGeometry:Hx,ClampToEdgeWrapping:cr,Clock:yE,Color:xt,ColorKeyframeTrack:fE,ColorManagement:Pn,CompressedArrayTexture:iL,CompressedCubeTexture:rL,CompressedTexture:zx,CompressedTextureLoader:VL,ConeGeometry:pv,ConstantAlphaFactor:b2,ConstantColorFactor:_2,Controls:PI,CubeCamera:$2,CubeReflectionMapping:Dl,CubeRefractionMapping:Pu,CubeTexture:cv,CubeTextureLoader:RB,CubeUVReflectionMapping:Bp,CubicBezierCurve:nE,CubicBezierCurve3:oB,CubicInterpolant:EB,CullFaceBack:z1,CullFaceFront:i2,CullFaceFrontBack:vU,CullFaceNone:n2,Curve:Xo,CurvePath:cB,CustomBlending:a2,CustomToneMapping:R2,CylinderGeometry:dv,Cylindrical:_I,Data3DTexture:Ox,DataArrayTexture:ov,DataTexture:zo,DataTextureLoader:hE,DataUtils:oh,DecrementStencilOp:CU,DecrementWrapStencilOp:wU,DefaultLoadingManager:CB,DepthArrayTexture:sL,DepthFormat:_p,DepthStencilFormat:xh,DepthTexture:hv,DetachedBindMode:D2,DirectionalLight:gE,DirectionalLightHelper:wI,DiscreteInterpolant:MB,DodecahedronGeometry:Gx,DoubleSide:ga,DstAlphaFactor:p2,DstColorFactor:g2,DynamicCopyUsage:XU,DynamicDrawUsage:zU,DynamicReadUsage:GU,EdgesGeometry:rB,EllipseCurve:Vx,EqualCompare:H2,EqualDepth:__,EqualStencilFunc:UU,EquirectangularReflectionMapping:gp,EquirectangularRefractionMapping:Gg,Euler:Ts,EventDispatcher:Cs,ExtrudeGeometry:kx,FileLoader:ta,Float16BufferAttribute:IN,Float32BufferAttribute:Lt,FloatType:Li,Fog:Nx,FogExp2:Ux,FramebufferTexture:nL,FrontSide:Ho,Frustum:Dp,FrustumArray:Ix,GLBufferAttribute:yI,GLSL1:jU,GLSL3:Y1,GreaterCompare:G2,GreaterDepth:b_,GreaterEqualCompare:k2,GreaterEqualDepth:x_,GreaterEqualStencilFunc:PU,GreaterStencilFunc:LU,GridHelper:CI,Group:gc,HalfFloatType:wr,HemisphereLight:BB,HemisphereLightHelper:TI,IcosahedronGeometry:mv,ImageBitmapLoader:PB,ImageLoader:Jg,ImageUtils:q2,IncrementStencilOp:TU,IncrementWrapStencilOp:RU,InstancedBufferAttribute:Sh,InstancedBufferGeometry:LB,InstancedInterleavedBuffer:vI,InstancedMesh:$A,Int16BufferAttribute:NN,Int32BufferAttribute:LN,Int8BufferAttribute:DN,IntType:rv,InterleavedBuffer:uv,InterleavedBufferAttribute:Fu,Interpolant:Op,InterpolateDiscrete:xp,InterpolateLinear:bp,InterpolateSmooth:o_,InterpolationSamplingMode:KU,InterpolationSamplingType:qU,InvertStencilOp:BU,KeepStencilOp:eh,KeyframeTrack:no,LOD:tB,LatheGeometry:Xx,Layers:Ap,LessCompare:F2,LessDepth:y_,LessEqualCompare:YA,LessEqualDepth:yh,LessEqualStencilFunc:NU,LessStencilFunc:OU,Light:Yu,LightProbe:NB,Line:Ac,Line3:bI,LineBasicMaterial:_a,LineCurve:iE,LineCurve3:lB,LineDashedMaterial:bB,LineLoop:QA,LineSegments:ko,LinearFilter:Fn,LinearInterpolant:uE,LinearMipMapLinearFilter:k1,LinearMipMapNearestFilter:xU,LinearMipmapLinearFilter:$s,LinearMipmapNearestFilter:fp,LinearSRGBColorSpace:Ms,LinearToneMapping:M2,LinearTransfer:kg,Loader:na,LoaderUtils:Nu,LoadingManager:$x,LoopOnce:O2,LoopPingPong:N2,LoopRepeat:U2,MOUSE:$f,Material:fr,MaterialLoader:Qx,MathUtils:Y2,Matrix2:SE,Matrix3:yn,Matrix4:qt,MaxEquation:c2,Mesh:Ei,MeshBasicMaterial:ss,MeshDepthMaterial:Zx,MeshDistanceMaterial:lE,MeshLambertMaterial:_B,MeshMatcapMaterial:xB,MeshNormalMaterial:oE,MeshPhongMaterial:vB,MeshPhysicalMaterial:to,MeshStandardMaterial:yv,MeshToonMaterial:yB,MinEquation:l2,MirroredRepeatWrapping:vp,MixOperation:A2,MultiplyBlending:G1,MultiplyOperation:iv,NearestFilter:tr,NearestMipMapLinearFilter:_U,NearestMipMapNearestFilter:yU,NearestMipmapLinearFilter:rh,NearestMipmapNearestFilter:Ax,NeutralToneMapping:B2,NeverCompare:z2,NeverDepth:g_,NeverStencilFunc:DU,NoBlending:ea,NoColorSpace:Lo,NoToneMapping:Po,NormalAnimationBlendMode:Bx,NormalBlending:hh,NotEqualCompare:V2,NotEqualDepth:S_,NotEqualStencilFunc:IU,NumberKeyframeTrack:Eh,Object3D:Hn,ObjectLoader:jL,ObjectSpaceNormalMap:P2,OctahedronGeometry:gv,OneFactor:f2,OneMinusConstantAlphaFactor:S2,OneMinusConstantColorFactor:x2,OneMinusDstAlphaFactor:m2,OneMinusDstColorFactor:v2,OneMinusSrcAlphaFactor:m_,OneMinusSrcColorFactor:d2,OrthographicCamera:Bl,PCFShadowMap:Sx,PCFSoftShadowMap:Mg,PMREMGenerator:Q1,Path:Q_,PerspectiveCamera:qi,Plane:hc,PlaneGeometry:Tc,PlaneHelper:UI,PointLight:mE,PointLightHelper:EI,Points:eE,PointsMaterial:Px,PolarGridHelper:RI,PolyhedronGeometry:Xu,PositionalAudio:QL,PropertyBinding:Yn,PropertyMixer:HB,QuadraticBezierCurve:rE,QuadraticBezierCurve3:aE,Quaternion:Gr,QuaternionKeyframeTrack:Mh,QuaternionLinearInterpolant:TB,RED_GREEN_RGTC2_Format:W_,RED_RGTC1_Format:VA,REVISION:Dh,RGBADepthPacking:I2,RGBAFormat:ur,RGBAIntegerFormat:wx,RGBA_ASTC_10x10_Format:G_,RGBA_ASTC_10x5_Format:z_,RGBA_ASTC_10x6_Format:F_,RGBA_ASTC_10x8_Format:H_,RGBA_ASTC_12x10_Format:V_,RGBA_ASTC_12x12_Format:k_,RGBA_ASTC_4x4_Format:B_,RGBA_ASTC_5x4_Format:D_,RGBA_ASTC_5x5_Format:O_,RGBA_ASTC_6x5_Format:U_,RGBA_ASTC_6x6_Format:N_,RGBA_ASTC_8x5_Format:L_,RGBA_ASTC_8x6_Format:I_,RGBA_ASTC_8x8_Format:P_,RGBA_BPTC_Format:Bg,RGBA_ETC2_EAC_Format:w_,RGBA_PVRTC_2BPPV1_Format:T_,RGBA_PVRTC_4BPPV1_Format:M_,RGBA_S3TC_DXT1_Format:Cg,RGBA_S3TC_DXT3_Format:Rg,RGBA_S3TC_DXT5_Format:wg,RGBDepthPacking:SU,RGBFormat:HA,RGBIntegerFormat:bU,RGB_BPTC_SIGNED_Format:X_,RGB_BPTC_UNSIGNED_Format:Y_,RGB_ETC1_Format:C_,RGB_ETC2_Format:R_,RGB_PVRTC_2BPPV1_Format:E_,RGB_PVRTC_4BPPV1_Format:A_,RGB_S3TC_DXT1_Format:Tg,RGDepthPacking:AU,RGFormat:GA,RGIntegerFormat:Rx,RawShaderMaterial:gB,Ray:Oh,Raycaster:bE,RectAreaLight:OB,RedFormat:av,RedIntegerFormat:sv,ReinhardToneMapping:T2,RenderTarget:Dx,RenderTarget3D:dI,RenderTargetArray:pI,RepeatWrapping:zu,ReplaceStencilOp:MU,ReverseSubtractEquation:o2,RingGeometry:Yx,SIGNED_RED_GREEN_RGTC2_Format:q_,SIGNED_RED_RGTC1_Format:j_,SRGBColorSpace:Wn,SRGBTransfer:ui,Scene:bh,ShaderChunk:En,ShaderLib:No,ShaderMaterial:Pi,ShadowMaterial:mB,Shape:ph,ShapeGeometry:jx,ShapePath:II,ShapeUtils:Io,ShortType:Mx,Skeleton:fv,SkeletonHelper:AI,SkinnedMesh:ZA,Source:Ou,Sphere:kr,SphereGeometry:vv,Spherical:Z1,SphericalHarmonics3:UB,SplineCurve:sE,SpotLight:pE,SpotLightHelper:SI,Sprite:eB,SpriteMaterial:JA,SrcAlphaFactor:p_,SrcAlphaSaturateFactor:y2,SrcColorFactor:h2,StaticCopyUsage:kU,StaticDrawUsage:Xg,StaticReadUsage:HU,StereoCamera:KL,StreamCopyUsage:YU,StreamDrawUsage:FU,StreamReadUsage:VU,StringKeyframeTrack:Lh,SubtractEquation:s2,SubtractiveBlending:H1,TOUCH:Qf,TangentSpaceNormalMap:ku,TetrahedronGeometry:Wx,Texture:ei,TextureLoader:wB,TextureUtils:VI,TimestampQuery:WU,TorusGeometry:qx,TorusKnotGeometry:Kx,Triangle:as,TriangleFanDrawMode:K_,TriangleStripDrawMode:XA,TrianglesDrawMode:L2,TubeGeometry:Jx,UVMapping:Iu,Uint16BufferAttribute:WA,Uint32BufferAttribute:qA,Uint8BufferAttribute:ON,Uint8ClampedBufferAttribute:UN,Uniform:jn,UniformsGroup:gI,UniformsLib:Tt,UniformsUtils:Z2,UnsignedByteType:nr,UnsignedInt248Type:_h,UnsignedInt5999Type:zA,UnsignedIntType:Go,UnsignedShort4444Type:Tx,UnsignedShort5551Type:Cx,UnsignedShortType:yp,VSMShadowMap:Uo,Vector2:Ve,Vector3:$,Vector4:zn,VectorKeyframeTrack:Th,VideoFrameTexture:tL,VideoTexture:iB,WebGL3DRenderTarget:xN,WebGLArrayRenderTarget:_N,WebGLCoordinateSystem:Qs,WebGLCubeRenderTarget:KA,WebGLRenderTarget:Ii,WebGLRenderer:EE,WebGLUtils:qB,WebGPUCoordinateSystem:Yg,WebXRController:c_,WireframeGeometry:pB,WrapAroundEnding:Vg,ZeroCurvatureEnding:ah,ZeroFactor:u2,ZeroSlopeEnding:sh,ZeroStencilOp:EU,createCanvasElement:W2},Symbol.toStringTag,{value:"Module"}));var GS={exports:{}},cc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function EH(){return UC||(UC=1,cc.ConcurrentRoot=1,cc.ContinuousEventPriority=8,cc.DefaultEventPriority=32,cc.DiscreteEventPriority=2,cc.IdleEventPriority=268435456,cc.LegacyRoot=0,cc.NoEventPriority=0),cc}var NC;function MH(){return NC||(NC=1,GS.exports=EH()),GS.exports}var f_=MH(),VS={exports:{}},kS={},XS={exports:{}},YS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function TH(){if(LC)return YS;LC=1;var n=wp();function e(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,o=n.useDebugValue;function c(v,y){var x=y(),b=i({inst:{value:x,getSnapshot:y}}),T=b[0].inst,M=b[1];return a(function(){T.value=x,T.getSnapshot=y,f(T)&&M({inst:T})},[v,x,y]),r(function(){return f(T)&&M({inst:T}),v(function(){f(T)&&M({inst:T})})},[v]),o(x),x}function f(v){var y=v.getSnapshot;v=v.value;try{var x=y();return!t(v,x)}catch{return!0}}function p(v,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return YS.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,YS}var IC;function CH(){return IC||(IC=1,XS.exports=TH()),XS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function RH(){if(PC)return kS;PC=1;var n=wp(),e=CH();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,o=n.useEffect,c=n.useMemo,f=n.useDebugValue;return kS.useSyncExternalStoreWithSelector=function(p,m,v,y,x){var b=a(null);if(b.current===null){var T={hasValue:!1,value:null};b.current=T}else T=b.current;b=c(function(){function A(N){if(!w){if(w=!0,B=N,N=y(N),x!==void 0&&T.hasValue){var H=T.value;if(x(H,N))return D=H}return D=N}if(H=D,i(B,N))return H;var P=y(N);return x!==void 0&&x(H,P)?(B=N,H):(B=N,D=P)}var w=!1,B,D,I=v===void 0?null:v;return[function(){return A(m())},I===null?void 0:function(){return A(I())}]},[m,v,y,x]);var M=r(p,b[0],b[1]);return o(function(){T.hasValue=!0,T.value=M},[M]),f(M),M},kS}var zC;function wH(){return zC||(zC=1,VS.exports=RH()),VS.exports}var BH=wH();const DH=Bh(BH),FC=n=>{let e;const t=new Set,i=(p,m)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const y=e;e=m??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,y))}},r=()=>e,c={setState:i,getState:r,getInitialState:()=>f,subscribe:p=>(t.add(p),()=>t.delete(p))},f=e=n(i,r,c);return c},OH=n=>n?FC(n):FC,{useSyncExternalStoreWithSelector:UH}=DH,NH=n=>n;function LH(n,e=NH,t){const i=UH(n.subscribe,n.getState,n.getInitialState,e,t);return fe.useDebugValue(i),i}const HC=(n,e)=>{const t=OH(n),i=(r,a=e)=>LH(t,r,a);return Object.assign(i,t),i},KB=(n,e)=>n?HC(n,e):HC;var jS={exports:{}},WS={exports:{}},qS={exports:{}},KS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function IH(){return GC||(GC=1,function(n){function e(X,te){var ne=X.length;X.push(te);e:for(;0<ne;){var be=ne-1>>>1,W=X[be];if(0<r(W,te))X[be]=te,X[ne]=W,ne=be;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var te=X[0],ne=X.pop();if(ne!==te){X[0]=ne;e:for(var be=0,W=X.length,se=W>>>1;be<se;){var Ae=2*(be+1)-1,De=X[Ae],ge=Ae+1,He=X[ge];if(0>r(De,ne))ge<W&&0>r(He,De)?(X[be]=He,X[ge]=ne,be=ge):(X[be]=De,X[Ae]=ne,be=Ae);else if(ge<W&&0>r(He,ne))X[be]=He,X[ge]=ne,be=ge;else break e}}return te}function r(X,te){var ne=X.sortIndex-te.sortIndex;return ne!==0?ne:X.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var f=[],p=[],m=1,v=null,y=3,x=!1,b=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(X){for(var te=t(p);te!==null;){if(te.callback===null)i(p);else if(te.startTime<=X)i(p),te.sortIndex=te.expirationTime,e(f,te);else break;te=t(p)}}function D(X){if(T=!1,B(X),!b)if(t(f)!==null)b=!0,ae();else{var te=t(p);te!==null&&he(D,te.startTime-X)}}var I=!1,N=-1,H=5,P=-1;function L(){return!(n.unstable_now()-P<H)}function U(){if(I){var X=n.unstable_now();P=X;var te=!0;try{e:{b=!1,T&&(T=!1,A(N),N=-1),x=!0;var ne=y;try{t:{for(B(X),v=t(f);v!==null&&!(v.expirationTime>X&&L());){var be=v.callback;if(typeof be=="function"){v.callback=null,y=v.priorityLevel;var W=be(v.expirationTime<=X);if(X=n.unstable_now(),typeof W=="function"){v.callback=W,B(X),te=!0;break t}v===t(f)&&i(f),B(X)}else i(f);v=t(f)}if(v!==null)te=!0;else{var se=t(p);se!==null&&he(D,se.startTime-X),te=!1}}break e}finally{v=null,y=ne,x=!1}te=void 0}}finally{te?Y():I=!1}}}var Y;if(typeof w=="function")Y=function(){w(U)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Q=ie.port2;ie.port1.onmessage=U,Y=function(){Q.postMessage(null)}}else Y=function(){M(U,0)};function ae(){I||(I=!0,Y())}function he(X,te){N=M(function(){X(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){b||x||(b=!0,ae())},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(X){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var ne=y;y=te;try{return X()}finally{y=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,te){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ne=y;y=X;try{return te()}finally{y=ne}},n.unstable_scheduleCallback=function(X,te,ne){var be=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?be+ne:be):ne=be,X){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ne+W,X={id:m++,callback:te,priorityLevel:X,startTime:ne,expirationTime:W,sortIndex:-1},ne>be?(X.sortIndex=ne,e(p,X),t(f)===null&&X===t(p)&&(T?(A(N),N=-1):T=!0,he(D,ne-be))):(X.sortIndex=W,e(f,X),b||x||(b=!0,ae())),X},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(X){var te=y;return function(){var ne=y;y=te;try{return X.apply(this,arguments)}finally{y=ne}}}}(KS)),KS}var VC;function JB(){return VC||(VC=1,qS.exports=IH()),qS.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function PH(){return kC||(kC=1,function(n){n.exports=function(e){function t(u,h,_,E){return new mm(u,h,_,E)}function i(){}function r(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return u===null||typeof u!="object"?null:(u=vo&&u[vo]||u["@@iterator"],typeof u=="function"?u:null)}function o(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===_m?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case ol:return"Fragment";case ja:return"Portal";case sd:return"Profiler";case xf:return"StrictMode";case od:return"Suspense";case qc:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case hs:return(u.displayName||"Context")+".Provider";case vm:return(u._context.displayName||"Context")+".Consumer";case Sf:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case ld:return h=u.displayName||null,h!==null?h:o(u.type)||"Memo";case Wa:h=u._payload,u=u._init;try{return o(u(h))}catch{}}return null}function c(u){if(Us===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);Us=h&&h[1]||"",yo=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+u+yo}function f(u,h){if(!u||zl)return"";zl=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(h){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(cn){var Ct=cn}Reflect.construct(u,[],Mt)}else{try{Mt.call()}catch(cn){Ct=cn}u.call(Mt.prototype)}}else{try{throw Error()}catch(cn){Ct=cn}(Mt=u())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(cn){if(cn&&Ct&&typeof cn.stack=="string")return[cn.stack,Ct.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=E.DetermineComponentFrameRoot(),q=O[0],ue=O[1];if(q&&ue){var Ee=q.split(`
`),qe=ue.split(`
`);for(R=E=0;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;for(;R<qe.length&&!qe[R].includes("DetermineComponentFrameRoot");)R++;if(E===Ee.length||R===qe.length)for(E=Ee.length-1,R=qe.length-1;1<=E&&0<=R&&Ee[E]!==qe[R];)R--;for(;1<=E&&0<=R;E--,R--)if(Ee[E]!==qe[R]){if(E!==1||R!==1)do if(E--,R--,0>R||Ee[E]!==qe[R]){var ht=`
`+Ee[E].replace(" at new "," at ");return u.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",u.displayName)),ht}while(1<=E&&0<=R);break}}}finally{zl=!1,Error.prepareStackTrace=_}return(_=u?u.displayName||u.name:"")?c(_):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=f(u.type,!1),u;case 11:return u=f(u.type.render,!1),u;case 1:return u=f(u.type,!0),u;default:return""}}function m(u){try{var h="";do h+=p(u),u=u.return;while(u);return h}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function v(u){var h=u,_=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(_=h.return),u=h.return;while(u)}return h.tag===3?_:null}function y(u){if(v(u)!==u)throw Error(r(188))}function x(u){var h=u.alternate;if(!h){if(h=v(u),h===null)throw Error(r(188));return h!==u?null:u}for(var _=u,E=h;;){var R=_.return;if(R===null)break;var O=R.alternate;if(O===null){if(E=R.return,E!==null){_=E;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===_)return y(R),u;if(O===E)return y(R),h;O=O.sibling}throw Error(r(188))}if(_.return!==E.return)_=R,E=O;else{for(var q=!1,ue=R.child;ue;){if(ue===_){q=!0,_=R,E=O;break}if(ue===E){q=!0,E=R,_=O;break}ue=ue.sibling}if(!q){for(ue=O.child;ue;){if(ue===_){q=!0,_=O,E=R;break}if(ue===E){q=!0,E=O,_=R;break}ue=ue.sibling}if(!q)throw Error(r(189))}}if(_.alternate!==E)throw Error(r(190))}if(_.tag!==3)throw Error(r(188));return _.stateNode.current===_?u:h}function b(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=b(u),h!==null)return h;u=u.sibling}return null}function T(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(h=T(u),h!==null))return h;u=u.sibling}return null}function M(u){return{current:u}}function A(u){0>So||(u.current=ki[So],ki[So]=null,So--)}function w(u,h){So++,ki[So]=u.current,u.current=h}function B(u){return u>>>=0,u===0?32:31-(N0(u)/L0|0)|0}function D(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function I(u,h){var _=u.pendingLanes;if(_===0)return 0;var E=0,R=u.suspendedLanes,O=u.pingedLanes,q=u.warmLanes;u=u.finishedLanes!==0;var ue=_&134217727;return ue!==0?(_=ue&~R,_!==0?E=D(_):(O&=ue,O!==0?E=D(O):u||(q=ue&~q,q!==0&&(E=D(q))))):(ue=_&~R,ue!==0?E=D(ue):O!==0?E=D(O):u||(q=_&~q,q!==0&&(E=D(q)))),E===0?0:h!==0&&h!==E&&(h&R)===0&&(R=E&-E,q=h&-h,R>=q||R===32&&(q&4194176)!==0)?h:E}function N(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function H(u,h){switch(u){case 1:case 2:case 4:case 8:return h+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var u=Ls;return Ls<<=1,(Ls&4194176)===0&&(Ls=128),u}function L(){var u=Gl;return Gl<<=1,(Gl&62914560)===0&&(Gl=4194304),u}function U(u){for(var h=[],_=0;31>_;_++)h.push(u);return h}function Y(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ie(u,h,_,E,R,O){var q=u.pendingLanes;u.pendingLanes=_,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=_,u.entangledLanes&=_,u.errorRecoveryDisabledLanes&=_,u.shellSuspendCounter=0;var ue=u.entanglements,Ee=u.expirationTimes,qe=u.hiddenUpdates;for(_=q&~_;0<_;){var ht=31-Jr(_),Mt=1<<ht;ue[ht]=0,Ee[ht]=-1;var Ct=qe[ht];if(Ct!==null)for(qe[ht]=null,ht=0;ht<Ct.length;ht++){var cn=Ct[ht];cn!==null&&(cn.lane&=-536870913)}_&=~Mt}E!==0&&Q(u,E,0),O!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=O&~(q&~h))}function Q(u,h,_){u.pendingLanes|=h,u.suspendedLanes&=~h;var E=31-Jr(h);u.entangledLanes|=h,u.entanglements[E]=u.entanglements[E]|1073741824|_&4194218}function ae(u,h){var _=u.entangledLanes|=h;for(u=u.entanglements;_;){var E=31-Jr(_),R=1<<E;R&h|u[E]&h&&(u[E]|=h),_&=~R}}function he(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function X(u){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(Xi,u,void 0,(u.current.flags&128)===128)}catch{}}function te(u){if(typeof z0=="function"&&mr(u),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(Xi,u)}catch{}}function ne(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}function be(u,h){if(typeof u=="object"&&u!==null){var _=zm.get(u);return _!==void 0?_:(h={value:u,source:h,stack:m(h)},zm.set(u,h),h)}return{value:u,source:h,stack:m(h)}}function W(u,h){Vl[kl++]=iu,Vl[kl++]=Xl,Xl=u,iu=h}function se(u,h,_){Ma[Ta++]=ms,Ma[Ta++]=gs,Ma[Ta++]=pl,pl=u;var E=ms;u=gs;var R=32-Jr(E)-1;E&=~(1<<R),_+=1;var O=32-Jr(h)+R;if(30<O){var q=R-R%5;O=(E&(1<<q)-1).toString(32),E>>=q,R-=q,ms=1<<32-Jr(h)+R|_<<R|E,gs=O+u}else ms=1<<O|_<<R|E,gs=u}function Ae(u){u.return!==null&&(W(u,1),se(u,1,0))}function De(u){for(;u===Xl;)Xl=Vl[--kl],Vl[kl]=null,iu=Vl[--kl],Vl[kl]=null;for(;u===pl;)pl=Ma[--Ta],Ma[Ta]=null,gs=Ma[--Ta],Ma[Ta]=null,ms=Ma[--Ta],Ma[Ta]=null}function ge(u,h){w(Is,h),w(ru,u),w(ar,null),u=Qv(h),A(ar),w(ar,u)}function He(){A(ar),A(ru),A(Is)}function Le(u){u.memoizedState!==null&&w(Yl,u);var h=ar.current,_=$c(h,u.type);h!==_&&(w(ru,u),w(ar,_))}function Qe(u){ru.current===u&&(A(ar),A(ru)),Yl.current===u&&(A(Yl),qr?ds._currentValue=cl:ds._currentValue2=cl)}function rt(u){var h=Error(r(418,""));throw Rt(be(h,u)),Df}function Bt(u,h){if(!Mr)throw Error(r(175));E0(u.stateNode,u.type,u.memoizedProps,h,u)||rt(u)}function wt(u){for(Tr=u.return;Tr;)switch(Tr.tag){case 3:case 27:gr=!0;return;case 5:case 13:gr=!1;return;default:Tr=Tr.return}}function fn(u){if(!Mr||u!==Tr)return!1;if(!Un)return wt(u),Un=!0,!1;var h=!1;if(si?u.tag!==3&&u.tag!==27&&(u.tag!==5||vd(u.type)&&!dn(u.type,u.memoizedProps))&&(h=!0):u.tag!==3&&(u.tag!==5||vd(u.type)&&!dn(u.type,u.memoizedProps))&&(h=!0),h&&Cr&&rt(u),wt(u),u.tag===13){if(!Mr)throw Error(r(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));Cr=T0(u)}else Cr=Tr?Nm(u.stateNode):null;return!0}function Vt(){Mr&&(Cr=Tr=null,Un=!1)}function Rt(u){Ja===null?Ja=[u]:Ja.push(u)}function Z(){for(var u=jl,h=vs=jl=0;h<u;){var _=Za[h];Za[h++]=null;var E=Za[h];Za[h++]=null;var R=Za[h];Za[h++]=null;var O=Za[h];if(Za[h++]=null,E!==null&&R!==null){var q=E.pending;q===null?R.next=R:(R.next=q.next,q.next=R),E.pending=R}O!==0&&je(_,R,O)}}function lt(u,h,_,E){Za[jl++]=u,Za[jl++]=h,Za[jl++]=_,Za[jl++]=E,vs|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function et(u,h,_,E){return lt(u,h,_,E),yt(u)}function Ze(u,h){return lt(u,null,null,h),yt(u)}function je(u,h,_){u.lanes|=_;var E=u.alternate;E!==null&&(E.lanes|=_);for(var R=!1,O=u.return;O!==null;)O.childLanes|=_,E=O.alternate,E!==null&&(E.childLanes|=_),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(R=!0)),u=O,O=O.return;R&&h!==null&&u.tag===3&&(O=u.stateNode,R=31-Jr(_),O=O.hiddenUpdates,u=O[R],u===null?O[R]=[h]:u.push(h),h.lane=_|536870912)}function yt(u){if(50<du)throw du=0,Od=null,Error(r(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}function Je(u){u!==Ao&&u.next===null&&(Ao===null?Of=Ao=u:Ao=Ao.next=u),hi=!0,Wl||(Wl=!0,Be(k))}function J(u,h){if(!Fm&&hi){Fm=!0;do for(var _=!1,E=Of;E!==null;){if(u!==0){var R=E.pendingLanes;if(R===0)var O=0;else{var q=E.suspendedLanes,ue=E.pingedLanes;O=(1<<31-Jr(42|u)+1)-1,O&=R&~(q&~ue),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(_=!0,Xe(E,O))}else O=Cn,O=I(E,E===Zn?O:0),(O&3)===0||N(E,O)||(_=!0,Xe(E,O));E=E.next}while(_);Fm=!1}}function k(){hi=Wl=!1;var u=0;au!==0&&(i0()&&(u=au),au=0);for(var h=Ka(),_=null,E=Of;E!==null;){var R=E.next,O=re(E,h);O===0?(E.next=null,_===null?Of=R:_.next=R,R===null&&(Ao=_)):(_=E,(u!==0||(O&3)!==0)&&(hi=!0)),E=R}J(u)}function re(u,h){for(var _=u.suspendedLanes,E=u.pingedLanes,R=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var q=31-Jr(O),ue=1<<q,Ee=R[q];Ee===-1?((ue&_)===0||(ue&E)!==0)&&(R[q]=H(ue,h)):Ee<=h&&(u.expiredLanes|=ue),O&=~ue}if(h=Zn,_=Cn,_=I(u,u===h?_:0),E=u.callbackNode,_===0||u===h&&ii===2||u.cancelPendingCommit!==null)return E!==null&&E!==null&&bd(E),u.callbackNode=null,u.callbackPriority=0;if((_&3)===0||N(u,_)){if(h=_&-_,h===u.callbackPriority)return h;switch(E!==null&&bd(E),he(_)){case 2:case 8:_=P0;break;case 32:_=Ed;break;case 268435456:_=Eb;break;default:_=Ed}return E=xe.bind(null,u),_=Bf(_,E),u.callbackPriority=h,u.callbackNode=_,h}return E!==null&&E!==null&&bd(E),u.callbackPriority=2,u.callbackNode=null,2}function xe(u,h){var _=u.callbackNode;if(fs()&&u.callbackNode!==_)return null;var E=Cn;return E=I(u,u===Zn?E:0),E===0?null:(nl(u,E,h),re(u,Ka()),u.callbackNode!=null&&u.callbackNode===_?xe.bind(null,u):null)}function Xe(u,h){if(fs())return null;nl(u,h,!0)}function Be(u){Em?bo(function(){(In&6)!==0?Bf(Ad,u):u()}):Bf(Ad,u)}function ut(){return au===0&&(au=P()),au}function ot(u,h){if(su===null){var _=su=[];ql=0,Ca=ut(),Kl={status:"pending",value:void 0,then:function(E){_.push(E)}}}return ql++,h.then(pt,pt),h}function pt(){if(--ql===0&&su!==null){Kl!==null&&(Kl.status="fulfilled");var u=su;su=null,Ca=0,Kl=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function Pt(u,h){var _=[],E={status:"pending",value:null,reason:null,then:function(R){_.push(R)}};return u.then(function(){E.status="fulfilled",E.value=h;for(var R=0;R<_.length;R++)(0,_[R])(h)},function(R){for(E.status="rejected",E.reason=R,R=0;R<_.length;R++)(0,_[R])(void 0)}),E}function at(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _t(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Et(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function vt(u,h,_){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(In&2)!==0){var R=E.pending;return R===null?h.next=h:(h.next=R.next,R.next=h),E.pending=h,h=yt(u),je(u,null,_),h}return lt(u,E,h,_),yt(u)}function dt(u,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194176)!==0)){var E=h.lanes;E&=u.pendingLanes,_|=E,h.lanes=_,ae(u,_)}}function de(u,h){var _=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,_===E)){var R=null,O=null;if(_=_.firstBaseUpdate,_!==null){do{var q={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};O===null?R=O=q:O=O.next=q,_=_.next}while(_!==null);O===null?R=O=h:O=O.next=h}else R=O=h;_={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:E.shared,callbacks:E.callbacks},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=h:u.next=h,_.lastBaseUpdate=h}function Pe(){if(Jl){var u=Kl;if(u!==null)throw u}}function st(u,h,_,E){Jl=!1;var R=u.updateQueue;Eo=!1;var O=R.firstBaseUpdate,q=R.lastBaseUpdate,ue=R.shared.pending;if(ue!==null){R.shared.pending=null;var Ee=ue,qe=Ee.next;Ee.next=null,q===null?O=qe:q.next=qe,q=Ee;var ht=u.alternate;ht!==null&&(ht=ht.updateQueue,ue=ht.lastBaseUpdate,ue!==q&&(ue===null?ht.firstBaseUpdate=qe:ue.next=qe,ht.lastBaseUpdate=Ee))}if(O!==null){var Mt=R.baseState;q=0,ht=qe=Ee=null,ue=O;do{var Ct=ue.lane&-536870913,cn=Ct!==ue.lane;if(cn?(Cn&Ct)===Ct:(E&Ct)===Ct){Ct!==0&&Ct===Ca&&(Jl=!0),ht!==null&&(ht=ht.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var La=u,Al=ue;Ct=h;var El=_;switch(Al.tag){case 1:if(La=Al.payload,typeof La=="function"){Mt=La.call(El,Mt,Ct);break e}Mt=La;break e;case 3:La.flags=La.flags&-65537|128;case 0:if(La=Al.payload,Ct=typeof La=="function"?La.call(El,Mt,Ct):La,Ct==null)break e;Mt=ad({},Mt,Ct);break e;case 2:Eo=!0}}Ct=ue.callback,Ct!==null&&(u.flags|=64,cn&&(u.flags|=8192),cn=R.callbacks,cn===null?R.callbacks=[Ct]:cn.push(Ct))}else cn={lane:Ct,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},ht===null?(qe=ht=cn,Ee=Mt):ht=ht.next=cn,q|=Ct;if(ue=ue.next,ue===null){if(ue=R.shared.pending,ue===null)break;cn=ue,ue=cn.next,cn.next=null,R.lastBaseUpdate=cn,R.shared.pending=null}}while(!0);ht===null&&(Ee=Mt),R.baseState=Ee,R.firstBaseUpdate=qe,R.lastBaseUpdate=ht,O===null&&(R.shared.lanes=0),Ua|=q,u.lanes=q,u.memoizedState=Mt}}function pe(u,h){if(typeof u!="function")throw Error(r(191,u));u.call(h)}function Te(u,h){var _=u.callbacks;if(_!==null)for(u.callbacks=null,u=0;u<_.length;u++)pe(_[u],h)}function Ie(u,h){if(fa(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var _=Object.keys(u),E=Object.keys(h);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++){var R=_[E];if(!Ps.call(h,R)||!fa(u[R],h[R]))return!1}return!0}function Ye(u){return u=u.status,u==="fulfilled"||u==="rejected"}function bt(){}function gt(u,h,_){switch(_=u[_],_===void 0?u.push(h):_!==h&&(h.then(bt,bt),h=_),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===ou?Error(r(483)):u;default:if(typeof h.status=="string")h.then(bt,bt);else{if(u=Zn,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=h,u.status="pending",u.then(function(E){if(h.status==="pending"){var R=h;R.status="fulfilled",R.value=E}},function(E){if(h.status==="pending"){var R=h;R.status="rejected",R.reason=E}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,u===ou?Error(r(483)):u}throw ml=h,ou}}function zt(){if(ml===null)throw Error(r(459));var u=ml;return ml=null,u}function mn(u){var h=vl;return vl+=1,gl===null&&(gl=[]),gt(gl,u,h)}function Vn(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function on(u,h){throw h.$$typeof===vb?Error(r(525)):(u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function Ri(u){var h=u._init;return h(u._payload)}function fi(u){function h(Oe,ve){if(u){var Fe=Oe.deletions;Fe===null?(Oe.deletions=[ve],Oe.flags|=16):Fe.push(ve)}}function _(Oe,ve){if(!u)return null;for(;ve!==null;)h(Oe,ve),ve=ve.sibling;return null}function E(Oe){for(var ve=new Map;Oe!==null;)Oe.key!==null?ve.set(Oe.key,Oe):ve.set(Oe.index,Oe),Oe=Oe.sibling;return ve}function R(Oe,ve){return Oe=Ya(Oe,ve),Oe.index=0,Oe.sibling=null,Oe}function O(Oe,ve,Fe){return Oe.index=Fe,u?(Fe=Oe.alternate,Fe!==null?(Fe=Fe.index,Fe<ve?(Oe.flags|=33554434,ve):Fe):(Oe.flags|=33554434,ve)):(Oe.flags|=1048576,ve)}function q(Oe){return u&&Oe.alternate===null&&(Oe.flags|=33554434),Oe}function ue(Oe,ve,Fe,ft){return ve===null||ve.tag!==6?(ve=id(Fe,Oe.mode,ft),ve.return=Oe,ve):(ve=R(ve,Fe),ve.return=Oe,ve)}function Ee(Oe,ve,Fe,ft){var Ft=Fe.type;return Ft===ol?ht(Oe,ve,Fe.props.children,ft,Fe.key):ve!==null&&(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===Wa&&Ri(Ft)===ve.type)?(ve=R(ve,Fe.props),Vn(ve,Fe),ve.return=Oe,ve):(ve=Os(Fe.type,Fe.key,Fe.props,null,Oe.mode,ft),Vn(ve,Fe),ve.return=Oe,ve)}function qe(Oe,ve,Fe,ft){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Fe.containerInfo||ve.stateNode.implementation!==Fe.implementation?(ve=gm(Fe,Oe.mode,ft),ve.return=Oe,ve):(ve=R(ve,Fe.children||[]),ve.return=Oe,ve)}function ht(Oe,ve,Fe,ft,Ft){return ve===null||ve.tag!==7?(ve=Bi(Fe,Oe.mode,ft,Ft),ve.return=Oe,ve):(ve=R(ve,Fe),ve.return=Oe,ve)}function Mt(Oe,ve,Fe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=id(""+ve,Oe.mode,Fe),ve.return=Oe,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _f:return Fe=Os(ve.type,ve.key,ve.props,null,Oe.mode,Fe),Vn(Fe,ve),Fe.return=Oe,Fe;case ja:return ve=gm(ve,Oe.mode,Fe),ve.return=Oe,ve;case Wa:var ft=ve._init;return ve=ft(ve._payload),Mt(Oe,ve,Fe)}if(Kc(ve)||a(ve))return ve=Bi(ve,Oe.mode,Fe,null),ve.return=Oe,ve;if(typeof ve.then=="function")return Mt(Oe,mn(ve),Fe);if(ve.$$typeof===hs)return Mt(Oe,rf(Oe,ve),Fe);on(Oe,ve)}return null}function Ct(Oe,ve,Fe,ft){var Ft=ve!==null?ve.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Ft!==null?null:ue(Oe,ve,""+Fe,ft);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _f:return Fe.key===Ft?Ee(Oe,ve,Fe,ft):null;case ja:return Fe.key===Ft?qe(Oe,ve,Fe,ft):null;case Wa:return Ft=Fe._init,Fe=Ft(Fe._payload),Ct(Oe,ve,Fe,ft)}if(Kc(Fe)||a(Fe))return Ft!==null?null:ht(Oe,ve,Fe,ft,null);if(typeof Fe.then=="function")return Ct(Oe,ve,mn(Fe),ft);if(Fe.$$typeof===hs)return Ct(Oe,ve,rf(Oe,Fe),ft);on(Oe,Fe)}return null}function cn(Oe,ve,Fe,ft,Ft){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Oe=Oe.get(Fe)||null,ue(ve,Oe,""+ft,Ft);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case _f:return Oe=Oe.get(ft.key===null?Fe:ft.key)||null,Ee(ve,Oe,ft,Ft);case ja:return Oe=Oe.get(ft.key===null?Fe:ft.key)||null,qe(ve,Oe,ft,Ft);case Wa:var bi=ft._init;return ft=bi(ft._payload),cn(Oe,ve,Fe,ft,Ft)}if(Kc(ft)||a(ft))return Oe=Oe.get(Fe)||null,ht(ve,Oe,ft,Ft,null);if(typeof ft.then=="function")return cn(Oe,ve,Fe,mn(ft),Ft);if(ft.$$typeof===hs)return cn(Oe,ve,Fe,rf(ve,ft),Ft);on(ve,ft)}return null}function La(Oe,ve,Fe,ft){for(var Ft=null,bi=null,nn=ve,Xn=ve=0,Yi=null;nn!==null&&Xn<Fe.length;Xn++){nn.index>Xn?(Yi=nn,nn=null):Yi=nn.sibling;var Tn=Ct(Oe,nn,Fe[Xn],ft);if(Tn===null){nn===null&&(nn=Yi);break}u&&nn&&Tn.alternate===null&&h(Oe,nn),ve=O(Tn,ve,Xn),bi===null?Ft=Tn:bi.sibling=Tn,bi=Tn,nn=Yi}if(Xn===Fe.length)return _(Oe,nn),Un&&W(Oe,Xn),Ft;if(nn===null){for(;Xn<Fe.length;Xn++)nn=Mt(Oe,Fe[Xn],ft),nn!==null&&(ve=O(nn,ve,Xn),bi===null?Ft=nn:bi.sibling=nn,bi=nn);return Un&&W(Oe,Xn),Ft}for(nn=E(nn);Xn<Fe.length;Xn++)Yi=cn(nn,Oe,Xn,Fe[Xn],ft),Yi!==null&&(u&&Yi.alternate!==null&&nn.delete(Yi.key===null?Xn:Yi.key),ve=O(Yi,ve,Xn),bi===null?Ft=Yi:bi.sibling=Yi,bi=Yi);return u&&nn.forEach(function(Ys){return h(Oe,Ys)}),Un&&W(Oe,Xn),Ft}function Al(Oe,ve,Fe,ft){if(Fe==null)throw Error(r(151));for(var Ft=null,bi=null,nn=ve,Xn=ve=0,Yi=null,Tn=Fe.next();nn!==null&&!Tn.done;Xn++,Tn=Fe.next()){nn.index>Xn?(Yi=nn,nn=null):Yi=nn.sibling;var Ys=Ct(Oe,nn,Tn.value,ft);if(Ys===null){nn===null&&(nn=Yi);break}u&&nn&&Ys.alternate===null&&h(Oe,nn),ve=O(Ys,ve,Xn),bi===null?Ft=Ys:bi.sibling=Ys,bi=Ys,nn=Yi}if(Tn.done)return _(Oe,nn),Un&&W(Oe,Xn),Ft;if(nn===null){for(;!Tn.done;Xn++,Tn=Fe.next())Tn=Mt(Oe,Tn.value,ft),Tn!==null&&(ve=O(Tn,ve,Xn),bi===null?Ft=Tn:bi.sibling=Tn,bi=Tn);return Un&&W(Oe,Xn),Ft}for(nn=E(nn);!Tn.done;Xn++,Tn=Fe.next())Tn=cn(nn,Oe,Xn,Tn.value,ft),Tn!==null&&(u&&Tn.alternate!==null&&nn.delete(Tn.key===null?Xn:Tn.key),ve=O(Tn,ve,Xn),bi===null?Ft=Tn:bi.sibling=Tn,bi=Tn);return u&&nn.forEach(function(Ud){return h(Oe,Ud)}),Un&&W(Oe,Xn),Ft}function El(Oe,ve,Fe,ft){if(typeof Fe=="object"&&Fe!==null&&Fe.type===ol&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case _f:e:{for(var Ft=Fe.key;ve!==null;){if(ve.key===Ft){if(Ft=Fe.type,Ft===ol){if(ve.tag===7){_(Oe,ve.sibling),ft=R(ve,Fe.props.children),ft.return=Oe,Oe=ft;break e}}else if(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===Wa&&Ri(Ft)===ve.type){_(Oe,ve.sibling),ft=R(ve,Fe.props),Vn(ft,Fe),ft.return=Oe,Oe=ft;break e}_(Oe,ve);break}else h(Oe,ve);ve=ve.sibling}Fe.type===ol?(ft=Bi(Fe.props.children,Oe.mode,ft,Fe.key),ft.return=Oe,Oe=ft):(ft=Os(Fe.type,Fe.key,Fe.props,null,Oe.mode,ft),Vn(ft,Fe),ft.return=Oe,Oe=ft)}return q(Oe);case ja:e:{for(Ft=Fe.key;ve!==null;){if(ve.key===Ft)if(ve.tag===4&&ve.stateNode.containerInfo===Fe.containerInfo&&ve.stateNode.implementation===Fe.implementation){_(Oe,ve.sibling),ft=R(ve,Fe.children||[]),ft.return=Oe,Oe=ft;break e}else{_(Oe,ve);break}else h(Oe,ve);ve=ve.sibling}ft=gm(Fe,Oe.mode,ft),ft.return=Oe,Oe=ft}return q(Oe);case Wa:return Ft=Fe._init,Fe=Ft(Fe._payload),El(Oe,ve,Fe,ft)}if(Kc(Fe))return La(Oe,ve,Fe,ft);if(a(Fe)){if(Ft=a(Fe),typeof Ft!="function")throw Error(r(150));return Fe=Ft.call(Fe),Al(Oe,ve,Fe,ft)}if(typeof Fe.then=="function")return El(Oe,ve,mn(Fe),ft);if(Fe.$$typeof===hs)return El(Oe,ve,rf(Oe,Fe),ft);on(Oe,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint"?(Fe=""+Fe,ve!==null&&ve.tag===6?(_(Oe,ve.sibling),ft=R(ve,Fe),ft.return=Oe,Oe=ft):(_(Oe,ve),ft=id(Fe,Oe.mode,ft),ft.return=Oe,Oe=ft),q(Oe)):_(Oe,ve)}return function(Oe,ve,Fe,ft){try{vl=0;var Ft=El(Oe,ve,Fe,ft);return gl=null,Ft}catch(nn){if(nn===ou)throw nn;var bi=t(29,nn,null,Oe.mode);return bi.lanes=ft,bi.return=Oe,bi}finally{}}}function wi(u,h){u=Ir,w(lu,u),w(di,h),Ir=u|h.baseLanes}function Fi(){w(lu,Ir),w(di,di.current)}function Hi(){Ir=lu.current,A(di),A(lu)}function Or(u){var h=u.alternate;w(sr,sr.current&1),w(Ra,u),oi===null&&(h===null||di.current!==null||h.memoizedState!==null)&&(oi=u)}function cs(u){if(u.tag===22){if(w(sr,sr.current),w(Ra,u),oi===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(oi=u)}}else _r()}function _r(){w(sr,sr.current),w(Ra,Ra.current)}function jt(u){A(Ra),oi===u&&(oi=null),A(sr)}function ia(u){for(var h=u;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||pd(_)||md(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function qn(){throw Error(r(321))}function G(u,h){if(h===null)return!1;for(var _=0;_<h.length&&_<u.length;_++)if(!fa(u[_],h[_]))return!1;return!0}function K(u,h,_,E,R,O){return Mo=O,bn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,tn.H=u===null||u.memoizedState===null?xl:Zr,_l=!1,O=_(E,R),_l=!1,Zl&&(O=we(h,_,E,R)),me(u),O}function me(u){tn.H=Di;var h=Wt!==null&&Wt.next!==null;if(Mo=0,Ln=Wt=bn=null,$a=!1,$l=0,vr=null,h)throw Error(r(300));u===null||li||(u=u.dependencies,u!==null&&nf(u)&&(li=!0))}function we(u,h,_,E){bn=u;var R=0;do{if(Zl&&(vr=null),$l=0,Zl=!1,25<=R)throw Error(r(301));if(R+=1,Ln=Wt=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}tn.H=wa,O=h(_,E)}while(Zl);return O}function Ue(){var u=tn.H,h=u.useState()[0];return h=typeof h.then=="function"?le(h):h,u=u.useState()[0],(Wt!==null?Wt.memoizedState:null)!==u&&(bn.flags|=1024),h}function Ge(){var u=Md!==0;return Md=0,u}function ct(u,h,_){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~_}function it(u){if($a){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}$a=!1}Mo=0,Ln=Wt=bn=null,Zl=!1,$l=Md=0,vr=null}function V(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?bn.memoizedState=Ln=u:Ln=Ln.next=u,Ln}function ee(){if(Wt===null){var u=bn.alternate;u=u!==null?u.memoizedState:null}else u=Wt.next;var h=Ln===null?bn.memoizedState:Ln.next;if(h!==null)Ln=h,Wt=u;else{if(u===null)throw bn.alternate===null?Error(r(467)):Error(r(310));Wt=u,u={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Ln===null?bn.memoizedState=Ln=u:Ln=Ln.next=u}return Ln}function le(u){var h=$l;return $l+=1,vr===null&&(vr=[]),u=gt(vr,u,h),h=bn,(Ln===null?h.memoizedState:Ln.next)===null&&(h=h.alternate,tn.H=h===null||h.memoizedState===null?xl:Zr),u}function ce(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return le(u);if(u.$$typeof===hs)return br(u)}throw Error(r(438,String(u)))}function ye(u){var h=null,_=bn.updateQueue;if(_!==null&&(h=_.memoCache),h==null){var E=bn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(h={data:E.data.map(function(R){return R.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),_===null&&(_=Td(),bn.updateQueue=_),_.memoCache=h,_=h.data[h.index],_===void 0)for(_=h.data[h.index]=Array(u),E=0;E<u;E++)_[E]=$v;return h.index++,_}function Ce(u,h){return typeof h=="function"?h(u):h}function ke(u){var h=ee();return We(h,Wt,u)}function We(u,h,_){var E=u.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=_;var R=u.baseQueue,O=E.pending;if(O!==null){if(R!==null){var q=R.next;R.next=O.next,O.next=q}h.baseQueue=R=O,E.pending=null}if(O=u.baseState,R===null)u.memoizedState=O;else{h=R.next;var ue=q=null,Ee=null,qe=h,ht=!1;do{var Mt=qe.lane&-536870913;if(Mt!==qe.lane?(Cn&Mt)===Mt:(Mo&Mt)===Mt){var Ct=qe.revertLane;if(Ct===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),Mt===Ca&&(ht=!0);else if((Mo&Ct)===Ct){qe=qe.next,Ct===Ca&&(ht=!0);continue}else Mt={lane:0,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ee===null?(ue=Ee=Mt,q=O):Ee=Ee.next=Mt,bn.lanes|=Ct,Ua|=Ct;Mt=qe.action,_l&&_(O,Mt),O=qe.hasEagerState?qe.eagerState:_(O,Mt)}else Ct={lane:Mt,revertLane:qe.revertLane,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},Ee===null?(ue=Ee=Ct,q=O):Ee=Ee.next=Ct,bn.lanes|=Mt,Ua|=Mt;qe=qe.next}while(qe!==null&&qe!==h);if(Ee===null?q=O:Ee.next=ue,!fa(O,u.memoizedState)&&(li=!0,ht&&(_=Kl,_!==null)))throw _;u.memoizedState=O,u.baseState=q,u.baseQueue=Ee,E.lastRenderedState=O}return R===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function nt(u){var h=ee(),_=h.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=u;var E=_.dispatch,R=_.pending,O=h.memoizedState;if(R!==null){_.pending=null;var q=R=R.next;do O=u(O,q.action),q=q.next;while(q!==R);fa(O,h.memoizedState)||(li=!0),h.memoizedState=O,h.baseQueue===null&&(h.baseState=O),_.lastRenderedState=O}return[O,E]}function St(u,h,_){var E=bn,R=ee(),O=Un;if(O){if(_===void 0)throw Error(r(407));_=_()}else _=h();var q=!fa((Wt||R).memoizedState,_);if(q&&(R.memoizedState=_,li=!0),R=R.queue,Gp(kt.bind(null,E,R,u),[u]),R.getSnapshot!==h||q||Ln!==null&&Ln.memoizedState.tag&1){if(E.flags|=2048,Xr(9,At.bind(null,E,R,_,h),{destroy:void 0},null),Zn===null)throw Error(r(349));O||(Mo&60)!==0||mt(E,h,_)}return _}function mt(u,h,_){u.flags|=16384,u={getSnapshot:h,value:_},h=bn.updateQueue,h===null?(h=Td(),bn.updateQueue=h,h.stores=[u]):(_=h.stores,_===null?h.stores=[u]:_.push(u))}function At(u,h,_,E){h.value=_,h.getSnapshot=E,It(h)&&wn(u)}function kt(u,h,_){return _(function(){It(h)&&wn(u)})}function It(u){var h=u.getSnapshot;u=u.value;try{var _=h();return!fa(u,_)}catch{return!0}}function wn(u){var h=Ze(u,2);h!==null&&pr(h,u,2)}function Dt(u){var h=V();if(typeof u=="function"){var _=u;if(u=_(),_l){te(!0);try{_()}finally{te(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:u},h}function Ht(u,h,_,E){return u.baseState=_,We(u,Wt,typeof E=="function"?E:Ce)}function Ot(u,h,_,E,R){if(Zu(u))throw Error(r(485));if(u=h.action,u!==null){var O={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){O.listeners.push(q)}};tn.T!==null?_(!0):O.isTransition=!1,E(O),_=h.pending,_===null?(O.next=h.pending=O,ti(h,O)):(O.next=_.next,h.pending=_.next=O)}}function ti(u,h){var _=h.action,E=h.payload,R=u.state;if(h.isTransition){var O=tn.T,q={};tn.T=q;try{var ue=_(R,E),Ee=tn.S;Ee!==null&&Ee(q,ue),en(u,h,ue)}catch(qe){ri(u,h,qe)}finally{tn.T=O}}else try{O=_(R,E),en(u,h,O)}catch(qe){ri(u,h,qe)}}function en(u,h,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(E){sn(u,h,E)},function(E){return ri(u,h,E)}):sn(u,h,_)}function sn(u,h,_){h.status="fulfilled",h.value=_,Yt(h),u.state=_,h=u.pending,h!==null&&(_=h.next,_===h?u.pending=null:(_=_.next,h.next=_,ti(u,_)))}function ri(u,h,_){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do h.status="rejected",h.reason=_,Yt(h),h=h.next;while(h!==E)}u.action=null}function Yt(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function xn(u,h){return h}function gn(u,h){if(Un){var _=Zn.formState;if(_!==null){e:{var E=bn;if(Un){if(Cr){var R=Um(Cr,gr);if(R){Cr=Nm(R),E=x0(R);break e}}rt(E)}E=!1}E&&(h=_[0])}}_=V(),_.memoizedState=_.baseState=h,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:h},_.queue=E,_=Yp.bind(null,bn,E),E.dispatch=_,E=Dt(!1);var O=Dc.bind(null,bn,!1,E.queue);return E=V(),R={state:h,dispatch:null,action:u,pending:null},E.queue=R,_=Ot.bind(null,bn,R,O,_),R.dispatch=_,E.memoizedState=u,[h,_,!1]}function _i(u){var h=ee();return On(h,Wt,u)}function On(u,h,_){h=We(u,h,xn)[0],u=ke(Ce)[0],h=typeof h=="object"&&h!==null&&typeof h.then=="function"?le(h):h;var E=ee(),R=E.queue,O=R.dispatch;return _!==E.memoizedState&&(bn.flags|=2048,Xr(9,ai.bind(null,R,_),{destroy:void 0},null)),[h,O,u]}function ai(u,h){u.action=h}function hr(u){var h=ee(),_=Wt;if(_!==null)return On(h,_,u);ee(),h=h.memoizedState,_=ee();var E=_.queue.dispatch;return _.memoizedState=u,[h,E,!1]}function Xr(u,h,_,E){return u={tag:u,create:h,inst:_,deps:E,next:null},h=bn.updateQueue,h===null&&(h=Td(),bn.updateQueue=h),_=h.lastEffect,_===null?h.lastEffect=u.next=u:(E=_.next,_.next=u,u.next=E,h.lastEffect=u),u}function Rs(){return ee().memoizedState}function ju(u,h,_,E){var R=V();bn.flags|=u,R.memoizedState=Xr(1|h,_,{destroy:void 0},E===void 0?null:E)}function Wu(u,h,_,E){var R=ee();E=E===void 0?null:E;var O=R.memoizedState.inst;Wt!==null&&E!==null&&G(E,Wt.memoizedState.deps)?R.memoizedState=Xr(h,_,O,E):(bn.flags|=u,R.memoizedState=Xr(1|h,_,O,E))}function Ph(u,h){ju(8390656,8,u,h)}function Gp(u,h){Wu(2048,8,u,h)}function Bv(u,h){return Wu(4,2,u,h)}function qu(u,h){return Wu(4,4,u,h)}function zh(u,h){if(typeof h=="function"){u=u();var _=h(u);return function(){typeof _=="function"?_():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function Fh(u,h,_){_=_!=null?_.concat([u]):null,Wu(4,4,zh.bind(null,h,u),_)}function jo(){}function Nl(u,h){var _=ee();h=h===void 0?null:h;var E=_.memoizedState;return h!==null&&G(h,E[1])?E[0]:(_.memoizedState=[u,h],u)}function Vp(u,h){var _=ee();h=h===void 0?null:h;var E=_.memoizedState;if(h!==null&&G(h,E[1]))return E[0];if(E=u(),_l){te(!0);try{u()}finally{te(!1)}}return _.memoizedState=[E,h],E}function Ku(u,h,_){return _===void 0||(Mo&1073741824)!==0?u.memoizedState=h:(u.memoizedState=_,u=um(),bn.lanes|=u,Ua|=u,_)}function kp(u,h,_,E){return fa(_,h)?_:di.current!==null?(u=Ku(u,_,E),fa(u,h)||(li=!0),u):(Mo&42)===0?(li=!0,u.memoizedState=_):(u=um(),bn.lanes|=u,Ua|=u,h)}function wc(u,h,_,E,R){var O=xo();Nr(O!==0&&8>O?O:8);var q=tn.T,ue={};tn.T=ue,Dc(u,!1,h,_);try{var Ee=R(),qe=tn.S;if(qe!==null&&qe(ue,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var ht=Pt(Ee,E);Wo(u,h,ht,Gi(u))}else Wo(u,h,E,Gi(u))}catch(Mt){Wo(u,h,{then:function(){},status:"rejected",reason:Mt},Gi())}finally{Nr(O),tn.T=q}}function ws(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:cl,baseState:cl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:cl},next:null};var _={};return h.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:_},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function Ju(){return br(ds)}function Bc(){return ee().memoizedState}function ro(){return ee().memoizedState}function Xp(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var _=Gi();u=Et(_);var E=vt(h,u,_);E!==null&&(pr(E,h,_),dt(E,h,_)),h={cache:Zo()},u.payload=h;return}h=h.return}}function Hh(u,h,_){var E=Gi();_={lane:E,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},Zu(u)?Yr(h,_):(_=et(u,h,_,E),_!==null&&(pr(_,u,E),qo(_,h,E)))}function Yp(u,h,_){var E=Gi();Wo(u,h,_,E)}function Wo(u,h,_,E){var R={lane:E,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(Zu(u))Yr(h,R);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=h.lastRenderedReducer,O!==null))try{var q=h.lastRenderedState,ue=O(q,_);if(R.hasEagerState=!0,R.eagerState=ue,fa(ue,q))return lt(u,h,R,0),Zn===null&&Z(),!1}catch{}finally{}if(_=et(u,h,R,E),_!==null)return pr(_,u,E),qo(_,h,E),!0}return!1}function Dc(u,h,_,E){if(E={lane:2,revertLane:ut(),action:E,hasEagerState:!1,eagerState:null,next:null},Zu(u)){if(h)throw Error(r(479))}else h=et(u,_,E,2),h!==null&&pr(h,u,2)}function Zu(u){var h=u.alternate;return u===bn||h!==null&&h===bn}function Yr(u,h){Zl=$a=!0;var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}function qo(u,h,_){if((_&4194176)!==0){var E=h.lanes;E&=u.pendingLanes,_|=E,h.lanes=_,ae(u,_)}}function Oc(u,h,_,E){h=u.memoizedState,_=_(E,h),_=_==null?h:ad({},h,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}function Uc(u,h,_,E,R,O,q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,O,q):h.prototype&&h.prototype.isPureReactComponent?!Ie(_,E)||!Ie(R,O):!0}function Dv(u,h,_,E){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,E),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,E),h.state!==u&&Fs.enqueueReplaceState(h,h.state,null)}function ao(u,h){var _=h;if("ref"in h){_={};for(var E in h)E!=="ref"&&(_[E]=h[E])}if(u=u.defaultProps){_===h&&(_=ad({},_));for(var R in u)_[R]===void 0&&(_[R]=u[R])}return _}function Nc(u,h){try{var _=u.onUncaughtError;_(h.value,{componentStack:h.stack})}catch(E){setTimeout(function(){throw E})}}function Lc(u,h,_){try{var E=u.onCaughtError;E(_.value,{componentStack:_.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Ic(u,h,_){return _=Et(_),_.tag=3,_.payload={element:null},_.callback=function(){Nc(u,h)},_}function jp(u){return u=Et(u),u.tag=3,u}function Ov(u,h,_,E){var R=_.type.getDerivedStateFromError;if(typeof R=="function"){var O=E.value;u.payload=function(){return R(O)},u.callback=function(){Lc(h,_,E)}}var q=_.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(u.callback=function(){Lc(h,_,E),typeof R!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var ue=E.stack;this.componentDidCatch(E.value,{componentStack:ue!==null?ue:""})})}function db(u,h,_,E,R){if(_.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(h=_.alternate,h!==null&&tf(h,_,R,!0),_=Ra.current,_!==null){switch(_.tag){case 13:return oi===null?po():_.alternate===null&&ci===0&&(ci=3),_.flags&=-257,_.flags|=65536,_.lanes=R,E===Nf?_.flags|=16384:(h=_.updateQueue,h===null?_.updateQueue=new Set([E]):h.add(E),Pl(u,E,R)),!1;case 22:return _.flags|=65536,E===Nf?_.flags|=16384:(h=_.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([E])},_.updateQueue=h):(_=h.retryQueue,_===null?h.retryQueue=new Set([E]):_.add(E)),Pl(u,E,R)),!1}throw Error(r(435,_.tag))}return Pl(u,E,R),po(),!1}if(Un)return h=Ra.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=R,E!==Df&&(u=Error(r(422),{cause:E}),Rt(be(u,_)))):(E!==Df&&(h=Error(r(423),{cause:E}),Rt(be(h,_))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,E=be(E,_),R=Ic(u.stateNode,E,R),de(u,R),ci!==4&&(ci=2)),!1;var O=Error(r(520),{cause:E});if(O=be(O,_),ec===null?ec=[O]:ec.push(O),ci!==4&&(ci=2),h===null)return!0;E=be(E,_),_=h;do{switch(_.tag){case 3:return _.flags|=65536,u=R&-R,_.lanes|=u,u=Ic(_.stateNode,E,u),de(_,u),!1;case 1:if(h=_.type,O=_.stateNode,(_.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(bl===null||!bl.has(O))))return _.flags|=65536,R&=-R,_.lanes|=R,R=jp(R),Ov(R,u,_,E),de(_,R),!1}_=_.return}while(_!==null);return!1}function xr(u,h,_,E){h.child=u===null?zs(h,null,_,E):yl(h,u.child,_,E)}function Gh(u,h,_,E,R){_=_.render;var O=h.ref;if("ref"in E){var q={};for(var ue in E)ue!=="ref"&&(q[ue]=E[ue])}else q=E;return Jo(h),E=K(u,h,_,q,O,R),ue=Ge(),u!==null&&!li?(ct(u,h,R),so(u,h,R)):(Un&&ue&&Ae(h),h.flags|=1,xr(u,h,E,R),h.child)}function Uv(u,h,_,E,R){if(u===null){var O=_.type;return typeof O=="function"&&!mf(O)&&O.defaultProps===void 0&&_.compare===null?(h.tag=15,h.type=O,Nv(u,h,O,E,R)):(u=Os(_.type,null,E,h,h.mode,R),u.ref=h.ref,u.return=h,h.child=u)}if(O=u.child,!Zp(u,R)){var q=O.memoizedProps;if(_=_.compare,_=_!==null?_:Ie,_(q,E)&&u.ref===h.ref)return so(u,h,R)}return h.flags|=1,u=Ya(O,E),u.ref=h.ref,u.return=h,h.child=u}function Nv(u,h,_,E,R){if(u!==null){var O=u.memoizedProps;if(Ie(O,E)&&u.ref===h.ref)if(li=!1,h.pendingProps=E=O,Zp(u,R))(u.flags&131072)!==0&&(li=!0);else return h.lanes=u.lanes,so(u,h,R)}return Vh(u,h,_,E,R)}function Lv(u,h,_){var E=h.pendingProps,R=E.children,O=(h.stateNode._pendingVisibility&2)!==0,q=u!==null?u.memoizedState:null;if($u(u,h),E.mode==="hidden"||O){if((h.flags&128)!==0){if(E=q!==null?q.baseLanes|_:_,u!==null){for(R=h.child=u.child,O=0;R!==null;)O=O|R.lanes|R.childLanes,R=R.sibling;h.childLanes=O&~E}else h.childLanes=0,h.child=null;return Iv(u,h,E,_)}if((_&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&Xh(h,q!==null?q.cachePool:null),q!==null?wi(h,q):Fi(),cs(h);else return h.lanes=h.childLanes=536870912,Iv(u,h,q!==null?q.baseLanes|_:_,_)}else q!==null?(Xh(h,q.cachePool),wi(h,q),_r(),h.memoizedState=null):(u!==null&&Xh(h,null),Fi(),_r());return xr(u,h,R,_),h.child}function Iv(u,h,_,E){var R=Qp();return R=R===null?null:{parent:qr?pi._currentValue:pi._currentValue2,pool:R},h.memoizedState={baseLanes:_,cachePool:R},u!==null&&Xh(h,null),Fi(),cs(h),u!==null&&tf(u,h,E,!0),null}function $u(u,h){var _=h.ref;if(_===null)u!==null&&u.ref!==null&&(h.flags|=2097664);else{if(typeof _!="function"&&typeof _!="object")throw Error(r(284));(u===null||u.ref!==_)&&(h.flags|=2097664)}}function Vh(u,h,_,E,R){return Jo(h),_=K(u,h,_,E,void 0,R),E=Ge(),u!==null&&!li?(ct(u,h,R),so(u,h,R)):(Un&&E&&Ae(h),h.flags|=1,xr(u,h,_,R),h.child)}function Pv(u,h,_,E,R,O){return Jo(h),h.updateQueue=null,_=we(h,E,_,R),me(u),E=Ge(),u!==null&&!li?(ct(u,h,O),so(u,h,O)):(Un&&E&&Ae(h),h.flags|=1,xr(u,h,_,O),h.child)}function zv(u,h,_,E,R){if(Jo(h),h.stateNode===null){var O=dl,q=_.contextType;typeof q=="object"&&q!==null&&(O=br(q)),O=new _(E,O),h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Fs,h.stateNode=O,O._reactInternals=h,O=h.stateNode,O.props=E,O.state=h.memoizedState,O.refs={},at(h),q=_.contextType,O.context=typeof q=="object"&&q!==null?br(q):dl,O.state=h.memoizedState,q=_.getDerivedStateFromProps,typeof q=="function"&&(Oc(h,_,q,E),O.state=h.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(q=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),q!==O.state&&Fs.enqueueReplaceState(O,O.state,null),st(h,E,O,R),Pe(),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308),E=!0}else if(u===null){O=h.stateNode;var ue=h.memoizedProps,Ee=ao(_,ue);O.props=Ee;var qe=O.context,ht=_.contextType;q=dl,typeof ht=="object"&&ht!==null&&(q=br(ht));var Mt=_.getDerivedStateFromProps;ht=typeof Mt=="function"||typeof O.getSnapshotBeforeUpdate=="function",ue=h.pendingProps!==ue,ht||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ue||qe!==q)&&Dv(h,O,E,q),Eo=!1;var Ct=h.memoizedState;O.state=Ct,st(h,E,O,R),Pe(),qe=h.memoizedState,ue||Ct!==qe||Eo?(typeof Mt=="function"&&(Oc(h,_,Mt,E),qe=h.memoizedState),(Ee=Eo||Uc(h,_,Ee,E,Ct,qe,q))?(ht||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=E,h.memoizedState=qe),O.props=E,O.state=qe,O.context=q,E=Ee):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),E=!1)}else{O=h.stateNode,_t(u,h),q=h.memoizedProps,ht=ao(_,q),O.props=ht,Mt=h.pendingProps,Ct=O.context,qe=_.contextType,Ee=dl,typeof qe=="object"&&qe!==null&&(Ee=br(qe)),ue=_.getDerivedStateFromProps,(qe=typeof ue=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==Mt||Ct!==Ee)&&Dv(h,O,E,Ee),Eo=!1,Ct=h.memoizedState,O.state=Ct,st(h,E,O,R),Pe();var cn=h.memoizedState;q!==Mt||Ct!==cn||Eo||u!==null&&u.dependencies!==null&&nf(u.dependencies)?(typeof ue=="function"&&(Oc(h,_,ue,E),cn=h.memoizedState),(ht=Eo||Uc(h,_,ht,E,Ct,cn,Ee)||u!==null&&u.dependencies!==null&&nf(u.dependencies))?(qe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(E,cn,Ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(E,cn,Ee)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===u.memoizedProps&&Ct===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&Ct===u.memoizedState||(h.flags|=1024),h.memoizedProps=E,h.memoizedState=cn),O.props=E,O.state=cn,O.context=Ee,E=ht):(typeof O.componentDidUpdate!="function"||q===u.memoizedProps&&Ct===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===u.memoizedProps&&Ct===u.memoizedState||(h.flags|=1024),E=!1)}return O=E,$u(u,h),E=(h.flags&128)!==0,O||E?(O=h.stateNode,_=E&&typeof _.getDerivedStateFromError!="function"?null:O.render(),h.flags|=1,u!==null&&E?(h.child=yl(h,u.child,null,R),h.child=yl(h,null,_,R)):xr(u,h,_,R),h.memoizedState=O.state,u=h.child):u=so(u,h,R),u}function Fv(u,h,_,E){return Vt(),h.flags|=256,xr(u,h,_,E),h.child}function Wp(u){return{baseLanes:u,cachePool:em()}}function Qu(u,h,_){return u=u!==null?u.childLanes&~_:0,h&&(u|=Na),u}function Hv(u,h,_){var E=h.pendingProps,R=!1,O=(h.flags&128)!==0,q;if((q=O)||(q=u!==null&&u.memoizedState===null?!1:(sr.current&2)!==0),q&&(R=!0,h.flags&=-129),q=(h.flags&32)!==0,h.flags&=-33,u===null){if(Un){if(R?Or(h):_r(),Un){var ue=Cr,Ee;(Ee=ue)&&(ue=A0(ue,gr),ue!==null?(h.memoizedState={dehydrated:ue,treeContext:pl!==null?{id:ms,overflow:gs}:null,retryLane:536870912},Ee=t(18,null,null,0),Ee.stateNode=ue,Ee.return=h,h.child=Ee,Tr=h,Cr=null,Ee=!0):Ee=!1),Ee||rt(h)}if(ue=h.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return md(ue)?h.lanes=16:h.lanes=536870912,null;jt(h)}return ue=E.children,E=E.fallback,R?(_r(),R=h.mode,ue=Kp({mode:"hidden",children:ue},R),E=Bi(E,R,_,null),ue.return=h,E.return=h,ue.sibling=E,h.child=ue,R=h.child,R.memoizedState=Wp(_),R.childLanes=Qu(u,q,_),h.memoizedState=wd,E):(Or(h),qp(h,ue))}if(Ee=u.memoizedState,Ee!==null&&(ue=Ee.dehydrated,ue!==null)){if(O)h.flags&256?(Or(h),h.flags&=-257,h=kh(u,h,_)):h.memoizedState!==null?(_r(),h.child=u.child,h.flags|=128,h=null):(_r(),R=E.fallback,ue=h.mode,E=Kp({mode:"visible",children:E.children},ue),R=Bi(R,ue,_,null),R.flags|=2,E.return=h,R.return=h,E.sibling=R,h.child=E,yl(h,u.child,null,_),E=h.child,E.memoizedState=Wp(_),E.childLanes=Qu(u,q,_),h.memoizedState=wd,h=R);else if(Or(h),md(ue))q=y0(ue).digest,E=Error(r(419)),E.stack="",E.digest=q,Rt({value:E,source:null,stack:null}),h=kh(u,h,_);else if(li||tf(u,h,_,!1),q=(_&u.childLanes)!==0,li||q){if(q=Zn,q!==null){if(E=_&-_,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(q.suspendedLanes|_))!==0?0:E,E!==0&&E!==Ee.retryLane)throw Ee.retryLane=E,Ze(u,E),pr(q,u,E),Rd}pd(ue)||po(),h=kh(u,h,_)}else pd(ue)?(h.flags|=128,h.child=u.child,h=mo.bind(null,u),_0(ue,h),h=null):(u=Ee.treeContext,Mr&&(Cr=S0(ue),Tr=h,Un=!0,Ja=null,gr=!1,u!==null&&(Ma[Ta++]=ms,Ma[Ta++]=gs,Ma[Ta++]=pl,ms=u.id,gs=u.overflow,pl=h)),h=qp(h,E.children),h.flags|=4096);return h}return R?(_r(),R=E.fallback,ue=h.mode,Ee=u.child,O=Ee.sibling,E=Ya(Ee,{mode:"hidden",children:E.children}),E.subtreeFlags=Ee.subtreeFlags&31457280,O!==null?R=Ya(O,R):(R=Bi(R,ue,_,null),R.flags|=2),R.return=h,E.return=h,E.sibling=R,h.child=E,E=R,R=h.child,ue=u.child.memoizedState,ue===null?ue=Wp(_):(Ee=ue.cachePool,Ee!==null?(O=qr?pi._currentValue:pi._currentValue2,Ee=Ee.parent!==O?{parent:O,pool:O}:Ee):Ee=em(),ue={baseLanes:ue.baseLanes|_,cachePool:Ee}),R.memoizedState=ue,R.childLanes=Qu(u,q,_),h.memoizedState=wd,E):(Or(h),_=u.child,u=_.sibling,_=Ya(_,{mode:"visible",children:E.children}),_.return=h,_.sibling=null,u!==null&&(q=h.deletions,q===null?(h.deletions=[u],h.flags|=16):q.push(u)),h.child=_,h.memoizedState=null,_)}function qp(u,h){return h=Kp({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function Kp(u,h){return vf(u,h,0,null)}function kh(u,h,_){return yl(h,u.child,null,_),u=qp(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function Gv(u,h,_){u.lanes|=h;var E=u.alternate;E!==null&&(E.lanes|=h),ef(u.return,h,_)}function Jp(u,h,_,E,R){var O=u.memoizedState;O===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:R}:(O.isBackwards=h,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=_,O.tailMode=R)}function Vv(u,h,_){var E=h.pendingProps,R=E.revealOrder,O=E.tail;if(xr(u,h,E.children,_),E=sr.current,(E&2)!==0)E=E&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Gv(u,_,h);else if(u.tag===19)Gv(u,_,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}switch(w(sr,E),R){case"forwards":for(_=h.child,R=null;_!==null;)u=_.alternate,u!==null&&ia(u)===null&&(R=_),_=_.sibling;_=R,_===null?(R=h.child,h.child=null):(R=_.sibling,_.sibling=null),Jp(h,!1,R,_,O);break;case"backwards":for(_=null,R=h.child,h.child=null;R!==null;){if(u=R.alternate,u!==null&&ia(u)===null){h.child=R;break}u=R.sibling,R.sibling=_,_=R,R=u}Jp(h,!0,_,null,O);break;case"together":Jp(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function so(u,h,_){if(u!==null&&(h.dependencies=u.dependencies),Ua|=h.lanes,(_&h.childLanes)===0)if(u!==null){if(tf(u,h,_,!1),(_&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,_=Ya(u,u.pendingProps),h.child=_,_.return=h;u.sibling!==null;)u=u.sibling,_=_.sibling=Ya(u,u.pendingProps),_.return=h;_.sibling=null}return h.child}function Zp(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&nf(u)))}function pb(u,h,_){switch(h.tag){case 3:ge(h,h.stateNode.containerInfo),Ko(h,pi,u.memoizedState.cache),Vt();break;case 27:case 5:Le(h);break;case 4:ge(h,h.stateNode.containerInfo);break;case 10:Ko(h,h.type,h.memoizedProps.value);break;case 13:var E=h.memoizedState;if(E!==null)return E.dehydrated!==null?(Or(h),h.flags|=128,null):(_&h.child.childLanes)!==0?Hv(u,h,_):(Or(h),u=so(u,h,_),u!==null?u.sibling:null);Or(h);break;case 19:var R=(u.flags&128)!==0;if(E=(_&h.childLanes)!==0,E||(tf(u,h,_,!1),E=(_&h.childLanes)!==0),R){if(E)return Vv(u,h,_);h.flags|=128}if(R=h.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),w(sr,sr.current),E)break;return null;case 22:case 23:return h.lanes=0,Lv(u,h,_);case 24:Ko(h,pi,u.memoizedState.cache)}return so(u,h,_)}function kv(u,h,_){if(u!==null)if(u.memoizedProps!==h.pendingProps)li=!0;else{if(!Zp(u,_)&&(h.flags&128)===0)return li=!1,pb(u,h,_);li=(u.flags&131072)!==0}else li=!1,Un&&(h.flags&1048576)!==0&&se(h,iu,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var E=h.elementType,R=E._init;if(E=R(E._payload),h.type=E,typeof E=="function")mf(E)?(u=ao(E,u),h.tag=1,h=zv(null,h,E,u,_)):(h.tag=0,h=Vh(null,h,E,u,_));else{if(E!=null){if(R=E.$$typeof,R===Sf){h.tag=11,h=Gh(null,h,E,u,_);break e}else if(R===ld){h.tag=14,h=Uv(null,h,E,u,_);break e}}throw h=o(E)||E,Error(r(306,h,""))}}return h;case 0:return Vh(u,h,h.type,h.pendingProps,_);case 1:return E=h.type,R=ao(E,h.pendingProps),zv(u,h,E,R,_);case 3:e:{if(ge(h,h.stateNode.containerInfo),u===null)throw Error(r(387));var O=h.pendingProps;R=h.memoizedState,E=R.element,_t(u,h),st(h,O,null,_);var q=h.memoizedState;if(O=q.cache,Ko(h,pi,O),O!==R.cache&&Ll(h,[pi],_,!0),Pe(),O=q.element,Mr&&R.isDehydrated)if(R={element:O,isDehydrated:!1,cache:q.cache},h.updateQueue.baseState=R,h.memoizedState=R,h.flags&256){h=Fv(u,h,O,_);break e}else if(O!==E){E=be(Error(r(424)),h),Rt(E),h=Fv(u,h,O,_);break e}else for(Mr&&(Cr=b0(h.stateNode.containerInfo),Tr=h,Un=!0,Ja=null,gr=!0),_=zs(h,null,O,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Vt(),O===E){h=so(u,h,_);break e}xr(u,h,O,_)}h=h.child}return h;case 26:if(Ea)return $u(u,h),u===null?(_=Pm(h.type,null,h.pendingProps,null))?h.memoizedState=_:Un||(h.stateNode=xd(h.type,h.pendingProps,Is.current,h)):h.memoizedState=Pm(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:if(si)return Le(h),u===null&&si&&Un&&(E=h.stateNode=ps(h.type,h.pendingProps,Is.current,ar.current,!1),Tr=h,gr=!0,Cr=gd(E)),E=h.pendingProps.children,u!==null||Un?xr(u,h,E,_):h.child=yl(h,null,E,_),$u(u,h),h.child;case 5:return u===null&&Un&&(yd(h.type,h.pendingProps,ar.current),(R=E=Cr)&&(E=bb(E,h.type,h.pendingProps,gr),E!==null?(h.stateNode=E,Tr=h,Cr=gd(E),gr=!1,R=!0):R=!1),R||rt(h)),Le(h),R=h.type,O=h.pendingProps,q=u!==null?u.memoizedProps:null,E=O.children,dn(R,O)?E=null:q!==null&&dn(R,q)&&(h.flags|=32),h.memoizedState!==null&&(R=K(u,h,Ue,null,null,_),qr?ds._currentValue=R:ds._currentValue2=R),$u(u,h),xr(u,h,E,_),h.child;case 6:return u===null&&Un&&(R0(h.pendingProps,ar.current),(u=_=Cr)&&(_=Lm(_,h.pendingProps,gr),_!==null?(h.stateNode=_,Tr=h,Cr=null,u=!0):u=!1),u||rt(h)),null;case 13:return Hv(u,h,_);case 4:return ge(h,h.stateNode.containerInfo),E=h.pendingProps,u===null?h.child=yl(h,null,E,_):xr(u,h,E,_),h.child;case 11:return Gh(u,h,h.type,h.pendingProps,_);case 7:return xr(u,h,h.pendingProps,_),h.child;case 8:return xr(u,h,h.pendingProps.children,_),h.child;case 12:return xr(u,h,h.pendingProps.children,_),h.child;case 10:return E=h.pendingProps,Ko(h,h.type,E.value),xr(u,h,E.children,_),h.child;case 9:return R=h.type._context,E=h.pendingProps.children,Jo(h),R=br(R),E=E(R),h.flags|=1,xr(u,h,E,_),h.child;case 14:return Uv(u,h,h.type,h.pendingProps,_);case 15:return Nv(u,h,h.type,h.pendingProps,_);case 19:return Vv(u,h,_);case 22:return Lv(u,h,_);case 24:return Jo(h),E=br(pi),u===null?(R=Qp(),R===null&&(R=Zn,O=Zo(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=_),R=O),h.memoizedState={parent:E,cache:R},at(h),Ko(h,pi,R)):((u.lanes&_)!==0&&(_t(u,h),st(h,null,null,_),Pe()),R=u.memoizedState,O=h.memoizedState,R.parent!==E?(R={parent:E,cache:E},h.memoizedState=R,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=R),Ko(h,pi,E)):(E=O.cache,Ko(h,pi,E),E!==R.cache&&Ll(h,[pi],_,!0))),xr(u,h,h.pendingProps.children,_),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Ko(u,h,_){qr?(w(To,h._currentValue),h._currentValue=_):(w(To,h._currentValue2),h._currentValue2=_)}function oo(u){var h=To.current;qr?u._currentValue=h:u._currentValue2=h,A(To)}function ef(u,h,_){for(;u!==null;){var E=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,E!==null&&(E.childLanes|=h)):E!==null&&(E.childLanes&h)!==h&&(E.childLanes|=h),u===_)break;u=u.return}}function Ll(u,h,_,E){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var O=R.dependencies;if(O!==null){var q=R.child;O=O.firstContext;e:for(;O!==null;){var ue=O;O=R;for(var Ee=0;Ee<h.length;Ee++)if(ue.context===h[Ee]){O.lanes|=_,ue=O.alternate,ue!==null&&(ue.lanes|=_),ef(O.return,_,u),E||(q=null);break e}O=ue.next}}else if(R.tag===18){if(q=R.return,q===null)throw Error(r(341));q.lanes|=_,O=q.alternate,O!==null&&(O.lanes|=_),ef(q,_,u),q=null}else q=R.child;if(q!==null)q.return=R;else for(q=R;q!==null;){if(q===u){q=null;break}if(R=q.sibling,R!==null){R.return=q.return,q=R;break}q=q.return}R=q}}function tf(u,h,_,E){u=null;for(var R=h,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var q=R.alternate;if(q===null)throw Error(r(387));if(q=q.memoizedProps,q!==null){var ue=R.type;fa(R.pendingProps.value,q.value)||(u!==null?u.push(ue):u=[ue])}}else if(R===Yl.current){if(q=R.alternate,q===null)throw Error(r(387));q.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(ds):u=[ds])}R=R.return}u!==null&&Ll(h,u,_,E),h.flags|=262144}function nf(u){for(u=u.firstContext;u!==null;){var h=u.context;if(!fa(qr?h._currentValue:h._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Jo(u){_s=u,Ba=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function br(u){return $p(_s,u)}function rf(u,h){return _s===null&&Jo(u),$p(u,h)}function $p(u,h){var _=qr?h._currentValue:h._currentValue2;if(h={context:h,memoizedValue:_,next:null},Ba===null){if(u===null)throw Error(r(308));Ba=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else Ba=Ba.next=h;return _}function Zo(){return{controller:new cu,data:new Map,refCount:0}}function af(u){u.refCount--,u.refCount===0&&F0(H0,function(){u.controller.abort()})}function Qp(){var u=Hs.current;return u!==null?u:Zn.pooledCache}function Xh(u,h){h===null?w(Hs,Hs.current):w(Hs,h.pool)}function em(){var u=Qp();return u===null?null:{parent:qr?pi._currentValue:pi._currentValue2,pool:u}}function ra(u){u.flags|=4}function Pc(u,h){if(u!==null&&u.child===h.child)return!1;if((h.flags&16)!==0)return!0;for(u=h.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Il(u,h,_,E){if(rr)for(_=h.child;_!==null;){if(_.tag===5||_.tag===6)Ef(u,_.stateNode);else if(!(_.tag===4||si&&_.tag===27)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else if(qa)for(var R=h.child;R!==null;){if(R.tag===5){var O=R.stateNode;_&&E&&(O=Dm(O,R.type,R.memoizedProps)),Ef(u,O)}else if(R.tag===6)O=R.stateNode,_&&E&&(O=Om(O,R.memoizedProps)),Ef(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),Il(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Xv(u,h,_,E){if(qa)for(var R=h.child;R!==null;){if(R.tag===5){var O=R.stateNode;_&&E&&(O=Dm(O,R.type,R.memoizedProps)),Bm(u,O)}else if(R.tag===6)O=R.stateNode,_&&E&&(O=Om(O,R.memoizedProps)),Bm(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),Xv(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===h)break;for(;R.sibling===null;){if(R.return===null||R.return===h)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function sf(u,h){if(qa&&Pc(u,h)){u=h.stateNode;var _=u.containerInfo,E=Mf();Xv(E,h,!1,!1),u.pendingChildren=E,ra(h),dd(_,E)}}function Yh(u,h,_,E){if(rr)u.memoizedProps!==E&&ra(h);else if(qa){var R=u.stateNode,O=u.memoizedProps;if((u=Pc(u,h))||O!==E){var q=ar.current;O=eu(R,_,O,E,!u,null),O===R?h.stateNode=R:(_o(O,_,E,q)&&ra(h),h.stateNode=O,u?Il(O,h,!1,!1):ra(h))}else h.stateNode=R}}function jh(u,h,_){if(Sm(h,_)){if(u.flags|=16777216,!fd(h,_))if(il())u.flags|=8192;else throw ml=Nf,Uf}else u.flags&=-16777217}function Wh(u,h){if(D0(h)){if(u.flags|=16777216,!Hl(h))if(il())u.flags|=8192;else throw ml=Nf,Uf}else u.flags&=-16777217}function zc(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?L():536870912,u.lanes|=h,ks|=h)}function Fc(u,h){if(!Un)switch(u.tailMode){case"hidden":h=u.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Si(u){var h=u.alternate!==null&&u.alternate.child===u.child,_=0,E=0;if(h)for(var R=u.child;R!==null;)_|=R.lanes|R.childLanes,E|=R.subtreeFlags&31457280,E|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)_|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=E,u.childLanes=_,h}function Yv(u,h,_){var E=h.pendingProps;switch(De(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(h),null;case 1:return Si(h),null;case 3:return _=h.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),h.memoizedState.cache!==E&&(h.flags|=2048),oo(pi),He(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(fn(h)?ra(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ja!==null&&(df(Ja),Ja=null))),sf(u,h),Si(h),null;case 26:if(Ea){_=h.type;var R=h.memoizedState;return u===null?(ra(h),R!==null?(Si(h),Wh(h,R)):(Si(h),jh(h,_,E))):R?R!==u.memoizedState?(ra(h),Si(h),Wh(h,R)):(Si(h),h.flags&=-16777217):(rr?u.memoizedProps!==E&&ra(h):Yh(u,h,_,E),Si(h),jh(h,_,E)),null}case 27:if(si){if(Qe(h),_=Is.current,R=h.type,u!==null&&h.stateNode!=null)rr?u.memoizedProps!==E&&ra(h):Yh(u,h,R,E);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Si(h),null}u=ar.current,fn(h)?Bt(h,u):(u=ps(R,E,_,u,!0),h.stateNode=u,ra(h))}return Si(h),null}case 5:if(Qe(h),_=h.type,u!==null&&h.stateNode!=null)Yh(u,h,_,E);else{if(!E){if(h.stateNode===null)throw Error(r(166));return Si(h),null}u=ar.current,fn(h)?Bt(h,u):(R=bm(_,E,Is.current,u,h),Il(R,h,!1,!1),h.stateNode=R,_o(R,_,E,u)&&ra(h))}return Si(h),jh(h,h.type,h.pendingProps),null;case 6:if(u&&h.stateNode!=null)_=u.memoizedProps,rr?_!==E&&ra(h):qa&&(_!==E?(h.stateNode=ni(E,Is.current,ar.current,h),ra(h)):h.stateNode=u.stateNode);else{if(typeof E!="string"&&h.stateNode===null)throw Error(r(166));if(u=Is.current,_=ar.current,fn(h)){if(!Mr)throw Error(r(176));if(u=h.stateNode,_=h.memoizedProps,E=null,R=Tr,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}Im(u,_,h,E)||rt(h)}else h.stateNode=ni(E,u,_,h)}return Si(h),null;case 13:if(E=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=fn(h),E!==null&&E.dehydrated!==null){if(u===null){if(!R)throw Error(r(318));if(!Mr)throw Error(r(344));if(R=h.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));M0(R,h)}else Vt(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Si(h),R=!1}else Ja!==null&&(df(Ja),Ja=null),R=!0;if(!R)return h.flags&256?(jt(h),h):(jt(h),null)}if(jt(h),(h.flags&128)!==0)return h.lanes=_,h;if(_=E!==null,u=u!==null&&u.memoizedState!==null,_){E=h.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool);var O=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(O=E.memoizedState.cachePool.pool),O!==R&&(E.flags|=2048)}return _!==u&&_&&(h.child.flags|=8192),zc(h,h.updateQueue),Si(h),null;case 4:return He(),sf(u,h),u===null&&Vi(h.stateNode.containerInfo),Si(h),null;case 10:return oo(h.type),Si(h),null;case 19:if(A(sr),R=h.memoizedState,R===null)return Si(h),null;if(E=(h.flags&128)!==0,O=R.rendering,O===null)if(E)Fc(R,!1);else{if(ci!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(O=ia(u),O!==null){for(h.flags|=128,Fc(R,!1),u=O.updateQueue,h.updateQueue=u,zc(h,u),h.subtreeFlags=0,u=_,_=h.child;_!==null;)gf(_,u),_=_.sibling;return w(sr,sr.current&1|2),h.child}u=u.sibling}R.tail!==null&&Ka()>hu&&(h.flags|=128,E=!0,Fc(R,!1),h.lanes=4194304)}else{if(!E)if(u=ia(O),u!==null){if(h.flags|=128,E=!0,u=u.updateQueue,h.updateQueue=u,zc(h,u),Fc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!O.alternate&&!Un)return Si(h),null}else 2*Ka()-R.renderingStartTime>hu&&_!==536870912&&(h.flags|=128,E=!0,Fc(R,!1),h.lanes=4194304);R.isBackwards?(O.sibling=h.child,h.child=O):(u=R.last,u!==null?u.sibling=O:h.child=O,R.last=O)}return R.tail!==null?(h=R.tail,R.rendering=h,R.tail=h.sibling,R.renderingStartTime=Ka(),h.sibling=null,u=sr.current,w(sr,E?u&1|2:u&1),h):(Si(h),null);case 22:case 23:return jt(h),Hi(),E=h.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(h.flags|=8192):E&&(h.flags|=8192),E?(_&536870912)!==0&&(h.flags&128)===0&&(Si(h),h.subtreeFlags&6&&(h.flags|=8192)):Si(h),_=h.updateQueue,_!==null&&zc(h,_.retryQueue),_=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048),u!==null&&A(Hs),null;case 24:return _=null,u!==null&&(_=u.memoizedState.cache),h.memoizedState.cache!==_&&(h.flags|=2048),oo(pi),Si(h),null;case 25:return null}throw Error(r(156,h.tag))}function mb(u,h){switch(De(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return oo(pi),He(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Qe(h),null;case 13:if(jt(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Vt()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return A(sr),null;case 4:return He(),null;case 10:return oo(h.type),null;case 22:case 23:return jt(h),Hi(),u!==null&&A(Hs),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return oo(pi),null;case 25:return null;default:return null}}function jv(u,h){switch(De(h),h.tag){case 3:oo(pi),He();break;case 26:case 27:case 5:Qe(h);break;case 4:He();break;case 13:jt(h);break;case 19:A(sr);break;case 10:oo(h.type);break;case 22:case 23:jt(h),Hi(),u!==null&&A(Hs);break;case 24:oo(pi)}}function of(u,h){try{var _=h.updateQueue,E=_!==null?_.lastEffect:null;if(E!==null){var R=E.next;_=R;do{if((_.tag&u)===u){E=void 0;var O=_.create,q=_.inst;E=O(),q.destroy=E}_=_.next}while(_!==R)}}catch(ue){Kn(h,h.return,ue)}}function $o(u,h,_){try{var E=h.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var O=R.next;E=O;do{if((E.tag&u)===u){var q=E.inst,ue=q.destroy;if(ue!==void 0){q.destroy=void 0,R=h;var Ee=_;try{ue()}catch(qe){Kn(R,Ee,qe)}}}E=E.next}while(E!==O)}}catch(qe){Kn(h,h.return,qe)}}function Wv(u){var h=u.updateQueue;if(h!==null){var _=u.stateNode;try{Te(h,_)}catch(E){Kn(u,u.return,E)}}}function aa(u,h,_){_.props=ao(u.type,u.memoizedProps),_.state=u.memoizedState;try{_.componentWillUnmount()}catch(E){Kn(u,h,E)}}function us(u,h){try{var _=u.ref;if(_!==null){var E=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Zc(E);break;default:R=E}typeof _=="function"?u.refCleanup=_(R):_.current=R}}catch(O){Kn(u,h,O)}}function sa(u,h){var _=u.ref,E=u.refCleanup;if(_!==null)if(typeof E=="function")try{E()}catch(R){Kn(u,h,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(R){Kn(u,h,R)}else _.current=null}function tm(u){var h=u.type,_=u.memoizedProps,E=u.stateNode;try{_b(E,h,_,u)}catch(R){Kn(u,u.return,R)}}function nm(u,h,_){try{u0(u.stateNode,u.type,_,h,u)}catch(E){Kn(u,u.return,E)}}function im(u){return u.tag===5||u.tag===3||(Ea?u.tag===26:!1)||(si?u.tag===27:!1)||u.tag===4}function lf(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||im(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!si||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function rm(u,h,_){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?h0(_,u,h):Cm(_,u);else if(!(E===4||si&&E===27)&&(u=u.child,u!==null))for(rm(u,h,_),u=u.sibling;u!==null;)rm(u,h,_),u=u.sibling}function lo(u,h,_){var E=u.tag;if(E===5||E===6)u=u.stateNode,h?f0(_,u,h):l0(_,u);else if(!(E===4||si&&E===27)&&(u=u.child,u!==null))for(lo(u,h,_),u=u.sibling;u!==null;)lo(u,h,_),u=u.sibling}function qh(u,h,_){u=u.containerInfo;try{tu(u,_)}catch(E){Kn(h,h.return,E)}}function cf(u,h){for(cd(u.containerInfo),ln=h;ln!==null;)if(u=ln,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,ln=h;else for(;ln!==null;){u=ln;var _=u.alternate;switch(h=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&_!==null){h=void 0;var E=u,R=_.memoizedProps;_=_.memoizedState;var O=E.stateNode;try{var q=ao(E.type,R,E.elementType===E.type);h=O.getSnapshotBeforeUpdate(q,_),O.__reactInternalSnapshotBeforeUpdate=h}catch(ue){Kn(E,E.return,ue)}}break;case 3:(h&1024)!==0&&rr&&v0(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=u.sibling,h!==null){h.return=u.return,ln=h;break}ln=u.return}return q=Mn,Mn=!1,q}function Kh(u,h,_){var E=_.flags;switch(_.tag){case 0:case 11:case 15:uo(u,_),E&4&&of(5,_);break;case 1:if(uo(u,_),E&4)if(u=_.stateNode,h===null)try{u.componentDidMount()}catch(ue){Kn(_,_.return,ue)}else{var R=ao(_.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(R,h,u.__reactInternalSnapshotBeforeUpdate)}catch(ue){Kn(_,_.return,ue)}}E&64&&Wv(_),E&512&&us(_,_.return);break;case 3:if(uo(u,_),E&64&&(E=_.updateQueue,E!==null)){if(u=null,_.child!==null)switch(_.child.tag){case 27:case 5:u=Zc(_.child.stateNode);break;case 1:u=_.child.stateNode}try{Te(E,u)}catch(ue){Kn(_,_.return,ue)}}break;case 26:if(Ea){uo(u,_),E&512&&us(_,_.return);break}case 27:case 5:uo(u,_),h===null&&E&4&&tm(_),E&512&&us(_,_.return);break;case 12:uo(u,_);break;case 13:uo(u,_),E&4&&Jh(u,_);break;case 22:if(R=_.memoizedState!==null||Gs,!R){h=h!==null&&h.memoizedState!==null||Oi;var O=Gs,q=Oi;Gs=R,(Oi=h)&&!q?fo(u,_,(_.subtreeFlags&8772)!==0):uo(u,_),Gs=O,Oi=q}E&512&&(_.memoizedProps.mode==="manual"?us(_,_.return):sa(_,_.return));break;default:uo(u,_)}}function am(u){var h=u.alternate;h!==null&&(u.alternate=null,am(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&yb(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Sr(u,h,_){for(_=_.child;_!==null;)Qo(u,h,_),_=_.sibling}function Qo(u,h,_){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(Xi,_)}catch{}switch(_.tag){case 26:if(Ea){Oi||sa(_,h),Sr(u,h,_),_.memoizedState?Fl(_.memoizedState):_.stateNode&&nu(_.stateNode);break}case 27:if(si){Oi||sa(_,h);var E=Xt,R=vn;Xt=_.stateNode,Sr(u,h,_),hl(_.stateNode),Xt=E,vn=R;break}case 5:Oi||sa(_,h);case 6:if(rr){if(E=Xt,R=vn,Xt=null,Sr(u,h,_),Xt=E,vn=R,Xt!==null)if(vn)try{d0(Xt,_.stateNode)}catch(O){Kn(_,h,O)}else try{Rm(Xt,_.stateNode)}catch(O){Kn(_,h,O)}}else Sr(u,h,_);break;case 18:rr&&Xt!==null&&(vn?Tf(Xt,_.stateNode):C0(Xt,_.stateNode));break;case 4:rr?(E=Xt,R=vn,Xt=_.stateNode.containerInfo,vn=!0,Sr(u,h,_),Xt=E,vn=R):(qa&&qh(_.stateNode,_,Mf()),Sr(u,h,_));break;case 0:case 11:case 14:case 15:Oi||$o(2,_,h),Oi||$o(4,_,h),Sr(u,h,_);break;case 1:Oi||(sa(_,h),E=_.stateNode,typeof E.componentWillUnmount=="function"&&aa(_,h,E)),Sr(u,h,_);break;case 21:Sr(u,h,_);break;case 22:Oi||sa(_,h),Oi=(E=Oi)||_.memoizedState!==null,Sr(u,h,_),Oi=E;break;default:Sr(u,h,_)}}function Jh(u,h){if(Mr&&h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ab(u)}catch(_){Kn(h,h.return,_)}}function qv(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new Jn),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new Jn),h;default:throw Error(r(435,u.tag))}}function co(u,h){var _=qv(u);h.forEach(function(E){var R=sl.bind(null,u,E);_.has(E)||(_.add(E),E.then(R,R))})}function jr(u,h){var _=h.deletions;if(_!==null)for(var E=0;E<_.length;E++){var R=_[E],O=u,q=h;if(rr){var ue=q;e:for(;ue!==null;){switch(ue.tag){case 27:case 5:Xt=ue.stateNode,vn=!1;break e;case 3:Xt=ue.stateNode.containerInfo,vn=!0;break e;case 4:Xt=ue.stateNode.containerInfo,vn=!0;break e}ue=ue.return}if(Xt===null)throw Error(r(160));Qo(O,q,R),Xt=null,vn=!1}else Qo(O,q,R);O=R.alternate,O!==null&&(O.return=null),R.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)sm(h,u),h=h.sibling}function sm(u,h){var _=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:jr(h,u),oa(u),E&4&&($o(3,u,u.return),of(3,u),$o(5,u,u.return));break;case 1:jr(h,u),oa(u),E&512&&(Oi||_===null||sa(_,_.return)),E&64&&Gs&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(_=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=_===null?E:_.concat(E))));break;case 26:if(Ea){var R=Ti;jr(h,u),oa(u),E&512&&(Oi||_===null||sa(_,_.return)),E&4&&(E=_!==null?_.memoizedState:null,h=u.memoizedState,_===null?h===null?u.stateNode===null?u.stateNode=Rf(R,u.type,u.memoizedProps,u):wf(R,u.type,u.stateNode):u.stateNode=w0(R,h,u.memoizedProps):E!==h?(E===null?_.stateNode!==null&&nu(_.stateNode):Fl(E),h===null?wf(R,u.type,u.stateNode):w0(R,h,u.memoizedProps)):h===null&&u.stateNode!==null&&nm(u,u.memoizedProps,_.memoizedProps));break}case 27:if(si&&E&4&&u.alternate===null){R=u.stateNode;var O=u.memoizedProps;try{fl(R),U0(u.type,O,R,u)}catch(ht){Kn(u,u.return,ht)}}case 5:if(jr(h,u),oa(u),E&512&&(Oi||_===null||sa(_,_.return)),rr){if(u.flags&32){h=u.stateNode;try{wm(h)}catch(ht){Kn(u,u.return,ht)}}E&4&&u.stateNode!=null&&(h=u.memoizedProps,nm(u,h,_!==null?_.memoizedProps:h)),E&1024&&(Gm=!0)}break;case 6:if(jr(h,u),oa(u),E&4&&rr){if(u.stateNode===null)throw Error(r(162));E=u.memoizedProps,_=_!==null?_.memoizedProps:E,h=u.stateNode;try{c0(h,_,E)}catch(ht){Kn(u,u.return,ht)}}break;case 3:if(Ea?(B0(),R=Ti,Ti=_d(h.containerInfo),jr(h,u),Ti=R):jr(h,u),oa(u),E&4){if(rr&&Mr&&_!==null&&_.memoizedState.isDehydrated)try{Sb(h.containerInfo)}catch(ht){Kn(u,u.return,ht)}if(qa){E=h.containerInfo,_=h.pendingChildren;try{tu(E,_)}catch(ht){Kn(u,u.return,ht)}}}Gm&&(Gm=!1,Kv(u));break;case 4:Ea?(_=Ti,Ti=_d(u.stateNode.containerInfo),jr(h,u),oa(u),Ti=_):(jr(h,u),oa(u)),E&4&&qa&&qh(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:jr(h,u),oa(u);break;case 13:jr(h,u),oa(u),u.child.flags&8192&&u.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&($r=Ka()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,co(u,E)));break;case 22:E&512&&(Oi||_===null||sa(_,_.return)),R=u.memoizedState!==null;var q=_!==null&&_.memoizedState!==null,ue=Gs,Ee=Oi;if(Gs=ue||R,Oi=Ee||q,jr(h,u),Oi=Ee,Gs=ue,oa(u),h=u.stateNode,h._current=u,h._visibility&=-3,h._visibility|=h._pendingVisibility&2,E&8192&&(h._visibility=R?h._visibility&-2:h._visibility|1,R&&(h=Gs||Oi,_===null||q||h||Hc(u)),rr&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(_=null,rr)for(h=u;;){if(h.tag===5||Ea&&h.tag===26||si&&h.tag===27){if(_===null){q=_=h;try{O=q.stateNode,R?p0(O):g0(q.stateNode,q.memoizedProps)}catch(ht){Kn(q,q.return,ht)}}}else if(h.tag===6){if(_===null){q=h;try{var qe=q.stateNode;R?m0(qe):xb(qe,q.memoizedProps)}catch(ht){Kn(q,q.return,ht)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;_===h&&(_=null),h=h.return}_===h&&(_=null),h.sibling.return=h.return,h=h.sibling}}E&4&&(E=u.updateQueue,E!==null&&(_=E.retryQueue,_!==null&&(E.retryQueue=null,co(u,_))));break;case 19:jr(h,u),oa(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,co(u,E)));break;case 21:break;default:jr(h,u),oa(u)}}function oa(u){var h=u.flags;if(h&2){try{if(rr&&(!si||u.tag!==27)){e:{for(var _=u.return;_!==null;){if(im(_)){var E=_;break e}_=_.return}throw Error(r(160))}switch(E.tag){case 27:if(si){var R=E.stateNode,O=lf(u);lo(u,O,R);break}case 5:var q=E.stateNode;E.flags&32&&(wm(q),E.flags&=-33);var ue=lf(u);lo(u,ue,q);break;case 3:case 4:var Ee=E.stateNode.containerInfo,qe=lf(u);rm(u,qe,Ee);break;default:throw Error(r(161))}}}catch(ht){Kn(u,u.return,ht)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function Kv(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;Kv(h),h.tag===5&&h.flags&1024&&hd(h.stateNode),u=u.sibling}}function uo(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Kh(u,h.alternate,h),h=h.sibling}function Hc(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:$o(4,h,h.return),Hc(h);break;case 1:sa(h,h.return);var _=h.stateNode;typeof _.componentWillUnmount=="function"&&aa(h,h.return,_),Hc(h);break;case 26:case 27:case 5:sa(h,h.return),Hc(h);break;case 22:sa(h,h.return),h.memoizedState===null&&Hc(h);break;default:Hc(h)}u=u.sibling}}function fo(u,h,_){for(_=_&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var E=h.alternate,R=u,O=h,q=O.flags;switch(O.tag){case 0:case 11:case 15:fo(R,O,_),of(4,O);break;case 1:if(fo(R,O,_),E=O,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(qe){Kn(E,E.return,qe)}if(E=O,R=E.updateQueue,R!==null){var ue=E.stateNode;try{var Ee=R.shared.hiddenCallbacks;if(Ee!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ee.length;R++)pe(Ee[R],ue)}catch(qe){Kn(E,E.return,qe)}}_&&q&64&&Wv(O),us(O,O.return);break;case 26:case 27:case 5:fo(R,O,_),_&&E===null&&q&4&&tm(O),us(O,O.return);break;case 12:fo(R,O,_);break;case 13:fo(R,O,_),_&&q&4&&Jh(R,O);break;case 22:O.memoizedState===null&&fo(R,O,_),us(O,O.return);break;default:fo(R,O,_)}h=h.sibling}}function Zh(u,h){var _=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==_&&(u!=null&&u.refCount++,_!=null&&af(_))}function uf(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&af(u))}function dr(u,h,_,E){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)om(u,h,_,E),h=h.sibling}function om(u,h,_,E){var R=h.flags;switch(h.tag){case 0:case 11:case 15:dr(u,h,_,E),R&2048&&of(9,h);break;case 3:dr(u,h,_,E),R&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&af(u)));break;case 12:if(R&2048){dr(u,h,_,E),u=h.stateNode;try{var O=h.memoizedProps,q=O.id,ue=O.onPostCommit;typeof ue=="function"&&ue(q,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Ee){Kn(h,h.return,Ee)}}else dr(u,h,_,E);break;case 23:break;case 22:O=h.stateNode,h.memoizedState!==null?O._visibility&4?dr(u,h,_,E):Ur(u,h):O._visibility&4?dr(u,h,_,E):(O._visibility|=4,Ar(u,h,_,E,(h.subtreeFlags&10256)!==0)),R&2048&&Zh(h.alternate,h);break;case 24:dr(u,h,_,E),R&2048&&uf(h.alternate,h);break;default:dr(u,h,_,E)}}function Ar(u,h,_,E,R){for(R=R&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var O=u,q=h,ue=_,Ee=E,qe=q.flags;switch(q.tag){case 0:case 11:case 15:Ar(O,q,ue,Ee,R),of(8,q);break;case 23:break;case 22:var ht=q.stateNode;q.memoizedState!==null?ht._visibility&4?Ar(O,q,ue,Ee,R):Ur(O,q):(ht._visibility|=4,Ar(O,q,ue,Ee,R)),R&&qe&2048&&Zh(q.alternate,q);break;case 24:Ar(O,q,ue,Ee,R),R&&qe&2048&&uf(q.alternate,q);break;default:Ar(O,q,ue,Ee,R)}h=h.sibling}}function Ur(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var _=u,E=h,R=E.flags;switch(E.tag){case 22:Ur(_,E),R&2048&&Zh(E.alternate,E);break;case 24:Ur(_,E),R&2048&&uf(E.alternate,E);break;default:Ur(_,E)}h=h.sibling}}function ka(u){if(u.subtreeFlags&Da)for(u=u.child;u!==null;)$h(u),u=u.sibling}function $h(u){switch(u.tag){case 26:ka(u),u.flags&Da&&(u.memoizedState!==null?O0(Ti,u.memoizedState,u.memoizedProps):Kr(u.type,u.memoizedProps));break;case 5:ka(u),u.flags&Da&&Kr(u.type,u.memoizedProps);break;case 3:case 4:if(Ea){var h=Ti;Ti=_d(u.stateNode.containerInfo),ka(u),Ti=h}else ka(u);break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Da,Da=16777216,ka(u),Da=h):ka(u));break;default:ka(u)}}function ff(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function el(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var E=h[_];ln=E,lm(E,u)}ff(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Qh(u),u=u.sibling}function Qh(u){switch(u.tag){case 0:case 11:case 15:el(u),u.flags&2048&&$o(9,u,u.return);break;case 3:el(u);break;case 12:el(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&4&&(u.return===null||u.return.tag!==13)?(h._visibility&=-5,ho(u)):el(u);break;default:el(u)}}function ho(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var _=0;_<h.length;_++){var E=h[_];ln=E,lm(E,u)}ff(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:$o(8,h,h.return),ho(h);break;case 22:_=h.stateNode,_._visibility&4&&(_._visibility&=-5,ho(h));break;default:ho(h)}u=u.sibling}}function lm(u,h){for(;ln!==null;){var _=ln;switch(_.tag){case 0:case 11:case 15:$o(8,_,h);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var E=_.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:af(_.memoizedState.cache)}if(E=_.child,E!==null)E.return=_,ln=E;else e:for(_=u;ln!==null;){E=ln;var R=E.sibling,O=E.return;if(am(E),E===_){ln=null;break e}if(R!==null){R.return=O,ln=R;break e}ln=O}}}function Gc(u){var h=t0(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(r(364));return h}if(u=Mm(u),u===null)throw Error(r(362));return u.stateNode.current}function tl(u,h){var _=u.tag;switch(h.$$typeof){case fu:if(u.type===h.value)return!0;break;case Qa:e:{for(h=h.value,u=[u,0],_=0;_<u.length;){var E=u[_++],R=E.tag,O=u[_++],q=h[O];if(R!==5&&R!==26&&R!==27||!Qc(E)){for(;q!=null&&tl(E,q);)O++,q=h[O];if(O===h.length){h=!0;break e}else for(E=E.child;E!==null;)u.push(E,O),E=E.sibling}}h=!1}return h;case xi:if((_===5||_===26||_===27)&&a0(u.stateNode,h.value))return!0;break;case Vs:if((_===5||_===6||_===26||_===27)&&(u=r0(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case xs:if((_===5||_===26||_===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function cm(u){switch(u.$$typeof){case fu:return"<"+(o(u.value)||"Unknown")+">";case Qa:return":has("+(cm(u)||"")+")";case xi:return'[role="'+u.value+'"]';case Vs:return'"'+u.value+'"';case xs:return'[data-testname="'+u.value+'"]';default:throw Error(r(365))}}function la(u,h){var _=[];u=[u,0];for(var E=0;E<u.length;){var R=u[E++],O=R.tag,q=u[E++],ue=h[q];if(O!==5&&O!==26&&O!==27||!Qc(R)){for(;ue!=null&&tl(R,ue);)q++,ue=h[q];if(q===h.length)_.push(R);else for(R=R.child;R!==null;)u.push(R,q),R=R.sibling}}return _}function hf(u,h){if(!ul)throw Error(r(363));u=Gc(u),u=la(u,h),h=[],u=Array.from(u);for(var _=0;_<u.length;){var E=u[_++],R=E.tag;if(R===5||R===26||R===27)Qc(E)||h.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return h}function Gi(){if((In&2)!==0&&Cn!==0)return Cn&-Cn;if(tn.T!==null){var u=Ca;return u!==0?u:ut()}return n0()}function um(){Na===0&&(Na=(Cn&536870912)===0||Un?P():536870912);var u=Ra.current;return u!==null&&(u.flags|=32),Na}function pr(u,h,_){(u===Zn&&ii===2||u.cancelPendingCommit!==null)&&(Er(u,0),ca(u,Cn,Na,!1)),Y(u,_),((In&2)===0||u!==Zn)&&(u===Zn&&((In&2)===0&&(Co|=_),ci===4&&ca(u,Cn,Na,!1)),Je(u))}function nl(u,h,_){if((In&6)!==0)throw Error(r(327));var E=!_&&(h&60)===0&&(h&u.expiredLanes)===0||N(u,h),R=E?hm(u,h):td(u,h,!0),O=E;do{if(R===0){Oa&&!E&&ca(u,h,0,!1);break}else if(R===6)ca(u,h,0,!ts);else{if(_=u.current.alternate,O&&!Vc(_)){R=td(u,h,!1),O=!1;continue}if(R===2){if(O=h,u.errorRecoveryDisabledLanes&O)var q=0;else q=u.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){h=q;e:{var ue=u;R=ec;var Ee=Mr&&ue.current.memoizedState.isDehydrated;if(Ee&&(Er(ue,q).flags|=256),q=td(ue,q,!1),q!==2){if(or&&!Ee){ue.errorRecoveryDisabledLanes|=O,Co|=O,R=4;break e}O=Ui,Ui=R,O!==null&&df(O)}R=q}if(O=!1,R!==2)continue}}if(R===1){Er(u,0),ca(u,h,0,!0);break}e:{switch(E=u,R){case 0:case 1:throw Error(r(345));case 4:if((h&4194176)===h){ca(E,h,Na,!ts);break e}break;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if(E.finishedWork=_,E.finishedLanes=h,(h&62914560)===h&&(O=$r+300-Ka(),10<O)){if(ca(E,h,Na,!ts),I(E,0)!==0)break e;E.timeoutHandle=$i(ed.bind(null,E,_,Ui,If,Bd,h,Na,Co,ks,ts,2,-0,0),O);break e}ed(E,_,Ui,If,Bd,h,Na,Co,ks,ts,0,-0,0)}}break}while(!0);Je(u)}function df(u){Ui===null?Ui=u:Ui.push.apply(Ui,u)}function ed(u,h,_,E,R,O,q,ue,Ee,qe,ht,Mt,Ct){var cn=h.subtreeFlags;if((cn&8192||(cn&16785408)===16785408)&&(Am(),$h(h),h=Qi(),h!==null)){u.cancelPendingCommit=h(rl.bind(null,u,_,E,R,q,ue,Ee,1,Mt,Ct)),ca(u,O,q,!qe);return}rl(u,_,E,R,q,ue,Ee,ht,Mt,Ct)}function Vc(u){for(var h=u;;){var _=h.tag;if((_===0||_===11||_===15)&&h.flags&16384&&(_=h.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var E=0;E<_.length;E++){var R=_[E],O=R.getSnapshot;R=R.value;try{if(!fa(O(),R))return!1}catch{return!1}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ca(u,h,_,E){h&=~Lf,h&=~Co,u.suspendedLanes|=h,u.pingedLanes&=~h,E&&(u.warmLanes|=h),E=u.expirationTimes;for(var R=h;0<R;){var O=31-Jr(R),q=1<<O;E[O]=-1,R&=~q}_!==0&&Q(u,_,h)}function pf(){return(In&6)===0?(J(0),!1):!0}function kc(){if(Kt!==null){if(ii===0)var u=Kt.return;else u=Kt,Ba=_s=null,it(u),gl=null,vl=0,u=Kt;for(;u!==null;)jv(u.alternate,u),u=u.return;Kt=null}}function Er(u,h){u.finishedWork=null,u.finishedLanes=0;var _=u.timeoutHandle;_!==ll&&(u.timeoutHandle=ll,ud(_)),_=u.cancelPendingCommit,_!==null&&(u.cancelPendingCommit=null,_()),kc(),Zn=u,Kt=_=Ya(u.current,null),Cn=h,ii=0,Lr=null,ts=!1,Oa=N(u,h),or=!1,ks=Na=Lf=Co=Ua=ci=0,Ui=ec=null,Bd=!1,(h&8)!==0&&(h|=h&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=h;0<E;){var R=31-Jr(E),O=1<<R;h|=u[R],E&=~O}return Ir=h,Z(),_}function ba(u,h){bn=null,tn.H=Di,h===ou?(h=zt(),ii=3):h===Uf?(h=zt(),ii=4):ii=h===Rd?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Lr=h,Kt===null&&(ci=1,Nc(u,be(h,u.current)))}function il(){var u=Ra.current;return u===null?!0:(Cn&4194176)===Cn?oi===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?u===oi:!1}function Bs(){var u=tn.H;return tn.H=Di,u===null?Di:u}function Ds(){var u=tn.A;return tn.A=uu,u}function po(){ci=4,ts||(Cn&4194176)!==Cn&&Ra.current!==null||(Oa=!0),(Ua&134217727)===0&&(Co&134217727)===0||Zn===null||ca(Zn,Cn,Na,!1)}function td(u,h,_){var E=In;In|=2;var R=Bs(),O=Ds();(Zn!==u||Cn!==h)&&(If=null,Er(u,h)),h=!1;var q=ci;e:do try{if(ii!==0&&Kt!==null){var ue=Kt,Ee=Lr;switch(ii){case 8:kc(),q=6;break e;case 3:case 2:case 6:Ra.current===null&&(h=!0);var qe=ii;if(ii=0,Lr=null,Xa(u,ue,Ee,qe),_&&Oa){q=0;break e}break;default:qe=ii,ii=0,Lr=null,Xa(u,ue,Ee,qe)}}fm(),q=ci;break}catch(ht){ba(u,ht)}while(!0);return h&&u.shellSuspendCounter++,Ba=_s=null,In=E,tn.H=R,tn.A=O,Kt===null&&(Zn=null,Cn=0,Z()),q}function fm(){for(;Kt!==null;)Mi(Kt)}function hm(u,h){var _=In;In|=2;var E=Bs(),R=Ds();Zn!==u||Cn!==h?(If=null,hu=Ka()+500,Er(u,h)):Oa=N(u,h);e:do try{if(ii!==0&&Kt!==null){h=Kt;var O=Lr;t:switch(ii){case 1:ii=0,Lr=null,Xa(u,h,O,1);break;case 2:if(Ye(O)){ii=0,Lr=null,kn(h);break}h=function(){ii===2&&Zn===u&&(ii=7),Je(u)},O.then(h,h);break e;case 3:ii=7;break e;case 4:ii=5;break e;case 7:Ye(O)?(ii=0,Lr=null,kn(h)):(ii=0,Lr=null,Xa(u,h,O,7));break;case 5:var q=null;switch(Kt.tag){case 26:q=Kt.memoizedState;case 5:case 27:var ue=Kt,Ee=ue.type,qe=ue.pendingProps;if(q?Hl(q):fd(Ee,qe)){ii=0,Lr=null;var ht=ue.sibling;if(ht!==null)Kt=ht;else{var Mt=ue.return;Mt!==null?(Kt=Mt,Sa(Mt)):Kt=null}break t}}ii=0,Lr=null,Xa(u,h,O,5);break;case 6:ii=0,Lr=null,Xa(u,h,O,6);break;case 8:kc(),ci=6;break e;default:throw Error(r(462))}}Wr();break}catch(Ct){ba(u,Ct)}while(!0);return Ba=_s=null,tn.H=E,tn.A=R,In=_,Kt!==null?0:(Zn=null,Cn=0,Z(),ci)}function Wr(){for(;Kt!==null&&!I0();)Mi(Kt)}function Mi(u){var h=kv(u.alternate,u,Ir);u.memoizedProps=u.pendingProps,h===null?Sa(u):Kt=h}function kn(u){var h=u,_=h.alternate;switch(h.tag){case 15:case 0:h=Pv(_,h,h.pendingProps,h.type,void 0,Cn);break;case 11:h=Pv(_,h,h.pendingProps,h.type.render,h.ref,Cn);break;case 5:it(h);default:jv(_,h),h=Kt=gf(h,Ir),h=kv(_,h,Ir)}u.memoizedProps=u.pendingProps,h===null?Sa(u):Kt=h}function Xa(u,h,_,E){Ba=_s=null,it(h),gl=null,vl=0;var R=h.return;try{if(db(u,R,h,_,Cn)){ci=1,Nc(u,be(_,u.current)),Kt=null;return}}catch(O){if(R!==null)throw Kt=R,O;ci=1,Nc(u,be(_,u.current)),Kt=null;return}h.flags&32768?(Un||E===1?u=!0:Oa||(Cn&536870912)!==0?u=!1:(ts=u=!0,(E===2||E===3||E===6)&&(E=Ra.current,E!==null&&E.tag===13&&(E.flags|=16384))),nd(h,u)):Sa(h)}function Sa(u){var h=u;do{if((h.flags&32768)!==0){nd(h,ts);return}u=h.return;var _=Yv(h.alternate,h,Ir);if(_!==null){Kt=_;return}if(h=h.sibling,h!==null){Kt=h;return}Kt=h=u}while(h!==null);ci===0&&(ci=5)}function nd(u,h){do{var _=mb(u.alternate,u);if(_!==null){_.flags&=32767,Kt=_;return}if(_=u.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!h&&(u=u.sibling,u!==null)){Kt=u;return}Kt=u=_}while(u!==null);ci=6,Kt=null}function rl(u,h,_,E,R,O,q,ue,Ee,qe){var ht=tn.T,Mt=xo();try{Nr(2),tn.T=null,Jv(u,h,_,E,Mt,R,O,q,ue,Ee,qe)}finally{tn.T=ht,Nr(Mt)}}function Jv(u,h,_,E,R,O,q,ue){do fs();while(Xs!==null);if((In&6)!==0)throw Error(r(327));var Ee=u.finishedWork;if(E=u.finishedLanes,Ee===null)return null;if(u.finishedWork=null,u.finishedLanes=0,Ee===u.current)throw Error(r(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var qe=Ee.lanes|Ee.childLanes;if(qe|=vs,ie(u,E,qe,O,q,ue),u===Zn&&(Kt=Zn=null,Cn=0),(Ee.subtreeFlags&10256)===0&&(Ee.flags&10256)===0||bs||(bs=!0,Sl=qe,Dd=_,go(Ed,function(){return fs(),null})),_=(Ee.flags&15990)!==0,(Ee.subtreeFlags&15990)!==0||_?(_=tn.T,tn.T=null,O=xo(),Nr(2),q=In,In|=4,cf(u,Ee),sm(Ee,u),e0(u.containerInfo),u.current=Ee,Kh(u,Ee.alternate,Ee),Sd(),In=q,Nr(O),tn.T=_):u.current=Ee,bs?(bs=!1,Xs=u,tc=E):dm(u,qe),qe=u.pendingLanes,qe===0&&(bl=null),X(Ee.stateNode),Je(u),h!==null)for(R=u.onRecoverableError,Ee=0;Ee<h.length;Ee++)qe=h[Ee],R(qe.value,{componentStack:qe.stack});return(tc&3)!==0&&fs(),qe=u.pendingLanes,(E&4194218)!==0&&(qe&42)!==0?u===Od?du++:(du=0,Od=u):du=0,J(0),null}function dm(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,af(h)))}function fs(){if(Xs!==null){var u=Xs,h=Sl;Sl=0;var _=he(tc),E=32>_?32:_;_=tn.T;var R=xo();try{if(Nr(E),tn.T=null,Xs===null)var O=!1;else{E=Dd,Dd=null;var q=Xs,ue=tc;if(Xs=null,tc=0,(In&6)!==0)throw Error(r(331));var Ee=In;if(In|=4,Qh(q.current),om(q,q.current,ue,E),In=Ee,J(0,!1),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(Xi,q)}catch{}O=!0}return O}finally{Nr(R),tn.T=_,dm(u,h)}}return!1}function Xc(u,h,_){h=be(_,h),h=Ic(u.stateNode,h,2),u=vt(u,h,2),u!==null&&(Y(u,2),Je(u))}function Kn(u,h,_){if(u.tag===3)Xc(u,u,_);else for(;h!==null;){if(h.tag===3){Xc(h,u,_);break}else if(h.tag===1){var E=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(bl===null||!bl.has(E))){u=be(_,u),_=jp(2),E=vt(h,_,2),E!==null&&(Ov(_,E,h,u),Y(E,2),Je(E));break}}h=h.return}}function Pl(u,h,_){var E=u.pingCache;if(E===null){E=u.pingCache=new es;var R=new Set;E.set(h,R)}else R=E.get(h),R===void 0&&(R=new Set,E.set(h,R));R.has(_)||(or=!0,R.add(_),u=pm.bind(null,u,h,_),h.then(u,u))}function pm(u,h,_){var E=u.pingCache;E!==null&&E.delete(h),u.pingedLanes|=u.suspendedLanes&_,u.warmLanes&=~_,Zn===u&&(Cn&_)===_&&(ci===4||ci===3&&(Cn&62914560)===Cn&&300>Ka()-$r?(In&2)===0&&Er(u,0):Lf|=_,ks===Cn&&(ks=0)),Je(u)}function al(u,h){h===0&&(h=L()),u=Ze(u,h),u!==null&&(Y(u,h),Je(u))}function mo(u){var h=u.memoizedState,_=0;h!==null&&(_=h.retryLane),al(u,_)}function sl(u,h){var _=0;switch(u.tag){case 13:var E=u.stateNode,R=u.memoizedState;R!==null&&(_=R.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(h),al(u,_)}function go(u,h){return Bf(u,h)}function mm(u,h,_,E){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ya(u,h){var _=u.alternate;return _===null?(_=t(u.tag,h,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=h,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&31457280,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,h=u.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_.refCleanup=u.refCleanup,_}function gf(u,h){u.flags&=31457282;var _=u.alternate;return _===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=_.childLanes,u.lanes=_.lanes,u.child=_.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=_.memoizedProps,u.memoizedState=_.memoizedState,u.updateQueue=_.updateQueue,u.type=_.type,h=_.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function Os(u,h,_,E,R,O){var q=0;if(E=u,typeof u=="function")mf(u)&&(q=1);else if(typeof u=="string")q=Ea&&si?Cf(u,_,ar.current)?26:Ns(u)?27:5:Ea?Cf(u,_,ar.current)?26:5:si&&Ns(u)?27:5;else e:switch(u){case ol:return Bi(_.children,R,O,h);case xf:q=8,R|=24;break;case sd:return u=t(12,_,h,R|2),u.elementType=sd,u.lanes=O,u;case od:return u=t(13,_,h,R),u.elementType=od,u.lanes=O,u;case qc:return u=t(19,_,h,R),u.elementType=qc,u.lanes=O,u;case ym:return vf(_,R,O,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case bf:case hs:q=10;break e;case vm:q=9;break e;case Sf:q=11;break e;case ld:q=14;break e;case Wa:q=16,E=null;break e}q=29,_=Error(r(130,u===null?"null":typeof u,"")),E=null}return h=t(q,_,h,R),h.elementType=u,h.type=E,h.lanes=O,h}function Bi(u,h,_,E){return u=t(7,u,E,h),u.lanes=_,u}function vf(u,h,_,E){u=t(22,u,E,h),u.elementType=ym,u.lanes=_;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=R._current;if(O===null)throw Error(r(456));if((R._pendingVisibility&2)===0){var q=Ze(O,2);q!==null&&(R._pendingVisibility|=2,pr(q,O,2))}},attach:function(){var O=R._current;if(O===null)throw Error(r(456));if((R._pendingVisibility&2)!==0){var q=Ze(O,2);q!==null&&(R._pendingVisibility&=-3,pr(q,O,2))}}};return u.stateNode=R,u}function id(u,h,_){return u=t(6,u,null,h),u.lanes=_,u}function gm(u,h,_){return h=t(4,u.children!==null?u.children:[],u.key,h),h.lanes=_,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function gb(u,h,_,E,R,O,q,ue){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ll,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=U(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=U(0),this.hiddenUpdates=U(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function Zv(u,h,_,E,R,O,q,ue,Ee,qe,ht,Mt){return u=new gb(u,h,_,q,ue,Ee,qe,Mt),h=1,O===!0&&(h|=24),O=t(3,null,null,h),u.current=O,O.stateNode=u,h=Zo(),h.refCount++,u.pooledCache=h,h.refCount++,O.memoizedState={element:E,isDehydrated:_,cache:h},at(O),u}function Zi(u){return u?(u=dl,u):dl}function rd(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=x(h),u=u!==null?b(u):null,u===null?null:Zc(u.stateNode)}function Yc(u,h,_,E,R,O){R=Zi(R),E.context===null?E.context=R:E.pendingContext=R,E=Et(h),E.payload={element:_},O=O===void 0?null:O,O!==null&&(E.callback=O),_=vt(u,E,h),_!==null&&(pr(_,u,h),dt(_,u,h))}function jc(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<h?_:h}}function yf(u,h){jc(u,h),(u=u.alternate)&&jc(u,h)}var hn={},Wc=wp(),Aa=JB(),ad=Object.assign,vb=Symbol.for("react.element"),_f=Symbol.for("react.transitional.element"),ja=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),bf=Symbol.for("react.provider"),vm=Symbol.for("react.consumer"),hs=Symbol.for("react.context"),Sf=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),qc=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),ym=Symbol.for("react.offscreen"),$v=Symbol.for("react.memo_cache_sentinel"),vo=Symbol.iterator,_m=Symbol.for("react.client.reference"),tn=Wc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Us,yo,zl=!1,Kc=Array.isArray,xm=e.rendererVersion,Af=e.rendererPackageName,Jc=e.extraDevToolsConfig,Zc=e.getPublicInstance,Qv=e.getRootHostContext,$c=e.getChildHostContext,cd=e.prepareForCommit,e0=e.resetAfterCommit,bm=e.createInstance,Ef=e.appendInitialChild,_o=e.finalizeInitialChildren,dn=e.shouldSetTextContent,ni=e.createTextInstance,$i=e.scheduleTimeout,ud=e.cancelTimeout,ll=e.noTimeout,qr=e.isPrimaryRenderer;e.warnsIfNotActing;var rr=e.supportsMutation,qa=e.supportsPersistence,Mr=e.supportsHydration,t0=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Vi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Nr=e.setCurrentUpdatePriority,xo=e.getCurrentUpdatePriority,n0=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var i0=e.shouldAttemptEagerTransition,yb=e.detachDeletedInstance;e.requestPostPaintCallback;var Sm=e.maySuspendCommit,fd=e.preloadInstance,Am=e.startSuspendingCommit,Kr=e.suspendInstance,Qi=e.waitForCommitToBeReady,cl=e.NotPendingTransition,ds=e.HostTransitionContext,hd=e.resetFormInstance;e.bindToConsole;var Em=e.supportsMicrotasks,bo=e.scheduleMicrotask,ul=e.supportsTestSelectors,Mm=e.findFiberRoot,Tm=e.getBoundingRect,r0=e.getTextContent,Qc=e.isHiddenSubtree,a0=e.matchAccessibilityRole,s0=e.setFocusIfFocusable,o0=e.setupIntersectionObserver,l0=e.appendChild,Cm=e.appendChildToContainer,c0=e.commitTextUpdate,_b=e.commitMount,u0=e.commitUpdate,f0=e.insertBefore,h0=e.insertInContainerBefore,Rm=e.removeChild,d0=e.removeChildFromContainer,wm=e.resetTextContent,p0=e.hideInstance,m0=e.hideTextInstance,g0=e.unhideInstance,xb=e.unhideTextInstance,v0=e.clearContainer,eu=e.cloneInstance,Mf=e.createContainerChildSet,Bm=e.appendChildToContainerChildSet,dd=e.finalizeContainerChildren,tu=e.replaceContainerChildren,Dm=e.cloneHiddenInstance,Om=e.cloneHiddenTextInstance,pd=e.isSuspenseInstancePending,md=e.isSuspenseInstanceFallback,y0=e.getSuspenseInstanceFallbackErrorDetails,_0=e.registerSuspenseInstanceRetry,Um=e.canHydrateFormStateMarker,x0=e.isFormStateMarkerMatching,Nm=e.getNextHydratableSibling,gd=e.getFirstHydratableChild,b0=e.getFirstHydratableChildWithinContainer,S0=e.getFirstHydratableChildWithinSuspenseInstance,bb=e.canHydrateInstance,Lm=e.canHydrateTextInstance,A0=e.canHydrateSuspenseInstance,E0=e.hydrateInstance,Im=e.hydrateTextInstance,M0=e.hydrateSuspenseInstance,T0=e.getNextHydratableInstanceAfterSuspenseInstance,Sb=e.commitHydratedContainer,Ab=e.commitHydratedSuspenseInstance,C0=e.clearSuspenseBoundary,Tf=e.clearSuspenseBoundaryFromContainer,vd=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var yd=e.validateHydratableInstance,R0=e.validateHydratableTextInstance,Ea=e.supportsResources,Cf=e.isHostHoistableType,_d=e.getHoistableRoot,Pm=e.getResource,w0=e.acquireResource,Fl=e.releaseResource,Rf=e.hydrateHoistable,wf=e.mountHoistable,nu=e.unmountHoistable,xd=e.createHoistableInstance,B0=e.prepareToCommitHoistables,D0=e.mayResourceSuspendCommit,Hl=e.preloadResource,O0=e.suspendResource,si=e.supportsSingletons,ps=e.resolveSingletonInstance,fl=e.clearSingleton,U0=e.acquireSingletonInstance,hl=e.releaseSingletonInstance,Ns=e.isHostSingletonType,ki=[],So=-1,dl={},Jr=Math.clz32?Math.clz32:B,N0=Math.log,L0=Math.LN2,Ls=128,Gl=4194304,Bf=Aa.unstable_scheduleCallback,bd=Aa.unstable_cancelCallback,I0=Aa.unstable_shouldYield,Sd=Aa.unstable_requestPaint,Ka=Aa.unstable_now,Ad=Aa.unstable_ImmediatePriority,P0=Aa.unstable_UserBlockingPriority,Ed=Aa.unstable_NormalPriority,Eb=Aa.unstable_IdlePriority,z0=Aa.log,mr=Aa.unstable_setDisableYieldValue,Xi=null,ua=null,fa=typeof Object.is=="function"?Object.is:ne,zm=new WeakMap,Vl=[],kl=0,Xl=null,iu=0,Ma=[],Ta=0,pl=null,ms=1,gs="",ar=M(null),ru=M(null),Is=M(null),Yl=M(null),Tr=null,Cr=null,Un=!1,Ja=null,gr=!1,Df=Error(r(519)),Za=[],jl=0,vs=0,Of=null,Ao=null,Wl=!1,hi=!1,Fm=!1,au=0,su=null,ql=0,Ca=0,Kl=null,Eo=!1,Jl=!1,Ps=Object.prototype.hasOwnProperty,ou=Error(r(460)),Uf=Error(r(474)),Nf={then:function(){}},ml=null,gl=null,vl=0,yl=fi(!0),zs=fi(!1),di=M(null),lu=M(0),Ra=M(null),oi=null,sr=M(0),Mo=0,bn=null,Wt=null,Ln=null,$a=!1,Zl=!1,_l=!1,Md=0,$l=0,vr=null,ys=0,Td=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Di={readContext:br,use:ce,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn};Di.useCacheRefresh=qn,Di.useMemoCache=qn,Di.useHostTransitionStatus=qn,Di.useFormState=qn,Di.useActionState=qn,Di.useOptimistic=qn;var xl={readContext:br,use:ce,useCallback:function(u,h){return V().memoizedState=[u,h===void 0?null:h],u},useContext:br,useEffect:Ph,useImperativeHandle:function(u,h,_){_=_!=null?_.concat([u]):null,ju(4194308,4,zh.bind(null,h,u),_)},useLayoutEffect:function(u,h){return ju(4194308,4,u,h)},useInsertionEffect:function(u,h){ju(4,2,u,h)},useMemo:function(u,h){var _=V();h=h===void 0?null:h;var E=u();if(_l){te(!0);try{u()}finally{te(!1)}}return _.memoizedState=[E,h],E},useReducer:function(u,h,_){var E=V();if(_!==void 0){var R=_(h);if(_l){te(!0);try{_(h)}finally{te(!1)}}}else R=h;return E.memoizedState=E.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},E.queue=u,u=u.dispatch=Hh.bind(null,bn,u),[E.memoizedState,u]},useRef:function(u){var h=V();return u={current:u},h.memoizedState=u},useState:function(u){u=Dt(u);var h=u.queue,_=Yp.bind(null,bn,h);return h.dispatch=_,[u.memoizedState,_]},useDebugValue:jo,useDeferredValue:function(u,h){var _=V();return Ku(_,u,h)},useTransition:function(){var u=Dt(!1);return u=wc.bind(null,bn,u.queue,!0,!1),V().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,_){var E=bn,R=V();if(Un){if(_===void 0)throw Error(r(407));_=_()}else{if(_=h(),Zn===null)throw Error(r(349));(Cn&60)!==0||mt(E,h,_)}R.memoizedState=_;var O={value:_,getSnapshot:h};return R.queue=O,Ph(kt.bind(null,E,O,u),[u]),E.flags|=2048,Xr(9,At.bind(null,E,O,_,h),{destroy:void 0},null),_},useId:function(){var u=V(),h=Zn.identifierPrefix;if(Un){var _=gs,E=ms;_=(E&~(1<<32-Jr(E)-1)).toString(32)+_,h=":"+h+"R"+_,_=Md++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=ys++,h=":"+h+"r"+_.toString(32)+":";return u.memoizedState=h},useCacheRefresh:function(){return V().memoizedState=Xp.bind(null,bn)}};xl.useMemoCache=ye,xl.useHostTransitionStatus=Ju,xl.useFormState=gn,xl.useActionState=gn,xl.useOptimistic=function(u){var h=V();h.memoizedState=h.baseState=u;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=_,h=Dc.bind(null,bn,!0,_),_.dispatch=h,[u,h]};var Zr={readContext:br,use:ce,useCallback:Nl,useContext:br,useEffect:Gp,useImperativeHandle:Fh,useInsertionEffect:Bv,useLayoutEffect:qu,useMemo:Vp,useReducer:ke,useRef:Rs,useState:function(){return ke(Ce)},useDebugValue:jo,useDeferredValue:function(u,h){var _=ee();return kp(_,Wt.memoizedState,u,h)},useTransition:function(){var u=ke(Ce)[0],h=ee().memoizedState;return[typeof u=="boolean"?u:le(u),h]},useSyncExternalStore:St,useId:Bc};Zr.useCacheRefresh=ro,Zr.useMemoCache=ye,Zr.useHostTransitionStatus=Ju,Zr.useFormState=_i,Zr.useActionState=_i,Zr.useOptimistic=function(u,h){var _=ee();return Ht(_,Wt,u,h)};var wa={readContext:br,use:ce,useCallback:Nl,useContext:br,useEffect:Gp,useImperativeHandle:Fh,useInsertionEffect:Bv,useLayoutEffect:qu,useMemo:Vp,useReducer:nt,useRef:Rs,useState:function(){return nt(Ce)},useDebugValue:jo,useDeferredValue:function(u,h){var _=ee();return Wt===null?Ku(_,u,h):kp(_,Wt.memoizedState,u,h)},useTransition:function(){var u=nt(Ce)[0],h=ee().memoizedState;return[typeof u=="boolean"?u:le(u),h]},useSyncExternalStore:St,useId:Bc};wa.useCacheRefresh=ro,wa.useMemoCache=ye,wa.useHostTransitionStatus=Ju,wa.useFormState=hr,wa.useActionState=hr,wa.useOptimistic=function(u,h){var _=ee();return Wt!==null?Ht(_,Wt,u,h):(_.baseState=u,[u,_.queue.dispatch])};var Fs={isMounted:function(u){return(u=u._reactInternals)?v(u)===u:!1},enqueueSetState:function(u,h,_){u=u._reactInternals;var E=Gi(),R=Et(E);R.payload=h,_!=null&&(R.callback=_),h=vt(u,R,E),h!==null&&(pr(h,u,E),dt(h,u,E))},enqueueReplaceState:function(u,h,_){u=u._reactInternals;var E=Gi(),R=Et(E);R.tag=1,R.payload=h,_!=null&&(R.callback=_),h=vt(u,R,E),h!==null&&(pr(h,u,E),dt(h,u,E))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var _=Gi(),E=Et(_);E.tag=2,h!=null&&(E.callback=h),h=vt(u,E,_),h!==null&&(pr(h,u,_),dt(h,u,_))}},Cd=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Rd=Error(r(461)),li=!1,wd={dehydrated:null,treeContext:null,retryLane:0},To=M(null),_s=null,Ba=null,cu=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(_,E){u.push(E)}};this.abort=function(){h.aborted=!0,u.forEach(function(_){return _()})}},F0=Aa.unstable_scheduleCallback,H0=Aa.unstable_NormalPriority,pi={$$typeof:hs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Hm=tn.S;tn.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&ot(u,h),Hm!==null&&Hm(u,h)};var Hs=M(null),Gs=!1,Oi=!1,Gm=!1,Jn=typeof WeakSet=="function"?WeakSet:Set,ln=null,Mn=!1,Xt=null,vn=!1,Ti=null,Da=8192,uu={getCacheForType:function(u){var h=br(pi),_=h.data.get(u);return _===void 0&&(_=u(),h.data.set(u,_)),_}},fu=0,Qa=1,xi=2,xs=3,Vs=4;if(typeof Symbol=="function"&&Symbol.for){var Ql=Symbol.for;fu=Ql("selector.component"),Qa=Ql("selector.has_pseudo_class"),xi=Ql("selector.role"),xs=Ql("selector.test_id"),Vs=Ql("selector.text")}var es=typeof WeakMap=="function"?WeakMap:Map,In=0,Zn=null,Kt=null,Cn=0,ii=0,Lr=null,ts=!1,Oa=!1,or=!1,Ir=0,ci=0,Ua=0,Co=0,Lf=0,Na=0,ks=0,ec=null,Ui=null,Bd=!1,$r=0,hu=1/0,If=null,bl=null,bs=!1,Xs=null,tc=0,Sl=0,Dd=null,du=0,Od=null;return hn.attemptContinuousHydration=function(u){if(u.tag===13){var h=Ze(u,67108864);h!==null&&pr(h,u,67108864),yf(u,67108864)}},hn.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Gi(),_=Ze(u,h);_!==null&&pr(_,u,h),yf(u,h)}},hn.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=D(u.pendingLanes);if(h!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;h;){var _=1<<31-Jr(h);u.entanglements[1]|=_,h&=~_}Je(u),(In&6)===0&&(hu=Ka()+500,J(0))}}break;case 13:h=Ze(u,2),h!==null&&pr(h,u,2),pf(),yf(u,2)}},hn.batchedUpdates=function(u,h){return u(h)},hn.createComponentSelector=function(u){return{$$typeof:fu,value:u}},hn.createContainer=function(u,h,_,E,R,O,q,ue,Ee,qe){return Zv(u,h,!1,null,_,E,O,q,ue,Ee,qe,null)},hn.createHasPseudoClassSelector=function(u){return{$$typeof:Qa,value:u}},hn.createHydrationContainer=function(u,h,_,E,R,O,q,ue,Ee,qe,ht,Mt,Ct){return u=Zv(_,E,!0,u,R,O,ue,Ee,qe,ht,Mt,Ct),u.context=Zi(null),_=u.current,E=Gi(),R=Et(E),R.callback=h??null,vt(_,R,E),u.current.lanes=E,Y(u,E),Je(u),u},hn.createPortal=function(u,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:E==null?null:""+E,children:u,containerInfo:h,implementation:_}},hn.createRoleSelector=function(u){return{$$typeof:xi,value:u}},hn.createTestNameSelector=function(u){return{$$typeof:xs,value:u}},hn.createTextSelector=function(u){return{$$typeof:Vs,value:u}},hn.defaultOnCaughtError=function(u){console.error(u)},hn.defaultOnRecoverableError=function(u){Cd(u)},hn.defaultOnUncaughtError=function(u){Cd(u)},hn.deferredUpdates=function(u){var h=tn.T,_=xo();try{return Nr(32),tn.T=null,u()}finally{Nr(_),tn.T=h}},hn.discreteUpdates=function(u,h,_,E,R){var O=tn.T,q=xo();try{return Nr(2),tn.T=null,u(h,_,E,R)}finally{Nr(q),tn.T=O,In===0&&(hu=Ka()+500)}},hn.findAllNodes=hf,hn.findBoundingRects=function(u,h){if(!ul)throw Error(r(363));h=hf(u,h),u=[];for(var _=0;_<h.length;_++)u.push(Tm(h[_]));for(h=u.length-1;0<h;h--){_=u[h];for(var E=_.x,R=E+_.width,O=_.y,q=O+_.height,ue=h-1;0<=ue;ue--)if(h!==ue){var Ee=u[ue],qe=Ee.x,ht=qe+Ee.width,Mt=Ee.y,Ct=Mt+Ee.height;if(E>=qe&&O>=Mt&&R<=ht&&q<=Ct){u.splice(h,1);break}else if(E!==qe||_.width!==Ee.width||Ct<O||Mt>q){if(!(O!==Mt||_.height!==Ee.height||ht<E||qe>R)){qe>E&&(Ee.width+=qe-E,Ee.x=E),ht<R&&(Ee.width=R-qe),u.splice(h,1);break}}else{Mt>O&&(Ee.height+=Mt-O,Ee.y=O),Ct<q&&(Ee.height=q-Mt),u.splice(h,1);break}}}return u},hn.findHostInstance=rd,hn.findHostInstanceWithNoPortals=function(u){return u=x(u),u=u!==null?T(u):null,u===null?null:Zc(u.stateNode)},hn.findHostInstanceWithWarning=function(u){return rd(u)},hn.flushPassiveEffects=fs,hn.flushSyncFromReconciler=function(u){var h=In;In|=1;var _=tn.T,E=xo();try{if(Nr(2),tn.T=null,u)return u()}finally{Nr(E),tn.T=_,In=h,(In&6)===0&&J(0)}},hn.flushSyncWork=pf,hn.focusWithin=function(u,h){if(!ul)throw Error(r(363));for(u=Gc(u),h=la(u,h),h=Array.from(h),u=0;u<h.length;){var _=h[u++],E=_.tag;if(!Qc(_)){if((E===5||E===26||E===27)&&s0(_.stateNode))return!0;for(_=_.child;_!==null;)h.push(_),_=_.sibling}}return!1},hn.getFindAllNodesFailureDescription=function(u,h){if(!ul)throw Error(r(363));var _=0,E=[];u=[Gc(u),0];for(var R=0;R<u.length;){var O=u[R++],q=O.tag,ue=u[R++],Ee=h[ue];if((q!==5&&q!==26&&q!==27||!Qc(O))&&(tl(O,Ee)&&(E.push(cm(Ee)),ue++,ue>_&&(_=ue)),ue<h.length))for(O=O.child;O!==null;)u.push(O,ue),O=O.sibling}if(_<h.length){for(u=[];_<h.length;_++)u.push(cm(h[_]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},hn.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Zc(u.child.stateNode);default:return u.child.stateNode}},hn.injectIntoDevTools=function(){var u={bundleType:0,version:xm,rendererPackageName:Af,currentDispatcherRef:tn,findFiberByHostInstance:t0,reconcilerVersion:"19.0.0"};if(Jc!==null&&(u.rendererConfig=Jc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Xi=h.inject(u),ua=h}catch{}u=!!h.checkDCE}}return u},hn.isAlreadyRendering=function(){return!1},hn.observeVisibleRects=function(u,h,_,E){if(!ul)throw Error(r(363));u=hf(u,h);var R=o0(u,_,E).disconnect;return{disconnect:function(){R()}}},hn.shouldError=function(){return null},hn.shouldSuspend=function(){return!1},hn.startHostTransition=function(u,h,_,E){if(u.tag!==5)throw Error(r(476));var R=ws(u).queue;wc(u,R,h,cl,_===null?i:function(){var O=ws(u).next.queue;return Wo(u,O,{},Gi()),_(E)})},hn.updateContainer=function(u,h,_,E){var R=h.current,O=Gi();return Yc(R,O,u,h,_,E),O},hn.updateContainerSync=function(u,h,_,E){return h.tag===0&&fs(),Yc(h.current,2,u,h,_,E),2},hn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(WS)),WS.exports}var XC;function zH(){return XC||(XC=1,jS.exports=PH()),jS.exports}var FH=zH();const HH=Bh(FH);var YC=JB();const GH=n=>typeof n=="object"&&typeof n.then=="function",ch=[];function ZB(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function $B(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of ch)if(ZB(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=ch.indexOf(r);a!==-1&&ch.splice(a,1)},promise:(GH(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(ch.push(r),!t)throw r.promise}const VH=(n,e,t)=>$B(n,e,!1,t),kH=(n,e,t)=>void $B(n,e,!0,t),XH=n=>{if(n===void 0||n.length===0)ch.splice(0,ch.length);else{const e=ch.find(t=>ZB(n,t.keys,t.equal));e&&e.remove()}};function ME(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=ME(i,e,t);if(r)return r;i=e?null:i.sibling}}function QB(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const TE=QB(F.createContext(null));let eD=class extends F.Component{render(){return F.createElement(TE.Provider,{value:this._reactInternals},this.props.children)}};function tD(){const n=F.useContext(TE);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=ME(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const YH=Symbol.for("react.context"),jH=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===YH;function WH(){const n=tD(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;jH(i)&&i!==TE&&!e.has(i)&&e.set(i,F.use(QB(i))),t=t.return}return e}function qH(){const n=WH();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,{...i,value:n.get(t)})),e=>F.createElement(eD,{...e})),[n])}function nD(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const iD=n=>n&&n.isOrthographicCamera,KH=n=>n&&n.hasOwnProperty("current"),JH=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),_v=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function CE(n){const e=F.useRef(n);return _v(()=>void(e.current=n),[n]),e}function ZH(){const n=tD(),e=qH();return F.useMemo(()=>({children:t})=>{const r=!!ME(n,!0,a=>a.type===F.StrictMode)?F.StrictMode:F.Fragment;return _n.jsx(r,{children:_n.jsx(e,{children:t})})},[n,e])}function $H({set:n}){return _v(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const QH=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function rD(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function np(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Ni={obj:n=>n===Object(n)&&!Ni.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ni.str(n)||Ni.num(n)||Ni.boo(n))return n===e;const a=Ni.obj(n);if(a&&i==="reference")return n===e;const o=Ni.arr(n);if(o&&t==="reference")return n===e;if((o||a)&&n===e)return!0;let c;for(c in n)if(!(c in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(c in r?e:n)if(!Ni.equ(n[c],e[c],{strict:r,objects:"reference"}))return!1}else for(c in r?e:n)if(n[c]!==e[c])return!1;if(Ni.und(c)){if(o&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function eG(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function tG(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const aD=["children","key","ref"];function nG(n){const e={};for(const t in n)aD.includes(t)||(e[t]=n[t]);return e}function ex(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:nG(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function Zg(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const jC=/-\d+$/;function tx(n,e){if(Ni.str(e.props.attach)){if(jC.test(e.props.attach)){const r=e.props.attach.replace(jC,""),{root:a,key:o}=Zg(n.object,r);Array.isArray(a[o])||(a[o]=[])}const{root:t,key:i}=Zg(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Ni.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function nx(n,e){if(Ni.str(e.props.attach)){const{root:t,key:i}=Zg(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const tA=[...aD,"args","dispose","attach","object","onUpdate","dispose"],WC=new Map;function iG(n){let e=WC.get(n.constructor);try{e||(e=new n.constructor,WC.set(n.constructor,e))}catch{}return e}function rG(n,e){const t={};for(const i in e)if(!tA.includes(i)&&!Ni.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(tA.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=Zg(n.object,i);if(r.constructor&&r.constructor.length===0){const o=iG(r);Ni.und(o)||(t[a]=o[a])}else t[a]=0}return t}const aG=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],sG=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function wl(n,e){var t;const i=n.__r3f,r=i&&nD(i).getState(),a=i==null?void 0:i.eventCount;for(const c in e){let f=e[c];if(tA.includes(c))continue;if(i&&sG.test(c)){typeof f=="function"?i.handlers[c]=f:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;continue}if(f===void 0)continue;let{root:p,key:m,target:v}=Zg(n,c);if(v instanceof Ap&&f instanceof Ap)v.mask=f.mask;else if(v instanceof xt&&JH(f))v.set(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&f!=null&&f.constructor&&v.constructor===f.constructor)v.copy(f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(f))typeof v.fromArray=="function"?v.fromArray(f):v.set(...f);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof f=="number")typeof v.setScalar=="function"?v.setScalar(f):v.set(f);else{var o;p[m]=f,r&&!r.linear&&aG.includes(m)&&(o=p[m])!=null&&o.isTexture&&p[m].format===ur&&p[m].type===nr&&(p[m].colorSpace=Wn)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const c=i.object,f=r.internal.interaction.indexOf(c);f>-1&&r.internal.interaction.splice(f,1),i.eventCount&&c.raycast!==null&&r.internal.interaction.push(c)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Np(i),n}function Np(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function sD(n,e){n.manual||(iD(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const Ha=n=>n==null?void 0:n.isObject3D;function qy(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function oD(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function oG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{oD(t.capturedMap,e,i,r)})}function lG(n){function e(f){const{internal:p}=n.getState(),m=f.offsetX-p.initialClick[0],v=f.offsetY-p.initialClick[1];return Math.round(Math.sqrt(m*m+v*v))}function t(f){return f.filter(p=>["Move","Over","Enter","Out","Leave"].some(m=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+m]}))}function i(f,p){const m=n.getState(),v=new Set,y=[],x=p?p(m.internal.interaction):m.internal.interaction;for(let A=0;A<x.length;A++){const w=np(x[A]);w&&(w.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(f,m);function b(A){const w=np(A);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var B;w.events.compute==null||w.events.compute(f,w,(B=w.previousRoot)==null?void 0:B.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(A,!0):[]}let T=x.flatMap(b).sort((A,w)=>{const B=np(A.object),D=np(w.object);return!B||!D?A.distance-w.distance:D.events.priority-B.events.priority||A.distance-w.distance}).filter(A=>{const w=qy(A);return v.has(w)?!1:(v.add(w),!0)});m.events.filter&&(T=m.events.filter(T,m));for(const A of T){let w=A.object;for(;w;){var M;(M=w.__r3f)!=null&&M.eventCount&&y.push({...A,eventObject:w}),w=w.parent}}if("pointerId"in f&&m.internal.capturedMap.has(f.pointerId))for(let A of m.internal.capturedMap.get(f.pointerId).values())v.has(qy(A.intersection))||y.push(A.intersection);return y}function r(f,p,m,v){if(f.length){const y={stopped:!1};for(const x of f){let b=np(x.object);if(b||x.object.traverseAncestors(T=>{const M=np(T);if(M)return b=M,!1}),b){const{raycaster:T,pointer:M,camera:A,internal:w}=b,B=new $(M.x,M.y,0).unproject(A),D=L=>{var U,Y;return(U=(Y=w.capturedMap.get(L))==null?void 0:Y.has(x.eventObject))!=null?U:!1},I=L=>{const U={intersection:x,target:p.target};w.capturedMap.has(L)?w.capturedMap.get(L).set(x.eventObject,U):w.capturedMap.set(L,new Map([[x.eventObject,U]])),p.target.setPointerCapture(L)},N=L=>{const U=w.capturedMap.get(L);U&&oD(w.capturedMap,x.eventObject,U,L)};let H={};for(let L in p){let U=p[L];typeof U!="function"&&(H[L]=U)}let P={...x,...H,pointer:M,intersections:f,stopped:y.stopped,delta:m,unprojectedPoint:B,ray:T.ray,camera:A,stopPropagation(){const L="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!L||L.has(x.eventObject))&&(P.stopped=y.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(U=>U.eventObject===x.eventObject))){const U=f.slice(0,f.indexOf(x));a([...U,x])}},target:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:N},currentTarget:{hasPointerCapture:D,setPointerCapture:I,releasePointerCapture:N},nativeEvent:p};if(v(P),y.stopped===!0)break}}}return f}function a(f){const{internal:p}=n.getState();for(const m of p.hovered.values())if(!f.length||!f.find(v=>v.object===m.object&&v.index===m.index&&v.instanceId===m.instanceId)){const y=m.eventObject.__r3f;if(p.hovered.delete(qy(m)),y!=null&&y.eventCount){const x=y.handlers,b={...m,intersections:f};x.onPointerOut==null||x.onPointerOut(b),x.onPointerLeave==null||x.onPointerLeave(b)}}}function o(f,p){for(let m=0;m<p.length;m++){const v=p[m].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:m}=n.getState();"pointerId"in p&&m.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(p.pointerId)&&(m.capturedMap.delete(p.pointerId),a([]))})}}return function(m){const{onPointerMissed:v,internal:y}=n.getState();y.lastEvent.current=m;const x=f==="onPointerMove",b=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",M=i(m,x?t:void 0),A=b?e(m):0;f==="onPointerDown"&&(y.initialClick=[m.offsetX,m.offsetY],y.initialHits=M.map(B=>B.eventObject)),b&&!M.length&&A<=2&&(o(m,y.interaction),v&&v(m)),x&&a(M);function w(B){const D=B.eventObject,I=D.__r3f;if(!(I!=null&&I.eventCount))return;const N=I.handlers;if(x){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const H=qy(B),P=y.hovered.get(H);P?P.stopped&&B.stopPropagation():(y.hovered.set(H,B),N.onPointerOver==null||N.onPointerOver(B),N.onPointerEnter==null||N.onPointerEnter(B))}N.onPointerMove==null||N.onPointerMove(B)}else{const H=N[f];H?(!b||y.initialHits.includes(D))&&(o(m,y.interaction.filter(P=>!y.initialHits.includes(P))),H(B)):b&&y.initialHits.includes(D)&&o(m,y.interaction.filter(P=>!y.initialHits.includes(P)))}}r(M,m,A,w)}}return{handlePointer:c}}const qC=n=>!!(n!=null&&n.render),RE=F.createContext(null),cG=(n,e)=>{const t=KB((c,f)=>{const p=new $,m=new $,v=new $;function y(A=f().camera,w=m,B=f().size){const{width:D,height:I,top:N,left:H}=B,P=D/I;w.isVector3?v.copy(w):v.set(...w);const L=A.getWorldPosition(p).distanceTo(v);if(iD(A))return{width:D/A.zoom,height:I/A.zoom,top:N,left:H,factor:1,distance:L,aspect:P};{const U=A.fov*Math.PI/180,Y=2*Math.tan(U/2)*L,ie=Y*(D/I);return{width:ie,height:Y,top:N,left:H,factor:D/ie,distance:L,aspect:P}}}let x;const b=A=>c(w=>({performance:{...w.performance,current:A}})),T=new Ve;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(A=1)=>n(f(),A),advance:(A,w)=>e(A,w,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yE,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=f();x&&clearTimeout(x),A.performance.current!==A.performance.min&&b(A.performance.min),x=setTimeout(()=>b(f().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:A=>c(w=>({...w,events:{...w.events,...A}})),setSize:(A,w,B=0,D=0)=>{const I=f().camera,N={width:A,height:w,top:B,left:D};c(H=>({size:N,viewport:{...H.viewport,...y(I,m,N)}}))},setDpr:A=>c(w=>{const B=rD(A);return{viewport:{...w.viewport,dpr:B,initialDpr:w.viewport.initialDpr||B}}}),setFrameloop:(A="always")=>{const w=f().clock;w.stop(),w.elapsedTime=0,A!=="never"&&(w.start(),w.elapsedTime=0),c(()=>({frameloop:A}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(A,w,B)=>{const D=f().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:A,priority:w,store:B}),D.subscribers=D.subscribers.sort((I,N)=>I.priority-N.priority),()=>{const I=f().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(w>0?1:0),I.subscribers=I.subscribers.filter(N=>N.ref!==A))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:p,gl:m,set:v}=t.getState();if(f.width!==r.width||f.height!==r.height||p.dpr!==a){r=f,a=p.dpr,sD(c,f),p.dpr>0&&m.setPixelRatio(p.dpr);const y=typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(f.width,f.height,y)}c!==o&&(o=c,v(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>n(c)),t};function wE(){const n=F.useContext(RE);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Fr(n=t=>t,e){return wE()(n,e)}function xv(n,e=0){const t=wE(),i=t.getState().internal.subscribe,r=CE(n);return _v(()=>i(r,e,t),[e,i,t]),null}const KC=new WeakMap,uG=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function lD(n,e){return function(t,...i){let r;return uG(t)?(r=KC.get(t),r||(r=new t,KC.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((o,c)=>r.load(a,f=>{Ha(f==null?void 0:f.scene)&&Object.assign(f,eG(f.scene)),o(f)},e,f=>c(new Error(`Could not load ${a}: ${f==null?void 0:f.message}`))))))}}function Ec(n,e,t,i){const r=Array.isArray(e)?e:[e],a=VH(lD(t,i),[n,...r],{equal:Ni.equ});return Array.isArray(e)?a:a[0]}Ec.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return kH(lD(t),[n,...i])};Ec.clear=function(n,e){const t=Array.isArray(e)?e:[e];return XH([n,...t])};function fG(n){const e=HH(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const cD=0,Cp={},hG=/^three(?=[A-Z])/,tb=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let dG=0;const pG=n=>typeof n=="function";function BE(n){if(pG(n)){const e=`${dG++}`;return Cp[e]=n,e}else Object.assign(Cp,n)}function uD(n,e){const t=tb(n),i=Cp[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function mG(n,e,t){var i;return n=tb(n)in Cp?n:n.replace(hG,""),uD(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,ex(e.object,t,n,e)}function gG(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?nx(n.parent,n):Ha(n.object)&&(n.object.visible=!1),n.isHidden=!0,Np(n)}}function fD(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?tx(n.parent,n):Ha(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Np(n)}}function DE(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const o=Cp[tb(e.type)];e.object=(r=e.props.object)!=null?r:new o(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(wl(e.object,e.props),e.props.attach)tx(n,e);else if(Ha(e.object)&&Ha(n.object)){const o=n.object.children.indexOf(t==null?void 0:t.object);if(t&&o!==-1){const c=n.object.children.indexOf(e.object);if(c!==-1){n.object.children.splice(c,1);const f=c<o?o-1:o;n.object.children.splice(f,0,e.object)}else e.object.parent=n.object,n.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const o of e.children)DE(e,o);Np(e)}}function JS(n,e){e&&(e.parent=n,n.children.push(e),DE(n,e))}function JC(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),DE(n,e,t)}function hD(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():YC.unstable_scheduleCallback(YC.unstable_IdlePriority,e)}}function nA(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?nx(n,e):Ha(e.object)&&Ha(n.object)&&(n.object.remove(e.object),oG(nD(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const o=e.children[a];nA(e,o,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&hD(e.object),t===void 0&&Np(e)}function vG(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const h_=[];function yG(){for(const[t]of h_){const i=t.parent;if(i){t.props.attach?nx(i,t):Ha(t.object)&&Ha(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?nx(t,r):Ha(r.object)&&Ha(t.object)&&t.object.remove(r.object)}t.isHidden&&fD(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&hD(t.object)}for(const[t,i,r]of h_){t.props=i;const a=t.parent;if(a){var n,e;const o=Cp[tb(t.type)];t.object=(n=t.props.object)!=null?n:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,vG(r,t.object),wl(t.object,t.props),t.props.attach?tx(a,t):Ha(t.object)&&Ha(a.object)&&a.object.add(t.object);for(const c of t.children)c.props.attach?tx(t,c):Ha(c.object)&&Ha(t.object)&&t.object.add(c.object);Np(t)}}h_.length=0}const ZS=()=>{},ZC={};let Ky=cD;const _G=0,xG=4,ix=fG({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:mG,removeChild:nA,appendChild:JS,appendInitialChild:JS,insertBefore:JC,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||JS(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||nA(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||JC(i,e,t)},getRootHostContext:()=>ZC,getChildHostContext:()=>ZC,commitUpdate(n,e,t,i,r){var a,o,c;uD(e,i);let f=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((o=t.args)==null?void 0:o.length)||(c=i.args)!=null&&c.some((m,v)=>{var y;return m!==((y=t.args)==null?void 0:y[v])}))&&(f=!0),f)h_.push([n,{...i},r]);else{const m=rG(n,i);Object.keys(m).length&&(Object.assign(n.props,m),wl(n.object,m))}(r.sibling===null||(r.flags&xG)===_G)&&yG()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>ex(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:gG,unhideInstance:fD,createTextInstance:ZS,hideTextInstance:ZS,unhideTextInstance:ZS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){Ky=n},getCurrentUpdatePriority(){return Ky},resolveUpdatePriority(){var n;if(Ky!==cD)return Ky;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return f_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return f_.ContinuousEventPriority;default:return f_.DefaultEventPriority}},resetFormInstance(){}}),Ch=new Map,ip={objects:"shallow",strict:!1};function bG(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function SG(n){const e=Ch.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||cG(aA,QC),o=t||ix.createContainer(a,f_.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Ch.set(n,{fiber:o,store:a});let c,f,p=!1,m=null;return{async configure(v={}){let y;m=new Promise(se=>y=se);let{gl:x,size:b,scene:T,events:M,onCreated:A,shadows:w=!1,linear:B=!1,flat:D=!1,legacy:I=!1,orthographic:N=!1,frameloop:H="always",dpr:P=[1,2],performance:L,raycaster:U,camera:Y,onPointerMissed:ie}=v,Q=a.getState(),ae=Q.gl;if(!Q.gl){const se={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},Ae=typeof x=="function"?await x(se):x;qC(Ae)?ae=Ae:ae=new EE({...se,...x}),Q.set({gl:ae})}let he=Q.raycaster;he||Q.set({raycaster:he=new bE});const{params:X,...te}=U||{};if(Ni.equ(te,he,ip)||wl(he,{...te}),Ni.equ(X,he.params,ip)||wl(he,{params:{...he.params,...X}}),!Q.camera||Q.camera===f&&!Ni.equ(f,Y,ip)){f=Y;const se=Y==null?void 0:Y.isCamera,Ae=se?Y:N?new Bl(0,0,0,0,.1,1e3):new qi(75,0,.1,1e3);se||(Ae.position.z=5,Y&&(wl(Ae,Y),Ae.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(Ae.manual=!0,Ae.updateProjectionMatrix())),!Q.camera&&!(Y!=null&&Y.rotation)&&Ae.lookAt(0,0,0)),Q.set({camera:Ae}),he.camera=Ae}if(!Q.scene){let se;T!=null&&T.isScene?(se=T,ex(se,a,"",{})):(se=new bh,ex(se,a,"",{}),T&&wl(se,T)),Q.set({scene:se})}M&&!Q.events.handlers&&Q.set({events:M(a)});const ne=bG(n,b);if(Ni.equ(ne,Q.size,ip)||Q.setSize(ne.width,ne.height,ne.top,ne.left),P&&Q.viewport.dpr!==rD(P)&&Q.setDpr(P),Q.frameloop!==H&&Q.setFrameloop(H),Q.onPointerMissed||Q.set({onPointerMissed:ie}),L&&!Ni.equ(L,Q.performance,ip)&&Q.set(se=>({performance:{...se.performance,...L}})),!Q.xr){var be;const se=(ge,He)=>{const Le=a.getState();Le.frameloop!=="never"&&QC(ge,!0,Le,He)},Ae=()=>{const ge=a.getState();ge.gl.xr.enabled=ge.gl.xr.isPresenting,ge.gl.xr.setAnimationLoop(ge.gl.xr.isPresenting?se:null),ge.gl.xr.isPresenting||aA(ge)},De={connect(){const ge=a.getState().gl;ge.xr.addEventListener("sessionstart",Ae),ge.xr.addEventListener("sessionend",Ae)},disconnect(){const ge=a.getState().gl;ge.xr.removeEventListener("sessionstart",Ae),ge.xr.removeEventListener("sessionend",Ae)}};typeof((be=ae.xr)==null?void 0:be.addEventListener)=="function"&&De.connect(),Q.set({xr:De})}if(ae.shadowMap){const se=ae.shadowMap.enabled,Ae=ae.shadowMap.type;if(ae.shadowMap.enabled=!!w,Ni.boo(w))ae.shadowMap.type=Mg;else if(Ni.str(w)){var W;const De={basic:r2,percentage:Sx,soft:Mg,variance:Uo};ae.shadowMap.type=(W=De[w])!=null?W:Mg}else Ni.obj(w)&&Object.assign(ae.shadowMap,w);(se!==ae.shadowMap.enabled||Ae!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return Pn.enabled=!I,p||(ae.outputColorSpace=B?Ms:Wn,ae.toneMapping=D?Po:PA),Q.legacy!==I&&Q.set(()=>({legacy:I})),Q.linear!==B&&Q.set(()=>({linear:B})),Q.flat!==D&&Q.set(()=>({flat:D})),x&&!Ni.fun(x)&&!qC(x)&&!Ni.equ(x,ae,ip)&&wl(ae,x),c=A,p=!0,y(),this},render(v){return!p&&!m&&this.configure(),m.then(()=>{ix.updateContainer(_n.jsx(AG,{store:a,children:v,onCreated:c,rootElement:n}),o,null,()=>{})}),a},unmount(){dD(n)}}}function AG({store:n,children:e,onCreated:t,rootElement:i}){return _v(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),_n.jsx(RE.Provider,{value:n,children:e})}function dD(n,e){const t=Ch.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),ix.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,o,c,f;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(o=a.renderLists)==null||o.dispose==null||o.dispose(),(c=r.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=r.gl)!=null&&f.xr&&r.xr.disconnect(),tG(r.scene),Ch.delete(n)}catch{}},500)})}}function EG(n,e,t){return _n.jsx(MG,{children:n,container:e,state:t})}function MG({state:n={},children:e,container:t}){const{events:i,size:r,...a}=n,o=wE(),[c]=F.useState(()=>new bE),[f]=F.useState(()=>new Ve),p=CE((v,y)=>{let x;if(y.camera&&r){const b=y.camera;x=v.viewport.getCurrentViewport(b,new $,r),b!==v.camera&&sD(b,r)}return{...v,...y,scene:t,raycaster:c,pointer:f,mouse:f,previousRoot:o,events:{...v.events,...y.events,...i},size:{...v.size,...r},viewport:{...v.viewport,...x},setEvents:b=>y.set(T=>({...T,events:{...T.events,...b}}))}}),m=F.useMemo(()=>{const v=KB((x,b)=>({...a,set:x,get:b})),y=x=>v.setState(b=>p.current(x,b));return y(o.getState()),o.subscribe(y),v},[o,t]);return _n.jsx(_n.Fragment,{children:ix.createPortal(_n.jsx(RE.Provider,{value:m,children:e}),m,null)})}const TG=new Set,CG=new Set,RG=new Set;function $S(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ng(n,e){switch(n){case"before":return $S(TG,e);case"after":return $S(CG,e);case"tail":return $S(RG,e)}}let QS,e1;function iA(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),QS=e.internal.subscribers;for(let r=0;r<QS.length;r++)e1=QS[r],e1.ref.current(e1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let rx=!1,rA=!1,t1,$C,rp;function pD(n){$C=requestAnimationFrame(pD),rx=!0,t1=0,Ng("before",n),rA=!0;for(const t of Ch.values()){var e;rp=t.store.getState(),rp.internal.active&&(rp.frameloop==="always"||rp.internal.frames>0)&&!((e=rp.gl.xr)!=null&&e.isPresenting)&&(t1+=iA(n,rp))}if(rA=!1,Ng("after",n),t1===0)return Ng("tail",n),rx=!1,cancelAnimationFrame($C)}function aA(n,e=1){var t;if(!n)return Ch.forEach(i=>aA(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):rA?n.internal.frames=2:n.internal.frames=1,rx||(rx=!0,requestAnimationFrame(pD)))}function QC(n,e=!0,t,i){if(e&&Ng("before",n),t)iA(n,t,i);else for(const r of Ch.values())iA(n,r.store.getState());e&&Ng("after",n)}const n1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wG(n){const{handlePointer:e}=lG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(n1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const o=r.handlers[a],[c,f]=n1[a];t.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[o]=n1[r];i.connected.removeEventListener(o,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function eR(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function BG({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),f=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,m=F.useRef(!1);F.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[v,y,x]=F.useMemo(()=>{const A=()=>{if(!c.current.element)return;const{left:w,top:B,width:D,height:I,bottom:N,right:H,x:P,y:L}=c.current.element.getBoundingClientRect(),U={left:w,top:B,width:D,height:I,bottom:N,right:H,x:P,y:L};c.current.element instanceof HTMLElement&&i&&(U.height=c.current.element.offsetHeight,U.width=c.current.element.offsetWidth),Object.freeze(U),m.current&&!NG(c.current.lastBounds,U)&&o(c.current.lastBounds=U)};return[A,p?eR(A,p):A,f?eR(A,f):A]},[o,i,f,p]);function b(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function T(){c.current.element&&(c.current.resizeObserver=new r(x),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(A=>A.addEventListener("scroll",x,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const M=A=>{!A||A===c.current.element||(b(),c.current.element=A,c.current.scrollContainers=mD(A),T())};return OG(x,!!e),DG(y),F.useEffect(()=>{b(),T()},[e,x,y]),F.useEffect(()=>b,[]),[M,a,v]}function DG(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function OG(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function mD(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...mD(n.parentElement)]}const UG=["x","y","top","bottom","left","right","width","height"],NG=(n,e)=>UG.every(t=>n[t]===e[t]);function LG({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:o=wG,eventSource:c,eventPrefix:f,shadows:p,linear:m,flat:v,legacy:y,orthographic:x,frameloop:b,dpr:T,performance:M,raycaster:A,camera:w,scene:B,onPointerMissed:D,onCreated:I,...N}){F.useMemo(()=>BE(AH),[]);const H=ZH(),[P,L]=BG({scroll:!0,debounce:{scroll:50,resize:0},...i}),U=F.useRef(null),Y=F.useRef(null);F.useImperativeHandle(n,()=>U.current);const ie=CE(D),[Q,ae]=F.useState(!1),[he,X]=F.useState(!1);if(Q)throw Q;if(he)throw he;const te=F.useRef(null);_v(()=>{const be=U.current;if(L.width>0&&L.height>0&&be){te.current||(te.current=SG(be));async function W(){await te.current.configure({gl:a,scene:B,events:o,shadows:p,linear:m,flat:v,legacy:y,orthographic:x,frameloop:b,dpr:T,performance:M,raycaster:A,camera:w,size:L,onPointerMissed:(...se)=>ie.current==null?void 0:ie.current(...se),onCreated:se=>{se.events.connect==null||se.events.connect(c?KH(c)?c.current:c:Y.current),f&&se.setEvents({compute:(Ae,De)=>{const ge=Ae[f+"X"],He=Ae[f+"Y"];De.pointer.set(ge/De.size.width*2-1,-(He/De.size.height)*2+1),De.raycaster.setFromCamera(De.pointer,De.camera)}}),I==null||I(se)}}),te.current.render(_n.jsx(H,{children:_n.jsx(QH,{set:X,children:_n.jsx(F.Suspense,{fallback:_n.jsx($H,{set:ae}),children:e??null})})}))}W()}}),F.useEffect(()=>{const be=U.current;if(be)return()=>dD(be)},[]);const ne=c?"none":"auto";return _n.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...r},...N,children:_n.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:_n.jsx("canvas",{ref:U,style:{display:"block"},children:t})})})}function IG(n){return _n.jsx(eD,{children:_n.jsx(LG,{...n})})}function zi(){return zi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zi.apply(null,arguments)}function PG(n,e,t){return Math.max(e,Math.min(n,t))}const va={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function tR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function nR(n,e,t,i=.15){return i===0?PG(n,e,t):n<e?-tR(e-n,t-e,i)+e:n>t?+tR(n-t,t-e,i)+t:n}function zG(n,[e,t],[i,r]){const[[a,o],[c,f]]=n;return[nR(e,a,o,i),nR(t,c,f,r)]}function FG(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HG(n){var e=FG(n,"string");return typeof e=="symbol"?e:String(e)}function rs(n,e,t){return e=HG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ji(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(t),!0).forEach(function(i){rs(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const gD={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function rR(n){return n?n[0].toUpperCase()+n.slice(1):""}const GG=["enter","leave"];function VG(n=!1,e){return n&&!GG.includes(e)}function kG(n,e="",t=!1){const i=gD[n],r=i&&i[e]||e;return"on"+rR(n)+rR(r)+(VG(t,r)?"Capture":"")}const XG=["gotpointercapture","lostpointercapture"];function YG(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=XG.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function jG(n,e=""){const t=gD[n],i=t&&t[e]||e;return n+i}function nb(n){return"touches"in n}function vD(n){return nb(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function WG(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function qG(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function yD(n){return nb(n)?qG(n)[0]:n}function KG(n){return WG(n).map(e=>e.identifier)}function i1(n){const e=yD(n);return nb(n)?e.identifier:e.pointerId}function aR(n){const e=yD(n);return[e.clientX,e.clientY]}function JG(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a})}return e}function ax(n,...e){return typeof n=="function"?n(...e):n}function ZG(){}function $G(...n){return n.length===0?ZG:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function sR(n,e){return Object.assign({},e,n||{})}const QG=32;class e5{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?ax(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let a=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,JG(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const N=t._delta.map(Math.abs);va.addTo(t._distance,N)}this.axisIntent&&this.axisIntent(e);const[o,c]=t._movement,[f,p]=i.threshold,{_step:m,values:v}=t;if(i.hasCustomTransform?(m[0]===!1&&(m[0]=Math.abs(o)>=f&&v[0]),m[1]===!1&&(m[1]=Math.abs(c)>=p&&v[1])):(m[0]===!1&&(m[0]=Math.abs(o)>=f&&Math.sign(o)*f),m[1]===!1&&(m[1]=Math.abs(c)>=p&&Math.sign(c)*p)),t.intentional=m[0]!==!1||m[1]!==!1,!t.intentional)return;const y=[0,0];if(i.hasCustomTransform){const[N,H]=v;y[0]=m[0]!==!1?N-m[0]:0,y[1]=m[1]!==!1?H-m[1]:0}else y[0]=m[0]!==!1?o-m[0]:0,y[1]=m[1]!==!1?c-m[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(y);const x=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=ax(i.bounds,t)),this.setup&&this.setup()),t.movement=y,this.computeOffset()));const[T,M]=t.offset,[[A,w],[B,D]]=t._bounds;t.overflow=[T<A?-1:T>w?1:0,M<B?-1:M>D?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const I=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=zG(t._bounds,t.offset,I),t.delta=va.sub(t.offset,x),this.computeMovement(),b&&(!t.last||a>QG)){t.delta=va.sub(t.offset,x);const N=t.delta.map(Math.abs);va.addTo(t.distance,N),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[N[0]/a,N[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Ji(Ji(Ji({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function t5([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class n5 extends e5{constructor(...e){super(...e),rs(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=va.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=va.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[vD(e)]:i.axisThreshold;t.axis=t5(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const i5=n=>n,oR=.15,_D={enabled(n=!0){return n},eventOptions(n,e,t){return Ji(Ji({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[oR,oR];case!1:return[0,0];default:return va.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return va.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||i5},threshold(n){return va.toVector(n,0)}},r5=0,bv=Ji(Ji({},_D),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=r5){return n},bounds(n={}){if(typeof n=="function")return a=>bv.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),lR={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class a5 extends n5{constructor(...e){super(...e),rs(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=bv.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=i1(e),i._pointerActive=!0,this.computeValues(aR(e)),this.computeInitial(),t.preventScrollAxis&&vD(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=i1(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const a=aR(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=va.sub(a,t._values),this.computeValues(a)),va.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=i1(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=t._distance;if(t.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[c,f]=t._delta,[p,m]=t._movement,[v,y]=i.swipe.velocity,[x,b]=i.swipe.distance,T=i.swipe.duration;if(t.elapsedTime<T){const M=Math.abs(c/t.timeDelta),A=Math.abs(f/t.timeDelta);M>v&&Math.abs(p)>x&&(t.swipe[0]=Math.sign(c)),A>y&&Math.abs(m)>b&&(t.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,s5(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=lR[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,va.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in lR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function s5(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Sv=typeof window<"u"&&window.document&&window.document.createElement;function xD(){return Sv&&"ontouchstart"in window}function o5(){return xD()||Sv&&window.navigator.maxTouchPoints>1}function l5(){return Sv&&"onpointerdown"in window}function c5(){return Sv&&"exitPointerLock"in window.document}function u5(){try{return"constructor"in GestureEvent}catch{return!1}}const Js={isBrowser:Sv,gesture:u5(),touch:xD(),touchscreen:o5(),pointer:l5(),pointerLock:c5()},f5=250,h5=180,d5=.5,p5=50,m5=250,g5=10,cR={mouse:0,touch:0,pen:8},v5=Ji(Ji({},bv),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Js.pointerLock,Js.touch&&t?"touch":this.pointerLock?"mouse":Js.pointer&&!r?"pointer":Js.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?f5:void 0,!(!Js.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const a=va.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,a},swipe({velocity:n=d5,distance:e=p5,duration:t=m5}={}){return{velocity:this.transform(va.toVector(n)),distance:this.transform(va.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return h5;case!1:return 0;default:return n}},axisThreshold(n){return n?Ji(Ji({},cR),n):cR},keyboardDisplacement(n=g5){return n}});Ji(Ji({},_D),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Js.touch&&Js.gesture)return"gesture";if(Js.touch&&i)return"touch";if(Js.touchscreen){if(Js.pointer)return"pointer";if(Js.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=o=>{const c=sR(ax(t,o),{min:-1/0,max:1/0});return[c.min,c.max]},a=o=>{const c=sR(ax(i,o),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof i!="function"?[r(),a()]:o=>[r(o),a(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",va.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Ji(Ji({},bv),{},{mouseOnly:(n=!0)=>n});Ji(Ji({},bv),{},{mouseOnly:(n=!0)=>n});const bD=new Map,sA=new Map;function y5(n){bD.set(n.key,n.engine),sA.set(n.key,n.resolver)}const _5={key:"drag",engine:a5,resolver:v5};function x5(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function b5(n,e){if(n==null)return{};var t=x5(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const S5={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Js.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},A5=["target","eventOptions","window","enabled","transform"];function d_(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=d_(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function E5(n,e,t={}){const i=n,{target:r,eventOptions:a,window:o,enabled:c,transform:f}=i,p=b5(i,A5);if(t.shared=d_({target:r,eventOptions:a,window:o,enabled:c,transform:f},S5),e){const m=sA.get(e);t[e]=d_(Ji({shared:t.shared},p),m)}else for(const m in p){const v=sA.get(m);v&&(t[m]=d_(Ji({shared:t.shared},p[m]),v))}return t}class SD{constructor(e,t){rs(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,a){const o=this._listeners,c=jG(t,i),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},p=Ji(Ji({},f),a);e.addEventListener(c,r,p);const m=()=>{e.removeEventListener(c,r,p),o.delete(m)};return o.add(m),m}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class M5{constructor(){rs(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class T5{constructor(e){rs(this,"gestures",new Set),rs(this,"_targetEventStore",new SD(this)),rs(this,"gestureEventStores",{}),rs(this,"gestureTimeoutStores",{}),rs(this,"handlers",{}),rs(this,"config",{}),rs(this,"pointerIds",new Set),rs(this,"touchIds",new Set),rs(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),C5(this,e)}setEventIds(e){if(nb(e))return this.touchIds=new Set(KG(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=E5(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const o of this.gestures){const c=this.config[o],f=uR(i,c.eventOptions,!!r);if(c.enabled){const p=bD.get(o);new p(this,e,o).bind(f)}}const a=uR(i,t.eventOptions,!!r);for(const o in this.nativeHandlers)a(o,"",c=>this.nativeHandlers[o](Ji(Ji({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const a in i)i[a]=$G(...i[a]);if(!r)return i;for(const a in i){const{device:o,capture:c,passive:f}=YG(a);this._targetEventStore.add(r,o,"",i[a],{capture:c,passive:f})}}}}function ap(n,e){n.gestures.add(e),n.gestureEventStores[e]=new SD(n,e),n.gestureTimeoutStores[e]=new M5}function C5(n,e){e.drag&&ap(n,"drag"),e.wheel&&ap(n,"wheel"),e.scroll&&ap(n,"scroll"),e.move&&ap(n,"move"),e.pinch&&ap(n,"pinch"),e.hover&&ap(n,"hover")}const uR=(n,e,t)=>(i,r,a,o={},c=!1)=>{var f,p;const m=(f=o.capture)!==null&&f!==void 0?f:e.capture,v=(p=o.passive)!==null&&p!==void 0?p:e.passive;let y=c?i:kG(i,r,m);t&&v&&(y+="Passive"),n[y]=n[y]||[],n[y].push(a)};function R5(n,e={},t,i){const r=fe.useMemo(()=>new T5(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),fe.useEffect(r.effect.bind(r)),fe.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function w5(n,e){return y5(_5),R5({drag:n},e||{},"drag")}const OE=parseInt(Dh.replace(/\D+/g,""));function fR(n,e){if(e===L2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===K_||e===XA){let t=n.getIndex();if(t===null){const o=[],c=n.getAttribute("position");if(c!==void 0){for(let f=0;f<c.count;f++)o.push(f);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===K_)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(r),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var Zs=Uint8Array,Uu=Uint16Array,oA=Uint32Array,AD=new Zs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ED=new Zs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),B5=new Zs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MD=function(n,e){for(var t=new Uu(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new oA(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return[t,r]},TD=MD(AD,2),CD=TD[0],D5=TD[1];CD[28]=258,D5[258]=28;var O5=MD(ED,0),U5=O5[0],lA=new Uu(32768);for(var Ci=0;Ci<32768;++Ci){var Cu=(Ci&43690)>>>1|(Ci&21845)<<1;Cu=(Cu&52428)>>>2|(Cu&13107)<<2,Cu=(Cu&61680)>>>4|(Cu&3855)<<4,lA[Ci]=((Cu&65280)>>>8|(Cu&255)<<8)>>>1}var Lg=function(n,e,t){for(var i=n.length,r=0,a=new Uu(e);r<i;++r)++a[n[r]-1];var o=new Uu(e);for(r=0;r<e;++r)o[r]=o[r-1]+a[r-1]<<1;var c;if(t){c=new Uu(1<<e);var f=15-e;for(r=0;r<i;++r)if(n[r])for(var p=r<<4|n[r],m=e-n[r],v=o[n[r]-1]++<<m,y=v|(1<<m)-1;v<=y;++v)c[lA[v]>>>f]=p}else for(c=new Uu(i),r=0;r<i;++r)n[r]&&(c[r]=lA[o[n[r]-1]++]>>>15-n[r]);return c},Av=new Zs(288);for(var Ci=0;Ci<144;++Ci)Av[Ci]=8;for(var Ci=144;Ci<256;++Ci)Av[Ci]=9;for(var Ci=256;Ci<280;++Ci)Av[Ci]=7;for(var Ci=280;Ci<288;++Ci)Av[Ci]=8;var RD=new Zs(32);for(var Ci=0;Ci<32;++Ci)RD[Ci]=5;var N5=Lg(Av,9,1),L5=Lg(RD,5,1),r1=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Oo=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},a1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},I5=function(n){return(n/8|0)+(n&7&&1)},P5=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Uu?Uu:n instanceof oA?oA:Zs)(t-e);return i.set(n.subarray(e,t)),i},z5=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Zs(0);var r=!e||t,a=!t||t.i;t||(t={}),e||(e=new Zs(i*3));var o=function(Le){var Qe=e.length;if(Le>Qe){var rt=new Zs(Math.max(Qe*2,Le));rt.set(e),e=rt}},c=t.f||0,f=t.p||0,p=t.b||0,m=t.l,v=t.d,y=t.m,x=t.n,b=i*8;do{if(!m){t.f=c=Oo(n,f,1);var T=Oo(n,f+1,3);if(f+=3,T)if(T==1)m=N5,v=L5,y=9,x=5;else if(T==2){var B=Oo(n,f,31)+257,D=Oo(n,f+10,15)+4,I=B+Oo(n,f+5,31)+1;f+=14;for(var N=new Zs(I),H=new Zs(19),P=0;P<D;++P)H[B5[P]]=Oo(n,f+P*3,7);f+=D*3;for(var L=r1(H),U=(1<<L)-1,Y=Lg(H,L,1),P=0;P<I;){var ie=Y[Oo(n,f,U)];f+=ie&15;var M=ie>>>4;if(M<16)N[P++]=M;else{var Q=0,ae=0;for(M==16?(ae=3+Oo(n,f,3),f+=2,Q=N[P-1]):M==17?(ae=3+Oo(n,f,7),f+=3):M==18&&(ae=11+Oo(n,f,127),f+=7);ae--;)N[P++]=Q}}var he=N.subarray(0,B),X=N.subarray(B);y=r1(he),x=r1(X),m=Lg(he,y,1),v=Lg(X,x,1)}else throw"invalid block type";else{var M=I5(f)+4,A=n[M-4]|n[M-3]<<8,w=M+A;if(w>i){if(a)throw"unexpected EOF";break}r&&o(p+A),e.set(n.subarray(M,w),p),t.b=p+=A,t.p=f=w*8;continue}if(f>b){if(a)throw"unexpected EOF";break}}r&&o(p+131072);for(var te=(1<<y)-1,ne=(1<<x)-1,be=f;;be=f){var Q=m[a1(n,f)&te],W=Q>>>4;if(f+=Q&15,f>b){if(a)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(W<256)e[p++]=W;else if(W==256){be=f,m=null;break}else{var se=W-254;if(W>264){var P=W-257,Ae=AD[P];se=Oo(n,f,(1<<Ae)-1)+CD[P],f+=Ae}var De=v[a1(n,f)&ne],ge=De>>>4;if(!De)throw"invalid distance";f+=De&15;var X=U5[ge];if(ge>3){var Ae=ED[ge];X+=a1(n,f)&(1<<Ae)-1,f+=Ae}if(f>b){if(a)throw"unexpected EOF";break}r&&o(p+131072);for(var He=p+se;p<He;p+=4)e[p]=e[p-X],e[p+1]=e[p+1-X],e[p+2]=e[p+2-X],e[p+3]=e[p+3-X];p=He}}t.l=m,t.p=be,t.b=p,m&&(c=1,t.m=y,t.d=v,t.n=x)}while(!c);return p==e.length?e:P5(e,0,p)},F5=new Zs(0),H5=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Jy(n,e){return z5((H5(n),n.subarray(2,-4)),e)}var G5=typeof TextDecoder<"u"&&new TextDecoder,V5=0;try{G5.decode(F5,{stream:!0}),V5=1}catch{}const k5=n=>n&&n.isCubeTexture;class X5 extends Ei{constructor(e,t){var i,r;const a=k5(e),c=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,f=Math.floor(Math.log2(c)),p=Math.pow(2,f),m=3*Math.max(p,16*7),v=4*p,y=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/m}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${f}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${OE>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,T={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},M=new mv(1,16),A=new Pi({uniforms:T,fragmentShader:b,vertexShader:x,side:ga});super(M,A)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Y5=Object.defineProperty,j5=(n,e,t)=>e in n?Y5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,W5=(n,e,t)=>(j5(n,e+"",t),t);class q5{constructor(){W5(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,o=r.length;a<o;a++)r[a].call(this,e);e.target=null}}}var K5=Object.defineProperty,J5=(n,e,t)=>e in n?K5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jt=(n,e,t)=>(J5(n,typeof e!="symbol"?e+"":e,t),t);const Zy=new Oh,hR=new hc,Z5=Math.cos(70*(Math.PI/180)),dR=(n,e)=>(n%e+e)%e;let $5=class extends q5{constructor(e,t){super(),Jt(this,"object"),Jt(this,"domElement"),Jt(this,"enabled",!0),Jt(this,"target",new $),Jt(this,"minDistance",0),Jt(this,"maxDistance",1/0),Jt(this,"minZoom",0),Jt(this,"maxZoom",1/0),Jt(this,"minPolarAngle",0),Jt(this,"maxPolarAngle",Math.PI),Jt(this,"minAzimuthAngle",-1/0),Jt(this,"maxAzimuthAngle",1/0),Jt(this,"enableDamping",!1),Jt(this,"dampingFactor",.05),Jt(this,"enableZoom",!0),Jt(this,"zoomSpeed",1),Jt(this,"enableRotate",!0),Jt(this,"rotateSpeed",1),Jt(this,"enablePan",!0),Jt(this,"panSpeed",1),Jt(this,"screenSpacePanning",!0),Jt(this,"keyPanSpeed",7),Jt(this,"zoomToCursor",!1),Jt(this,"autoRotate",!1),Jt(this,"autoRotateSpeed",2),Jt(this,"reverseOrbit",!1),Jt(this,"reverseHorizontalOrbit",!1),Jt(this,"reverseVerticalOrbit",!1),Jt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Jt(this,"mouseButtons",{LEFT:$f.ROTATE,MIDDLE:$f.DOLLY,RIGHT:$f.PAN}),Jt(this,"touches",{ONE:Qf.ROTATE,TWO:Qf.DOLLY_PAN}),Jt(this,"target0"),Jt(this,"position0"),Jt(this,"zoom0"),Jt(this,"_domElementKeyEvents",null),Jt(this,"getPolarAngle"),Jt(this,"getAzimuthalAngle"),Jt(this,"setPolarAngle"),Jt(this,"setAzimuthalAngle"),Jt(this,"getDistance"),Jt(this,"getZoomScale"),Jt(this,"listenToKeyEvents"),Jt(this,"stopListenToKeyEvents"),Jt(this,"saveState"),Jt(this,"reset"),Jt(this,"update"),Jt(this,"connect"),Jt(this,"dispose"),Jt(this,"dollyIn"),Jt(this,"dollyOut"),Jt(this,"getScale"),Jt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=de=>{let Pe=dR(de,2*Math.PI),st=m.phi;st<0&&(st+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let pe=Math.abs(Pe-st);2*Math.PI-pe<pe&&(Pe<st?Pe+=2*Math.PI:st+=2*Math.PI),v.phi=Pe-st,i.update()},this.setAzimuthalAngle=de=>{let Pe=dR(de,2*Math.PI),st=m.theta;st<0&&(st+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let pe=Math.abs(Pe-st);2*Math.PI-pe<pe&&(Pe<st?Pe+=2*Math.PI:st+=2*Math.PI),v.theta=Pe-st,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=de=>{de.addEventListener("keydown",ot),this._domElementKeyEvents=de},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ot),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),f=c.NONE},this.update=(()=>{const de=new $,Pe=new $(0,1,0),st=new Gr().setFromUnitVectors(e.up,Pe),pe=st.clone().invert(),Te=new $,Ie=new Gr,Ye=2*Math.PI;return function(){const gt=i.object.position;st.setFromUnitVectors(e.up,Pe),pe.copy(st).invert(),de.copy(gt).sub(i.target),de.applyQuaternion(st),m.setFromVector3(de),i.autoRotate&&f===c.NONE&&ae(ie()),i.enableDamping?(m.theta+=v.theta*i.dampingFactor,m.phi+=v.phi*i.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);let zt=i.minAzimuthAngle,mn=i.maxAzimuthAngle;isFinite(zt)&&isFinite(mn)&&(zt<-Math.PI?zt+=Ye:zt>Math.PI&&(zt-=Ye),mn<-Math.PI?mn+=Ye:mn>Math.PI&&(mn-=Ye),zt<=mn?m.theta=Math.max(zt,Math.min(mn,m.theta)):m.theta=m.theta>(zt+mn)/2?Math.max(zt,m.theta):Math.min(mn,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(x,i.dampingFactor):i.target.add(x),i.zoomToCursor&&L||i.object.isOrthographicCamera?m.radius=De(m.radius):m.radius=De(m.radius*y),de.setFromSpherical(m),de.applyQuaternion(pe),gt.copy(i.target).add(de),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(v.theta*=1-i.dampingFactor,v.phi*=1-i.dampingFactor,x.multiplyScalar(1-i.dampingFactor)):(v.set(0,0,0),x.set(0,0,0));let Vn=!1;if(i.zoomToCursor&&L){let on=null;if(i.object instanceof qi&&i.object.isPerspectiveCamera){const Ri=de.length();on=De(Ri*y);const fi=Ri-on;i.object.position.addScaledVector(H,fi),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ri=new $(P.x,P.y,0);Ri.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),Vn=!0;const fi=new $(P.x,P.y,0);fi.unproject(i.object),i.object.position.sub(fi).add(Ri),i.object.updateMatrixWorld(),on=de.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;on!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(on).add(i.object.position):(Zy.origin.copy(i.object.position),Zy.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Zy.direction))<Z5?e.lookAt(i.target):(hR.setFromNormalAndCoplanarPoint(i.object.up,i.target),Zy.intersectPlane(hR,i.target))))}else i.object instanceof Bl&&i.object.isOrthographicCamera&&(Vn=y!==1,Vn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,L=!1,Vn||Te.distanceToSquared(i.object.position)>p||8*(1-Ie.dot(i.object.quaternion))>p?(i.dispatchEvent(r),Te.copy(i.object.position),Ie.copy(i.object.quaternion),Vn=!1,!0):!1}})(),this.connect=de=>{i.domElement=de,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",at),i.domElement.addEventListener("pointerdown",k),i.domElement.addEventListener("pointercancel",xe),i.domElement.addEventListener("wheel",ut)},this.dispose=()=>{var de,Pe,st,pe,Te,Ie;i.domElement&&(i.domElement.style.touchAction="auto"),(de=i.domElement)==null||de.removeEventListener("contextmenu",at),(Pe=i.domElement)==null||Pe.removeEventListener("pointerdown",k),(st=i.domElement)==null||st.removeEventListener("pointercancel",xe),(pe=i.domElement)==null||pe.removeEventListener("wheel",ut),(Te=i.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",re),(Ie=i.domElement)==null||Ie.ownerDocument.removeEventListener("pointerup",xe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ot)};const i=this,r={type:"change"},a={type:"start"},o={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const p=1e-6,m=new Z1,v=new Z1;let y=1;const x=new $,b=new Ve,T=new Ve,M=new Ve,A=new Ve,w=new Ve,B=new Ve,D=new Ve,I=new Ve,N=new Ve,H=new $,P=new Ve;let L=!1;const U=[],Y={};function ie(){return 2*Math.PI/60/60*i.autoRotateSpeed}function Q(){return Math.pow(.95,i.zoomSpeed)}function ae(de){i.reverseOrbit||i.reverseHorizontalOrbit?v.theta+=de:v.theta-=de}function he(de){i.reverseOrbit||i.reverseVerticalOrbit?v.phi+=de:v.phi-=de}const X=(()=>{const de=new $;return function(st,pe){de.setFromMatrixColumn(pe,0),de.multiplyScalar(-st),x.add(de)}})(),te=(()=>{const de=new $;return function(st,pe){i.screenSpacePanning===!0?de.setFromMatrixColumn(pe,1):(de.setFromMatrixColumn(pe,0),de.crossVectors(i.object.up,de)),de.multiplyScalar(st),x.add(de)}})(),ne=(()=>{const de=new $;return function(st,pe){const Te=i.domElement;if(Te&&i.object instanceof qi&&i.object.isPerspectiveCamera){const Ie=i.object.position;de.copy(Ie).sub(i.target);let Ye=de.length();Ye*=Math.tan(i.object.fov/2*Math.PI/180),X(2*st*Ye/Te.clientHeight,i.object.matrix),te(2*pe*Ye/Te.clientHeight,i.object.matrix)}else Te&&i.object instanceof Bl&&i.object.isOrthographicCamera?(X(st*(i.object.right-i.object.left)/i.object.zoom/Te.clientWidth,i.object.matrix),te(pe*(i.object.top-i.object.bottom)/i.object.zoom/Te.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function be(de){i.object instanceof qi&&i.object.isPerspectiveCamera||i.object instanceof Bl&&i.object.isOrthographicCamera?y=de:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(de){be(y/de)}function se(de){be(y*de)}function Ae(de){if(!i.zoomToCursor||!i.domElement)return;L=!0;const Pe=i.domElement.getBoundingClientRect(),st=de.clientX-Pe.left,pe=de.clientY-Pe.top,Te=Pe.width,Ie=Pe.height;P.x=st/Te*2-1,P.y=-(pe/Ie)*2+1,H.set(P.x,P.y,1).unproject(i.object).sub(i.object.position).normalize()}function De(de){return Math.max(i.minDistance,Math.min(i.maxDistance,de))}function ge(de){b.set(de.clientX,de.clientY)}function He(de){Ae(de),D.set(de.clientX,de.clientY)}function Le(de){A.set(de.clientX,de.clientY)}function Qe(de){T.set(de.clientX,de.clientY),M.subVectors(T,b).multiplyScalar(i.rotateSpeed);const Pe=i.domElement;Pe&&(ae(2*Math.PI*M.x/Pe.clientHeight),he(2*Math.PI*M.y/Pe.clientHeight)),b.copy(T),i.update()}function rt(de){I.set(de.clientX,de.clientY),N.subVectors(I,D),N.y>0?W(Q()):N.y<0&&se(Q()),D.copy(I),i.update()}function Bt(de){w.set(de.clientX,de.clientY),B.subVectors(w,A).multiplyScalar(i.panSpeed),ne(B.x,B.y),A.copy(w),i.update()}function wt(de){Ae(de),de.deltaY<0?se(Q()):de.deltaY>0&&W(Q()),i.update()}function fn(de){let Pe=!1;switch(de.code){case i.keys.UP:ne(0,i.keyPanSpeed),Pe=!0;break;case i.keys.BOTTOM:ne(0,-i.keyPanSpeed),Pe=!0;break;case i.keys.LEFT:ne(i.keyPanSpeed,0),Pe=!0;break;case i.keys.RIGHT:ne(-i.keyPanSpeed,0),Pe=!0;break}Pe&&(de.preventDefault(),i.update())}function Vt(){if(U.length==1)b.set(U[0].pageX,U[0].pageY);else{const de=.5*(U[0].pageX+U[1].pageX),Pe=.5*(U[0].pageY+U[1].pageY);b.set(de,Pe)}}function Rt(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const de=.5*(U[0].pageX+U[1].pageX),Pe=.5*(U[0].pageY+U[1].pageY);A.set(de,Pe)}}function Z(){const de=U[0].pageX-U[1].pageX,Pe=U[0].pageY-U[1].pageY,st=Math.sqrt(de*de+Pe*Pe);D.set(0,st)}function lt(){i.enableZoom&&Z(),i.enablePan&&Rt()}function et(){i.enableZoom&&Z(),i.enableRotate&&Vt()}function Ze(de){if(U.length==1)T.set(de.pageX,de.pageY);else{const st=dt(de),pe=.5*(de.pageX+st.x),Te=.5*(de.pageY+st.y);T.set(pe,Te)}M.subVectors(T,b).multiplyScalar(i.rotateSpeed);const Pe=i.domElement;Pe&&(ae(2*Math.PI*M.x/Pe.clientHeight),he(2*Math.PI*M.y/Pe.clientHeight)),b.copy(T)}function je(de){if(U.length==1)w.set(de.pageX,de.pageY);else{const Pe=dt(de),st=.5*(de.pageX+Pe.x),pe=.5*(de.pageY+Pe.y);w.set(st,pe)}B.subVectors(w,A).multiplyScalar(i.panSpeed),ne(B.x,B.y),A.copy(w)}function yt(de){const Pe=dt(de),st=de.pageX-Pe.x,pe=de.pageY-Pe.y,Te=Math.sqrt(st*st+pe*pe);I.set(0,Te),N.set(0,Math.pow(I.y/D.y,i.zoomSpeed)),W(N.y),D.copy(I)}function Je(de){i.enableZoom&&yt(de),i.enablePan&&je(de)}function J(de){i.enableZoom&&yt(de),i.enableRotate&&Ze(de)}function k(de){var Pe,st;i.enabled!==!1&&(U.length===0&&((Pe=i.domElement)==null||Pe.ownerDocument.addEventListener("pointermove",re),(st=i.domElement)==null||st.ownerDocument.addEventListener("pointerup",xe)),_t(de),de.pointerType==="touch"?pt(de):Xe(de))}function re(de){i.enabled!==!1&&(de.pointerType==="touch"?Pt(de):Be(de))}function xe(de){var Pe,st,pe;Et(de),U.length===0&&((Pe=i.domElement)==null||Pe.releasePointerCapture(de.pointerId),(st=i.domElement)==null||st.ownerDocument.removeEventListener("pointermove",re),(pe=i.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",xe)),i.dispatchEvent(o),f=c.NONE}function Xe(de){let Pe;switch(de.button){case 0:Pe=i.mouseButtons.LEFT;break;case 1:Pe=i.mouseButtons.MIDDLE;break;case 2:Pe=i.mouseButtons.RIGHT;break;default:Pe=-1}switch(Pe){case $f.DOLLY:if(i.enableZoom===!1)return;He(de),f=c.DOLLY;break;case $f.ROTATE:if(de.ctrlKey||de.metaKey||de.shiftKey){if(i.enablePan===!1)return;Le(de),f=c.PAN}else{if(i.enableRotate===!1)return;ge(de),f=c.ROTATE}break;case $f.PAN:if(de.ctrlKey||de.metaKey||de.shiftKey){if(i.enableRotate===!1)return;ge(de),f=c.ROTATE}else{if(i.enablePan===!1)return;Le(de),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&i.dispatchEvent(a)}function Be(de){if(i.enabled!==!1)switch(f){case c.ROTATE:if(i.enableRotate===!1)return;Qe(de);break;case c.DOLLY:if(i.enableZoom===!1)return;rt(de);break;case c.PAN:if(i.enablePan===!1)return;Bt(de);break}}function ut(de){i.enabled===!1||i.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(de.preventDefault(),i.dispatchEvent(a),wt(de),i.dispatchEvent(o))}function ot(de){i.enabled===!1||i.enablePan===!1||fn(de)}function pt(de){switch(vt(de),U.length){case 1:switch(i.touches.ONE){case Qf.ROTATE:if(i.enableRotate===!1)return;Vt(),f=c.TOUCH_ROTATE;break;case Qf.PAN:if(i.enablePan===!1)return;Rt(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(i.touches.TWO){case Qf.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;lt(),f=c.TOUCH_DOLLY_PAN;break;case Qf.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;et(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&i.dispatchEvent(a)}function Pt(de){switch(vt(de),f){case c.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ze(de),i.update();break;case c.TOUCH_PAN:if(i.enablePan===!1)return;je(de),i.update();break;case c.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Je(de),i.update();break;case c.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;J(de),i.update();break;default:f=c.NONE}}function at(de){i.enabled!==!1&&de.preventDefault()}function _t(de){U.push(de)}function Et(de){delete Y[de.pointerId];for(let Pe=0;Pe<U.length;Pe++)if(U[Pe].pointerId==de.pointerId){U.splice(Pe,1);return}}function vt(de){let Pe=Y[de.pointerId];Pe===void 0&&(Pe=new Ve,Y[de.pointerId]=Pe),Pe.set(de.pageX,de.pageY)}function dt(de){const Pe=de.pointerId===U[0].pointerId?U[1]:U[0];return Y[Pe.pointerId]}this.dollyIn=(de=Q())=>{se(de),i.update()},this.dollyOut=(de=Q())=>{W(de),i.update()},this.getScale=()=>y,this.setScale=de=>{be(de),i.update()},this.getZoomScale=()=>Q(),t!==void 0&&this.connect(t),this.update()}};function sx(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const uh="srgb",_c="srgb-linear",pR=3001,Q5=3e3;class UE extends na{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new r8(t)}),this.register(function(t){return new a8(t)}),this.register(function(t){return new p8(t)}),this.register(function(t){return new m8(t)}),this.register(function(t){return new g8(t)}),this.register(function(t){return new o8(t)}),this.register(function(t){return new l8(t)}),this.register(function(t){return new c8(t)}),this.register(function(t){return new u8(t)}),this.register(function(t){return new i8(t)}),this.register(function(t){return new f8(t)}),this.register(function(t){return new s8(t)}),this.register(function(t){return new d8(t)}),this.register(function(t){return new h8(t)}),this.register(function(t){return new t8(t)}),this.register(function(t){return new v8(t)}),this.register(function(t){return new y8(t)})}load(e,t,i,r){const a=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const p=Nu.extractUrlBase(e);o=Nu.resolveURL(p,this.path)}else o=Nu.extractUrlBase(e);this.manager.itemStart(e);const c=function(p){r?r(p):console.error(p),a.manager.itemError(e),a.manager.itemEnd(e)},f=new ta(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(p){try{a.parse(p,o,function(m){t(m),a.manager.itemEnd(e)},c)}catch(m){c(m)}},i,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let a;const o={},c={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(sx(new Uint8Array(e.slice(0,4)))===wD){try{o[Dn.KHR_BINARY_GLTF]=new _8(e)}catch(m){r&&r(m);return}a=JSON.parse(o[Dn.KHR_BINARY_GLTF].content)}else a=JSON.parse(sx(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const f=new O8(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});f.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const m=this.pluginCallbacks[p](f);m.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[m.name]=m,o[m.name]=!0}if(a.extensionsUsed)for(let p=0;p<a.extensionsUsed.length;++p){const m=a.extensionsUsed[p],v=a.extensionsRequired||[];switch(m){case Dn.KHR_MATERIALS_UNLIT:o[m]=new n8;break;case Dn.KHR_DRACO_MESH_COMPRESSION:o[m]=new x8(a,this.dracoLoader);break;case Dn.KHR_TEXTURE_TRANSFORM:o[m]=new b8;break;case Dn.KHR_MESH_QUANTIZATION:o[m]=new S8;break;default:v.indexOf(m)>=0&&c[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}f.setExtensions(o),f.setPlugins(c),f.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,a){i.parse(e,t,r,a)})}}function e8(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Dn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class t8{constructor(e){this.parser=e,this.name=Dn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const a=t[i];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const a=t.json,f=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let p;const m=new xt(16777215);f.color!==void 0&&m.setRGB(f.color[0],f.color[1],f.color[2],_c);const v=f.range!==void 0?f.range:0;switch(f.type){case"directional":p=new gE(m),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new mE(m),p.distance=v;break;case"spot":p=new pE(m),p.distance=v,f.spot=f.spot||{},f.spot.innerConeAngle=f.spot.innerConeAngle!==void 0?f.spot.innerConeAngle:0,f.spot.outerConeAngle=f.spot.outerConeAngle!==void 0?f.spot.outerConeAngle:Math.PI/4,p.angle=f.spot.outerConeAngle,p.penumbra=1-f.spot.innerConeAngle/f.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+f.type)}return p.position.set(0,0,0),p.decay=2,fc(p,f),f.intensity!==void 0&&(p.intensity=f.intensity),p.name=t.createUniqueName(f.name||"light_"+e),r=Promise.resolve(p),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,a=i.json.nodes[e],c=(a.extensions&&a.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(f){return i._getNodeRef(t.cache,c,f)})}}class n8{constructor(){this.name=Dn.KHR_MATERIALS_UNLIT}getMaterialType(){return ss}extendParams(e,t,i){const r=[];e.color=new xt(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const o=a.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],_c),e.opacity=o[3]}a.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",a.baseColorTexture,uh))}return Promise.all(r)}}class i8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class r8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(a.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ve(c,c)}return Promise.all(a)}}class a8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class s8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&a.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(a)}}class o8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new xt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],_c)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&a.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,uh)),o.sheenRoughnessTexture!==void 0&&a.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class l8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&a.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(a)}}class c8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&a.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return t.attenuationColor=new xt().setRGB(c[0],c[1],c[2],_c),Promise.all(a)}}class u8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=r.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class f8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&a.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return t.specularColor=new xt().setRGB(c[0],c[1],c[2],_c),o.specularColorTexture!==void 0&&a.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,uh)),Promise.all(a)}}class h8{constructor(e){this.parser=e,this.name=Dn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&a.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(a)}}class d8{constructor(e){this.parser=e,this.name=Dn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:to}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const a=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&a.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(a)}}class p8{constructor(e){this.parser=e,this.name=Dn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const a=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,o)}}class m8{constructor(e){this.parser=e,this.name=Dn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const o=a.extensions[t],c=r.images[o.source];let f=i.textureLoader;if(c.uri){const p=i.options.manager.getHandler(c.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,o.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class g8{constructor(e){this.parser=e,this.name=Dn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;const o=a.extensions[t],c=r.images[o.source];let f=i.textureLoader;if(c.uri){const p=i.options.manager.getHandler(c.uri);p!==null&&(f=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,o.source,f);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class v8{constructor(e){this.name=Dn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(c){const f=r.byteOffset||0,p=r.byteLength||0,m=r.count,v=r.byteStride,y=new Uint8Array(c,f,p);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(m,v,y,r.mode,r.filter).then(function(x){return x.buffer}):o.ready.then(function(){const x=new ArrayBuffer(m*v);return o.decodeGltfBuffer(new Uint8Array(x),m,v,y,r.mode,r.filter),x})})}else return null}}class y8{constructor(e){this.name=Dn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const p of r.primitives)if(p.mode!==Ks.TRIANGLES&&p.mode!==Ks.TRIANGLE_STRIP&&p.mode!==Ks.TRIANGLE_FAN&&p.mode!==void 0)return null;const o=i.extensions[this.name].attributes,c=[],f={};for(const p in o)c.push(this.parser.getDependency("accessor",o[p]).then(m=>(f[p]=m,f[p])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(p=>{const m=p.pop(),v=m.isGroup?m.children:[m],y=p[0].count,x=[];for(const b of v){const T=new qt,M=new $,A=new Gr,w=new $(1,1,1),B=new $A(b.geometry,b.material,y);for(let D=0;D<y;D++)f.TRANSLATION&&M.fromBufferAttribute(f.TRANSLATION,D),f.ROTATION&&A.fromBufferAttribute(f.ROTATION,D),f.SCALE&&w.fromBufferAttribute(f.SCALE,D),B.setMatrixAt(D,T.compose(M,A,w));for(const D in f)if(D==="_COLOR_0"){const I=f[D];B.instanceColor=new Sh(I.array,I.itemSize,I.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&b.geometry.setAttribute(D,f[D]);Hn.prototype.copy.call(B,b),this.parser.assignFinalMaterial(B),x.push(B)}return m.isGroup?(m.clear(),m.add(...x),m):x[0]}))}}const wD="glTF",pg=12,mR={JSON:1313821514,BIN:5130562};class _8{constructor(e){this.name=Dn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,pg);if(this.header={magic:sx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==wD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-pg,r=new DataView(e,pg);let a=0;for(;a<i;){const o=r.getUint32(a,!0);a+=4;const c=r.getUint32(a,!0);if(a+=4,c===mR.JSON){const f=new Uint8Array(e,pg+a,o);this.content=sx(f)}else if(c===mR.BIN){const f=pg+a;this.body=e.slice(f,f+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class x8{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Dn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},f={},p={};for(const m in o){const v=cA[m]||m.toLowerCase();c[v]=o[m]}for(const m in e.attributes){const v=cA[m]||m.toLowerCase();if(o[m]!==void 0){const y=i.accessors[e.attributes[m]],x=dp[y.componentType];p[v]=x.name,f[v]=y.normalized===!0}}return t.getDependency("bufferView",a).then(function(m){return new Promise(function(v,y){r.decodeDracoFile(m,function(x){for(const b in x.attributes){const T=x.attributes[b],M=f[b];M!==void 0&&(T.normalized=M)}v(x)},c,p,_c,y)})})}}class b8{constructor(){this.name=Dn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class S8{constructor(){this.name=Dn.KHR_MESH_QUANTIZATION}}class BD extends Op{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[a+o];return t}interpolate_(e,t,i,r){const a=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=c*2,p=c*3,m=r-t,v=(i-t)/m,y=v*v,x=y*v,b=e*p,T=b-p,M=-2*x+3*y,A=x-y,w=1-M,B=A-y+v;for(let D=0;D!==c;D++){const I=o[T+D+c],N=o[T+D+f]*m,H=o[b+D+c],P=o[b+D]*m;a[D]=w*I+B*N+M*H+A*P}return a}}const A8=new Gr;class E8 extends BD{interpolate_(e,t,i,r){const a=super.interpolate_(e,t,i,r);return A8.fromArray(a).normalize().toArray(a),a}}const Ks={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},dp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gR={9728:tr,9729:Fn,9984:Ax,9985:fp,9986:rh,9987:$s},vR={33071:cr,33648:vp,10497:zu},s1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},cA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...OE>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ru={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M8={CUBICSPLINE:void 0,LINEAR:bp,STEP:xp},o1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function T8(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new yv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ho})),n.DefaultMaterial}function Zf(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function fc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function C8(n,e,t){let i=!1,r=!1,a=!1;for(let p=0,m=e.length;p<m;p++){const v=e[p];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(r=!0),v.COLOR_0!==void 0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(n);const o=[],c=[],f=[];for(let p=0,m=e.length;p<m;p++){const v=e[p];if(i){const y=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):n.attributes.position;o.push(y)}if(r){const y=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):n.attributes.normal;c.push(y)}if(a){const y=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):n.attributes.color;f.push(y)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f)]).then(function(p){const m=p[0],v=p[1],y=p[2];return i&&(n.morphAttributes.position=m),r&&(n.morphAttributes.normal=v),a&&(n.morphAttributes.color=y),n.morphTargetsRelative=!0,n})}function R8(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function w8(n){let e;const t=n.extensions&&n.extensions[Dn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+l1(t.attributes):e=n.indices+":"+l1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+l1(n.targets[i]);return e}function l1(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function uA(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function B8(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const D8=new qt;class O8{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new e8,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,a=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&a<98?this.textureLoader=new wB(this.options.manager):this.textureLoader=new PB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ta(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const c={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Zf(a,c,r),fc(c,r),Promise.all(i._invokeAll(function(f){return f.afterRoot&&f.afterRoot(c)})).then(function(){for(const f of c.scenes)f.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,a=t.length;r<a;r++){const o=t[r].joints;for(let c=0,f=o.length;c<f;c++)e[o[c]].isBone=!0}for(let r=0,a=e.length;r<a;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),a=(o,c)=>{const f=this.associations.get(o);f!=null&&this.associations.set(c,f);for(const[p,m]of o.children.entries())a(m,c.children[p])};return a(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const a=e(t[r]);a&&i.push(a)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":r=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(a,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Dn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(a,o){i.load(Nu.resolveURL(t.uri,r.path),a,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,a=t.byteOffset||0;return i.slice(a,a+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=s1[r.type],c=dp[r.componentType],f=r.normalized===!0,p=new c(r.count*o);return Promise.resolve(new Gn(p,o,f))}const a=[];return r.bufferView!==void 0?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),r.sparse!==void 0&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(o){const c=o[0],f=s1[r.type],p=dp[r.componentType],m=p.BYTES_PER_ELEMENT,v=m*f,y=r.byteOffset||0,x=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let T,M;if(x&&x!==v){const A=Math.floor(y/x),w="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+A+":"+r.count;let B=t.cache.get(w);B||(T=new p(c,A*x,r.count*x/m),B=new uv(T,x/m),t.cache.add(w,B)),M=new Fu(B,f,y%x/m,b)}else c===null?T=new p(r.count*f):T=new p(c,y,r.count*f),M=new Gn(T,f,b);if(r.sparse!==void 0){const A=s1.SCALAR,w=dp[r.sparse.indices.componentType],B=r.sparse.indices.byteOffset||0,D=r.sparse.values.byteOffset||0,I=new w(o[1],B,r.sparse.count*A),N=new p(o[2],D,r.sparse.count*f);c!==null&&(M=new Gn(M.array.slice(),M.itemSize,M.normalized));for(let H=0,P=I.length;H<P;H++){const L=I[H];if(M.setX(L,N[H*f]),f>=2&&M.setY(L,N[H*f+1]),f>=3&&M.setZ(L,N[H*f+2]),f>=4&&M.setW(L,N[H*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,i=this.options,a=t.textures[e].source,o=t.images[a];let c=this.textureLoader;if(o.uri){const f=i.manager.getHandler(o.uri);f!==null&&(c=f)}return this.loadTextureImage(e,a,c)}loadTextureImage(e,t,i){const r=this,a=this.json,o=a.textures[e],c=a.images[t],f=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[f])return this.textureCache[f];const p=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=o.name||c.name||"",m.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(m.name=c.uri);const y=(a.samplers||{})[o.sampler]||{};return m.magFilter=gR[y.magFilter]||Fn,m.minFilter=gR[y.minFilter]||$s,m.wrapS=vR[y.wrapS]||zu,m.wrapT=vR[y.wrapT]||zu,r.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[f]=p,p}loadImageSource(e,t){const i=this,r=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const o=r.images[e],c=self.URL||self.webkitURL;let f=o.uri||"",p=!1;if(o.bufferView!==void 0)f=i.getDependency("bufferView",o.bufferView).then(function(v){p=!0;const y=new Blob([v],{type:o.mimeType});return f=c.createObjectURL(y),f});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(f).then(function(v){return new Promise(function(y,x){let b=y;t.isImageBitmapLoader===!0&&(b=function(T){const M=new ei(T);M.needsUpdate=!0,y(M)}),t.load(Nu.resolveURL(v,a.path),b,void 0,x)})}).then(function(v){return p===!0&&c.revokeObjectURL(f),fc(v,o),v.userData.mimeType=o.mimeType||B8(o.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",f),v});return this.sourceCache[e]=m,m}assignTexture(e,t,i,r){const a=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),a.extensions[Dn.KHR_TEXTURE_TRANSFORM]){const c=i.extensions!==void 0?i.extensions[Dn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const f=a.associations.get(o);o=a.extensions[Dn.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),a.associations.set(o,f)}}return r!==void 0&&(typeof r=="number"&&(r=r===pR?uh:_c),"colorSpace"in o?o.colorSpace=r:o.encoding=r===uh?pR:Q5),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+i.uuid;let f=this.cache.get(c);f||(f=new Px,fr.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,f.sizeAttenuation=!1,this.cache.add(c,f)),i=f}else if(e.isLine){const c="LineBasicMaterial:"+i.uuid;let f=this.cache.get(c);f||(f=new _a,fr.prototype.copy.call(f,i),f.color.copy(i.color),f.map=i.map,this.cache.add(c,f)),i=f}if(r||a||o){let c="ClonedMaterial:"+i.uuid+":";r&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let f=this.cache.get(c);f||(f=i.clone(),a&&(f.vertexColors=!0),o&&(f.flatShading=!0),r&&(f.normalScale&&(f.normalScale.y*=-1),f.clearcoatNormalScale&&(f.clearcoatNormalScale.y*=-1)),this.cache.add(c,f),this.associations.set(f,this.associations.get(i))),i=f}e.material=i}getMaterialType(){return yv}loadMaterial(e){const t=this,i=this.json,r=this.extensions,a=i.materials[e];let o;const c={},f=a.extensions||{},p=[];if(f[Dn.KHR_MATERIALS_UNLIT]){const v=r[Dn.KHR_MATERIALS_UNLIT];o=v.getMaterialType(),p.push(v.extendParams(c,a,t))}else{const v=a.pbrMetallicRoughness||{};if(c.color=new xt(1,1,1),c.opacity=1,Array.isArray(v.baseColorFactor)){const y=v.baseColorFactor;c.color.setRGB(y[0],y[1],y[2],_c),c.opacity=y[3]}v.baseColorTexture!==void 0&&p.push(t.assignTexture(c,"map",v.baseColorTexture,uh)),c.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,c.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(c,"metalnessMap",v.metallicRoughnessTexture)),p.push(t.assignTexture(c,"roughnessMap",v.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,c)})))}a.doubleSided===!0&&(c.side=ga);const m=a.alphaMode||o1.OPAQUE;if(m===o1.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===o1.MASK&&(c.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&o!==ss&&(p.push(t.assignTexture(c,"normalMap",a.normalTexture)),c.normalScale=new Ve(1,1),a.normalTexture.scale!==void 0)){const v=a.normalTexture.scale;c.normalScale.set(v,v)}if(a.occlusionTexture!==void 0&&o!==ss&&(p.push(t.assignTexture(c,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&o!==ss){const v=a.emissiveFactor;c.emissive=new xt().setRGB(v[0],v[1],v[2],_c)}return a.emissiveTexture!==void 0&&o!==ss&&p.push(t.assignTexture(c,"emissiveMap",a.emissiveTexture,uh)),Promise.all(p).then(function(){const v=new o(c);return a.name&&(v.name=a.name),fc(v,a),t.associations.set(v,{materials:e}),a.extensions&&Zf(r,v,a),v})}createUniqueName(e){const t=Yn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function a(c){return i[Dn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(f){return yR(f,c,t)})}const o=[];for(let c=0,f=e.length;c<f;c++){const p=e[c],m=w8(p),v=r[m];if(v)o.push(v.promise);else{let y;p.extensions&&p.extensions[Dn.KHR_DRACO_MESH_COMPRESSION]?y=a(p):y=yR(new un,p,t),r[m]={primitive:p,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,a=i.meshes[e],o=a.primitives,c=[];for(let f=0,p=o.length;f<p;f++){const m=o[f].material===void 0?T8(this.cache):this.getDependency("material",o[f].material);c.push(m)}return c.push(t.loadGeometries(o)),Promise.all(c).then(function(f){const p=f.slice(0,f.length-1),m=f[f.length-1],v=[];for(let x=0,b=m.length;x<b;x++){const T=m[x],M=o[x];let A;const w=p[x];if(M.mode===Ks.TRIANGLES||M.mode===Ks.TRIANGLE_STRIP||M.mode===Ks.TRIANGLE_FAN||M.mode===void 0)A=a.isSkinnedMesh===!0?new ZA(T,w):new Ei(T,w),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),M.mode===Ks.TRIANGLE_STRIP?A.geometry=fR(A.geometry,XA):M.mode===Ks.TRIANGLE_FAN&&(A.geometry=fR(A.geometry,K_));else if(M.mode===Ks.LINES)A=new ko(T,w);else if(M.mode===Ks.LINE_STRIP)A=new Ac(T,w);else if(M.mode===Ks.LINE_LOOP)A=new QA(T,w);else if(M.mode===Ks.POINTS)A=new eE(T,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(A.geometry.morphAttributes).length>0&&R8(A,a),A.name=t.createUniqueName(a.name||"mesh_"+e),fc(A,a),M.extensions&&Zf(r,A,M),t.assignFinalMaterial(A),v.push(A)}for(let x=0,b=v.length;x<b;x++)t.associations.set(v[x],{meshes:e,primitives:x});if(v.length===1)return a.extensions&&Zf(r,v[0],a),v[0];const y=new gc;a.extensions&&Zf(r,y,a),t.associations.set(y,{meshes:e});for(let x=0,b=v.length;x<b;x++)y.add(v[x]);return y})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new qi(Y2.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Bl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),fc(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,a=t.joints.length;r<a;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const a=r.pop(),o=r,c=[],f=[];for(let p=0,m=o.length;p<m;p++){const v=o[p];if(v){c.push(v);const y=new qt;a!==null&&y.fromArray(a.array,p*16),f.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new fv(c,f)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,o=[],c=[],f=[],p=[],m=[];for(let v=0,y=r.channels.length;v<y;v++){const x=r.channels[v],b=r.samplers[x.sampler],T=x.target,M=T.node,A=r.parameters!==void 0?r.parameters[b.input]:b.input,w=r.parameters!==void 0?r.parameters[b.output]:b.output;T.node!==void 0&&(o.push(this.getDependency("node",M)),c.push(this.getDependency("accessor",A)),f.push(this.getDependency("accessor",w)),p.push(b),m.push(T))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(f),Promise.all(p),Promise.all(m)]).then(function(v){const y=v[0],x=v[1],b=v[2],T=v[3],M=v[4],A=[];for(let w=0,B=y.length;w<B;w++){const D=y[w],I=x[w],N=b[w],H=T[w],P=M[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const L=i._createAnimationTracks(D,I,N,H,P);if(L)for(let U=0;U<L.length;U++)A.push(L[U])}return new Tp(a,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(a){const o=i._getNodeRef(i.meshCache,r.mesh,a);return r.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let f=0,p=r.weights.length;f<p;f++)c.morphTargetInfluences[f]=r.weights[f]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],a=i._loadNodeShallow(e),o=[],c=r.children||[];for(let p=0,m=c.length;p<m;p++)o.push(i.getDependency("node",c[p]));const f=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([a,Promise.all(o),f]).then(function(p){const m=p[0],v=p[1],y=p[2];y!==null&&m.traverse(function(x){x.isSkinnedMesh&&x.bind(y,D8)});for(let x=0,b=v.length;x<b;x++)m.add(v[x]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],o=a.name?r.createUniqueName(a.name):"",c=[],f=r._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return f&&c.push(f),a.camera!==void 0&&c.push(r.getDependency("camera",a.camera).then(function(p){return r._getNodeRef(r.cameraCache,a.camera,p)})),r._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){c.push(p)}),this.nodeCache[e]=Promise.all(c).then(function(p){let m;if(a.isBone===!0?m=new Lx:p.length>1?m=new gc:p.length===1?m=p[0]:m=new Hn,m!==p[0])for(let v=0,y=p.length;v<y;v++)m.add(p[v]);if(a.name&&(m.userData.name=a.name,m.name=o),fc(m,a),a.extensions&&Zf(i,m,a),a.matrix!==void 0){const v=new qt;v.fromArray(a.matrix),m.applyMatrix4(v)}else a.translation!==void 0&&m.position.fromArray(a.translation),a.rotation!==void 0&&m.quaternion.fromArray(a.rotation),a.scale!==void 0&&m.scale.fromArray(a.scale);return r.associations.has(m)||r.associations.set(m,{}),r.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,a=new gc;i.name&&(a.name=r.createUniqueName(i.name)),fc(a,i),i.extensions&&Zf(t,a,i);const o=i.nodes||[],c=[];for(let f=0,p=o.length;f<p;f++)c.push(r.getDependency("node",o[f]));return Promise.all(c).then(function(f){for(let m=0,v=f.length;m<v;m++)a.add(f[m]);const p=m=>{const v=new Map;for(const[y,x]of r.associations)(y instanceof fr||y instanceof ei)&&v.set(y,x);return m.traverse(y=>{const x=r.associations.get(y);x!=null&&v.set(y,x)}),v};return r.associations=p(a),a})}_createAnimationTracks(e,t,i,r,a){const o=[],c=e.name?e.name:e.uuid,f=[];Ru[a.path]===Ru.weights?e.traverse(function(y){y.morphTargetInfluences&&f.push(y.name?y.name:y.uuid)}):f.push(c);let p;switch(Ru[a.path]){case Ru.weights:p=Eh;break;case Ru.rotation:p=Mh;break;case Ru.position:case Ru.scale:p=Th;break;default:switch(i.itemSize){case 1:p=Eh;break;case 2:case 3:default:p=Th;break}break}const m=r.interpolation!==void 0?M8[r.interpolation]:bp,v=this._getArrayFromAccessor(i);for(let y=0,x=f.length;y<x;y++){const b=new p(f[y]+"."+Ru[a.path],t.array,v,m);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),o.push(b)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=uA(t.constructor),r=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a++)r[a]=t[a]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof Mh?E8:BD;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function U8(n,e,t){const i=e.attributes,r=new Vr;if(i.POSITION!==void 0){const c=t.json.accessors[i.POSITION],f=c.min,p=c.max;if(f!==void 0&&p!==void 0){if(r.set(new $(f[0],f[1],f[2]),new $(p[0],p[1],p[2])),c.normalized){const m=uA(dp[c.componentType]);r.min.multiplyScalar(m),r.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const c=new $,f=new $;for(let p=0,m=a.length;p<m;p++){const v=a[p];if(v.POSITION!==void 0){const y=t.json.accessors[v.POSITION],x=y.min,b=y.max;if(x!==void 0&&b!==void 0){if(f.setX(Math.max(Math.abs(x[0]),Math.abs(b[0]))),f.setY(Math.max(Math.abs(x[1]),Math.abs(b[1]))),f.setZ(Math.max(Math.abs(x[2]),Math.abs(b[2]))),y.normalized){const T=uA(dp[y.componentType]);f.multiplyScalar(T)}c.max(f)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}n.boundingBox=r;const o=new kr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function yR(n,e,t){const i=e.attributes,r=[];function a(o,c){return t.getDependency("accessor",o).then(function(f){n.setAttribute(c,f)})}for(const o in i){const c=cA[o]||o.toLowerCase();c in n.attributes||r.push(a(i[o],c))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});r.push(o)}return fc(n,e),U8(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?C8(n,e.targets,t):n})}const N8={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},L8={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class I8 extends hE{constructor(e){super(e),this.type=wr}parse(e){const o=function(P,L){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},m=`
`,v=function(P,L,U){L=L||1024;let ie=P.pos,Q=-1,ae=0,he="",X=String.fromCharCode.apply(null,new Uint16Array(P.subarray(ie,ie+128)));for(;0>(Q=X.indexOf(m))&&ae<L&&ie<P.byteLength;)he+=X,ae+=X.length,ie+=128,X+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(ie,ie+128)));return-1<Q?(P.pos+=ae+Q+1,he+X.slice(0,Q)):!1},y=function(P){const L=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ie=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ae={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let he,X;for((P.pos>=P.byteLength||!(he=v(P)))&&o(1,"no header found"),(X=he.match(L))||o(3,"bad initial token"),ae.valid|=1,ae.programtype=X[1],ae.string+=he+`
`;he=v(P),he!==!1;){if(ae.string+=he+`
`,he.charAt(0)==="#"){ae.comments+=he+`
`;continue}if((X=he.match(U))&&(ae.gamma=parseFloat(X[1])),(X=he.match(Y))&&(ae.exposure=parseFloat(X[1])),(X=he.match(ie))&&(ae.valid|=2,ae.format=X[1]),(X=he.match(Q))&&(ae.valid|=4,ae.height=parseInt(X[1],10),ae.width=parseInt(X[2],10)),ae.valid&2&&ae.valid&4)break}return ae.valid&2||o(3,"missing format specifier"),ae.valid&4||o(3,"missing image size specifier"),ae},x=function(P,L,U){const Y=L;if(Y<8||Y>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);Y!==(P[2]<<8|P[3])&&o(3,"wrong scanline width");const ie=new Uint8Array(4*L*U);ie.length||o(4,"unable to allocate buffer space");let Q=0,ae=0;const he=4*Y,X=new Uint8Array(4),te=new Uint8Array(he);let ne=U;for(;ne>0&&ae<P.byteLength;){ae+4>P.byteLength&&o(1),X[0]=P[ae++],X[1]=P[ae++],X[2]=P[ae++],X[3]=P[ae++],(X[0]!=2||X[1]!=2||(X[2]<<8|X[3])!=Y)&&o(3,"bad rgbe scanline format");let be=0,W;for(;be<he&&ae<P.byteLength;){W=P[ae++];const Ae=W>128;if(Ae&&(W-=128),(W===0||be+W>he)&&o(3,"bad scanline data"),Ae){const De=P[ae++];for(let ge=0;ge<W;ge++)te[be++]=De}else te.set(P.subarray(ae,ae+W),be),be+=W,ae+=W}const se=Y;for(let Ae=0;Ae<se;Ae++){let De=0;ie[Q]=te[Ae+De],De+=Y,ie[Q+1]=te[Ae+De],De+=Y,ie[Q+2]=te[Ae+De],De+=Y,ie[Q+3]=te[Ae+De],Q+=4}ne--}return ie},b=function(P,L,U,Y){const ie=P[L+3],Q=Math.pow(2,ie-128)/255;U[Y+0]=P[L+0]*Q,U[Y+1]=P[L+1]*Q,U[Y+2]=P[L+2]*Q,U[Y+3]=1},T=function(P,L,U,Y){const ie=P[L+3],Q=Math.pow(2,ie-128)/255;U[Y+0]=oh.toHalfFloat(Math.min(P[L+0]*Q,65504)),U[Y+1]=oh.toHalfFloat(Math.min(P[L+1]*Q,65504)),U[Y+2]=oh.toHalfFloat(Math.min(P[L+2]*Q,65504)),U[Y+3]=oh.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const A=y(M),w=A.width,B=A.height,D=x(M.subarray(M.pos),w,B);let I,N,H;switch(this.type){case Li:H=D.length/4;const P=new Float32Array(H*4);for(let U=0;U<H;U++)b(D,U*4,P,U*4);I=P,N=Li;break;case wr:H=D.length/4;const L=new Uint16Array(H*4);for(let U=0;U<H;U++)T(D,U*4,L,U*4);I=L,N=wr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:B,data:I,header:A.string,gamma:A.gamma,exposure:A.exposure,type:N}}setDataType(e){return this.type=e,this}load(e,t,i,r){function a(o,c){switch(o.type){case Li:case wr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Fn,o.magFilter=Fn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,c)}return super.load(e,a,i,r)}}const mg=OE>=152;class P8 extends hE{constructor(e){super(e),this.type=wr}parse(e){const L=Math.pow(2.7182818,2.2);function U(G,K){for(var me=0,we=0;we<65536;++we)(we==0||G[we>>3]&1<<(we&7))&&(K[me++]=we);for(var Ue=me-1;me<65536;)K[me++]=0;return Ue}function Y(G){for(var K=0;K<16384;K++)G[K]={},G[K].len=0,G[K].lit=0,G[K].p=null}const ie={l:0,c:0,lc:0};function Q(G,K,me,we,Ue){for(;me<G;)K=K<<8|dt(we,Ue),me+=8;me-=G,ie.l=K>>me&(1<<G)-1,ie.c=K,ie.lc=me}const ae=new Array(59);function he(G){for(var K=0;K<=58;++K)ae[K]=0;for(var K=0;K<65537;++K)ae[G[K]]+=1;for(var me=0,K=58;K>0;--K){var we=me+ae[K]>>1;ae[K]=me,me=we}for(var K=0;K<65537;++K){var Ue=G[K];Ue>0&&(G[K]=Ue|ae[Ue]++<<6)}}function X(G,K,me,we,Ue,Ge,ct){for(var it=me,V=0,ee=0;Ue<=Ge;Ue++){if(it.value-me.value>we)return!1;Q(6,V,ee,G,it);var le=ie.l;if(V=ie.c,ee=ie.lc,ct[Ue]=le,le==63){if(it.value-me.value>we)throw"Something wrong with hufUnpackEncTable";Q(8,V,ee,G,it);var ce=ie.l+6;if(V=ie.c,ee=ie.lc,Ue+ce>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ce--;)ct[Ue++]=0;Ue--}else if(le>=59){var ce=le-59+2;if(Ue+ce>Ge+1)throw"Something wrong with hufUnpackEncTable";for(;ce--;)ct[Ue++]=0;Ue--}}he(ct)}function te(G){return G&63}function ne(G){return G>>6}function be(G,K,me,we){for(;K<=me;K++){var Ue=ne(G[K]),Ge=te(G[K]);if(Ue>>Ge)throw"Invalid table entry";if(Ge>14){var ct=we[Ue>>Ge-14];if(ct.len)throw"Invalid table entry";if(ct.lit++,ct.p){var it=ct.p;ct.p=new Array(ct.lit);for(var V=0;V<ct.lit-1;++V)ct.p[V]=it[V]}else ct.p=new Array(1);ct.p[ct.lit-1]=K}else if(Ge)for(var ee=0,V=1<<14-Ge;V>0;V--){var ct=we[(Ue<<14-Ge)+ee];if(ct.len||ct.p)throw"Invalid table entry";ct.len=Ge,ct.lit=K,ee++}}return!0}const W={c:0,lc:0};function se(G,K,me,we){G=G<<8|dt(me,we),K+=8,W.c=G,W.lc=K}const Ae={c:0,lc:0};function De(G,K,me,we,Ue,Ge,ct,it,V,ee){if(G==K){we<8&&(se(me,we,Ue,ct),me=W.c,we=W.lc),we-=8;var le=me>>we,le=new Uint8Array([le])[0];if(V.value+le>ee)return!1;for(var ce=it[V.value-1];le-- >0;)it[V.value++]=ce}else if(V.value<ee)it[V.value++]=G;else return!1;Ae.c=me,Ae.lc=we}function ge(G){return G&65535}function He(G){var K=ge(G);return K>32767?K-65536:K}const Le={a:0,b:0};function Qe(G,K){var me=He(G),we=He(K),Ue=we,Ge=me+(Ue&1)+(Ue>>1),ct=Ge,it=Ge-Ue;Le.a=ct,Le.b=it}function rt(G,K){var me=ge(G),we=ge(K),Ue=me-(we>>1)&65535,Ge=we+Ue-32768&65535;Le.a=Ge,Le.b=Ue}function Bt(G,K,me,we,Ue,Ge,ct){for(var it=ct<16384,V=me>Ue?Ue:me,ee=1,le;ee<=V;)ee<<=1;for(ee>>=1,le=ee,ee>>=1;ee>=1;){for(var ce=0,ye=ce+Ge*(Ue-le),Ce=Ge*ee,ke=Ge*le,We=we*ee,nt=we*le,St,mt,At,kt;ce<=ye;ce+=ke){for(var It=ce,wn=ce+we*(me-le);It<=wn;It+=nt){var Dt=It+We,Ht=It+Ce,Ot=Ht+We;it?(Qe(G[It+K],G[Ht+K]),St=Le.a,At=Le.b,Qe(G[Dt+K],G[Ot+K]),mt=Le.a,kt=Le.b,Qe(St,mt),G[It+K]=Le.a,G[Dt+K]=Le.b,Qe(At,kt),G[Ht+K]=Le.a,G[Ot+K]=Le.b):(rt(G[It+K],G[Ht+K]),St=Le.a,At=Le.b,rt(G[Dt+K],G[Ot+K]),mt=Le.a,kt=Le.b,rt(St,mt),G[It+K]=Le.a,G[Dt+K]=Le.b,rt(At,kt),G[Ht+K]=Le.a,G[Ot+K]=Le.b)}if(me&ee){var Ht=It+Ce;it?Qe(G[It+K],G[Ht+K]):rt(G[It+K],G[Ht+K]),St=Le.a,G[Ht+K]=Le.b,G[It+K]=St}}if(Ue&ee)for(var It=ce,wn=ce+we*(me-le);It<=wn;It+=nt){var Dt=It+We;it?Qe(G[It+K],G[Dt+K]):rt(G[It+K],G[Dt+K]),St=Le.a,G[Dt+K]=Le.b,G[It+K]=St}le=ee,ee>>=1}return ce}function wt(G,K,me,we,Ue,Ge,ct,it,V,ee){for(var le=0,ce=0,ye=it,Ce=Math.trunc(Ue.value+(Ge+7)/8);Ue.value<Ce;)for(se(le,ce,me,Ue),le=W.c,ce=W.lc;ce>=14;){var ke=le>>ce-14&16383,We=K[ke];if(We.len)ce-=We.len,De(We.lit,ct,le,ce,me,we,Ue,V,ee,ye),le=Ae.c,ce=Ae.lc;else{if(!We.p)throw"hufDecode issues";var nt;for(nt=0;nt<We.lit;nt++){for(var St=te(G[We.p[nt]]);ce<St&&Ue.value<Ce;)se(le,ce,me,Ue),le=W.c,ce=W.lc;if(ce>=St&&ne(G[We.p[nt]])==(le>>ce-St&(1<<St)-1)){ce-=St,De(We.p[nt],ct,le,ce,me,we,Ue,V,ee,ye),le=Ae.c,ce=Ae.lc;break}}if(nt==We.lit)throw"hufDecode issues"}}var mt=8-Ge&7;for(le>>=mt,ce-=mt;ce>0;){var We=K[le<<14-ce&16383];if(We.len)ce-=We.len,De(We.lit,ct,le,ce,me,we,Ue,V,ee,ye),le=Ae.c,ce=Ae.lc;else throw"hufDecode issues"}return!0}function fn(G,K,me,we,Ue,Ge){var ct={value:0},it=me.value,V=vt(K,me),ee=vt(K,me);me.value+=4;var le=vt(K,me);if(me.value+=4,V<0||V>=65537||ee<0||ee>=65537)throw"Something wrong with HUF_ENCSIZE";var ce=new Array(65537),ye=new Array(16384);Y(ye);var Ce=we-(me.value-it);if(X(G,K,me,Ce,V,ee,ce),le>8*(we-(me.value-it)))throw"Something wrong with hufUncompress";be(ce,V,ee,ye),wt(ce,ye,G,K,me,le,ee,Ge,Ue,ct)}function Vt(G,K,me){for(var we=0;we<me;++we)K[we]=G[K[we]]}function Rt(G){for(var K=1;K<G.length;K++){var me=G[K-1]+G[K]-128;G[K]=me}}function Z(G,K){for(var me=0,we=Math.floor((G.length+1)/2),Ue=0,Ge=G.length-1;!(Ue>Ge||(K[Ue++]=G[me++],Ue>Ge));)K[Ue++]=G[we++]}function lt(G){for(var K=G.byteLength,me=new Array,we=0,Ue=new DataView(G);K>0;){var Ge=Ue.getInt8(we++);if(Ge<0){var ct=-Ge;K-=ct+1;for(var it=0;it<ct;it++)me.push(Ue.getUint8(we++))}else{var ct=Ge;K-=2;for(var V=Ue.getUint8(we++),it=0;it<ct+1;it++)me.push(V)}}return me}function et(G,K,me,we,Ue,Ge){var Dt=new DataView(Ge.buffer),ct=me[G.idx[0]].width,it=me[G.idx[0]].height,V=3,ee=Math.floor(ct/8),le=Math.ceil(ct/8),ce=Math.ceil(it/8),ye=ct-(le-1)*8,Ce=it-(ce-1)*8,ke={value:0},We=new Array(V),nt=new Array(V),St=new Array(V),mt=new Array(V),At=new Array(V);for(let sn=0;sn<V;++sn)At[sn]=K[G.idx[sn]],We[sn]=sn<1?0:We[sn-1]+le*ce,nt[sn]=new Float32Array(64),St[sn]=new Uint16Array(64),mt[sn]=new Uint16Array(le*64);for(let sn=0;sn<ce;++sn){var kt=8;sn==ce-1&&(kt=Ce);var It=8;for(let Yt=0;Yt<le;++Yt){Yt==le-1&&(It=ye);for(let xn=0;xn<V;++xn)St[xn].fill(0),St[xn][0]=Ue[We[xn]++],Ze(ke,we,St[xn]),je(St[xn],nt[xn]),yt(nt[xn]);Je(nt);for(let xn=0;xn<V;++xn)J(nt[xn],mt[xn],Yt*64)}let ri=0;for(let Yt=0;Yt<V;++Yt){const xn=me[G.idx[Yt]].type;for(let gn=8*sn;gn<8*sn+kt;++gn){ri=At[Yt][gn];for(let _i=0;_i<ee;++_i){const On=_i*64+(gn&7)*8;Dt.setUint16(ri+0*2*xn,mt[Yt][On+0],!0),Dt.setUint16(ri+1*2*xn,mt[Yt][On+1],!0),Dt.setUint16(ri+2*2*xn,mt[Yt][On+2],!0),Dt.setUint16(ri+3*2*xn,mt[Yt][On+3],!0),Dt.setUint16(ri+4*2*xn,mt[Yt][On+4],!0),Dt.setUint16(ri+5*2*xn,mt[Yt][On+5],!0),Dt.setUint16(ri+6*2*xn,mt[Yt][On+6],!0),Dt.setUint16(ri+7*2*xn,mt[Yt][On+7],!0),ri+=8*2*xn}}if(ee!=le)for(let gn=8*sn;gn<8*sn+kt;++gn){const _i=At[Yt][gn]+8*ee*2*xn,On=ee*64+(gn&7)*8;for(let ai=0;ai<It;++ai)Dt.setUint16(_i+ai*2*xn,mt[Yt][On+ai],!0)}}}for(var wn=new Uint16Array(ct),Dt=new DataView(Ge.buffer),Ht=0;Ht<V;++Ht){me[G.idx[Ht]].decoded=!0;var Ot=me[G.idx[Ht]].type;if(me[Ht].type==2)for(var ti=0;ti<it;++ti){const sn=At[Ht][ti];for(var en=0;en<ct;++en)wn[en]=Dt.getUint16(sn+en*2*Ot,!0);for(var en=0;en<ct;++en)Dt.setFloat32(sn+en*2*Ot,Te(wn[en]),!0)}}}function Ze(G,K,me){for(var we,Ue=1;Ue<64;)we=K[G.value],we==65280?Ue=64:we>>8==255?Ue+=we&255:(me[Ue]=we,Ue++),G.value++}function je(G,K){K[0]=Te(G[0]),K[1]=Te(G[1]),K[2]=Te(G[5]),K[3]=Te(G[6]),K[4]=Te(G[14]),K[5]=Te(G[15]),K[6]=Te(G[27]),K[7]=Te(G[28]),K[8]=Te(G[2]),K[9]=Te(G[4]),K[10]=Te(G[7]),K[11]=Te(G[13]),K[12]=Te(G[16]),K[13]=Te(G[26]),K[14]=Te(G[29]),K[15]=Te(G[42]),K[16]=Te(G[3]),K[17]=Te(G[8]),K[18]=Te(G[12]),K[19]=Te(G[17]),K[20]=Te(G[25]),K[21]=Te(G[30]),K[22]=Te(G[41]),K[23]=Te(G[43]),K[24]=Te(G[9]),K[25]=Te(G[11]),K[26]=Te(G[18]),K[27]=Te(G[24]),K[28]=Te(G[31]),K[29]=Te(G[40]),K[30]=Te(G[44]),K[31]=Te(G[53]),K[32]=Te(G[10]),K[33]=Te(G[19]),K[34]=Te(G[23]),K[35]=Te(G[32]),K[36]=Te(G[39]),K[37]=Te(G[45]),K[38]=Te(G[52]),K[39]=Te(G[54]),K[40]=Te(G[20]),K[41]=Te(G[22]),K[42]=Te(G[33]),K[43]=Te(G[38]),K[44]=Te(G[46]),K[45]=Te(G[51]),K[46]=Te(G[55]),K[47]=Te(G[60]),K[48]=Te(G[21]),K[49]=Te(G[34]),K[50]=Te(G[37]),K[51]=Te(G[47]),K[52]=Te(G[50]),K[53]=Te(G[56]),K[54]=Te(G[59]),K[55]=Te(G[61]),K[56]=Te(G[35]),K[57]=Te(G[36]),K[58]=Te(G[48]),K[59]=Te(G[49]),K[60]=Te(G[57]),K[61]=Te(G[58]),K[62]=Te(G[62]),K[63]=Te(G[63])}function yt(G){const K=.5*Math.cos(.7853975),me=.5*Math.cos(3.14159/16),we=.5*Math.cos(3.14159/8),Ue=.5*Math.cos(3*3.14159/16),Ge=.5*Math.cos(5*3.14159/16),ct=.5*Math.cos(3*3.14159/8),it=.5*Math.cos(7*3.14159/16);for(var V=new Array(4),ee=new Array(4),le=new Array(4),ce=new Array(4),ye=0;ye<8;++ye){var Ce=ye*8;V[0]=we*G[Ce+2],V[1]=ct*G[Ce+2],V[2]=we*G[Ce+6],V[3]=ct*G[Ce+6],ee[0]=me*G[Ce+1]+Ue*G[Ce+3]+Ge*G[Ce+5]+it*G[Ce+7],ee[1]=Ue*G[Ce+1]-it*G[Ce+3]-me*G[Ce+5]-Ge*G[Ce+7],ee[2]=Ge*G[Ce+1]-me*G[Ce+3]+it*G[Ce+5]+Ue*G[Ce+7],ee[3]=it*G[Ce+1]-Ge*G[Ce+3]+Ue*G[Ce+5]-me*G[Ce+7],le[0]=K*(G[Ce+0]+G[Ce+4]),le[3]=K*(G[Ce+0]-G[Ce+4]),le[1]=V[0]+V[3],le[2]=V[1]-V[2],ce[0]=le[0]+le[1],ce[1]=le[3]+le[2],ce[2]=le[3]-le[2],ce[3]=le[0]-le[1],G[Ce+0]=ce[0]+ee[0],G[Ce+1]=ce[1]+ee[1],G[Ce+2]=ce[2]+ee[2],G[Ce+3]=ce[3]+ee[3],G[Ce+4]=ce[3]-ee[3],G[Ce+5]=ce[2]-ee[2],G[Ce+6]=ce[1]-ee[1],G[Ce+7]=ce[0]-ee[0]}for(var ke=0;ke<8;++ke)V[0]=we*G[16+ke],V[1]=ct*G[16+ke],V[2]=we*G[48+ke],V[3]=ct*G[48+ke],ee[0]=me*G[8+ke]+Ue*G[24+ke]+Ge*G[40+ke]+it*G[56+ke],ee[1]=Ue*G[8+ke]-it*G[24+ke]-me*G[40+ke]-Ge*G[56+ke],ee[2]=Ge*G[8+ke]-me*G[24+ke]+it*G[40+ke]+Ue*G[56+ke],ee[3]=it*G[8+ke]-Ge*G[24+ke]+Ue*G[40+ke]-me*G[56+ke],le[0]=K*(G[ke]+G[32+ke]),le[3]=K*(G[ke]-G[32+ke]),le[1]=V[0]+V[3],le[2]=V[1]-V[2],ce[0]=le[0]+le[1],ce[1]=le[3]+le[2],ce[2]=le[3]-le[2],ce[3]=le[0]-le[1],G[0+ke]=ce[0]+ee[0],G[8+ke]=ce[1]+ee[1],G[16+ke]=ce[2]+ee[2],G[24+ke]=ce[3]+ee[3],G[32+ke]=ce[3]-ee[3],G[40+ke]=ce[2]-ee[2],G[48+ke]=ce[1]-ee[1],G[56+ke]=ce[0]-ee[0]}function Je(G){for(var K=0;K<64;++K){var me=G[0][K],we=G[1][K],Ue=G[2][K];G[0][K]=me+1.5747*Ue,G[1][K]=me-.1873*we-.4682*Ue,G[2][K]=me+1.8556*we}}function J(G,K,me){for(var we=0;we<64;++we)K[me+we]=oh.toHalfFloat(k(G[we]))}function k(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(L,Math.abs(G)-1)}function re(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function xe(G){var K=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),me=new Uint8Array(lt(K)),we=new Uint8Array(me.length);return Rt(me),Z(me,we),new DataView(we.buffer)}function Xe(G){var K=G.array.slice(G.offset.value,G.offset.value+G.size),me=Jy(K),we=new Uint8Array(me.length);return Rt(me),Z(me,we),new DataView(we.buffer)}function Be(G){for(var K=G.viewer,me={value:G.offset.value},we=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),Ue=new Uint8Array(8192),Ge=0,ct=new Array(G.channels),it=0;it<G.channels;it++)ct[it]={},ct[it].start=Ge,ct[it].end=ct[it].start,ct[it].nx=G.width,ct[it].ny=G.lines,ct[it].size=G.type,Ge+=ct[it].nx*ct[it].ny*ct[it].size;var V=Ie(K,me),ee=Ie(K,me);if(ee>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(V<=ee)for(var it=0;it<ee-V+1;it++)Ue[it+V]=de(K,me);var le=new Uint16Array(65536),ce=U(Ue,le),ye=vt(K,me);fn(G.array,K,me,ye,we,Ge);for(var it=0;it<G.channels;++it)for(var Ce=ct[it],ke=0;ke<ct[it].size;++ke)Bt(we,Ce.start+ke,Ce.nx,Ce.size,Ce.ny,Ce.nx*Ce.size,ce);Vt(le,we,Ge);for(var We=0,nt=new Uint8Array(we.buffer.byteLength),St=0;St<G.lines;St++)for(var mt=0;mt<G.channels;mt++){var Ce=ct[mt],At=Ce.nx*Ce.size,kt=new Uint8Array(we.buffer,Ce.end*2,At*2);nt.set(kt,We),We+=At*2,Ce.end+=At}return new DataView(nt.buffer)}function ut(G){var K=G.array.slice(G.offset.value,G.offset.value+G.size),me=Jy(K);const we=G.lines*G.channels*G.width,Ue=G.type==1?new Uint16Array(we):new Uint32Array(we);let Ge=0,ct=0;const it=new Array(4);for(let V=0;V<G.lines;V++)for(let ee=0;ee<G.channels;ee++){let le=0;switch(G.type){case 1:it[0]=Ge,it[1]=it[0]+G.width,Ge=it[1]+G.width;for(let ce=0;ce<G.width;++ce){const ye=me[it[0]++]<<8|me[it[1]++];le+=ye,Ue[ct]=le,ct++}break;case 2:it[0]=Ge,it[1]=it[0]+G.width,it[2]=it[1]+G.width,Ge=it[2]+G.width;for(let ce=0;ce<G.width;++ce){const ye=me[it[0]++]<<24|me[it[1]++]<<16|me[it[2]++]<<8;le+=ye,Ue[ct]=le,ct++}break}}return new DataView(Ue.buffer)}function ot(G){var K=G.viewer,me={value:G.offset.value},we=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),Ue={version:Pe(K,me),unknownUncompressedSize:Pe(K,me),unknownCompressedSize:Pe(K,me),acCompressedSize:Pe(K,me),dcCompressedSize:Pe(K,me),rleCompressedSize:Pe(K,me),rleUncompressedSize:Pe(K,me),rleRawSize:Pe(K,me),totalAcUncompressedCount:Pe(K,me),totalDcUncompressedCount:Pe(K,me),acCompression:Pe(K,me)};if(Ue.version<2)throw"EXRLoader.parse: "+_r.compression+" version "+Ue.version+" is unsupported";for(var Ge=new Array,ct=Ie(K,me)-2;ct>0;){var it=pt(K.buffer,me),V=de(K,me),ee=V>>2&3,le=(V>>4)-1,ce=new Int8Array([le])[0],ye=de(K,me);Ge.push({name:it,index:ce,type:ye,compression:ee}),ct-=it.length+3}for(var Ce=_r.channels,ke=new Array(G.channels),We=0;We<G.channels;++We){var nt=ke[We]={},St=Ce[We];nt.name=St.name,nt.compression=0,nt.decoded=!1,nt.type=St.pixelType,nt.pLinear=St.pLinear,nt.width=G.width,nt.height=G.lines}for(var mt={idx:new Array(3)},At=0;At<G.channels;++At)for(var nt=ke[At],We=0;We<Ge.length;++We){var kt=Ge[We];nt.name==kt.name&&(nt.compression=kt.compression,kt.index>=0&&(mt.idx[kt.index]=At),nt.offset=At)}if(Ue.acCompressedSize>0)switch(Ue.acCompression){case 0:var Dt=new Uint16Array(Ue.totalAcUncompressedCount);fn(G.array,K,me,Ue.acCompressedSize,Dt,Ue.totalAcUncompressedCount);break;case 1:var It=G.array.slice(me.value,me.value+Ue.totalAcUncompressedCount),wn=Jy(It),Dt=new Uint16Array(wn.buffer);me.value+=Ue.totalAcUncompressedCount;break}if(Ue.dcCompressedSize>0){var Ht={array:G.array,offset:me,size:Ue.dcCompressedSize},Ot=new Uint16Array(Xe(Ht).buffer);me.value+=Ue.dcCompressedSize}if(Ue.rleRawSize>0){var It=G.array.slice(me.value,me.value+Ue.rleCompressedSize),wn=Jy(It),ti=lt(wn.buffer);me.value+=Ue.rleCompressedSize}for(var en=0,sn=new Array(ke.length),We=0;We<sn.length;++We)sn[We]=new Array;for(var ri=0;ri<G.lines;++ri)for(var Yt=0;Yt<ke.length;++Yt)sn[Yt].push(en),en+=ke[Yt].width*G.type*2;et(mt,sn,ke,Dt,Ot,we);for(var We=0;We<ke.length;++We){var nt=ke[We];if(!nt.decoded)switch(nt.compression){case 2:for(var xn=0,gn=0,ri=0;ri<G.lines;++ri){for(var _i=sn[We][xn],On=0;On<nt.width;++On){for(var ai=0;ai<2*nt.type;++ai)we[_i++]=ti[gn+ai*nt.width*nt.height];gn++}xn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(we.buffer)}function pt(G,K){for(var me=new Uint8Array(G),we=0;me[K.value+we]!=0;)we+=1;var Ue=new TextDecoder().decode(me.slice(K.value,K.value+we));return K.value=K.value+we+1,Ue}function Pt(G,K,me){var we=new TextDecoder().decode(new Uint8Array(G).slice(K.value,K.value+me));return K.value=K.value+me,we}function at(G,K){var me=Et(G,K),we=vt(G,K);return[me,we]}function _t(G,K){var me=vt(G,K),we=vt(G,K);return[me,we]}function Et(G,K){var me=G.getInt32(K.value,!0);return K.value=K.value+4,me}function vt(G,K){var me=G.getUint32(K.value,!0);return K.value=K.value+4,me}function dt(G,K){var me=G[K.value];return K.value=K.value+1,me}function de(G,K){var me=G.getUint8(K.value);return K.value=K.value+1,me}const Pe=function(G,K){let me;return"getBigInt64"in DataView.prototype?me=Number(G.getBigInt64(K.value,!0)):me=G.getUint32(K.value+4,!0)+Number(G.getUint32(K.value,!0)<<32),K.value+=8,me};function st(G,K){var me=G.getFloat32(K.value,!0);return K.value+=4,me}function pe(G,K){return oh.toHalfFloat(st(G,K))}function Te(G){var K=(G&31744)>>10,me=G&1023;return(G>>15?-1:1)*(K?K===31?me?NaN:1/0:Math.pow(2,K-15)*(1+me/1024):6103515625e-14*(me/1024))}function Ie(G,K){var me=G.getUint16(K.value,!0);return K.value+=2,me}function Ye(G,K){return Te(Ie(G,K))}function bt(G,K,me,we){for(var Ue=me.value,Ge=[];me.value<Ue+we-1;){var ct=pt(K,me),it=Et(G,me),V=de(G,me);me.value+=3;var ee=Et(G,me),le=Et(G,me);Ge.push({name:ct,pixelType:it,pLinear:V,xSampling:ee,ySampling:le})}return me.value+=1,Ge}function gt(G,K){var me=st(G,K),we=st(G,K),Ue=st(G,K),Ge=st(G,K),ct=st(G,K),it=st(G,K),V=st(G,K),ee=st(G,K);return{redX:me,redY:we,greenX:Ue,greenY:Ge,blueX:ct,blueY:it,whiteX:V,whiteY:ee}}function zt(G,K){var me=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],we=de(G,K);return me[we]}function mn(G,K){var me=vt(G,K),we=vt(G,K),Ue=vt(G,K),Ge=vt(G,K);return{xMin:me,yMin:we,xMax:Ue,yMax:Ge}}function Vn(G,K){var me=["INCREASING_Y"],we=de(G,K);return me[we]}function on(G,K){var me=st(G,K),we=st(G,K);return[me,we]}function Ri(G,K){var me=st(G,K),we=st(G,K),Ue=st(G,K);return[me,we,Ue]}function fi(G,K,me,we,Ue){if(we==="string"||we==="stringvector"||we==="iccProfile")return Pt(K,me,Ue);if(we==="chlist")return bt(G,K,me,Ue);if(we==="chromaticities")return gt(G,me);if(we==="compression")return zt(G,me);if(we==="box2i")return mn(G,me);if(we==="lineOrder")return Vn(G,me);if(we==="float")return st(G,me);if(we==="v2f")return on(G,me);if(we==="v3f")return Ri(G,me);if(we==="int")return Et(G,me);if(we==="rational")return at(G,me);if(we==="timecode")return _t(G,me);if(we==="preview")return me.value+=Ue,"skipped";me.value+=Ue}function wi(G,K,me){const we={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";we.version=G.getUint8(4);const Ue=G.getUint8(5);we.spec={singleTile:!!(Ue&2),longName:!!(Ue&4),deepFormat:!!(Ue&8),multiPart:!!(Ue&16)},me.value=8;for(var Ge=!0;Ge;){var ct=pt(K,me);if(ct==0)Ge=!1;else{var it=pt(K,me),V=vt(G,me),ee=fi(G,K,me,it,V);ee===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${it}'.`):we[ct]=ee}}if((Ue&-5)!=0)throw console.error("EXRHeader:",we),"THREE.EXRLoader: provided file is currently unsupported.";return we}function Fi(G,K,me,we,Ue){const Ge={size:0,viewer:K,array:me,offset:we,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[mg?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":Ge.lines=1,Ge.uncompress=re;break;case"RLE_COMPRESSION":Ge.lines=1,Ge.uncompress=xe;break;case"ZIPS_COMPRESSION":Ge.lines=1,Ge.uncompress=Xe;break;case"ZIP_COMPRESSION":Ge.lines=16,Ge.uncompress=Xe;break;case"PIZ_COMPRESSION":Ge.lines=32,Ge.uncompress=Be;break;case"PXR24_COMPRESSION":Ge.lines=16,Ge.uncompress=ut;break;case"DWAA_COMPRESSION":Ge.lines=32,Ge.uncompress=ot;break;case"DWAB_COMPRESSION":Ge.lines=256,Ge.uncompress=ot;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(Ge.scanlineBlockSize=Ge.lines,Ge.type==1)switch(Ue){case Li:Ge.getter=Ye,Ge.inputSize=2;break;case wr:Ge.getter=Ie,Ge.inputSize=2;break}else if(Ge.type==2)switch(Ue){case Li:Ge.getter=st,Ge.inputSize=4;break;case wr:Ge.getter=pe,Ge.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Ge.type+" for "+G.compression+".";Ge.blockCount=(G.dataWindow.yMax+1)/Ge.scanlineBlockSize;for(var ct=0;ct<Ge.blockCount;ct++)Pe(K,we);Ge.outputChannels=Ge.channels==3?4:Ge.channels;const it=Ge.width*Ge.height*Ge.outputChannels;switch(Ue){case Li:Ge.byteArray=new Float32Array(it),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(1,0,it);break;case wr:Ge.byteArray=new Uint16Array(it),Ge.channels<Ge.outputChannels&&Ge.byteArray.fill(15360,0,it);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ue);break}return Ge.bytesPerLine=Ge.width*Ge.inputSize*Ge.channels,Ge.outputChannels==4?Ge.format=ur:Ge.format=av,mg?Ge.colorSpace="srgb-linear":Ge.encoding=3e3,Ge}const Hi=new DataView(e),Or=new Uint8Array(e),cs={value:0},_r=wi(Hi,e,cs),jt=Fi(_r,Hi,Or,cs,this.type),ia={value:0},qn={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<jt.height/jt.scanlineBlockSize;G++){const K=vt(Hi,cs);jt.size=vt(Hi,cs),jt.lines=K+jt.scanlineBlockSize>jt.height?jt.height-K:jt.scanlineBlockSize;const we=jt.size<jt.lines*jt.bytesPerLine?jt.uncompress(jt):re(jt);cs.value+=jt.size;for(let Ue=0;Ue<jt.scanlineBlockSize;Ue++){const Ge=Ue+G*jt.scanlineBlockSize;if(Ge>=jt.height)break;for(let ct=0;ct<jt.channels;ct++){const it=qn[_r.channels[ct].name];for(let V=0;V<jt.width;V++){ia.value=(Ue*(jt.channels*jt.width)+ct*jt.width+V)*jt.inputSize;const ee=(jt.height-1-Ge)*(jt.width*jt.outputChannels)+V*jt.outputChannels+it;jt.byteArray[ee]=jt.getter(we,ia)}}}}return{header:_r,width:jt.width,height:jt.height,data:jt.byteArray,format:jt.format,[mg?"colorSpace":"encoding"]:jt[mg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function a(o,c){mg?o.colorSpace=c.colorSpace:o.encoding=c.encoding,o.minFilter=Fn,o.magFilter=Fn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,c)}return super.load(e,a,i,r)}}const c1=new WeakMap;class z8 extends na{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const a=new ta(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,o=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,c).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const f in t.attributeTypes){const p=t.attributeTypes[f];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[f]=p.name)}const i=JSON.stringify(t);if(c1.has(e)){const f=c1.get(e);if(f.key===i)return f.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const a=this.workerNextTaskID++,o=e.byteLength,c=this._getWorker(a,o).then(f=>(r=f,new Promise((p,m)=>{r._callbacks[a]={resolve:p,reject:m},r.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(f=>this._createGeometry(f.geometry));return c.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),c1.set(e,{key:i,promise:c}),c}_createGeometry(e){const t=new un;e.index&&t.setIndex(new Gn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],a=r.name,o=r.array,c=r.itemSize;t.setAttribute(a,new Gn(o,c))}return t}_loadLibrary(e,t){const i=new ta(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,a)=>{i.load(e,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const a=F8.toString(),o=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){const o=a.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function F8(){let n,e;onmessage=function(o){const c=o.data;switch(c.type){case"init":n=c.decoderConfig,e=new Promise(function(m){n.onModuleLoaded=function(v){m({draco:v})},DracoDecoderModule(n)});break;case"decode":const f=c.buffer,p=c.taskConfig;e.then(m=>{const v=m.draco,y=new v.Decoder,x=new v.DecoderBuffer;x.Init(new Int8Array(f),f.byteLength);try{const b=t(v,y,x,p),T=b.attributes.map(M=>M.array.buffer);b.index&&T.push(b.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:b},T)}catch(b){console.error(b),self.postMessage({type:"error",id:c.id,error:b.message})}finally{v.destroy(x),v.destroy(y)}});break}};function t(o,c,f,p){const m=p.attributeIDs,v=p.attributeTypes;let y,x;const b=c.GetEncodedGeometryType(f);if(b===o.TRIANGULAR_MESH)y=new o.Mesh,x=c.DecodeBufferToMesh(f,y);else if(b===o.POINT_CLOUD)y=new o.PointCloud,x=c.DecodeBufferToPointCloud(f,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const T={index:null,attributes:[]};for(const M in m){const A=self[v[M]];let w,B;if(p.useUniqueIDs)B=m[M],w=c.GetAttributeByUniqueId(y,B);else{if(B=c.GetAttributeId(y,o[m[M]]),B===-1)continue;w=c.GetAttribute(y,B)}T.attributes.push(r(o,c,y,M,A,w))}return b===o.TRIANGULAR_MESH&&(T.index=i(o,c,y)),o.destroy(y),T}function i(o,c,f){const m=f.num_faces()*3,v=m*4,y=o._malloc(v);c.GetTrianglesUInt32Array(f,v,y);const x=new Uint32Array(o.HEAPF32.buffer,y,m).slice();return o._free(y),{array:x,itemSize:1}}function r(o,c,f,p,m,v){const y=v.num_components(),b=f.num_points()*y,T=b*m.BYTES_PER_ELEMENT,M=a(o,m),A=o._malloc(T);c.GetAttributeDataArrayForAllPoints(f,v,M,T,A);const w=new m(o.HEAPF32.buffer,A,b).slice();return o._free(A),{name:p,array:w,itemSize:y}}function a(o,c){switch(c){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let $y;const u1=()=>{if($y)return $y;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let a;const o=WebAssembly.instantiate(c(r),{}).then(v=>{a=v.instance,a.exports.__wasm_call_ctors()});function c(v){const y=new Uint8Array(v.length);for(let b=0;b<v.length;++b){const T=v.charCodeAt(b);y[b]=T>96?T-71:T>64?T-65:T>47?T+4:T>46?63:62}let x=0;for(let b=0;b<v.length;++b)y[x++]=y[b]<60?i[y[b]]:(y[b]-60)*64+y[++b];return y.buffer.slice(0,x)}function f(v,y,x,b,T,M){const A=a.exports.sbrk,w=x+3&-4,B=A(w*b),D=A(T.length),I=new Uint8Array(a.exports.memory.buffer);I.set(T,D);const N=v(B,x,b,D,T.length);if(N===0&&M&&M(B,w,b),y.set(I.subarray(B,B+x*b)),A(B-A(0)),N!==0)throw new Error(`Malformed buffer data: ${N}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return $y={ready:o,supported:!0,decodeVertexBuffer(v,y,x,b,T){f(a.exports.meshopt_decodeVertexBuffer,v,y,x,b,a.exports[p[T]])},decodeIndexBuffer(v,y,x,b){f(a.exports.meshopt_decodeIndexBuffer,v,y,x,b)},decodeIndexSequence(v,y,x,b){f(a.exports.meshopt_decodeIndexSequence,v,y,x,b)},decodeGltfBuffer(v,y,x,b,T,M){f(a.exports[m[T]],v,y,x,b,a.exports[p[M]])}},$y};let Qy=null,DD="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function OD(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Qy||(Qy=new z8),Qy.setDecoderPath(typeof n=="string"?n:DD),i.setDRACOLoader(Qy)),e&&i.setMeshoptDecoder(typeof u1=="function"?u1():u1)}}const ib=(n,e,t,i)=>Ec(UE,n,OD(e,t,i));ib.preload=(n,e,t,i)=>Ec.preload(UE,n,OD(e,t,i));ib.clear=n=>Ec.clear(UE,n);ib.setDecoderPath=n=>{DD=n};const H8=F.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:o,onStart:c,onEnd:f,...p},m)=>{const v=Fr(N=>N.invalidate),y=Fr(N=>N.camera),x=Fr(N=>N.gl),b=Fr(N=>N.events),T=Fr(N=>N.setEvents),M=Fr(N=>N.set),A=Fr(N=>N.get),w=Fr(N=>N.performance),B=e||y,D=i||b.connected||x.domElement,I=F.useMemo(()=>new $5(B),[B]);return xv(()=>{I.enabled&&I.update()},-1),F.useEffect(()=>(a&&I.connect(a===!0?D:a),I.connect(D),()=>void I.dispose()),[a,D,t,I,v]),F.useEffect(()=>{const N=L=>{v(),t&&w.regress(),o&&o(L)},H=L=>{c&&c(L)},P=L=>{f&&f(L)};return I.addEventListener("change",N),I.addEventListener("start",H),I.addEventListener("end",P),()=>{I.removeEventListener("start",H),I.removeEventListener("end",P),I.removeEventListener("change",N)}},[o,c,f,I,v,T]),F.useEffect(()=>{if(n){const N=A().controls;return M({controls:I}),()=>M({controls:N})}},[n,I]),F.createElement("primitive",zi({ref:m,object:I,enableDamping:r},p))}),UD=(n,e,t)=>{let i;switch(n){case nr:i=new Uint8ClampedArray(e*t*4);break;case wr:i=new Uint16Array(e*t*4);break;case Go:i=new Uint32Array(e*t*4);break;case Ex:i=new Int8Array(e*t*4);break;case Mx:i=new Int16Array(e*t*4);break;case rv:i=new Int32Array(e*t*4);break;case Li:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let e_;const G8=(n,e,t,i)=>{if(e_!==void 0)return e_;const r=new Ii(1,1,i);e.setRenderTarget(r);const a=new Ei(new Tc,new ss({color:16777215}));e.render(a,t),e.setRenderTarget(null);const o=UD(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),a.geometry.dispose(),a.material.dispose(),e_=o[0]!==0,e_};class NE{constructor(e){var t,i,r,a,o,c,f,p,m,v,y,x,b,T,M,A;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(B){throw this._renderer.setRenderTarget(null),B}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:ur,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter:Fn,minFilter:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:Fn,samples:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:cr,wrapT:((b=e.renderTargetOptions)===null||b===void 0?void 0:b.wrapT)!==void 0?(T=e.renderTargetOptions)===null||T===void 0?void 0:T.wrapT:cr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=NE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new bh,this._camera=new Bl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!G8(this._type,this._renderer,this._camera,w)){let B;switch(this._type){case wr:B=this._renderer.extensions.has("EXT_color_buffer_float")?Li:void 0;break}B!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Li}`),this._type=B):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ei(new Tc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ii(this.width,this.height,w),this._renderTarget.texture.mapping=((M=e.renderTargetOptions)===null||M===void 0?void 0:M.mapping)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping:Iu}static instantiateRenderer(){const e=new EE;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=UD(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new zo(this.toArray(),this.width,this.height,ur,this._type,(e==null?void 0:e.mapping)||Iu,(e==null?void 0:e.wrapS)||cr,(e==null?void 0:e.wrapT)||cr,(e==null?void 0:e.magFilter)||Fn,(e==null?void 0:e.minFilter)||Fn,(e==null?void 0:e.anisotropy)||1,Ms);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Pi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ei&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ei&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const V8=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,k8=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class X8 extends Pi{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:a,maxDisplayBoost:o,hdrCapacityMin:c,hdrCapacityMax:f,sdr:p,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:V8,fragmentShader:k8,uniforms:{sdr:{value:p},gainMap:{value:m},gamma:{value:new $(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new $().fromArray(t)},offsetSdr:{value:new $().fromArray(i)},gainMapMin:{value:new $().fromArray(r)},gainMapMax:{value:new $().fromArray(a)},weightFactor:{value:(Math.log2(o)-c)/(f-c)}},blending:ea,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=c,this._hdrCapacityMax=f,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ND extends Error{}class LD extends Error{}const gg=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Y8=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const a=gg(r,"hdrgm:GainMapMin","0"),o=gg(r,"hdrgm:GainMapMax"),c=gg(r,"hdrgm:Gamma","1"),f=gg(r,"hdrgm:OffsetSDR","0.015625"),p=gg(r,"hdrgm:OffsetHDR","0.015625"),m=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),v=m?m[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!y)throw new Error("Incomplete gainmap metadata");const x=y[1];return{gainMapMin:Array.isArray(a)?a.map(b=>parseFloat(b)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(o)?o.map(b=>parseFloat(b)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(c)?c.map(b=>parseFloat(b)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(f)?f.map(b=>parseFloat(b)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetHdr:Array.isArray(p)?p.map(b=>parseFloat(b)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(x)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class j8{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=a.byteLength;let c=2,f=0,p;for(;c<o;){if(++f>250){i(new Error(`Found no marker after ${f} loops `));return}if(a.getUint8(c)!==255){i(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${a.getUint8(c).toString(16)}`));return}if(p=a.getUint8(c+1),r&&console.log(`Marker: ${p.toString(16)}`),p===226){r&&console.log("Found APP2 marker (0xffe2)");const m=c+4;if(a.getUint32(m)===1297106432){const v=m+4;let y;if(a.getUint16(v)===18761)y=!1;else if(a.getUint16(v)===19789)y=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(v+2,!y)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=a.getUint32(v+4,!y);if(x<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=v+x,T=a.getUint16(b,!y),M=b+2;let A=0;for(let I=M;I<M+12*T;I+=12)a.getUint16(I,!y)===45057&&(A=a.getUint32(I+8,!y));const B=b+2+T*12+4,D=[];for(let I=B;I<B+A*16;I+=16){const N={MPType:a.getUint32(I,!y),size:a.getUint32(I+4,!y),dataOffset:a.getUint32(I+8,!y),dependantImages:a.getUint32(I+12,!y),start:-1,end:-1,isFII:!1};N.dataOffset?(N.start=v+N.dataOffset,N.isFII=!1):(N.start=0,N.isFII=!0),N.end=N.start+N.size,D.push(N)}if(this.options.extractNonFII&&D.length){const I=new Blob([a]),N=[];for(const H of D){if(H.isFII&&!this.options.extractFII)continue;const P=I.slice(H.start,H.end+1,"image/jpeg");N.push(P)}t(N)}}}c+=2+a.getUint16(c+2)}})}}const W8=async n=>{const e=Y8(n);if(!e)throw new LD("Gain map XMP metadata not found");const i=await new j8({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new ND("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},_R=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class ID extends na{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new $x}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new X8({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ei,sdr:new ei});return new NE({width:16,height:16,type:wr,colorSpace:Ms,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const a=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let c,f,p=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([a?_R(a):Promise.resolve(void 0),_R(o)]);f=y[0],c=y[1],p=!0}else{const y=await Promise.all([a?createImageBitmap(a,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);f=y[0],c=y[1]}const m=new ei(f||new ImageData(2,2),Iu,cr,cr,Fn,k1,ur,nr,1,Ms);m.flipY=p,m.needsUpdate=!0;const v=new ei(c,Iu,cr,cr,Fn,k1,ur,nr,1,Wn);v.flipY=p,v.needsUpdate=!0,e.width=c.width,e.height=c.height,e.material.gainMap=m,e.material.sdr=v,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class q8 extends ID{load([e,t,i],r,a,o){const c=this.prepareQuadRenderer();let f,p,m;const v=async()=>{if(f&&p&&m){try{await this.render(c,m,f,p)}catch(L){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(L),c.disposeOnDemandRenderer();return}typeof r=="function"&&r(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),c.disposeOnDemandRenderer()}};let y=!0,x=0,b=0,T=!0,M=0,A=0,w=!0,B=0,D=0;const I=()=>{if(typeof a=="function"){const L=x+M+B,U=b+A+D,Y=y&&T&&w;a(new ProgressEvent("progress",{lengthComputable:Y,loaded:U,total:L}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const N=new ta(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(e,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");f=L,await v()},L=>{y=L.lengthComputable,b=L.loaded,x=L.total,I()},L=>{this.manager.itemError(e),typeof o=="function"&&o(L)});const H=new ta(this._internalLoadingManager);H.setResponseType("arraybuffer"),H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(t,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");p=L,await v()},L=>{T=L.lengthComputable,A=L.loaded,M=L.total,I()},L=>{this.manager.itemError(t),typeof o=="function"&&o(L)});const P=new ta(this._internalLoadingManager);return P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(i,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");m=JSON.parse(L),await v()},L=>{w=L.lengthComputable,D=L.loaded,B=L.total,I()},L=>{this.manager.itemError(i),typeof o=="function"&&o(L)}),c}}class K8 extends ID{load(e,t,i,r){const a=this.prepareQuadRenderer(),o=new ta(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const f=new Uint8Array(c);let p,m,v;try{const y=await W8(f);p=y.sdr,m=y.gainMap,v=y.metadata}catch(y){if(y instanceof LD||y instanceof ND)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=f;else throw y}try{await this.render(a,v,p,m)}catch(y){this.manager.itemError(e),typeof r=="function"&&r(y),a.disposeOnDemandRenderer();return}typeof t=="function"&&t(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,c=>{this.manager.itemError(e),typeof r=="function"&&r(c)}),a}}const $g={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},PD="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",pp=n=>Array.isArray(n),LE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function rb({files:n=LE,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(IE(t),n=$g[t],e=PD);const a=pp(n),{extension:o,isCubemap:c}=PE(n),f=zE(o);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=Fr(x=>x.gl);F.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function x(){Ec.clear(f,a?[n]:n)}p.domElement.addEventListener("webglcontextlost",x,{once:!0})},[n,p.domElement]);const m=Ec(f,a?[n]:n,x=>{(o==="webp"||o==="jpg"||o==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),r&&r(x)});let v=a?m[0]:m;if(o==="jpg"||o==="jpeg"||o==="webp"){var y;v=(y=v.renderTarget)==null?void 0:y.texture}return v.mapping=c?Dl:gp,v.colorSpace=i??(c?"srgb":"srgb-linear"),v}const J8={files:LE,path:"",preset:void 0,extensions:void 0};rb.preload=n=>{const e={...J8,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(IE(r),t=$g[r],i=PD);const{extension:o}=PE(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=zE(o);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);Ec.preload(c,pp(t)?[t]:t,f=>{f.setPath==null||f.setPath(i),a&&a(f)})};const Z8={files:LE,preset:void 0};rb.clear=n=>{const e={...Z8,...n};let{files:t}=e;const{preset:i}=e;i&&(IE(i),t=$g[i]);const{extension:r}=PE(t),a=zE(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Ec.clear(a,pp(t)?[t]:t)};function IE(n){if(!(n in $g))throw new Error("Preset must be one of: "+Object.keys($g).join(", "))}function PE(n){var e;const t=pp(n)&&n.length===6,i=pp(n)&&n.length===3&&n.some(o=>o.endsWith("json")),r=pp(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function zE(n){return n==="cube"?RB:n==="hdr"?I8:n==="exr"?P8:n==="jpg"||n==="jpeg"?K8:n==="webp"?q8:null}const $8=n=>n.current&&n.current.isScene,Q8=n=>$8(n)?n.current:n;function FE(n,e,t,i,r={}){var a,o,c,f;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const p=Q8(e||t),m=p.background,v=p.environment,y={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(a=(o=p.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(c=(f=p.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&c!==void 0?c:[0,0,0]};return n!=="only"&&(p.environment=i),n&&(p.background=i),wl(p,r),()=>{n!=="only"&&(p.environment=v),n&&(p.background=m),wl(p,y)}}function HE({scene:n,background:e=!1,map:t,...i}){const r=Fr(a=>a.scene);return F.useLayoutEffect(()=>{if(t)return FE(e,n,r,t,i)}),null}function zD({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:o,environmentRotation:c,...f}){const p=rb(f),m=Fr(v=>v.scene);return F.useLayoutEffect(()=>FE(n,e,m,p,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:o,environmentRotation:c})),F.useEffect(()=>()=>{p.dispose()},[p]),null}function e6({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:a,background:o=!1,blur:c,backgroundBlurriness:f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:y,scene:x,files:b,path:T,preset:M=void 0,extensions:A}){const w=Fr(P=>P.gl),B=Fr(P=>P.scene),D=F.useRef(null),[I]=F.useState(()=>new bh),N=F.useMemo(()=>{const P=new KA(i);return P.texture.type=wr,P},[i]);F.useEffect(()=>()=>{N.dispose()},[N]),F.useLayoutEffect(()=>{if(r===1){const P=w.autoClear;w.autoClear=!0,D.current.update(w,I),w.autoClear=P}return FE(o,x,B,N.texture,{backgroundBlurriness:c??f,backgroundIntensity:p,backgroundRotation:m,environmentIntensity:v,environmentRotation:y})},[n,I,N.texture,x,B,o,r,w]);let H=1;return xv(()=>{if(r===1/0||H<r){const P=w.autoClear;w.autoClear=!0,D.current.update(w,I),w.autoClear=P,H++}}),F.createElement(F.Fragment,null,EG(F.createElement(F.Fragment,null,n,F.createElement("cubeCamera",{ref:D,args:[e,t,N]}),b||M?F.createElement(zD,{background:!0,files:b,preset:M,path:T,extensions:A}):a?F.createElement(HE,{background:!0,map:a,extensions:A}):null),I))}function t6(n){var e,t,i,r;const a=rb(n),o=n.map||a;F.useMemo(()=>BE({GroundProjectedEnvImpl:X5}),[]),F.useEffect(()=>()=>{a.dispose()},[a]);const c=F.useMemo(()=>[o],[o]),f=(e=n.ground)==null?void 0:e.height,p=(t=n.ground)==null?void 0:t.radius,m=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return F.createElement(F.Fragment,null,F.createElement(HE,zi({},n,{map:o})),F.createElement("groundProjectedEnvImpl",{args:c,scale:m,height:f,radius:p}))}function n6(n){return n.ground?F.createElement(t6,n):n.map?F.createElement(HE,n):n.children?F.createElement(e6,n):F.createElement(zD,n)}const i6=F.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:i=1,height:r=1,blur:a=1,near:o=0,far:c=10,resolution:f=512,smooth:p=!0,color:m="#000000",depthWrite:v=!1,renderOrder:y,...x},b)=>{const T=F.useRef(null),M=Fr(ae=>ae.scene),A=Fr(ae=>ae.gl),w=F.useRef(null);i=i*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[B,D,I,N,H,P,L]=F.useMemo(()=>{const ae=new Ii(f,f),he=new Ii(f,f);he.texture.generateMipmaps=ae.texture.generateMipmaps=!1;const X=new Tc(i,r).rotateX(Math.PI/2),te=new Ei(X),ne=new Zx;ne.depthTest=ne.depthWrite=!1,ne.onBeforeCompile=se=>{se.uniforms={...se.uniforms,ucolor:{value:new xt(m)}},se.fragmentShader=se.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),se.fragmentShader=se.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const be=new Pi(N8),W=new Pi(L8);return W.depthTest=be.depthTest=!1,[ae,X,ne,te,be,W,he]},[f,i,r,n,m]),U=ae=>{N.visible=!0,N.material=H,H.uniforms.tDiffuse.value=B.texture,H.uniforms.h.value=ae*1/256,A.setRenderTarget(L),A.render(N,w.current),N.material=P,P.uniforms.tDiffuse.value=L.texture,P.uniforms.v.value=ae*1/256,A.setRenderTarget(B),A.render(N,w.current),N.visible=!1};let Y=0,ie,Q;return xv(()=>{w.current&&(e===1/0||Y<e)&&(Y++,ie=M.background,Q=M.overrideMaterial,T.current.visible=!1,M.background=null,M.overrideMaterial=I,A.setRenderTarget(B),A.render(M,w.current),U(a),p&&U(a*.4),A.setRenderTarget(null),T.current.visible=!0,M.overrideMaterial=Q,M.background=ie)}),F.useImperativeHandle(b,()=>T.current,[]),F.createElement("group",zi({"rotation-x":Math.PI/2},x,{ref:T}),F.createElement("mesh",{renderOrder:y,geometry:D,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},F.createElement("meshBasicMaterial",{transparent:!0,map:B.texture,opacity:t,depthWrite:v})),F.createElement("orthographicCamera",{ref:w,args:[-i/2,i/2,r/2,-r/2,o,c]}))});/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var f1=1/1e3,r6=1e3,a6=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*f1}get fixedDelta(){return this._fixedDelta*f1}set fixedDelta(n){this._fixedDelta=n*r6}get elapsed(){return this._elapsed*f1}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},s6=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new un;return t.setAttribute("position",new Gn(n,3)),t.setAttribute("uv",new Gn(e,2)),t})(),ls=class fA{static get fullscreenGeometry(){return s6}constructor(e="Pass",t=new bh,i=new lv){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ei(fA.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new bh),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Vu){}render(e,t,i,r,a){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ii||t instanceof fr||t instanceof ei||t instanceof fA)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},o6=class extends ls{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const a=n.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},l6=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,FD="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",HD=class extends Pi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new jn(null),opacity:new jn(1)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:l6,vertexShader:FD})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},c6=class extends ls{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new HD,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Ii(1,1,{minFilter:Fn,magFilter:Fn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==nr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===Wn&&(this.renderTarget.texture.colorSpace=Wn))}},xR=new xt,GD=class extends ls{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const a=this.overrideClearColor,o=this.overrideClearAlpha,c=n.getClearAlpha(),f=a!==null,p=o>=0;f?(n.getClearColor(xR),n.setClearColor(a,p?o:c)):p&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),f?n.setClearColor(xR,c):p&&n.setClearAlpha(c)}},u6=class extends ls{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new GD(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const a=n.getContext(),o=n.state.buffers,c=this.scene,f=this.camera,p=this.clearPass,m=this.inverted?0:1,v=1-m;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,m,4294967295),o.stencil.setClear(v),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?p.render(n,null):(p.render(n,e),p.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(c,f)):(n.setRenderTarget(e),n.render(c,f),n.setRenderTarget(t),n.render(c,f)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}},f6=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new c6,this.depthTexture=null,this.passes=[],this.timer=new a6,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Ve),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===nr&&n.outputColorSpace===Wn&&(this.inputBuffer.texture.colorSpace=Wn,this.outputBuffer.texture.colorSpace=Wn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new hv;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=xh,n.type=_h):n.type=Go,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,a=r===null?new Ve:r.getDrawingBufferSize(new Ve),o={minFilter:Fn,magFilter:Fn,stencilBuffer:e,depthBuffer:n,type:t},c=new Ii(a.width,a.height,o);return i>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=i),t===nr&&r!==null&&r.outputColorSpace===Wn&&(c.texture.colorSpace=Wn),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Ve),a=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(r.width,r.height),n.initialize(i,a,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(n of t)n.setDepthTexture(c)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const a=(c,f)=>c||f.needsDepthTexture;e.reduce(a,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,a=!1,o,c,f;n===void 0&&(this.timer.update(),n=this.timer.getDelta());for(const p of this.passes)p.enabled&&(p.render(e,i,r,n,a),p.needsSwap&&(a&&(t.renderToScreen=p.renderToScreen,o=e.getContext(),c=e.state.buffers.stencil,c.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,r,n,a),c.setFunc(o.EQUAL,1,4294967295)),f=i,i=r,r=f),p instanceof u6?a=!0:p instanceof o6&&(a=!1))}setSize(n,e,t){const i=this.renderer,r=i.getSize(new Ve);(n===void 0||e===void 0)&&(n=r.width,e=r.height),(r.width!==n||r.height!==e)&&i.setSize(n,e,t);const a=i.getDrawingBufferSize(new Ve);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),ls.fullscreenGeometry.dispose()}},mh={NONE:0,DEPTH:1,CONVOLUTION:2},Qn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},h6=class{constructor(){this.shaderParts=new Map([[Qn.FRAGMENT_HEAD,null],[Qn.FRAGMENT_MAIN_UV,null],[Qn.FRAGMENT_MAIN_IMAGE,null],[Qn.VERTEX_HEAD,null],[Qn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=mh.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ms}},h1=!1,bR=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ga:t=this.materialsFlatShadedDoubleSide;break;case Rr:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ga:t=this.materialsDoubleSide;break;case Rr:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof Pi))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const a=e[r].value;a.isRenderTargetTexture&&(e[r].value=null,t.set(r,a))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Ho;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Rr,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ga,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Rr,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ga,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,h1){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const a of r)a[0].material=a[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return h1}static set workaroundEnabled(n){h1=n}},wu=-1,ya=class extends Cs{constructor(n,e=wu,t=wu,i=1){super(),this.resizable=n,this.baseSize=new Ve(1,1),this.preferredSize=new Ve(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ve,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==wu?t.width=e.width:e.height!==wu?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==wu?t.height=e.height:e.width!==wu?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(wu),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return wu}},Nn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},d6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",p6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",m6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",g6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",v6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",y6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",_6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",x6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",b6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",S6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",A6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",E6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",M6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",T6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",C6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",R6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",w6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",B6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",D6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",O6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",U6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",N6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",L6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",I6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",P6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",z6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",F6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",H6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",G6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",V6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",k6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",X6="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Y6=new Map([[Nn.ADD,d6],[Nn.ALPHA,p6],[Nn.AVERAGE,m6],[Nn.COLOR,g6],[Nn.COLOR_BURN,v6],[Nn.COLOR_DODGE,y6],[Nn.DARKEN,_6],[Nn.DIFFERENCE,x6],[Nn.DIVIDE,b6],[Nn.DST,null],[Nn.EXCLUSION,S6],[Nn.HARD_LIGHT,A6],[Nn.HARD_MIX,E6],[Nn.HUE,M6],[Nn.INVERT,T6],[Nn.INVERT_RGB,C6],[Nn.LIGHTEN,R6],[Nn.LINEAR_BURN,w6],[Nn.LINEAR_DODGE,B6],[Nn.LINEAR_LIGHT,D6],[Nn.LUMINOSITY,O6],[Nn.MULTIPLY,U6],[Nn.NEGATION,N6],[Nn.NORMAL,L6],[Nn.OVERLAY,I6],[Nn.PIN_LIGHT,P6],[Nn.REFLECT,z6],[Nn.SATURATION,F6],[Nn.SCREEN,H6],[Nn.SOFT_LIGHT,G6],[Nn.SRC,V6],[Nn.SUBTRACT,k6],[Nn.VIVID_LIGHT,X6]]),j6=class extends Cs{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new jn(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return Y6.get(this.blendFunction)}},hA=class extends Cs{constructor(n,e,{attributes:t=mh.NONE,blendFunction:i=Nn.NORMAL,defines:r=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:c=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=c,this.defines=r,this.uniforms=a,this.extensions=o,this.blendMode=new j6(i),this.blendMode.addEventListener("change",f=>this.setChanged()),this._inputColorSpace=Ms,this._outputColorSpace=Lo}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Vu){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof Ii||e instanceof fr||e instanceof ei||e instanceof ls)&&this[n].dispose()}}},GE={MEDIUM:2,LARGE:3},W6=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,q6="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",K6=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],J6=class extends Pi{constructor(n=new zn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new jn(null),texelSize:new jn(new zn),scale:new jn(1),kernel:new jn(0)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:W6,vertexShader:q6}),this.setTexelSize(n.x,n.y),this.kernelSize=GE.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return K6[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},Z6=class extends ls{constructor({kernelSize:n=GE.MEDIUM,resolutionScale:e=.5,width:t=ya.AUTO_SIZE,height:i=ya.AUTO_SIZE,resolutionX:r=t,resolutionY:a=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Ii(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new ya(this,r,a,e);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new J6,this._blurMaterial.kernelSize=n,this.copyMaterial=new HD}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const a=this.scene,o=this.camera,c=this.renderTargetA,f=this.renderTargetB,p=this.blurMaterial,m=p.kernelSequence;let v=e;this.fullscreenMaterial=p;for(let y=0,x=m.length;y<x;++y){const b=(y&1)===0?c:f;p.kernel=m[y],p.inputBuffer=v.texture,n.setRenderTarget(b),n.render(a,o),v=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=v.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(a,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==nr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===Wn&&(this.renderTargetA.texture.colorSpace=Wn,this.renderTargetB.texture.colorSpace=Wn))}static get AUTO_SIZE(){return ya.AUTO_SIZE}},$6=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Q6=class extends Pi{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Dh.replace(/\D+/g,"")},uniforms:{inputBuffer:new jn(null),threshold:new jn(0),smoothing:new jn(1),range:new jn(null)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:$6,vertexShader:FD}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},e9=class extends ls{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=ya.AUTO_SIZE,height:a=ya.AUTO_SIZE,resolutionX:o=r,resolutionY:c=a}={}){super("LuminancePass"),this.fullscreenMaterial=new Q6(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Ii(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const f=this.resolution=new ya(this,o,c,i);f.addEventListener("change",p=>this.setSize(f.baseWidth,f.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==nr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},t9=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,n9="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",i9=class extends Pi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new jn(null),texelSize:new jn(new Ve)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:t9,vertexShader:n9})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},r9=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,a9="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",s9=class extends Pi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new jn(null),supportBuffer:new jn(null),texelSize:new jn(new Ve),radius:new jn(.85)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:r9,vertexShader:a9})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},o9=class extends ls{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ii(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new i9,this.upsamplingMaterial=new s9,this.resolution=new Ve}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:a,camera:o}=this,{downsamplingMaterial:c,upsamplingMaterial:f}=this,{downsamplingMipmaps:p,upsamplingMipmaps:m}=this;let v=e;this.fullscreenMaterial=c;for(let y=0,x=p.length;y<x;++y){const b=p[y];c.setSize(v.width,v.height),c.inputBuffer=v.texture,n.setRenderTarget(b),n.render(a,o),v=b}this.fullscreenMaterial=f;for(let y=m.length-1;y>=0;--y){const x=m[y];f.setSize(v.width,v.height),f.inputBuffer=v.texture,f.supportBuffer=p[y].texture,n.setRenderTarget(x),n.render(a,o),v=x}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let a=0,o=this.downsamplingMipmaps.length;a<o;++a)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[a].setSize(i,r),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==nr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===Wn)for(const r of i)r.texture.colorSpace=Wn}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},l9=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,c9=class extends hA{constructor({blendFunction:n=Nn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:a=.85,levels:o=8,kernelSize:c=GE.LARGE,resolutionScale:f=.5,width:p=ya.AUTO_SIZE,height:m=ya.AUTO_SIZE,resolutionX:v=p,resolutionY:y=m}={}){super("BloomEffect",l9,{blendFunction:n,uniforms:new Map([["map",new jn(null)],["intensity",new jn(r)]])}),this.renderTarget=new Ii(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Z6({kernelSize:c}),this.luminancePass=new e9({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new o9,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const x=this.resolution=new ya(this,v,y,f);x.addEventListener("change",b=>this.setSize(x.baseWidth,x.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===Wn&&(this.renderTarget.texture.colorSpace=Wn))}},VD=class extends ls{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new GD,this.overrideMaterialManager=t===null?null:new bR(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new bR(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const a=this.scene,o=this.camera,c=this.selection,f=o.layers.mask,p=a.background,m=n.shadowMap.autoUpdate,v=this.renderToScreen?null:e;c!==null&&o.layers.set(c.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(v),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,a,o):n.render(a,o),o.layers.mask=f,a.background=p,n.shadowMap.autoUpdate=m}},u9=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,f9="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",h9=class extends Pi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new jn(null),normalBuffer:new jn(null),texelSize:new jn(new Ve)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:u9,vertexShader:f9})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Vu){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},d9=class extends ls{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=ya.AUTO_SIZE,height:i=ya.AUTO_SIZE,resolutionX:r=t,resolutionY:a=i}={}){super("DepthDownsamplingPass");const o=new h9;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ii(1,1,{minFilter:tr,magFilter:tr,depthBuffer:!1,type:Li}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const c=this.resolution=new ya(this,r,a,e);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Vu){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},p9=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,m9="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",g9=class extends Pi{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Dh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new jn(null),depthBuffer:new jn(null),resolution:new jn(new Ve),texelSize:new jn(new Ve),cameraNear:new jn(.3),cameraFar:new jn(1e3),aspect:new jn(1),time:new jn(0)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Vu){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=p9.replace(Qn.FRAGMENT_HEAD,n.get(Qn.FRAGMENT_HEAD)||"").replace(Qn.FRAGMENT_MAIN_UV,n.get(Qn.FRAGMENT_MAIN_UV)||"").replace(Qn.FRAGMENT_MAIN_IMAGE,n.get(Qn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=m9.replace(Qn.VERTEX_HEAD,n.get(Qn.VERTEX_HEAD)||"").replace(Qn.VERTEX_MAIN_SUPPORT,n.get(Qn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof qi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Qn}};function SR(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(a,r))}}function v9(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const a=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&(t.attributes&mh.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const c=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,f=t.shaderParts;let p=f.get(Qn.FRAGMENT_HEAD)||"",m=f.get(Qn.FRAGMENT_MAIN_UV)||"",v=f.get(Qn.FRAGMENT_MAIN_IMAGE)||"",y=f.get(Qn.VERTEX_HEAD)||"",x=f.get(Qn.VERTEX_MAIN_SUPPORT)||"";const b=new Set,T=new Set;if(o&&(m+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);x+=`	${n}MainSupport(`,x+=w?`vUv);
`:`);
`;for(const B of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const D of B[1].split(/\s*,\s*/))t.varyings.add(D),b.add(D),T.add(D);for(const B of r.matchAll(c))T.add(B[1])}for(const w of i.matchAll(c))T.add(w[1]);for(const w of e.defines.keys())T.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of e.uniforms.keys())T.add(w);T.delete("while"),T.delete("for"),T.delete("if"),e.uniforms.forEach((w,B)=>t.uniforms.set(n+B.charAt(0).toUpperCase()+B.slice(1),w)),e.defines.forEach((w,B)=>t.defines.set(n+B.charAt(0).toUpperCase()+B.slice(1),w));const M=new Map([["fragment",i],["vertex",r]]);SR(n,T,t.defines),SR(n,T,M),i=M.get("fragment"),r=M.get("vertex");const A=e.blendMode;if(t.blendModes.set(A.blendFunction,A),a){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(v+=e.inputColorSpace===Wn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Lo?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;v+=`${n}MainImage(color0, UV, `,(t.attributes&mh.DEPTH)!==0&&w.test(i)&&(v+="depth, ",t.readDepth=!0),v+=`color1);
	`;const B=n+"BlendOpacity";t.uniforms.set(B,A.opacity),v+=`color0 = blend${A.blendFunction}(color0, color1, ${B});

	`,p+=`uniform float ${B};

`}if(p+=i+`
`,r!==null&&(y+=r+`
`),f.set(Qn.FRAGMENT_HEAD,p),f.set(Qn.FRAGMENT_MAIN_UV,m),f.set(Qn.FRAGMENT_MAIN_IMAGE,v),f.set(Qn.VERTEX_HEAD,y),f.set(Qn.VERTEX_MAIN_SUPPORT,x),e.extensions!==null)for(const w of e.extensions)t.extensions.add(w)}}var y9=class extends ls{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new g9(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new h6;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===Nn.DST)n.attributes|=o.getAttributes()&mh.DEPTH;else{if((n.attributes&o.getAttributes()&mh.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${o.name})`);v9("e"+e++,o,n)}let t=n.shaderParts.get(Qn.FRAGMENT_HEAD),i=n.shaderParts.get(Qn.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(Qn.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(a,`blend${o.blendFunction}`)+`
`;(n.attributes&mh.DEPTH)!==0?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Wn&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Qn.FRAGMENT_HEAD,t),n.shaderParts.set(Qn.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Qn.FRAGMENT_MAIN_UV,r);for(const[o,c]of n.shaderParts)c!==null&&n.shaderParts.set(o,c.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Vu){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const a of this.effects)a.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,a.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},_9=class extends ls{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=ya.AUTO_SIZE,height:a=ya.AUTO_SIZE,resolutionX:o=r,resolutionY:c=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new VD(n,e,new oE);const f=this.renderPass;f.ignoreBackground=!0,f.skipShadowMapUpdate=!0;const p=f.getClearPass();p.overrideClearColor=new xt(7829503),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ii(1,1,{minFilter:tr,magFilter:tr}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new ya(this,o,c,i);m.addEventListener("change",v=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,a,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}};function Ig(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}new Ve;new Ve;function kD(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var qs=function n(e,t,i){var r=this;kD(this,n),Ig(this,"dot2",function(a,o){return r.x*a+r.y*o}),Ig(this,"dot3",function(a,o,c){return r.x*a+r.y*o+r.z*c}),this.x=e,this.y=t,this.z=i},x9=[new qs(1,1,0),new qs(-1,1,0),new qs(1,-1,0),new qs(-1,-1,0),new qs(1,0,1),new qs(-1,0,1),new qs(1,0,-1),new qs(-1,0,-1),new qs(0,1,1),new qs(0,-1,1),new qs(0,1,-1),new qs(0,-1,-1)],AR=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],ER=new Array(512),MR=new Array(512),b9=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=AR[t]^e&255:i=AR[t]^e>>8&255,ER[t]=ER[t+256]=i,MR[t]=MR[t+256]=x9[i%12]}};b9(0);function S9(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function TR(n){var e=S9(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var A9=function n(e){var t=this;kD(this,n),Ig(this,"seed",0),Ig(this,"init",function(i){t.seed=i,t.value=TR(i)}),Ig(this,"value",TR(this.seed)),this.init(e)};new A9(Math.random());const E9=F.createContext(null),CR=n=>(n.getAttributes()&2)===2,M9=F.memo(F.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:a=1,autoClear:o=!0,depthBuffer:c,enableNormalPass:f,stencilBuffer:p,multisampling:m=8,frameBufferType:v=wr},y)=>{const{gl:x,scene:b,camera:T,size:M}=Fr(),A=t||b,w=e||T,[B,D,I]=F.useMemo(()=>{const P=new f6(x,{depthBuffer:c,stencilBuffer:p,multisampling:m,frameBufferType:v});P.addPass(new VD(A,w));let L=null,U=null;return f&&(U=new _9(A,w),U.enabled=!1,P.addPass(U),i!==void 0&&(L=new d9({normalBuffer:U.texture,resolutionScale:i}),L.enabled=!1,P.addPass(L))),[P,U,L]},[w,x,c,p,m,v,A,f,i]);F.useEffect(()=>B==null?void 0:B.setSize(M.width,M.height),[B,M]),xv((P,L)=>{if(r){const U=x.autoClear;x.autoClear=o,p&&!o&&x.clearStencil(),B.render(L),x.autoClear=U}},r?a:0);const N=F.useRef(null);F.useLayoutEffect(()=>{var U;const P=[],L=N.current.__r3f;if(L&&B){const Y=L.children;for(let ie=0;ie<Y.length;ie++){const Q=Y[ie].object;if(Q instanceof hA){const ae=[Q];if(!CR(Q)){let X=null;for(;(X=(U=Y[ie+1])==null?void 0:U.object)instanceof hA&&!CR(X);)ae.push(X),ie++}const he=new y9(w,...ae);P.push(he)}else Q instanceof ls&&P.push(Q)}for(const ie of P)B==null||B.addPass(ie);D&&(D.enabled=!0),I&&(I.enabled=!0)}return()=>{for(const Y of P)B==null||B.removePass(Y);D&&(D.enabled=!1),I&&(I.enabled=!1)}},[B,n,w,D,I]),F.useEffect(()=>{const P=x.toneMapping;return x.toneMapping=Po,()=>{x.toneMapping=P}},[x]);const H=F.useMemo(()=>({composer:B,normalPass:D,downSamplingPass:I,resolutionScale:i,camera:w,scene:A}),[B,D,I,i,w,A]);return F.useImperativeHandle(y,()=>B,[B]),_n.jsx(E9.Provider,{value:H,children:_n.jsx("group",{ref:N,children:n})})}));let T9=0;const RR=new WeakMap,C9=(n,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...r}){let a=RR.get(n);if(!a){const f=`@react-three/postprocessing/${n.name}-${T9++}`;BE({[f]:n}),RR.set(n,a=f)}const o=Fr(f=>f.camera),c=fe.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return _n.jsx(a,{camera:o,"blendMode-blendFunction":t,"blendMode-opacity-value":i,...r,args:c})},R9=C9(c9,{blendFunction:0});var ab=e2();const w9=Bh(ab);function B9(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function D9(...n){return e=>n.forEach(t=>B9(t,e))}const XD=F.forwardRef((n,e)=>{const{children:t,...i}=n,r=F.Children.toArray(t),a=r.find(U9);if(a){const o=a.props.children,c=r.map(f=>f===a?F.Children.count(o)>1?F.Children.only(null):F.isValidElement(o)?o.props.children:null:f);return F.createElement(dA,zi({},i,{ref:e}),F.isValidElement(o)?F.cloneElement(o,void 0,c):null)}return F.createElement(dA,zi({},i,{ref:e}),t)});XD.displayName="Slot";const dA=F.forwardRef((n,e)=>{const{children:t,...i}=n;return F.isValidElement(t)?F.cloneElement(t,{...N9(i,t.props),ref:D9(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});dA.displayName="SlotClone";const O9=({children:n})=>F.createElement(F.Fragment,null,n);function U9(n){return F.isValidElement(n)&&n.type===O9}function N9(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...c)=>{a(...c),r(...c)}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}const L9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],I9=L9.reduce((n,e)=>{const t=F.forwardRef((i,r)=>{const{asChild:a,...o}=i,c=a?XD:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(c,zi({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{}),P9=F.forwardRef((n,e)=>{var t;const{container:i=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...r}=n;return i?w9.createPortal(F.createElement(I9.div,zi({},r,{ref:e})),i):null}),z9=P9;var wR=Object.prototype.hasOwnProperty;function Qg(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Qg(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(wR.call(n,t)&&++i&&!wR.call(e,t)||!(t in e)||!Qg(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function sb(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var ob=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};ob.prototype._test=function(e){var t=this.fn;try{mp(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return mp(this.modifiers.slice(),t,this)(e)}catch{return!1}};ob.prototype._check=function(e){try{mp(this.modifiers.slice(),this.fn,this)(e)}catch{if(mp(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!mp(this.modifiers.slice(),this.fn,this)(e))throw null};ob.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){jD(t.modifiers.slice(),t.fn,t)(e).then(function(a){a?i(e):r(null)}).catch(function(a){return r(a)})})};function YD(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function mp(n,e,t){if(n.length){var i=n.shift(),r=mp(n,e,t);return i.perform(r,t)}else return YD(e)}function jD(n,e,t){if(n.length){var i=n.shift(),r=jD(n,e,t);return i.performAsync(r,t)}else return function(a){return Promise.resolve(YD(e,"async")(a))}}var F9=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},VE=function(n){function e(t,i,r,a){for(var o=[],c=arguments.length-4;c-- >0;)o[c]=arguments[c+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=a}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),Ol=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Ol.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return i.chain.push(new ob(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};Ol.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new F9(t,e.simple,e.async)),this};Ol.prototype._clone=function(){return new Ol(this.chain.slice(),this.nextRuleModifiers.slice())};Ol.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};Ol.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new VE(i,e,r))}}),t};Ol.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new VE(t,e,i)}})};Ol.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){WD(e,t.chain.slice(),i,r)})};function WD(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){WD(n,e,t,i)},function(a){i(new VE(r,n,a))})}else t(n)}var BR=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function H9(n,e){return e===void 0&&(e=!1),{simple:function(t){return BR(t,e)||n.check(t)===void 0},async:function(t){return BR(t,e)||n.testAsync(t)}}}function os(){return typeof Proxy<"u"?qD(new Ol):pA(new Ol)}var ev={};os.extend=function(n){Object.assign(ev,n)};os.clearCustomRules=function(){ev={}};function qD(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=qD(n._clone());if(i in ox)return r._applyModifier(ox[i],i);if(i in ev)return r._applyRule(ev[i],i);if(i in mA)return r._applyRule(mA[i],i)}})}function pA(n){var e=function(r,a){return Object.keys(r).forEach(function(o){a[o]=function(){for(var c=[],f=arguments.length;f--;)c[f]=arguments[f];var p=pA(a._clone()),m=p._applyRule(r[o],o).apply(void 0,c);return m}}),a},t=e(mA,n),i=e(ev,t);return Object.keys(ox).forEach(function(r){Object.defineProperty(i,r,{get:function(){var a=pA(i._clone());return a._applyModifier(ox[r],r)}})}),i}var ox={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return t_(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(t_(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&t_(e).every(n)}},async:function(n){return function(e){return Promise.all(t_(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return DR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return DR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function DR(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function t_(n){return typeof n=="string"?n.split(""):n}var mA={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||G9;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return sp("string")},boolean:function(){return sp("boolean")},undefined:function(){return sp("undefined")},null:function(){return sp("null")},array:function(){return sp("array")},object:function(){return sp("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return V9(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:H9};function sp(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function G9(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function V9(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(a){a.target=i,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var a=n[r];return a.testAsync((e||{})[r]).catch(function(o){o.target=r,t.push(o)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var vi="colors",Pa="sizes",Ut="space",k9={gap:Ut,gridGap:Ut,columnGap:Ut,gridColumnGap:Ut,rowGap:Ut,gridRowGap:Ut,inset:Ut,insetBlock:Ut,insetBlockEnd:Ut,insetBlockStart:Ut,insetInline:Ut,insetInlineEnd:Ut,insetInlineStart:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,marginBlock:Ut,marginBlockEnd:Ut,marginBlockStart:Ut,marginInline:Ut,marginInlineEnd:Ut,marginInlineStart:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,paddingBlock:Ut,paddingBlockEnd:Ut,paddingBlockStart:Ut,paddingInline:Ut,paddingInlineEnd:Ut,paddingInlineStart:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,scrollMargin:Ut,scrollMarginTop:Ut,scrollMarginRight:Ut,scrollMarginBottom:Ut,scrollMarginLeft:Ut,scrollMarginX:Ut,scrollMarginY:Ut,scrollMarginBlock:Ut,scrollMarginBlockEnd:Ut,scrollMarginBlockStart:Ut,scrollMarginInline:Ut,scrollMarginInlineEnd:Ut,scrollMarginInlineStart:Ut,scrollPadding:Ut,scrollPaddingTop:Ut,scrollPaddingRight:Ut,scrollPaddingBottom:Ut,scrollPaddingLeft:Ut,scrollPaddingX:Ut,scrollPaddingY:Ut,scrollPaddingBlock:Ut,scrollPaddingBlockEnd:Ut,scrollPaddingBlockStart:Ut,scrollPaddingInline:Ut,scrollPaddingInlineEnd:Ut,scrollPaddingInlineStart:Ut,fontSize:"fontSizes",background:vi,backgroundColor:vi,backgroundImage:vi,borderImage:vi,border:vi,borderBlock:vi,borderBlockEnd:vi,borderBlockStart:vi,borderBottom:vi,borderBottomColor:vi,borderColor:vi,borderInline:vi,borderInlineEnd:vi,borderInlineStart:vi,borderLeft:vi,borderLeftColor:vi,borderRight:vi,borderRightColor:vi,borderTop:vi,borderTopColor:vi,caretColor:vi,color:vi,columnRuleColor:vi,fill:vi,outline:vi,outlineColor:vi,stroke:vi,textDecorationColor:vi,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Pa,minBlockSize:Pa,maxBlockSize:Pa,inlineSize:Pa,minInlineSize:Pa,maxInlineSize:Pa,width:Pa,minWidth:Pa,maxWidth:Pa,height:Pa,minHeight:Pa,maxHeight:Pa,flexBasis:Pa,gridTemplateColumns:Pa,gridTemplateRows:Pa,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},X9=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Lp=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(a=>JSON.stringify(a,X9))(e);return r in n?n[r]:n[r]=t(e,...i)}},gh=Symbol.for("sxs.internal"),kE=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),OR=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:Y9}=Object.prototype,gA=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),j9=/\s+(?![^()]*\))/,op=n=>e=>n(...typeof e=="string"?String(e).split(j9):[e]),UR={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:op((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:op((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:op((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:op((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:op((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:op((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},d1=/([\d.]+)([^]*)/,W9=(n,e)=>n.length?n.reduce((t,i)=>(t.push(...e.map(r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r)),t),[]):e,q9=(n,e)=>n in K9&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,i,r,a)=>i+(r==="stretch"?`-moz-available${a};${gA(n)}:${i}-webkit-fill-available`:`-moz-fit-content${a};${gA(n)}:${i}fit-content`)+a):String(e),K9={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Mc=n=>n?n+"-":"",KD=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(i,r,a,o,c)=>o=="$"==!!a?i:(r||o=="--"?"calc(":"")+"var(--"+(o==="$"?Mc(e)+(c.includes("$")?"":Mc(t))+c.replace(/\$/g,"-"):c)+")"+(r||o=="--"?"*"+(r||"")+(a||"1")+")":"")),J9=/\s*,\s*(?![^()]*\))/,Z9=Object.prototype.toString,up=(n,e,t,i,r)=>{let a,o,c;const f=(p,m,v)=>{let y,x;const b=T=>{for(y in T){const w=y.charCodeAt(0)===64,B=w&&Array.isArray(T[y])?T[y]:[T[y]];for(x of B){const D=/[A-Z]/.test(A=y)?A:A.replace(/-[^]/g,N=>N[1].toUpperCase()),I=typeof x=="object"&&x&&x.toString===Z9&&(!i.utils[D]||!m.length);if(D in i.utils&&!I){const N=i.utils[D];if(N!==o){o=N,b(N(x)),o=null;continue}}else if(D in UR){const N=UR[D];if(N!==c){c=N,b(N(x)),c=null;continue}}if(w&&(M=y.slice(1)in i.media?"@media "+i.media[y.slice(1)]:y,y=M.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(N,H,P,L,U,Y)=>{const ie=d1.test(H),Q=.0625*(ie?-1:1),[ae,he]=ie?[L,H]:[H,L];return"("+(P[0]==="="?"":P[0]===">"===ie?"max-":"min-")+ae+":"+(P[0]!=="="&&P.length===1?he.replace(d1,(X,te,ne)=>Number(te)+Q*(P===">"?1:-1)+ne):he)+(U?") and ("+(U[0]===">"?"min-":"max-")+ae+":"+(U.length===1?Y.replace(d1,(X,te,ne)=>Number(te)+Q*(U===">"?-1:1)+ne):Y):"")+")"})),I){const N=w?v.concat(y):[...v],H=w?[...m]:W9(m,y.split(J9));a!==void 0&&r(NR(...a)),a=void 0,f(x,H,N)}else a===void 0&&(a=[[],m,v]),y=w||y.charCodeAt(0)!==36?y:`--${Mc(i.prefix)}${y.slice(1).replace(/\$/g,"-")}`,x=I?x:typeof x=="number"?x&&D in $9?String(x)+"px":String(x):KD(q9(D,x??""),i.prefix,i.themeMap[D]),a[0].push(`${w?`${y} `:`${gA(y)}:`}${x}`)}}var M,A};b(p),a!==void 0&&r(NR(...a)),a=void 0};f(n,e,t)},NR=(n,e,t)=>`${t.map(i=>`${i}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,$9={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},LR=n=>String.fromCharCode(n+(n>25?39:97)),vh=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=LR(t%52)+i;return LR(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Ag=["themed","global","styled","onevar","resonevar","allvar","inline"],Q9=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},eV=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,(a,o)=>{const{cssText:c}=a;let f="";if(c.startsWith("--sxs"))return"";if(r[o-1]&&(f=r[o-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const p in e.rules)if(e.rules[p].group===a)return`--sxs{--sxs:${[...e.rules[p].cache].join(" ")}}${c}`;return a.cssRules.length?`${f}${c}`:""}return c}).join("")},i=()=>{if(e){const{rules:c,sheet:f}=e;if(!f.deleteRule){for(;Object(Object(f.cssRules)[0]).type===3;)f.cssRules.splice(0,1);f.cssRules=[]}for(const p in c)delete c[p]}const r=Object(n).styleSheets||[];for(const c of r)if(Q9(c)){for(let f=0,p=c.cssRules;p[f];++f){const m=Object(p[f]);if(m.type!==1)continue;const v=Object(p[f+1]);if(v.type!==4)continue;++f;const{cssText:y}=m;if(!y.startsWith("--sxs"))continue;const x=y.slice(14,-3).trim().split(/\s+/),b=Ag[x[0]];b&&(e||(e={sheet:c,reset:i,rules:{},toString:t}),e.rules[b]={group:v,index:f,cache:new Set(x)})}if(e)break}if(!e){const c=(f,p)=>({type:p,cssRules:[],insertRule(m,v){this.cssRules.splice(v,0,c(m,{import:3,undefined:1}[(m.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return f==="@media{}"?`@media{${[].map.call(this.cssRules,m=>m.cssText).join("")}}`:f}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:c("","text/css"),rules:{},reset:i,toString:t}}const{sheet:a,rules:o}=e;for(let c=Ag.length-1;c>=0;--c){const f=Ag[c];if(!o[f]){const p=Ag[c+1],m=o[p]?o[p].index:a.cssRules.length;a.insertRule("@media{}",m),a.insertRule(`--sxs{--sxs:${c}}`,m),o[f]={group:a.cssRules[m+1],index:m,cache:new Set([c])}}tV(o[f])}};return i(),e},tV=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},vg=Symbol(),nV=Lp(),IR=(n,e)=>nV(n,()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[gh]){i.type==null&&(i.type=r[gh].type);for(const a of r[gh].composers)i.composers.add(a)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(iV(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),rV(n,i,e)}),iV=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const a=`${Mc(r.prefix)}c-${vh(i)}`,o=[],c=[],f=Object.create(null),p=[];for(const y in t)f[y]=String(t[y]);if(typeof n=="object"&&n)for(const y in n){m=f,v=y,Y9.call(m,v)||(f[y]="undefined");const x=n[y];for(const b in x){const T={[y]:String(b)};String(b)==="undefined"&&p.push(y);const M=x[b],A=[T,M,!OR(M)];o.push(A)}}var m,v;if(typeof e=="object"&&e)for(const y of e){let{css:x,...b}=y;x=typeof x=="object"&&x||{};for(const M in b)b[M]=String(b[M]);const T=[b,x,!OR(x)];c.push(T)}return[a,i,o,c,f,p]},rV=(n,e,t)=>{const[i,r,a,o]=aV(e.composers),c=typeof e.type=="function"||e.type.$$typeof?(v=>{function y(){for(let x=0;x<y[vg].length;x++){const[b,T]=y[vg][x];v.rules[b].apply(T)}return y[vg]=[],null}return y[vg]=[],y.rules={},Ag.forEach(x=>y.rules[x]={apply:b=>y[vg].push([x,b])}),y})(t):null,f=(c||t).rules,p=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,m=v=>{v=typeof v=="object"&&v||sV;const{css:y,...x}=v,b={};for(const A in a)if(delete x[A],A in v){let w=v[A];typeof w=="object"&&w?b[A]={"@initial":a[A],...w}:(w=String(w),b[A]=w!=="undefined"||o.has(A)?w:a[A])}else b[A]=a[A];const T=new Set([...r]);for(const[A,w,B,D]of e.composers){t.rules.styled.cache.has(A)||(t.rules.styled.cache.add(A),up(w,[`.${A}`],[],n,H=>{f.styled.apply(H)}));const I=PR(B,b,n.media),N=PR(D,b,n.media,!0);for(const H of I)if(H!==void 0)for(const[P,L,U]of H){const Y=`${A}-${vh(L)}-${P}`;T.add(Y);const ie=(U?t.rules.resonevar:t.rules.onevar).cache,Q=U?f.resonevar:f.onevar;ie.has(Y)||(ie.add(Y),up(L,[`.${Y}`],[],n,ae=>{Q.apply(ae)}))}for(const H of N)if(H!==void 0)for(const[P,L]of H){const U=`${A}-${vh(L)}-${P}`;T.add(U),t.rules.allvar.cache.has(U)||(t.rules.allvar.cache.add(U),up(L,[`.${U}`],[],n,Y=>{f.allvar.apply(Y)}))}}if(typeof y=="object"&&y){const A=`${i}-i${vh(y)}-css`;T.add(A),t.rules.inline.cache.has(A)||(t.rules.inline.cache.add(A),up(y,[`.${A}`],[],n,w=>{f.inline.apply(w)}))}for(const A of String(v.className||"").trim().split(/\s+/))A&&T.add(A);const M=x.className=[...T].join(" ");return{type:e.type,className:M,selector:p,props:x,toString:()=>M,deferredInjector:c}};return kE(m,{className:i,selector:p,[gh]:e,toString:()=>(t.rules.styled.cache.has(i)||m(),i)})},aV=n=>{let e="";const t=[],i={},r=[];for(const[a,,,,o,c]of n){e===""&&(e=a),t.push(a),r.push(...c);for(const f in o){const p=o[f];(i[f]===void 0||p!=="undefined"||c.includes(p))&&(i[f]=p)}}return[e,t,i,new Set(r)]},PR=(n,e,t,i)=>{const r=[];e:for(let[a,o,c]of n){if(c)continue;let f,p=0,m=!1;for(f in a){const v=a[f];let y=e[f];if(y!==v){if(typeof y!="object"||!y)continue e;{let x,b,T=0;for(const M in y){if(v===String(y[M])){if(M!=="@initial"){const A=M.slice(1);(b=b||[]).push(A in t?t[A]:M.replace(/^@media ?/,"")),m=!0}p+=T,x=!0}++T}if(b&&b.length&&(o={["@media "+b.join(", ")]:o}),!x)continue e}}}(r[p]=r[p]||[]).push([i?"cv":`${f}-${a[f]}`,o,m])}return r},sV={},oV=Lp(),lV=(n,e)=>oV(n,()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let a=vh(r);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in r){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let c of[].concat(r["@import"]))c=c.includes('"')||c.includes("'")?c:`"${c}"`,e.sheet.insertRule(`@import ${c};`,o++);delete r["@import"]}up(r,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return kE(i,{toString:i})}),cV=Lp(),uV=(n,e)=>cV(n,()=>t=>{const i=`${Mc(n.prefix)}k-${vh(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const a=[];up(t,[],[],n,c=>a.push(c));const o=`@keyframes ${i}{${a.join("")}}`;e.rules.global.apply(o)}return i};return kE(r,{get name(){return r()},toString:r})}),fV=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Mc(this.prefix)+Mc(this.scale)+this.token}toString(){return this.computedValue}},hV=Lp(),dV=(n,e)=>hV(n,()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${Mc(n.prefix)}t-${vh(i)}`}`,a={},o=[];for(const f in i){a[f]={};for(const p in i[f]){const m=`--${Mc(n.prefix)}${f}-${p}`,v=KD(String(i[f][p]),n.prefix,f);a[f][p]=new fV(p,v,f,n.prefix),o.push(`${m}:${v}`)}}const c=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const f=`${i===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(f)}return t};return{...a,get className(){return c()},selector:r,toString:c}}),pV=Lp(),mV=Lp(),gV=n=>{const e=(t=>{let i=!1;const r=pV(t,a=>{i=!0;const o="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",c=typeof a.media=="object"&&a.media||{},f=typeof a.root=="object"?a.root||null:globalThis.document||null,p=typeof a.theme=="object"&&a.theme||{},m={prefix:o,media:c,theme:p,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...k9},utils:typeof a.utils=="object"&&a.utils||{}},v=eV(f),y={css:IR(m,v),globalCss:lV(m,v),keyframes:uV(m,v),createTheme:dV(m,v),reset(){v.reset(),y.theme.toString()},theme:{},sheet:v,config:m,prefix:o,getCssText:v.toString,toString:v.toString};return String(y.theme=y.createTheme(p)),y});return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>mV(t,()=>{const r=IR(t,i);return(...a)=>{const o=r(...a),c=o[gh].type,f=fe.forwardRef((p,m)=>{const v=p&&p.as||c,{props:y,deferredInjector:x}=o(p);return delete y.as,y.ref=m,x?fe.createElement(fe.Fragment,null,fe.createElement(v,y),fe.createElement(x,null)):fe.createElement(v,y)});return f.className=o.className,f.displayName=`Styled.${c.displayName||c.name||c}`,f.selector=o.selector,f.toString=()=>o.selector,f[gh]=o[gh],f}}))(e),e};function dc(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function vV(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function JD(...n){return e=>n.forEach(t=>vV(t,e))}function Ip(...n){return F.useCallback(JD(...n),n)}function ZD(n,e=[]){let t=[];function i(a,o){const c=F.createContext(o),f=t.length;t=[...t,o];function p(v){const{scope:y,children:x,...b}=v,T=(y==null?void 0:y[n][f])||c,M=F.useMemo(()=>b,Object.values(b));return F.createElement(T.Provider,{value:M},x)}function m(v,y){const x=(y==null?void 0:y[n][f])||c,b=F.useContext(x);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${v}\` must be used within \`${a}\``)}return p.displayName=a+"Provider",[p,m]}const r=()=>{const a=t.map(o=>F.createContext(o));return function(c){const f=(c==null?void 0:c[n])||a;return F.useMemo(()=>({[`__scope${n}`]:{...c,[n]:f}}),[c,f])}};return r.scopeName=n,[i,yV(r,...e)]}function yV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const o=i.reduce((c,{useScope:f,scopeName:p})=>{const v=f(a)[`__scope${p}`];return{...c,...v}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}const $D=F.forwardRef((n,e)=>{const{children:t,...i}=n,r=F.Children.toArray(t),a=r.find(_V);if(a){const o=a.props.children,c=r.map(f=>f===a?F.Children.count(o)>1?F.Children.only(null):F.isValidElement(o)?o.props.children:null:f);return F.createElement(vA,zi({},i,{ref:e}),F.isValidElement(o)?F.cloneElement(o,void 0,c):null)}return F.createElement(vA,zi({},i,{ref:e}),t)});$D.displayName="Slot";const vA=F.forwardRef((n,e)=>{const{children:t,...i}=n;return F.isValidElement(t)?F.cloneElement(t,{...xV(i,t.props),ref:JD(e,t.ref)}):F.Children.count(t)>1?F.Children.only(null):null});vA.displayName="SlotClone";const QD=({children:n})=>F.createElement(F.Fragment,null,n);function _V(n){return F.isValidElement(n)&&n.type===QD}function xV(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...c)=>{a(...c),r(...c)}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}const bV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Rh=bV.reduce((n,e)=>{const t=F.forwardRef((i,r)=>{const{asChild:a,...o}=i,c=a?$D:e;return F.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),F.createElement(c,zi({},o,{ref:r}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function SV(n,e){n&&ab.flushSync(()=>n.dispatchEvent(e))}function XE(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function AV(n,e=globalThis==null?void 0:globalThis.document){const t=XE(n);F.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[t,e])}const yA="dismissableLayer.update",EV="dismissableLayer.pointerDownOutside",MV="dismissableLayer.focusOutside";let zR;const TV=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),CV=F.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:f,...p}=n,m=F.useContext(TV),[v,y]=F.useState(null),x=(t=v==null?void 0:v.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,b]=F.useState({}),T=Ip(e,P=>y(P)),M=Array.from(m.layers),[A]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),w=M.indexOf(A),B=v?M.indexOf(v):-1,D=m.layersWithOutsidePointerEventsDisabled.size>0,I=B>=w,N=RV(P=>{const L=P.target,U=[...m.branches].some(Y=>Y.contains(L));!I||U||(a==null||a(P),c==null||c(P),P.defaultPrevented||f==null||f())},x),H=wV(P=>{const L=P.target;[...m.branches].some(Y=>Y.contains(L))||(o==null||o(P),c==null||c(P),P.defaultPrevented||f==null||f())},x);return AV(P=>{B===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&f&&(P.preventDefault(),f()))},x),F.useEffect(()=>{if(v)return i&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(zR=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),FR(),()=>{i&&m.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=zR)}},[v,x,i,m]),F.useEffect(()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),FR())},[v,m]),F.useEffect(()=>{const P=()=>b({});return document.addEventListener(yA,P),()=>document.removeEventListener(yA,P)},[]),F.createElement(Rh.div,zi({},p,{ref:T,style:{pointerEvents:D?I?"auto":"none":void 0,...n.style},onFocusCapture:dc(n.onFocusCapture,H.onFocusCapture),onBlurCapture:dc(n.onBlurCapture,H.onBlurCapture),onPointerDownCapture:dc(n.onPointerDownCapture,N.onPointerDownCapture)}))});function RV(n,e=globalThis==null?void 0:globalThis.document){const t=XE(n),i=F.useRef(!1),r=F.useRef(()=>{});return F.useEffect(()=>{const a=c=>{if(c.target&&!i.current){let m=function(){e3(EV,t,p,{discrete:!0})};var f=m;const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=m,e.addEventListener("click",r.current,{once:!0})):m()}i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function wV(n,e=globalThis==null?void 0:globalThis.document){const t=XE(n),i=F.useRef(!1);return F.useEffect(()=>{const r=a=>{a.target&&!i.current&&e3(MV,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function FR(){const n=new CustomEvent(yA);document.dispatchEvent(n)}function e3(n,e,t,{discrete:i}){const r=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?SV(r,a):r.dispatchEvent(a)}const BV=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},DV=fU.useId||(()=>{});let OV=0;function UV(n){const[e,t]=F.useState(DV());return BV(()=>{t(i=>i??String(OV++))},[n]),e?`radix-${e}`:""}function Ih(n){return n.split("-")[0]}function Ev(n){return n.split("-")[1]}function Pp(n){return["top","bottom"].includes(Ih(n))?"x":"y"}function YE(n){return n==="y"?"height":"width"}function HR(n,e,t){let{reference:i,floating:r}=n;const a=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,c=Pp(e),f=YE(c),p=i[f]/2-r[f]/2,m=c==="x";let v;switch(Ih(e)){case"top":v={x:a,y:i.y-r.height};break;case"bottom":v={x:a,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:o};break;case"left":v={x:i.x-r.width,y:o};break;default:v={x:i.x,y:i.y}}switch(Ev(e)){case"start":v[c]-=p*(t&&m?-1:1);break;case"end":v[c]+=p*(t&&m?-1:1)}return v}const NV=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:o}=t,c=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:n,floating:e,strategy:r}),{x:p,y:m}=HR(f,i,c),v=i,y={},x=0;for(let b=0;b<a.length;b++){const{name:T,fn:M}=a[b],{x:A,y:w,data:B,reset:D}=await M({x:p,y:m,initialPlacement:i,placement:v,strategy:r,middlewareData:y,rects:f,platform:o,elements:{reference:n,floating:e}});p=A??p,m=w??m,y={...y,[T]:{...y[T],...B}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:r}):D.rects),{x:p,y:m}=HR(f,v,c)),b=-1)}return{x:p,y:m,placement:v,strategy:r,middlewareData:y}};function t3(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function lx(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function tv(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:o,elements:c,strategy:f}=n,{boundary:p="clippingAncestors",rootBoundary:m="viewport",elementContext:v="floating",altBoundary:y=!1,padding:x=0}=e,b=t3(x),T=c[y?v==="floating"?"reference":"floating":v],M=lx(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(T)))==null||t?T:T.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:p,rootBoundary:m,strategy:f})),A=lx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v==="floating"?{...o.floating,x:i,y:r}:o.reference,offsetParent:await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),strategy:f}):o[v]);return{top:M.top-A.top+b.top,bottom:A.bottom-M.bottom+b.bottom,left:M.left-A.left+b.left,right:A.right-M.right+b.right}}const LV=Math.min,nh=Math.max;function _A(n,e,t){return nh(n,LV(e,t))}const GR=n=>({name:"arrow",options:n,async fn(e){const{element:t,padding:i=0}=n??{},{x:r,y:a,placement:o,rects:c,platform:f}=e;if(t==null)return{};const p=t3(i),m={x:r,y:a},v=Pp(o),y=Ev(o),x=YE(v),b=await f.getDimensions(t),T=v==="y"?"top":"left",M=v==="y"?"bottom":"right",A=c.reference[x]+c.reference[v]-m[v]-c.floating[x],w=m[v]-c.reference[v],B=await(f.getOffsetParent==null?void 0:f.getOffsetParent(t));let D=B?v==="y"?B.clientHeight||0:B.clientWidth||0:0;D===0&&(D=c.floating[x]);const I=A/2-w/2,N=p[T],H=D-b[x]-p[M],P=D/2-b[x]/2+I,L=_A(N,P,H),U=(y==="start"?p[T]:p[M])>0&&P!==L&&c.reference[x]<=c.floating[x];return{[v]:m[v]-(U?P<N?N-P:H-P:0),data:{[v]:L,centerOffset:P-L}}}}),IV={left:"right",right:"left",bottom:"top",top:"bottom"};function cx(n){return n.replace(/left|right|bottom|top/g,e=>IV[e])}function PV(n,e,t){t===void 0&&(t=!1);const i=Ev(n),r=Pp(n),a=YE(r);let o=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=cx(o)),{main:o,cross:cx(o)}}const zV={start:"end",end:"start"};function VR(n){return n.replace(/start|end/g,e=>zV[e])}const n3=["top","right","bottom","left"];n3.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const FV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:a,initialPlacement:o,platform:c,elements:f}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",flipAlignment:x=!0,...b}=n,T=Ih(i),M=v||(T===o||!x?[cx(o)]:function(P){const L=cx(P);return[VR(P),L,VR(L)]}(o)),A=[o,...M],w=await tv(e,b),B=[];let D=((t=r.flip)==null?void 0:t.overflows)||[];if(p&&B.push(w[T]),m){const{main:P,cross:L}=PV(i,a,await(c.isRTL==null?void 0:c.isRTL(f.floating)));B.push(w[P],w[L])}if(D=[...D,{placement:i,overflows:B}],!B.every(P=>P<=0)){var I,N;const P=((I=(N=r.flip)==null?void 0:N.index)!=null?I:0)+1,L=A[P];if(L)return{data:{index:P,overflows:D},reset:{placement:L}};let U="bottom";switch(y){case"bestFit":{var H;const Y=(H=D.map(ie=>[ie,ie.overflows.filter(Q=>Q>0).reduce((Q,ae)=>Q+ae,0)]).sort((ie,Q)=>ie[1]-Q[1])[0])==null?void 0:H[0].placement;Y&&(U=Y);break}case"initialPlacement":U=o}if(i!==U)return{reset:{placement:U}}}return{}}}};function kR(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function XR(n){return n3.some(e=>n[e]>=0)}const HV=function(n){let{strategy:e="referenceHidden",...t}=n===void 0?{}:n;return{name:"hide",async fn(i){const{rects:r}=i;switch(e){case"referenceHidden":{const a=kR(await tv(i,{...t,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:XR(a)}}}case"escaped":{const a=kR(await tv(i,{...t,altBoundary:!0}),r.floating);return{data:{escapedOffsets:a,escaped:XR(a)}}}default:return{}}}}},GV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await async function(a,o){const{placement:c,platform:f,elements:p}=a,m=await(f.isRTL==null?void 0:f.isRTL(p.floating)),v=Ih(c),y=Ev(c),x=Pp(c)==="x",b=["left","top"].includes(v)?-1:1,T=m&&x?-1:1,M=typeof o=="function"?o(a):o;let{mainAxis:A,crossAxis:w,alignmentAxis:B}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...M};return y&&typeof B=="number"&&(w=y==="end"?-1*B:B),x?{x:w*T,y:A*b}:{x:A*b,y:w*T}}(e,n);return{x:t+r.x,y:i+r.y,data:r}}}};function i3(n){return n==="x"?"y":"x"}const VV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:M=>{let{x:A,y:w}=M;return{x:A,y:w}}},...f}=n,p={x:t,y:i},m=await tv(e,f),v=Pp(Ih(r)),y=i3(v);let x=p[v],b=p[y];if(a){const M=v==="y"?"bottom":"right";x=_A(x+m[v==="y"?"top":"left"],x,x-m[M])}if(o){const M=y==="y"?"bottom":"right";b=_A(b+m[y==="y"?"top":"left"],b,b-m[M])}const T=c.fn({...e,[v]:x,[y]:b});return{...T,data:{x:T.x-t,y:T.y-i}}}}},kV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:f=!0,crossAxis:p=!0}=n,m={x:t,y:i},v=Pp(r),y=i3(v);let x=m[v],b=m[y];const T=typeof c=="function"?c({...a,placement:r}):c,M=typeof T=="number"?{mainAxis:T,crossAxis:0}:{mainAxis:0,crossAxis:0,...T};if(f){const I=v==="y"?"height":"width",N=a.reference[v]-a.floating[I]+M.mainAxis,H=a.reference[v]+a.reference[I]-M.mainAxis;x<N?x=N:x>H&&(x=H)}if(p){var A,w,B,D;const I=v==="y"?"width":"height",N=["top","left"].includes(Ih(r)),H=a.reference[y]-a.floating[I]+(N&&(A=(w=o.offset)==null?void 0:w[y])!=null?A:0)+(N?0:M.crossAxis),P=a.reference[y]+a.reference[I]+(N?0:(B=(D=o.offset)==null?void 0:D[y])!=null?B:0)-(N?M.crossAxis:0);b<H?b=H:b>P&&(b=P)}return{[v]:x,[y]:b}}}},XV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:i,platform:r,elements:a}=e,{apply:o,...c}=n,f=await tv(e,c),p=Ih(t),m=Ev(t);let v,y;p==="top"||p==="bottom"?(v=p,y=m===(await(r.isRTL==null?void 0:r.isRTL(a.floating))?"start":"end")?"left":"right"):(y=p,v=m==="end"?"top":"bottom");const x=nh(f.left,0),b=nh(f.right,0),T=nh(f.top,0),M=nh(f.bottom,0),A={availableHeight:i.floating.height-(["left","right"].includes(t)?2*(T!==0||M!==0?T+M:nh(f.top,f.bottom)):f[v]),availableWidth:i.floating.width-(["top","bottom"].includes(t)?2*(x!==0||b!==0?x+b:nh(f.left,f.right)):f[y])},w=await r.getDimensions(a.floating);o==null||o({...e,...A});const B=await r.getDimensions(a.floating);return w.width!==B.width||w.height!==B.height?{reset:{rects:!0}}:{}}}};function r3(n){return n&&n.document&&n.location&&n.alert&&n.setInterval}function Cc(n){if(n==null)return window;if(!r3(n)){const e=n.ownerDocument;return e&&e.defaultView||window}return n}function Mv(n){return Cc(n).getComputedStyle(n)}function xc(n){return r3(n)?"":n?(n.nodeName||"").toLowerCase():""}function a3(){const n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Ul(n){return n instanceof Cc(n).HTMLElement}function Hu(n){return n instanceof Cc(n).Element}function jE(n){return typeof ShadowRoot>"u"?!1:n instanceof Cc(n).ShadowRoot||n instanceof ShadowRoot}function lb(n){const{overflow:e,overflowX:t,overflowY:i}=Mv(n);return/auto|scroll|overlay|hidden/.test(e+i+t)}function YV(n){return["table","td","th"].includes(xc(n))}function YR(n){const e=/firefox/i.test(a3()),t=Mv(n);return t.transform!=="none"||t.perspective!=="none"||t.contain==="paint"||["transform","perspective"].includes(t.willChange)||e&&t.willChange==="filter"||e&&!!t.filter&&t.filter!=="none"}function s3(){return!/^((?!chrome|android).)*safari/i.test(a3())}const jR=Math.min,Pg=Math.max,ux=Math.round;function bc(n,e,t){var i,r,a,o;e===void 0&&(e=!1),t===void 0&&(t=!1);const c=n.getBoundingClientRect();let f=1,p=1;e&&Ul(n)&&(f=n.offsetWidth>0&&ux(c.width)/n.offsetWidth||1,p=n.offsetHeight>0&&ux(c.height)/n.offsetHeight||1);const m=Hu(n)?Cc(n):window,v=!s3()&&t,y=(c.left+(v&&(i=(r=m.visualViewport)==null?void 0:r.offsetLeft)!=null?i:0))/f,x=(c.top+(v&&(a=(o=m.visualViewport)==null?void 0:o.offsetTop)!=null?a:0))/p,b=c.width/f,T=c.height/p;return{width:b,height:T,top:x,right:y+b,bottom:x+T,left:y,x:y,y:x}}function Lu(n){return(e=n,(e instanceof Cc(e).Node?n.ownerDocument:n.document)||window.document).documentElement;var e}function cb(n){return Hu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function o3(n){return bc(Lu(n)).left+cb(n).scrollLeft}function jV(n,e,t){const i=Ul(e),r=Lu(e),a=bc(n,i&&function(f){const p=bc(f);return ux(p.width)!==f.offsetWidth||ux(p.height)!==f.offsetHeight}(e),t==="fixed");let o={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(i||!i&&t!=="fixed")if((xc(e)!=="body"||lb(r))&&(o=cb(e)),Ul(e)){const f=bc(e,!0);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else r&&(c.x=o3(r));return{x:a.left+o.scrollLeft-c.x,y:a.top+o.scrollTop-c.y,width:a.width,height:a.height}}function l3(n){return xc(n)==="html"?n:n.assignedSlot||n.parentNode||(jE(n)?n.host:null)||Lu(n)}function WR(n){return Ul(n)&&getComputedStyle(n).position!=="fixed"?n.offsetParent:null}function xA(n){const e=Cc(n);let t=WR(n);for(;t&&YV(t)&&getComputedStyle(t).position==="static";)t=WR(t);return t&&(xc(t)==="html"||xc(t)==="body"&&getComputedStyle(t).position==="static"&&!YR(t))?e:t||function(i){let r=l3(i);for(jE(r)&&(r=r.host);Ul(r)&&!["html","body"].includes(xc(r));){if(YR(r))return r;r=r.parentNode}return null}(n)||e}function qR(n){if(Ul(n))return{width:n.offsetWidth,height:n.offsetHeight};const e=bc(n);return{width:e.width,height:e.height}}function c3(n){const e=l3(n);return["html","body","#document"].includes(xc(e))?n.ownerDocument.body:Ul(e)&&lb(e)?e:c3(e)}function fx(n,e){var t;e===void 0&&(e=[]);const i=c3(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),a=Cc(i),o=r?[a].concat(a.visualViewport||[],lb(i)?i:[]):i,c=e.concat(o);return r?c:c.concat(fx(o))}function KR(n,e,t){return e==="viewport"?lx(function(i,r){const a=Cc(i),o=Lu(i),c=a.visualViewport;let f=o.clientWidth,p=o.clientHeight,m=0,v=0;if(c){f=c.width,p=c.height;const y=s3();(y||!y&&r==="fixed")&&(m=c.offsetLeft,v=c.offsetTop)}return{width:f,height:p,x:m,y:v}}(n,t)):Hu(e)?function(i,r){const a=bc(i,!1,r==="fixed"),o=a.top+i.clientTop,c=a.left+i.clientLeft;return{top:o,left:c,x:c,y:o,right:c+i.clientWidth,bottom:o+i.clientHeight,width:i.clientWidth,height:i.clientHeight}}(e,t):lx(function(i){var r;const a=Lu(i),o=cb(i),c=(r=i.ownerDocument)==null?void 0:r.body,f=Pg(a.scrollWidth,a.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),p=Pg(a.scrollHeight,a.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0);let m=-o.scrollLeft+o3(i);const v=-o.scrollTop;return Mv(c||a).direction==="rtl"&&(m+=Pg(a.clientWidth,c?c.clientWidth:0)-f),{width:f,height:p,x:m,y:v}}(Lu(n)))}function WV(n){const e=fx(n),t=["absolute","fixed"].includes(Mv(n).position)&&Ul(n)?xA(n):n;return Hu(t)?e.filter(i=>Hu(i)&&function(r,a){const o=a.getRootNode==null?void 0:a.getRootNode();if(r.contains(a))return!0;if(o&&jE(o)){let c=a;do{if(c&&r===c)return!0;c=c.parentNode||c.host}while(c)}return!1}(i,t)&&xc(i)!=="body"):[]}const qV={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const a=[...t==="clippingAncestors"?WV(e):[].concat(t),i],o=a[0],c=a.reduce((f,p)=>{const m=KR(e,p,r);return f.top=Pg(m.top,f.top),f.right=jR(m.right,f.right),f.bottom=jR(m.bottom,f.bottom),f.left=Pg(m.left,f.left),f},KR(e,o,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=Ul(t),a=Lu(t);if(t===a)return e;let o={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if((r||!r&&i!=="fixed")&&((xc(t)!=="body"||lb(a))&&(o=cb(t)),Ul(t))){const f=bc(t,!0);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}return{...e,x:e.x-o.scrollLeft+c.x,y:e.y-o.scrollTop+c.y}},isElement:Hu,getDimensions:qR,getOffsetParent:xA,getDocumentElement:Lu,getElementRects:n=>{let{reference:e,floating:t,strategy:i}=n;return{reference:jV(e,xA(t),i),floating:{...qR(t),x:0,y:0}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>Mv(n).direction==="rtl"};function KV(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:o=!0,animationFrame:c=!1}=i,f=r&&!c,p=a&&!c,m=f||p?[...Hu(n)?fx(n):[],...fx(e)]:[];m.forEach(b=>{f&&b.addEventListener("scroll",t,{passive:!0}),p&&b.addEventListener("resize",t)});let v,y=null;if(o){let b=!0;y=new ResizeObserver(()=>{b||t(),b=!1}),Hu(n)&&!c&&y.observe(n),y.observe(e)}let x=c?bc(n):null;return c&&function b(){const T=bc(n);!x||T.x===x.x&&T.y===x.y&&T.width===x.width&&T.height===x.height||t(),x=T,v=requestAnimationFrame(b)}(),t(),()=>{var b;m.forEach(T=>{f&&T.removeEventListener("scroll",t),p&&T.removeEventListener("resize",t)}),(b=y)==null||b.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const JV=(n,e,t)=>NV(n,e,{platform:qV,...t});var bA=typeof document<"u"?F.useLayoutEffect:F.useEffect;function SA(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(i=t;i--!==0;)if(!SA(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const a=r[i];if(!(a==="_owner"&&n.$$typeof)&&!SA(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function ZV(n){const e=F.useRef(n);return bA(()=>{e.current=n}),e}function $V(n){let{middleware:e,placement:t="bottom",strategy:i="absolute",whileElementsMounted:r}=n===void 0?{}:n;const a=F.useRef(null),o=F.useRef(null),c=ZV(r),f=F.useRef(null),[p,m]=F.useState({x:null,y:null,strategy:i,placement:t,middlewareData:{}}),[v,y]=F.useState(e);SA(v==null?void 0:v.map(B=>{let{options:D}=B;return D}),e==null?void 0:e.map(B=>{let{options:D}=B;return D}))||y(e);const x=F.useCallback(()=>{!a.current||!o.current||JV(a.current,o.current,{middleware:v,placement:t,strategy:i}).then(B=>{b.current&&ab.flushSync(()=>{m(B)})})},[v,t,i]);bA(()=>{b.current&&x()},[x]);const b=F.useRef(!1);bA(()=>(b.current=!0,()=>{b.current=!1}),[]);const T=F.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),a.current&&o.current)if(c.current){const B=c.current(a.current,o.current,x);f.current=B}else x()},[x,c]),M=F.useCallback(B=>{a.current=B,T()},[T]),A=F.useCallback(B=>{o.current=B,T()},[T]),w=F.useMemo(()=>({reference:a,floating:o}),[]);return F.useMemo(()=>({...p,update:x,refs:w,reference:M,floating:A}),[p,x,w,M,A])}const QV=n=>{const{element:e,padding:t}=n;function i(r){return Object.prototype.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){return i(e)?e.current!=null?GR({element:e.current,padding:t}).fn(r):{}:e?GR({element:e,padding:t}).fn(r):{}}}},ek=F.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...a}=n;return F.createElement(Rh.svg,zi({},a,{ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:F.createElement("polygon",{points:"0,0 30,0 15,10"}))}),tk=ek;function nk(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}const Eg=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function ik(n){const[e,t]=F.useState(void 0);return Eg(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let o,c;if("borderBoxSize"in a){const f=a.borderBoxSize,p=Array.isArray(f)?f[0]:f;o=p.inlineSize,c=p.blockSize}else o=n.offsetWidth,c=n.offsetHeight;t({width:o,height:c})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}const u3="Popper",[WE,f3]=ZD(u3),[rk,h3]=WE(u3),ak=n=>{const{__scopePopper:e,children:t}=n,[i,r]=F.useState(null);return F.createElement(rk,{scope:e,anchor:i,onAnchorChange:r},t)},sk="PopperAnchor",ok=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,a=h3(sk,t),o=F.useRef(null),c=Ip(e,o);return F.useEffect(()=>{a.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:F.createElement(Rh.div,zi({},r,{ref:c}))}),hx="PopperContent",[lk,ck]=WE(hx),[uk,fk]=WE(hx,{hasParent:!1,positionUpdateFns:new Set}),hk=F.forwardRef((n,e)=>{var t,i,r,a,o,c,f,p;const{__scopePopper:m,side:v="bottom",sideOffset:y=0,align:x="center",alignOffset:b=0,arrowPadding:T=0,collisionBoundary:M=[],collisionPadding:A=0,sticky:w="partial",hideWhenDetached:B=!1,avoidCollisions:D=!0,onPlaced:I,...N}=n,H=h3(hx,m),[P,L]=F.useState(null),U=Ip(e,k=>L(k)),[Y,ie]=F.useState(null),Q=ik(Y),ae=(t=Q==null?void 0:Q.width)!==null&&t!==void 0?t:0,he=(i=Q==null?void 0:Q.height)!==null&&i!==void 0?i:0,X=v+(x!=="center"?"-"+x:""),te=typeof A=="number"?A:{top:0,right:0,bottom:0,left:0,...A},ne=Array.isArray(M)?M:[M],be=ne.length>0,W={padding:te,boundary:ne.filter(vk),altBoundary:be},{reference:se,floating:Ae,strategy:De,x:ge,y:He,placement:Le,middlewareData:Qe,update:rt}=$V({strategy:"fixed",placement:X,whileElementsMounted:KV,middleware:[yk(),GV({mainAxis:y+he,alignmentAxis:b}),D?VV({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?kV():void 0,...W}):void 0,Y?QV({element:Y,padding:T}):void 0,D?FV({...W}):void 0,XV({...W,apply:({elements:k,availableWidth:re,availableHeight:xe})=>{k.floating.style.setProperty("--radix-popper-available-width",`${re}px`),k.floating.style.setProperty("--radix-popper-available-height",`${xe}px`)}}),_k({arrowWidth:ae,arrowHeight:he}),B?HV({strategy:"referenceHidden"}):void 0].filter(gk)});Eg(()=>{se(H.anchor)},[se,H.anchor]);const Bt=ge!==null&&He!==null,[wt,fn]=d3(Le),Vt=nk(I);Eg(()=>{Bt&&(Vt==null||Vt())},[Bt,Vt]);const Rt=(r=Qe.arrow)===null||r===void 0?void 0:r.x,Z=(a=Qe.arrow)===null||a===void 0?void 0:a.y,lt=((o=Qe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[et,Ze]=F.useState();Eg(()=>{P&&Ze(window.getComputedStyle(P).zIndex)},[P]);const{hasParent:je,positionUpdateFns:yt}=fk(hx,m),Je=!je;F.useLayoutEffect(()=>{if(!Je)return yt.add(rt),()=>{yt.delete(rt)}},[Je,yt,rt]),Eg(()=>{Je&&Bt&&Array.from(yt).reverse().forEach(k=>requestAnimationFrame(k))},[Je,Bt,yt]);const J={"data-side":wt,"data-align":fn,...N,ref:U,style:{...N.style,animation:Bt?void 0:"none",opacity:(c=Qe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}};return F.createElement("div",{ref:Ae,"data-radix-popper-content-wrapper":"",style:{position:De,left:0,top:0,transform:Bt?`translate3d(${Math.round(ge)}px, ${Math.round(He)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:et,"--radix-popper-transform-origin":[(f=Qe.transformOrigin)===null||f===void 0?void 0:f.x,(p=Qe.transformOrigin)===null||p===void 0?void 0:p.y].join(" ")},dir:n.dir},F.createElement(lk,{scope:m,placedSide:wt,onArrowChange:ie,arrowX:Rt,arrowY:Z,shouldHideArrow:lt},Je?F.createElement(uk,{scope:m,hasParent:!0,positionUpdateFns:yt},F.createElement(Rh.div,J)):F.createElement(Rh.div,J)))}),dk="PopperArrow",pk={top:"bottom",right:"left",bottom:"top",left:"right"},mk=F.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,a=ck(dk,i),o=pk[a.placedSide];return F.createElement("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0}},F.createElement(tk,zi({},r,{ref:t,style:{...r.style,display:"block"}})))});function gk(n){return n!==void 0}function vk(n){return n!==null}const yk=()=>({name:"anchorCssProperties",fn(n){const{rects:e,elements:t}=n,{width:i,height:r}=e.reference;return t.floating.style.setProperty("--radix-popper-anchor-width",`${i}px`),t.floating.style.setProperty("--radix-popper-anchor-height",`${r}px`),{}}}),_k=n=>({name:"transformOrigin",options:n,fn(e){var t,i,r,a,o;const{placement:c,rects:f,middlewareData:p}=e,v=((t=p.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,y=v?0:n.arrowWidth,x=v?0:n.arrowHeight,[b,T]=d3(c),M={start:"0%",center:"50%",end:"100%"}[T],A=((i=(r=p.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+y/2,w=((a=(o=p.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+x/2;let B="",D="";return b==="bottom"?(B=v?M:`${A}px`,D=`${-x}px`):b==="top"?(B=v?M:`${A}px`,D=`${f.floating.height+x}px`):b==="right"?(B=`${-x}px`,D=v?M:`${w}px`):b==="left"&&(B=`${f.floating.width+x}px`,D=v?M:`${w}px`),{data:{x:B,y:D}}}});function d3(n){const[e,t="center"]=n.split("-");return[e,t]}const xk=ak,bk=ok,Sk=hk,Ak=mk,JR=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function Ek(n,e){return F.useReducer((t,i)=>{const r=e[t][i];return r??t},n)}const p3=n=>{const{present:e,children:t}=n,i=Mk(e),r=typeof t=="function"?t({present:i.isPresent}):F.Children.only(t),a=Ip(i.ref,r.ref);return typeof t=="function"||i.isPresent?F.cloneElement(r,{ref:a}):null};p3.displayName="Presence";function Mk(n){const[e,t]=F.useState(),i=F.useRef({}),r=F.useRef(n),a=F.useRef("none"),o=n?"mounted":"unmounted",[c,f]=Ek(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const p=n_(i.current);a.current=c==="mounted"?p:"none"},[c]),JR(()=>{const p=i.current,m=r.current;if(m!==n){const y=a.current,x=n_(p);n?f("MOUNT"):x==="none"||(p==null?void 0:p.display)==="none"?f("UNMOUNT"):f(m&&y!==x?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,f]),JR(()=>{if(e){const p=v=>{const x=n_(i.current).includes(v.animationName);v.target===e&&x&&ab.flushSync(()=>f("ANIMATION_END"))},m=v=>{v.target===e&&(a.current=n_(i.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:F.useCallback(p=>{p&&(i.current=getComputedStyle(p)),t(p)},[])}}function n_(n){return(n==null?void 0:n.animationName)||"none"}function m3(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])}function Tk({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,r]=Ck({defaultProp:e,onChange:t}),a=n!==void 0,o=a?n:i,c=m3(t),f=F.useCallback(p=>{if(a){const v=typeof p=="function"?p(n):p;v!==n&&c(v)}else r(p)},[a,n,r,c]);return[o,f]}function Ck({defaultProp:n,onChange:e}){const t=F.useState(n),[i]=t,r=F.useRef(i),a=m3(e);return F.useEffect(()=>{r.current!==i&&(a(i),r.current=i)},[i,r,a]),t}const Rk=F.forwardRef((n,e)=>F.createElement(Rh.span,zi({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),wk=Rk,[ub,sq]=ZD("Tooltip",[f3]),fb=f3(),Bk="TooltipProvider",AA="tooltip.open",[oq,qE]=ub(Bk),KE="Tooltip",[Dk,hb]=ub(KE),Ok=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:c}=n,f=qE(KE,n.__scopeTooltip),p=fb(e),[m,v]=F.useState(null),y=UV(),x=F.useRef(0),b=o??f.disableHoverableContent,T=c??f.delayDuration,M=F.useRef(!1),[A=!1,w]=Tk({prop:i,defaultProp:r,onChange:H=>{H?(f.onOpen(),document.dispatchEvent(new CustomEvent(AA))):f.onClose(),a==null||a(H)}}),B=F.useMemo(()=>A?M.current?"delayed-open":"instant-open":"closed",[A]),D=F.useCallback(()=>{window.clearTimeout(x.current),M.current=!1,w(!0)},[w]),I=F.useCallback(()=>{window.clearTimeout(x.current),w(!1)},[w]),N=F.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{M.current=!0,w(!0)},T)},[T,w]);return F.useEffect(()=>()=>window.clearTimeout(x.current),[]),F.createElement(xk,p,F.createElement(Dk,{scope:e,contentId:y,open:A,stateAttribute:B,trigger:m,onTriggerChange:v,onTriggerEnter:F.useCallback(()=>{f.isOpenDelayed?N():D()},[f.isOpenDelayed,N,D]),onTriggerLeave:F.useCallback(()=>{b?I():window.clearTimeout(x.current)},[I,b]),onOpen:D,onClose:I,disableHoverableContent:b},t))},ZR="TooltipTrigger",Uk=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=hb(ZR,t),a=qE(ZR,t),o=fb(t),c=F.useRef(null),f=Ip(e,c,r.onTriggerChange),p=F.useRef(!1),m=F.useRef(!1),v=F.useCallback(()=>p.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),F.createElement(bk,zi({asChild:!0},o),F.createElement(Rh.button,zi({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},i,{ref:f,onPointerMove:dc(n.onPointerMove,y=>{y.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),m.current=!0)}),onPointerLeave:dc(n.onPointerLeave,()=>{r.onTriggerLeave(),m.current=!1}),onPointerDown:dc(n.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:dc(n.onFocus,()=>{p.current||r.onOpen()}),onBlur:dc(n.onBlur,r.onClose),onClick:dc(n.onClick,r.onClose)})))}),Nk="TooltipPortal",[lq,Lk]=ub(Nk,{forceMount:void 0}),nv="TooltipContent",Ik=F.forwardRef((n,e)=>{const t=Lk(nv,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...a}=n,o=hb(nv,n.__scopeTooltip);return F.createElement(p3,{present:i||o.open},o.disableHoverableContent?F.createElement(g3,zi({side:r},a,{ref:e})):F.createElement(Pk,zi({side:r},a,{ref:e})))}),Pk=F.forwardRef((n,e)=>{const t=hb(nv,n.__scopeTooltip),i=qE(nv,n.__scopeTooltip),r=F.useRef(null),a=Ip(e,r),[o,c]=F.useState(null),{trigger:f,onClose:p}=t,m=r.current,{onPointerInTransitChange:v}=i,y=F.useCallback(()=>{c(null),v(!1)},[v]),x=F.useCallback((b,T)=>{const M=b.currentTarget,A={x:b.clientX,y:b.clientY},w=Vk(A,M.getBoundingClientRect()),B=w==="right"||w==="bottom"?-5:5,I=w==="right"||w==="left"?{x:b.clientX+B,y:b.clientY}:{x:b.clientX,y:b.clientY+B},N=kk(T.getBoundingClientRect()),H=Yk([I,...N]);c(H),v(!0)},[v]);return F.useEffect(()=>()=>y(),[y]),F.useEffect(()=>{if(f&&m){const b=M=>x(M,m),T=M=>x(M,f);return f.addEventListener("pointerleave",b),m.addEventListener("pointerleave",T),()=>{f.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",T)}}},[f,m,x,y]),F.useEffect(()=>{if(o){const b=T=>{const M=T.target,A={x:T.clientX,y:T.clientY},w=(f==null?void 0:f.contains(M))||(m==null?void 0:m.contains(M)),B=!Xk(A,o);w?y():B&&(y(),p())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[f,m,o,p,y]),F.createElement(g3,zi({},n,{ref:a}))}),[zk,Fk]=ub(KE,{isInside:!1}),g3=F.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:o,...c}=n,f=hb(nv,t),p=fb(t),{onClose:m}=f;return F.useEffect(()=>(document.addEventListener(AA,m),()=>document.removeEventListener(AA,m)),[m]),F.useEffect(()=>{if(f.trigger){const v=y=>{const x=y.target;x!=null&&x.contains(f.trigger)&&m()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,m]),F.createElement(CV,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:v=>v.preventDefault(),onDismiss:m},F.createElement(Sk,zi({"data-state":f.stateAttribute},p,c,{ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),F.createElement(QD,null,i),F.createElement(zk,{scope:t,isInside:!0},F.createElement(wk,{id:f.contentId,role:"tooltip"},r||i))))}),Hk="TooltipArrow",Gk=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=fb(t);return Fk(Hk,t).isInside?null:F.createElement(Ak,zi({},r,i,{ref:e}))});function Vk(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,i,r,a)){case a:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:return null}}function kk(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function Xk(n,e){const{x:t,y:i}=n;let r=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a].x,f=e[a].y,p=e[o].x,m=e[o].y;f>i!=m>i&&t<(p-c)*(i-f)/(m-f)+c&&(r=!r)}return r}function Yk(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),jk(e)}function jk(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(r.y-o.y)>=(a.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(r.y-o.y)>=(a.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Wk=Ok,qk=Uk,Kk=Ik,Jk=Gk;function Zk(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function yi(n,e){if(n==null)return{};var t=Zk(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}let Wi;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(Wi||(Wi={}));const $k={[Wi.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Wi.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Wi.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Wi.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Wi.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Wi.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Wi.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Wi.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Wi.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[Wi.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Wi.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function v3(n,e,...t){const[i,...r]=$k[e](...t);console[n]("LEVA: "+i,...r)}const mc=v3.bind(null,"warn"),Qk=v3.bind(null,"log"),e7=["value"],t7=["schema"],n7=["value"],y3=[],wh={};function $R(n){let{value:e}=n,t=yi(n,e7);for(let i of y3){const r=i(e,t);if(r)return r}}function Rc(n,e){let{schema:t}=e,i=yi(e,t7);if(n in wh){mc(Wi.ALREADY_REGISTERED_TYPE,n);return}y3.push((r,a)=>t(r,a)&&n),wh[n]=i}function p1(n,e,t,i){const{normalize:r}=wh[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,o=yi(e,n7);return{value:a,settings:o}}function i7(n,e,t,i,r,a){const{sanitize:o}=wh[n];return o?o(e,t,i,r,a):e}function QR(n,e,t){const{format:i}=wh[n];return i?i(e,t):e}function r7(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ew(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ew(Object(t),!0).forEach(function(i){r7(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ew(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Gu=(n,e,t)=>n>t?t:n<e?e:n,a7=n=>{if(n===""||typeof n=="number")return n;try{const e=Bu(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},s7=Math.log(10);function tw(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/s7)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const dx=(n,e,t)=>t===e?0:(Gu(n,e,t)-e)/(t-e),px=(n,e,t)=>n*(t-e)+e,o7=()=>"_"+Math.random().toString(36).substr(2,9),nw=/\(([0-9+\-*/^ .]+)\)/,iw=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,rw=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,aw=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,sw=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,ow=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Bu(n){if(isNaN(Number(n)))if(nw.test(n)){const e=n.replace(nw,(t,i)=>String(Bu(i)));return Bu(e)}else if(iw.test(n)){const e=n.replace(iw,(t,i,r)=>String(Math.pow(Number(i),Number(r))));return Bu(e)}else if(rw.test(n)){const e=n.replace(rw,(t,i,r)=>String(Number(i)*Number(r)));return Bu(e)}else if(aw.test(n)){const e=n.replace(aw,(t,i,r)=>{if(r!=0)return String(Number(i)/Number(r));throw new Error("Division by zero")});return Bu(e)}else if(sw.test(n)){const e=n.replace(sw,(t,i,r)=>String(Number(i)+Number(r)));return Bu(e)}else if(ow.test(n)){const e=n.replace(ow,(t,i,r)=>String(Number(i)-Number(r)));return Bu(e)}else return Number(n);return Number(n)}function l7(n,e){return e.reduce((t,i)=>(n&&n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}function c7(n,e){const t=rn({},n);return e.forEach(i=>i in n&&delete t[i]),t}function u7(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function _3(n){return Object.prototype.toString.call(n)==="[object Object]"}const f7=n=>_3(n)&&Object.keys(n).length===0;let Fo;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(Fo||(Fo={}));let Vo;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Vo||(Vo={}));const h7=["type","__customInput"],d7=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],p7=["type"];function x3(n,e,t={},i){var r,a;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:rn({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:I,__customInput:N}=n,H=yi(n,h7);return x3(N,e,H,I)}const{render:o,label:c,optional:f,order:p=0,disabled:m,hint:v,onChange:y,onEditStart:x,onEditEnd:b,transient:T}=n,M=yi(n,d7),A=rn({render:o,key:e,label:c??e,hint:v,transient:T??!!y,onEditStart:x,onEditEnd:b,disabled:m,optional:f,order:p},t);let{type:w}=M,B=yi(M,p7);if(w=i??w,w in Fo)return{type:w,input:B,options:A};let D;return i&&_3(B)&&"value"in B?D=B.value:D=f7(B)?void 0:B,{type:w,input:D,options:rn(rn({},A),{},{onChange:y,optional:(r=A.optional)!==null&&r!==void 0?r:!1,disabled:(a=A.disabled)!==null&&a!==void 0?a:!1})}}function m7(n,e,t,i){const r=x3(n,e),{type:a,input:o,options:c}=r;if(a)return a in Fo?r:{type:a,input:p1(a,o,t,i),options:c};let f=$R(o);return f?{type:f,input:p1(f,o,t,i),options:c}:(f=$R({value:o}),f?{type:f,input:p1(f,{value:o},t,i),options:c}:!1)}function lw(n,e,t,i,r){const{value:a,type:o,settings:c}=n;n.value=b3({type:o,value:a,settings:c},e,t,i),n.fromPanel=r}const g7=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function b3({type:n,value:e,settings:t},i,r,a){const o=n!=="SELECT"&&typeof i=="function"?i(e):i;let c;try{c=i7(n,o,t,e,r,a)}catch(f){throw new g7(`The value \`${i}\` did not result in a correct value.`,e,f)}return Qg(c,e)?e:c}const S3=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,a=t&&!i,o=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(o,e),a&&o()}},A3=n=>n.shiftKey?5:n.altKey?1/5:1,v7=["value"],y7=["min","max"],_7=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},E3=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const a=Gu(r,e,t);return i?a+i:a},x7=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},M3=n=>{let{value:e}=n,t=yi(n,v7);const{min:i=-1/0,max:r=1/0}=t,a=yi(t,y7);let o=parseFloat(e);const c=typeof e=="string"?e.substring((""+o).length):void 0;o=Gu(o,i,r);let f=t.step;f||(Number.isFinite(i)?Number.isFinite(r)?f=+(Math.abs(r-i)/100).toPrecision(1):f=+(Math.abs(o-i)/100).toPrecision(1):Number.isFinite(r)&&(f=+(Math.abs(r-o)/100).toPrecision(1)));const p=f?tw(f)*10:tw(o);f=f||p/10;const m=Math.round(Gu(Math.log10(1/p),0,2));return{value:c?o+c:o,settings:rn({initialValue:o,step:f,pad:m,min:i,max:r,suffix:c},a)}},T3=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var C3=Object.freeze({__proto__:null,schema:_7,sanitize:E3,format:x7,normalize:M3,sanitizeStep:T3});function ir(){return ir=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ir.apply(this,arguments)}const R3=F.createContext({});function xa(){return F.useContext(R3)}const JE=F.createContext(null),w3=F.createContext(null),B3=F.createContext(null);function Tv(){return F.useContext(w3)}function b7(){return F.useContext(B3)}const D3=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function i_(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const yg={$inputStyle:()=>n=>i_(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>i_(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>i_(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>i_(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Zt,css:cq,createTheme:S7,globalCss:A7,keyframes:uq}=gV({prefix:"leva",theme:D3(),utils:rn(rn({},yg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":yg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":yg.$focusStyle()(n)}),$hover:n=>({"&:hover":yg.$hoverStyle()(n)}),$active:n=>({"&:active":yg.$activeStyle()(n)})})}),E7=A7({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function M7(n){const e=D3();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=S7(e);return{theme:e,className:t.className}}function Sc(n,e){const{theme:t}=F.useContext(JE);if(!(n in t)||!(e in t[n]))return mc(Wi.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const O3=Zt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),U3=Zt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${O3}`]:{paddingLeft:0}}),T7=Zt(U3,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),C7=Zt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),R7=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],w7=["onUpdate"];function ZE(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:a,type:o,id:c,inputType:f="text",rows:p=0}=n,m=yi(n,R7);const{id:v,emitOnEditStart:y,emitOnEditEnd:x,disabled:b}=xa(),T=c||v,M=F.useRef(null),A=p>0,w=A?"textarea":"input",B=F.useCallback(N=>H=>{const P=H.currentTarget.value;N(P)},[]);fe.useEffect(()=>{const N=M.current,H=B(P=>{i(P),x()});return N==null||N.addEventListener("blur",H),()=>N==null?void 0:N.removeEventListener("blur",H)},[B,i,x]);const D=F.useCallback(N=>{N.key==="Enter"&&B(i)(N)},[B,i]),I=Object.assign({as:w},A?{rows:p}:{},m);return fe.createElement(C7,{textArea:A},e&&typeof e=="string"?fe.createElement(U3,null,e):e,fe.createElement(O3,ir({levaType:o,ref:M,id:T,type:f,autoComplete:"off",spellCheck:"false",value:t,onChange:B(r),onFocus:()=>y(),onKeyPress:D,onKeyDown:a,disabled:b},I)))}function B7(n){let{onUpdate:e}=n,t=yi(n,w7);const i=F.useCallback(a=>e(a7(a)),[e]),r=F.useCallback(a=>{const o=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(o){a.preventDefault();const c=a.altKey?.1:a.shiftKey?10:1;e(f=>parseFloat(f)+o*c)}},[e]);return fe.createElement(ZE,ir({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const mx=Zt("div",{}),EA=Zt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),D7=Zt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${EA}::after`]:{opacity:.6},[`${mx}:hover > & + ${EA}::after`]:{opacity:.6},[`${mx}:hover > & > svg`]:{opacity:1}}),N3=Zt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${mx}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),L3=Zt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${N3} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),I3=Zt(L3,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),O7=Zt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),U7=Zt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),MA=Zt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),N7=Zt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${MA}`]:{pointerEvents:"auto"}}}}}),P3=Zt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),L7=Zt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),I7=Zt(Jk,{fill:"$toolTipBackground"});function $E({children:n}){const{className:e}=F.useContext(JE);return fe.createElement(z9,{className:e},n)}const P7=["align"];function z7(){const{id:n,disable:e,disabled:t}=xa();return fe.createElement(fe.Fragment,null,fe.createElement(U7,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),fe.createElement("label",{htmlFor:n+"__disable"}))}function F7(n){const{id:e,optional:t,hint:i}=xa(),r=n.htmlFor||(e?{htmlFor:e}:null),a=!i&&typeof n.children=="string"?{title:n.children}:null;return fe.createElement(fe.Fragment,null,t&&fe.createElement(z7,null),i!==void 0?fe.createElement(Wk,null,fe.createElement(qk,{asChild:!0},fe.createElement(MA,ir({},r,n))),fe.createElement(Kk,{side:"top",sideOffset:2},fe.createElement(L7,null,i,fe.createElement(I7,null)))):fe.createElement(MA,ir({},r,a,n)))}function Yo(n){let{align:e}=n,t=yi(n,P7);const{value:i,label:r,key:a,disabled:o}=xa(),{hideCopyButton:c}=b7(),f=!c&&a!==void 0,[p,m]=F.useState(!1),v=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:i??""})),m(!0)}catch{mc(Wi.CLIPBOARD_ERROR,{[a]:i})}};return fe.createElement(O7,{align:e,onPointerLeave:()=>m(!1)},fe.createElement(F7,t),f&&!o&&fe.createElement("div",{title:`Click to copy ${typeof r=="string"?r:a} value`},p?fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),fe.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):fe.createElement("svg",{onClick:v,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),fe.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const H7=["toggled"],G7=Zt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function QE(n){let{toggled:e}=n,t=yi(n,H7);return fe.createElement(G7,ir({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),fe.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const V7=["input"];function io(n){let{input:e}=n,t=yi(n,V7);return e?fe.createElement(I3,t):fe.createElement(L3,t)}function z3({value:n,type:e,settings:t,setValue:i}){const[r,a]=F.useState(QR(e,n,t)),o=F.useRef(n),c=F.useRef(t);c.current=t;const f=F.useCallback(m=>a(QR(e,m,c.current)),[e]),p=F.useCallback(m=>{try{i(m)}catch(v){const{type:y,previousValue:x}=v;if(y!=="LEVA_ERROR")throw v;f(x)}},[f,i]);return F.useEffect(()=>{Qg(n,o.current)||f(n),o.current=n},[n,f]),{displayValue:r,onChange:a,onUpdate:p}}function Cv(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=xa();return w5(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const a=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),a},e)}function k7(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!1);return F.useEffect(()=>{const r=S3(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),F.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function F3(){const n=F.useRef(null),e=F.useRef({x:0,y:0}),t=F.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const X7=["__refCount"],m1=(n,e)=>{if(!n[e])return null;const t=n[e];return yi(t,X7)};function Y7(n){const e=Tv(),[t,i]=F.useState(m1(e.getData(),n)),r=F.useCallback(p=>e.setValueAtPath(n,p,!0),[n,e]),a=F.useCallback(p=>e.setSettingsAtPath(n,p),[n,e]),o=F.useCallback(p=>e.disableInputAtPath(n,p),[n,e]),c=F.useCallback(()=>e.emitOnEditStart(n),[n,e]),f=F.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return F.useEffect(()=>{i(m1(e.getData(),n));const p=e.useStore.subscribe(m=>m1(m.data,n),i,{equalityFn:sb});return()=>p()},[e,n]),[t,{set:r,setSettings:a,disable:o,storeId:e.storeId,emitOnEditStart:c,emitOnEditEnd:f}]}const j7=Zt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),H3=Zt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),TA=Zt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),G3=Zt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),V3=Zt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function W7({value:n,min:e,max:t,onDrag:i,step:r,initialValue:a}){const o=F.useRef(null),c=F.useRef(null),f=F.useRef(0),p=Sc("sizes","scrubberWidth"),m=Cv(({event:y,first:x,xy:[b],movement:[T],memo:M})=>{if(x){const{width:w,left:B}=o.current.getBoundingClientRect();f.current=w-parseFloat(p),M=(y==null?void 0:y.target)===c.current?n:px((b-B)/w,e,t)}const A=M+px(T/f.current,0,t-e);return i(T3(A,{step:r,initialValue:a})),M}),v=dx(n,e,t);return fe.createElement(G3,ir({ref:o},m()),fe.createElement(H3,null,fe.createElement(V3,{style:{left:0,right:`${(1-v)*100}%`}})),fe.createElement(TA,{ref:c,style:{left:`calc(${v} * (100% - ${p}))`}}))}const q7=fe.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,a]=F.useState(!1),o=Cv(({active:c,delta:[f],event:p,memo:m=0,first:v,last:y,target:x})=>(v&&x.requestPointerLock(),y&&document.exitPointerLock(),a(c),m+=f/2,Math.abs(m)>=1&&(e(b=>parseFloat(b)+Math.floor(m)*t*A3(p)),m=0),m));return fe.createElement(T7,ir({dragging:r,title:n.length>1?n:""},o()),n.slice(0,i))});function k3({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:a,innerLabelTrim:o=1}){const c=o>0&&fe.createElement(q7,{label:n,step:a.step,onUpdate:i,innerLabelTrim:o});return fe.createElement(B7,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:c})}function K7(){const n=xa(),{label:e,value:t,onUpdate:i,settings:r,id:a}=n,{min:o,max:c}=r,f=c!==1/0&&o!==-1/0;return fe.createElement(io,{input:!0},fe.createElement(Yo,null,e),fe.createElement(j7,{hasRange:f},f&&fe.createElement(W7,ir({value:parseFloat(t),onDrag:i},r)),fe.createElement(k3,ir({},n,{id:a,label:"value",innerLabelTrim:f?0:1}))))}const{sanitizeStep:J7}=C3,Z7=yi(C3,["sanitizeStep"]);var $7=rn({component:K7},Z7);const Q7=(n,e)=>os().schema({options:os().passesAnyOf(os().object(),os().array())}).test(e),eX=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},tX=(n,{values:e})=>e.indexOf(n),nX=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(a=>String(a))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var iX=Object.freeze({__proto__:null,schema:Q7,sanitize:eX,format:tX,normalize:nX});const rX=Zt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),CA=Zt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),aX=Zt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${CA}:focus + &`]:{$focusStyle:""},[`${CA}:hover + &`]:{$hoverStyle:""}});function sX({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:a}){const{keys:o,values:c}=r,f=F.useRef();return e===c[n]&&(f.current=o[n]),fe.createElement(rX,null,fe.createElement(CA,{id:i,value:n,onChange:p=>t(c[Number(p.currentTarget.value)]),disabled:a},o.map((p,m)=>fe.createElement("option",{key:p,value:m},p))),fe.createElement(aX,null,f.current),fe.createElement(QE,{toggled:!0}))}function oX(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:a,settings:o}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(sX,{id:r,value:e,displayValue:t,onUpdate:i,settings:o,disabled:a}))}var lX=rn({component:oX},iX);const cX=n=>os().string().test(n),uX=n=>{if(typeof n!="string")throw Error("Invalid string");return n},fX=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var hX=Object.freeze({__proto__:null,schema:cX,sanitize:uX,normalize:fX});const dX=["displayValue","onUpdate","onChange","editable"],pX=Zt("div",{whiteSpace:"pre-wrap"});function mX(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,a=yi(n,dX);return r?fe.createElement(ZE,ir({value:e,onUpdate:t,onChange:i},a)):fe.createElement(pX,null,e)}function gX(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(mX,ir({displayValue:t,onUpdate:i,onChange:r},e)))}var vX=rn({component:gX},hX);const yX=n=>os().boolean().test(n),_X=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var xX=Object.freeze({__proto__:null,schema:yX,sanitize:_X});const bX=Zt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function SX({value:n,onUpdate:e,id:t,disabled:i}){return fe.createElement(bX,null,fe.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),fe.createElement("label",{htmlFor:t},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fe.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function AX(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(SX,{value:e,onUpdate:t,id:r,disabled:i}))}var EX=rn({component:AX},xX);const MX=["locked"];function TX({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:a}){const o=F.useRef(n[t]);o.current=n[t];const c=F.useCallback(p=>r({[t]:b3({type:"NUMBER",value:o.current,settings:i},p)}),[r,i,t]),f=z3({type:"NUMBER",value:n[t],settings:i,setValue:c});return fe.createElement(k3,{id:e,label:t,value:n[t],displayValue:f.displayValue,onUpdate:f.onUpdate,onChange:f.onChange,settings:i,innerLabelTrim:a})}const CX=Zt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function RX(n){let{locked:e}=n,t=yi(n,MX);return fe.createElement("svg",ir({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?fe.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):fe.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function eM({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:a}=xa(),{lock:o,locked:c}=t;return fe.createElement(CX,{withLock:o},o&&fe.createElement(RX,{locked:c,onClick:()=>a({locked:!c})}),Object.keys(n).map((f,p)=>fe.createElement(TX,{id:p===0?r:`${r}.${f}`,key:f,valueKey:f,value:n,settings:t[f],onUpdate:e,innerLabelTrim:i})))}const X3=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([a,o])=>{t[a]=M3(rn({value:o},e[a])).settings,i=Math.max(i,t[a].step),r=Math.min(r,t[a].pad)});for(let a in t){const{step:o,min:c,max:f}=e[a]||{};!isFinite(o)&&(!isFinite(c)||!isFinite(f))&&(t[a].step=i,t[a].pad=r)}return t},wX=["lock"],BX=["value"];function DX(n){const e=os().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(a=>isFinite(a))};return i=>e.test(i)||t(i)}function OX(n){return Array.isArray(n)?"array":"object"}function zg(n,e,t){return OX(n)===e?n:e==="array"?Object.values(n):u7(n,t)}const UX=(n,e,t)=>{const i=zg(n,"object",e.keys);for(let o in i)i[o]=E3(i[o],e[o]);const r=Object.keys(i);let a={};if(r.length===e.keys.length)a=i;else{const o=zg(t,"object",e.keys);if(r.length===1&&e.locked){const c=r[0],f=i[c],p=o[c],m=p!==0?f/p:1;for(let v in o)v===c?a[c]=f:a[v]=o[v]*m}else a=rn(rn({},o),i)}return zg(a,e.format,e.keys)},NX=(n,e)=>zg(n,"object",e.keys),LX=n=>!!n&&("step"in n||"min"in n||"max"in n);function IX(n,e,t=[]){const{lock:i=!1}=e,r=yi(e,wX),a=Array.isArray(n)?"array":"object",o=a==="object"?Object.keys(n):t,c=zg(n,"object",o),f=LX(r)?o.reduce((m,v)=>Object.assign(m,{[v]:r}),{}):r,p=X3(c,f);return{value:a==="array"?n:c,settings:rn(rn({},p),{},{format:a,keys:o,lock:i,locked:!1})}}function Y3(n){return{schema:DX(n.length),normalize:e=>{let{value:t}=e,i=yi(e,BX);return IX(t,i,n)},format:(e,t)=>NX(e,t),sanitize:(e,t,i)=>UX(e,t,i)}}var PX={grad:.9,turn:360,rad:360/(2*Math.PI)},uc=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Hr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},eo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},j3=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},cw=function(n){return{r:eo(n.r,0,255),g:eo(n.g,0,255),b:eo(n.b,0,255),a:eo(n.a)}},g1=function(n){return{r:Hr(n.r),g:Hr(n.g),b:Hr(n.b),a:Hr(n.a,3)}},zX=/^#([0-9a-f]{3,8})$/i,r_=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},W3=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),o=a-Math.min(e,t,i),c=o?a===e?(t-i)/o:a===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(c<0?c+6:c),s:a?o/a*100:0,v:a/255*100,a:r}},q3=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),o=i*(1-t),c=i*(1-(e-a)*t),f=i*(1-(1-e+a)*t),p=a%6;return{r:255*[i,c,o,o,f,i][p],g:255*[f,i,i,c,o,o][p],b:255*[o,o,f,i,i,c][p],a:r}},uw=function(n){return{h:j3(n.h),s:eo(n.s,0,100),l:eo(n.l,0,100),a:eo(n.a)}},fw=function(n){return{h:Hr(n.h),s:Hr(n.s),l:Hr(n.l),a:Hr(n.a,3)}},hw=function(n){return q3((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},Fg=function(n){return{h:(e=W3(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},FX=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HX=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GX=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VX=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,RA={string:[[function(n){var e=zX.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Hr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Hr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=GX.exec(n)||VX.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:cw({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=FX.exec(n)||HX.exec(n);if(!e)return null;var t,i,r=uw({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(PX[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return hw(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=r===void 0?1:r;return uc(e)&&uc(t)&&uc(i)?cw({r:Number(e),g:Number(t),b:Number(i),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,a=r===void 0?1:r;if(!uc(e)||!uc(t)||!uc(i))return null;var o=uw({h:Number(e),s:Number(t),l:Number(i),a:Number(a)});return hw(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,a=r===void 0?1:r;if(!uc(e)||!uc(t)||!uc(i))return null;var o=function(c){return{h:j3(c.h),s:eo(c.s,0,100),v:eo(c.v,0,100),a:eo(c.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(a)});return q3(o)},"hsv"]]},dw=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},K3=function(n){return typeof n=="string"?dw(n.trim(),RA.string):typeof n=="object"&&n!==null?dw(n,RA.object):[null,void 0]},kX=function(n){return K3(n)[1]},v1=function(n,e){var t=Fg(n);return{h:t.h,s:eo(t.s+100*e,0,100),l:t.l,a:t.a}},y1=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},pw=function(n,e){var t=Fg(n);return{h:t.h,s:t.s,l:eo(t.l+100*e,0,100),a:t.a}},wA=function(){function n(e){this.parsed=K3(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Hr(y1(this.rgba),2)},n.prototype.isDark=function(){return y1(this.rgba)<.5},n.prototype.isLight=function(){return y1(this.rgba)>=.5},n.prototype.toHex=function(){return e=g1(this.rgba),t=e.r,i=e.g,r=e.b,o=(a=e.a)<1?r_(Hr(255*a)):"","#"+r_(t)+r_(i)+r_(r)+o;var e,t,i,r,a,o},n.prototype.toRgb=function(){return g1(this.rgba)},n.prototype.toRgbString=function(){return e=g1(this.rgba),t=e.r,i=e.g,r=e.b,(a=e.a)<1?"rgba("+t+", "+i+", "+r+", "+a+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,a},n.prototype.toHsl=function(){return fw(Fg(this.rgba))},n.prototype.toHslString=function(){return e=fw(Fg(this.rgba)),t=e.h,i=e.s,r=e.l,(a=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+a+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,a},n.prototype.toHsv=function(){return e=W3(this.rgba),{h:Hr(e.h),s:Hr(e.s),v:Hr(e.v),a:Hr(e.a,3)};var e},n.prototype.invert=function(){return Fa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Fa(v1(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fa(v1(this.rgba,-e))},n.prototype.grayscale=function(){return Fa(v1(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Fa(pw(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Fa(pw(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Fa({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Hr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Fg(this.rgba);return typeof e=="number"?Fa({h:e,s:t.s,l:t.l,a:t.a}):Hr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Fa(e).toHex()},n}(),Fa=function(n){return n instanceof wA?n:new wA(n)},mw=[],XX=function(n){n.forEach(function(e){mw.indexOf(e)<0&&(e(wA,RA),mw.push(e))})};function YX(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var a={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,f,p=i[this.toHex()];if(p)return p;if(o!=null&&o.closest){var m=this.toRgb(),v=1/0,y="black";if(!a.length)for(var x in t)a[x]=new n(t[x]).toRgb();for(var b in t){var T=(c=m,f=a[b],Math.pow(c.r-f.r,2)+Math.pow(c.g-f.g,2)+Math.pow(c.b-f.b,2));T<v&&(v=T,y=b)}return y}},e.string.push([function(o){var c=o.toLowerCase(),f=c==="transparent"?"#0000":t[c];return f?new n(f).toRgb():null},"name"])}function zp(){return(zp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function tM(n,e){if(n==null)return{};var t,i,r={},a=Object.keys(n);for(i=0;i<a.length;i++)e.indexOf(t=a[i])>=0||(r[t]=n[t]);return r}function BA(n){var e=F.useRef(n),t=F.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Rp=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},Hg=function(n){return"touches"in n},DA=function(n){return n&&n.ownerDocument.defaultView||self},gw=function(n,e,t){var i=n.getBoundingClientRect(),r=Hg(e)?function(a,o){for(var c=0;c<a.length;c++)if(a[c].identifier===o)return a[c];return a[0]}(e.touches,t):e;return{left:Rp((r.pageX-(i.left+DA(n).pageXOffset))/i.width),top:Rp((r.pageY-(i.top+DA(n).pageYOffset))/i.height)}},vw=function(n){!Hg(n)&&n.preventDefault()},nM=fe.memo(function(n){var e=n.onMove,t=n.onKey,i=tM(n,["onMove","onKey"]),r=F.useRef(null),a=BA(e),o=BA(t),c=F.useRef(null),f=F.useRef(!1),p=F.useMemo(function(){var x=function(M){vw(M),(Hg(M)?M.touches.length>0:M.buttons>0)&&r.current?a(gw(r.current,M,c.current)):T(!1)},b=function(){return T(!1)};function T(M){var A=f.current,w=DA(r.current),B=M?w.addEventListener:w.removeEventListener;B(A?"touchmove":"mousemove",x),B(A?"touchend":"mouseup",b)}return[function(M){var A=M.nativeEvent,w=r.current;if(w&&(vw(A),!function(D,I){return I&&!Hg(D)}(A,f.current)&&w)){if(Hg(A)){f.current=!0;var B=A.changedTouches||[];B.length&&(c.current=B[0].identifier)}w.focus(),a(gw(w,A,c.current)),T(!0)}},function(M){var A=M.which||M.keyCode;A<37||A>40||(M.preventDefault(),o({left:A===39?.05:A===37?-.05:0,top:A===40?.05:A===38?-.05:0}))},T]},[o,a]),m=p[0],v=p[1],y=p[2];return F.useEffect(function(){return y},[y]),fe.createElement("div",zp({},i,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:r,onKeyDown:v,tabIndex:0,role:"slider"}))}),Rv=function(n){return n.filter(Boolean).join(" ")},iM=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,a=Rv(["react-colorful__pointer",n.className]);return fe.createElement("div",{className:a,style:{top:100*r+"%",left:100*t+"%"}},fe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Va=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},J3=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:Va(n.h),s:Va(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:Va(r/2),a:Va(i,2)}},OA=function(n){var e=J3(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},_1=function(n){var e=J3(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},Z3=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),o=i*(1-t),c=i*(1-(e-a)*t),f=i*(1-(1-e+a)*t),p=a%6;return{r:Va(255*[i,c,o,o,f,i][p]),g:Va(255*[f,i,i,c,o,o][p]),b:Va(255*[o,o,f,i,i,c][p]),a:Va(r,2)}},$3=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),o=a-Math.min(e,t,i),c=o?a===e?(t-i)/o:a===t?2+(i-e)/o:4+(e-t)/o:0;return{h:Va(60*(c<0?c+6:c)),s:Va(a?o/a*100:0),v:Va(a/255*100),a:r}},Q3=fe.memo(function(n){var e=n.hue,t=n.onChange,i=Rv(["react-colorful__hue",n.className]);return fe.createElement("div",{className:i},fe.createElement(nM,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Rp(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":Va(e),"aria-valuemax":"360","aria-valuemin":"0"},fe.createElement(iM,{className:"react-colorful__hue-pointer",left:e/360,color:OA({h:e,s:100,v:100,a:1})})))}),eO=fe.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:OA({h:e.h,s:100,v:100,a:1})};return fe.createElement("div",{className:"react-colorful__saturation",style:i},fe.createElement(nM,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Rp(e.s+100*r.left,0,100),v:Rp(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Va(e.s)+"%, Brightness "+Va(e.v)+"%"},fe.createElement(iM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:OA(e)})))}),rM=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function tO(n,e,t){var i=BA(t),r=F.useState(function(){return n.toHsva(e)}),a=r[0],o=r[1],c=F.useRef({color:e,hsva:a});F.useEffect(function(){if(!n.equal(e,c.current.color)){var p=n.toHsva(e);c.current={hsva:p,color:e},o(p)}},[e,n]),F.useEffect(function(){var p;rM(a,c.current.hsva)||n.equal(p=n.fromHsva(a),c.current.color)||(c.current={hsva:a,color:p},i(p))},[a,n,i]);var f=F.useCallback(function(p){o(function(m){return Object.assign({},m,p)})},[]);return[a,f]}var jX=typeof window<"u"?F.useLayoutEffect:F.useEffect,WX=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},yw=new Map,nO=function(n){jX(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!yw.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,yw.set(e,t);var i=WX();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},qX=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,o=tM(n,["className","colorModel","color","onChange"]),c=F.useRef(null);nO(c);var f=tO(t,r,a),p=f[0],m=f[1],v=Rv(["react-colorful",e]);return fe.createElement("div",zp({},o,{ref:c,className:v}),fe.createElement(eO,{hsva:p,onChange:m}),fe.createElement(Q3,{hue:p.h,onChange:m,className:"react-colorful__last-control"}))},KX=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+_1(Object.assign({},t,{a:0}))+", "+_1(Object.assign({},t,{a:1}))+")"},a=Rv(["react-colorful__alpha",e]),o=Va(100*t.a);return fe.createElement("div",{className:a},fe.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),fe.createElement(nM,{onMove:function(c){i({a:c.left})},onKey:function(c){i({a:Rp(t.a+c.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},fe.createElement(iM,{className:"react-colorful__alpha-pointer",left:t.a,color:_1(t)})))},JX=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,o=tM(n,["className","colorModel","color","onChange"]),c=F.useRef(null);nO(c);var f=tO(t,r,a),p=f[0],m=f[1],v=Rv(["react-colorful",e]);return fe.createElement("div",zp({},o,{ref:c,className:v}),fe.createElement(eO,{hsva:p,onChange:m}),fe.createElement(Q3,{hue:p.h,onChange:m}),fe.createElement(KX,{hsva:p,onChange:m,className:"react-colorful__last-control"}))},ZX={defaultColor:{r:0,g:0,b:0,a:1},toHsva:$3,fromHsva:Z3,equal:rM},$X=function(n){return fe.createElement(JX,zp({},n,{colorModel:ZX}))},QX={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return $3({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=Z3(n)).r,g:e.g,b:e.b};var e},equal:rM},eY=function(n){return fe.createElement(qX,zp({},n,{colorModel:QX}))},x1={exports:{}},b1,_w;function tY(){if(_w)return b1;_w=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return b1=n,b1}var S1,xw;function nY(){if(xw)return S1;xw=1;var n=tY();function e(){}function t(){}return t.resetWarningCache=e,S1=function(){function i(o,c,f,p,m,v){if(v!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},S1}var bw;function iY(){return bw||(bw=1,x1.exports=nY()()),x1.exports}var rY=iY();const Ai=Bh(rY);function Fp(n,e,t,i){function r(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(m){try{p(i.next(m))}catch(v){o(v)}}function f(m){try{p(i.throw(m))}catch(v){o(v)}}function p(m){m.done?a(m.value):r(m.value).then(c,f)}p((i=i.apply(n,e||[])).next())})}function Hp(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=c(0),o.throw=c(1),o.return=c(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(p){return function(m){return f([p,m])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,p[0]&&(t=0)),t;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,r=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(m){p=[6,m],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function aY(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,a=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}function sY(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(aY(arguments[e]));return n}var oY=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function wv(n,e){var t=lY(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function lY(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=oY.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var cY=[".DS_Store","Thumbs.db"];function uY(n){return Fp(this,void 0,void 0,function(){return Hp(this,function(e){return gx(n)&&fY(n)?[2,mY(n.dataTransfer,n.type)]:hY(n)?[2,dY(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,pY(n)]:[2,[]]})})}function fY(n){return gx(n.dataTransfer)}function hY(n){return gx(n)&&gx(n.target)}function gx(n){return typeof n=="object"&&n!==null}function dY(n){return UA(n.target.files).map(function(e){return wv(e)})}function pY(n){return Fp(this,void 0,void 0,function(){var e;return Hp(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return wv(i)})]}})})}function mY(n,e){return Fp(this,void 0,void 0,function(){var t,i;return Hp(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=UA(n.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(gY))]):[3,2];case 1:return i=r.sent(),[2,Sw(iO(i))];case 2:return[2,Sw(UA(n.files).map(function(a){return wv(a)}))]}})})}function Sw(n){return n.filter(function(e){return cY.indexOf(e.name)===-1})}function UA(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function gY(n){if(typeof n.webkitGetAsEntry!="function")return Aw(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?rO(e):Aw(n)}function iO(n){return n.reduce(function(e,t){return sY(e,Array.isArray(t)?iO(t):[t])},[])}function Aw(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=wv(e);return Promise.resolve(t)}function vY(n){return Fp(this,void 0,void 0,function(){return Hp(this,function(e){return[2,n.isDirectory?rO(n):yY(n)]})})}function rO(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function a(){var o=this;e.readEntries(function(c){return Fp(o,void 0,void 0,function(){var f,p,m;return Hp(this,function(v){switch(v.label){case 0:if(c.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return f=v.sent(),t(f),[3,4];case 3:return p=v.sent(),i(p),[3,4];case 4:return[3,6];case 5:m=Promise.all(c.map(vY)),r.push(m),a(),v.label=6;case 6:return[2]}})})},function(c){i(c)})}a()})}function yY(n){return Fp(this,void 0,void 0,function(){return Hp(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var a=wv(r,n.fullPath);t(a)},function(r){i(r)})})]})})}var a_={},Ew;function _Y(){return Ew||(Ew=1,a_.__esModule=!0,a_.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return t.some(function(o){var c=o.trim().toLowerCase();return c.charAt(0)==="."?i.toLowerCase().endsWith(c):c.endsWith("/*")?a===c.replace(/\/.*$/,""):r===c})}return!0}),a_}var xY=_Y();const bY=Bh(xY);function Mw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Tw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mw(Object(t),!0).forEach(function(i){aO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function aO(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cw(n,e){return MY(n)||EY(n,e)||AY(n,e)||SY()}function SY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AY(n,e){if(n){if(typeof n=="string")return Rw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Rw(n,e)}}function Rw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function EY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,o,c;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(f){a=!0,c=f}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw c}}return i}}function MY(n){if(Array.isArray(n))return n}var TY="file-invalid-type",CY="file-too-large",RY="file-too-small",wY="too-many-files",BY=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:TY,message:"File type must be ".concat(t)}},ww=function(e){return{code:CY,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Bw=function(e){return{code:RY,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},DY={code:wY,message:"Too many files"};function sO(n,e){var t=n.type==="application/x-moz-file"||bY(n,e);return[t,t?null:BY(e)]}function oO(n,e,t){if(_g(n.size))if(_g(e)&&_g(t)){if(n.size>t)return[!1,ww(t)];if(n.size<e)return[!1,Bw(e)]}else{if(_g(e)&&n.size<e)return[!1,Bw(e)];if(_g(t)&&n.size>t)return[!1,ww(t)]}return[!0,null]}function _g(n){return n!=null}function OY(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,a=n.multiple,o=n.maxFiles;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(c){var f=sO(c,t),p=Cw(f,1),m=p[0],v=oO(c,i,r),y=Cw(v,1),x=y[0];return m&&x})}function vx(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function s_(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function Dw(n){n.preventDefault()}function UY(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function NY(n){return n.indexOf("Edge/")!==-1}function LY(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return UY(n)||NY(n)}function Rl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return e.some(function(c){return!vx(i)&&c&&c.apply(void 0,[i].concat(a)),vx(i)})}}function IY(){return"showOpenFilePicker"in window}function PY(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return Tw(Tw({},e),{},aO({},t,[]))},{}):{}}]}function zY(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function FY(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var HY=["children"],GY=["open"],VY=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],kY=["refKey","onChange","onClick"];function XY(n){return WY(n)||jY(n)||lO(n)||YY()}function YY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jY(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function WY(n){if(Array.isArray(n))return NA(n)}function A1(n,e){return JY(n)||KY(n,e)||lO(n,e)||qY()}function qY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lO(n,e){if(n){if(typeof n=="string")return NA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NA(n,e)}}function NA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function KY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,o,c;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(f){a=!0,c=f}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw c}}return i}}function JY(n){if(Array.isArray(n))return n}function Ow(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ji(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ow(Object(t),!0).forEach(function(i){LA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ow(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function LA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yx(n,e){if(n==null)return{};var t=ZY(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function ZY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var aM=F.forwardRef(function(n,e){var t=n.children,i=yx(n,HY),r=uO(i),a=r.open,o=yx(r,GY);return F.useImperativeHandle(e,function(){return{open:a}},[a]),fe.createElement(F.Fragment,null,t(ji(ji({},o),{},{open:a})))});aM.displayName="Dropzone";var cO={disabled:!1,getFilesFromEvent:uY,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};aM.defaultProps=cO;aM.propTypes={children:Ai.func,accept:Ai.oneOfType([Ai.string,Ai.arrayOf(Ai.string)]),multiple:Ai.bool,preventDropOnDocument:Ai.bool,noClick:Ai.bool,noKeyboard:Ai.bool,noDrag:Ai.bool,noDragEventsBubbling:Ai.bool,minSize:Ai.number,maxSize:Ai.number,maxFiles:Ai.number,disabled:Ai.bool,getFilesFromEvent:Ai.func,onFileDialogCancel:Ai.func,onFileDialogOpen:Ai.func,useFsAccessApi:Ai.bool,onDragEnter:Ai.func,onDragLeave:Ai.func,onDragOver:Ai.func,onDrop:Ai.func,onDropAccepted:Ai.func,onDropRejected:Ai.func,validator:Ai.func};var IA={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function uO(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ji(ji({},cO),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,c=e.multiple,f=e.maxFiles,p=e.onDragEnter,m=e.onDragLeave,v=e.onDragOver,y=e.onDrop,x=e.onDropAccepted,b=e.onDropRejected,T=e.onFileDialogCancel,M=e.onFileDialogOpen,A=e.useFsAccessApi,w=e.preventDropOnDocument,B=e.noClick,D=e.noKeyboard,I=e.noDrag,N=e.noDragEventsBubbling,H=e.validator,P=F.useMemo(function(){return typeof M=="function"?M:Uw},[M]),L=F.useMemo(function(){return typeof T=="function"?T:Uw},[T]),U=F.useRef(null),Y=F.useRef(null),ie=F.useReducer($Y,IA),Q=A1(ie,2),ae=Q[0],he=Q[1],X=ae.isFocused,te=ae.isFileDialogActive,ne=ae.draggedFiles,be=F.useRef(typeof window<"u"&&window.isSecureContext&&A&&IY()),W=function(){!be.current&&te&&setTimeout(function(){if(Y.current){var xe=Y.current.files;xe.length||(he({type:"closeDialog"}),L())}},300)};F.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[Y,te,L,be]);var se=F.useRef([]),Ae=function(xe){U.current&&U.current.contains(xe.target)||(xe.preventDefault(),se.current=[])};F.useEffect(function(){return w&&(document.addEventListener("dragover",Dw,!1),document.addEventListener("drop",Ae,!1)),function(){w&&(document.removeEventListener("dragover",Dw),document.removeEventListener("drop",Ae))}},[U,w]);var De=F.useCallback(function(re){re.preventDefault(),re.persist(),et(re),se.current=[].concat(XY(se.current),[re.target]),s_(re)&&Promise.resolve(r(re)).then(function(xe){vx(re)&&!N||(he({draggedFiles:xe,isDragActive:!0,type:"setDraggedFiles"}),p&&p(re))})},[r,p,N]),ge=F.useCallback(function(re){re.preventDefault(),re.persist(),et(re);var xe=s_(re);if(xe&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return xe&&v&&v(re),!1},[v,N]),He=F.useCallback(function(re){re.preventDefault(),re.persist(),et(re);var xe=se.current.filter(function(Be){return U.current&&U.current.contains(Be)}),Xe=xe.indexOf(re.target);Xe!==-1&&xe.splice(Xe,1),se.current=xe,!(xe.length>0)&&(he({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),s_(re)&&m&&m(re))},[U,m,N]),Le=F.useCallback(function(re,xe){var Xe=[],Be=[];re.forEach(function(ut){var ot=sO(ut,t),pt=A1(ot,2),Pt=pt[0],at=pt[1],_t=oO(ut,o,a),Et=A1(_t,2),vt=Et[0],dt=Et[1],de=H?H(ut):null;if(Pt&&vt&&!de)Xe.push(ut);else{var Pe=[at,dt];de&&(Pe=Pe.concat(de)),Be.push({file:ut,errors:Pe.filter(function(st){return st})})}}),(!c&&Xe.length>1||c&&f>=1&&Xe.length>f)&&(Xe.forEach(function(ut){Be.push({file:ut,errors:[DY]})}),Xe.splice(0)),he({acceptedFiles:Xe,fileRejections:Be,type:"setFiles"}),y&&y(Xe,Be,xe),Be.length>0&&b&&b(Be,xe),Xe.length>0&&x&&x(Xe,xe)},[he,c,t,o,a,f,y,x,b,H]),Qe=F.useCallback(function(re){re.preventDefault(),re.persist(),et(re),se.current=[],s_(re)&&Promise.resolve(r(re)).then(function(xe){vx(re)&&!N||Le(xe,re)}),he({type:"reset"})},[r,Le,N]),rt=F.useCallback(function(){if(be.current){he({type:"openDialog"}),P();var re={multiple:c,types:PY(t)};window.showOpenFilePicker(re).then(function(xe){return r(xe)}).then(function(xe){Le(xe,null),he({type:"closeDialog"})}).catch(function(xe){zY(xe)?(L(xe),he({type:"closeDialog"})):FY(xe)&&(be.current=!1,Y.current&&(Y.current.value=null,Y.current.click()))});return}Y.current&&(he({type:"openDialog"}),P(),Y.current.value=null,Y.current.click())},[he,P,L,A,Le,t,c]),Bt=F.useCallback(function(re){!U.current||!U.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),rt())},[U,rt]),wt=F.useCallback(function(){he({type:"focus"})},[]),fn=F.useCallback(function(){he({type:"blur"})},[]),Vt=F.useCallback(function(){B||(LY()?setTimeout(rt,0):rt())},[B,rt]),Rt=function(xe){return i?null:xe},Z=function(xe){return D?null:Rt(xe)},lt=function(xe){return I?null:Rt(xe)},et=function(xe){N&&xe.stopPropagation()},Ze=F.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xe=re.refKey,Xe=xe===void 0?"ref":xe,Be=re.role,ut=re.onKeyDown,ot=re.onFocus,pt=re.onBlur,Pt=re.onClick,at=re.onDragEnter,_t=re.onDragOver,Et=re.onDragLeave,vt=re.onDrop,dt=yx(re,VY);return ji(ji(LA({onKeyDown:Z(Rl(ut,Bt)),onFocus:Z(Rl(ot,wt)),onBlur:Z(Rl(pt,fn)),onClick:Rt(Rl(Pt,Vt)),onDragEnter:lt(Rl(at,De)),onDragOver:lt(Rl(_t,ge)),onDragLeave:lt(Rl(Et,He)),onDrop:lt(Rl(vt,Qe)),role:typeof Be=="string"&&Be!==""?Be:"button"},Xe,U),!i&&!D?{tabIndex:0}:{}),dt)}},[U,Bt,wt,fn,Vt,De,ge,He,Qe,D,I,i]),je=F.useCallback(function(re){re.stopPropagation()},[]),yt=F.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xe=re.refKey,Xe=xe===void 0?"ref":xe,Be=re.onChange,ut=re.onClick,ot=yx(re,kY),pt=LA({accept:t,multiple:c,type:"file",style:{display:"none"},onChange:Rt(Rl(Be,Qe)),onClick:Rt(Rl(ut,je)),tabIndex:-1},Xe,Y);return ji(ji({},pt),ot)}},[Y,t,c,Qe,i]),Je=ne.length,J=Je>0&&OY({files:ne,accept:t,minSize:o,maxSize:a,multiple:c,maxFiles:f}),k=Je>0&&!J;return ji(ji({},ae),{},{isDragAccept:J,isDragReject:k,isFocused:X&&!i,getRootProps:Ze,getInputProps:yt,rootRef:U,inputRef:Y,open:Rt(rt)})}function $Y(n,e){switch(e.type){case"focus":return ji(ji({},n),{},{isFocused:!0});case"blur":return ji(ji({},n),{},{isFocused:!1});case"openDialog":return ji(ji({},IA),{},{isFileDialogActive:!0});case"closeDialog":return ji(ji({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return ji(ji({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return ji(ji({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return ji({},IA);default:return n}}function Uw(){}function QY(n){let e;const t=new Set,i=(p,m)=>{const v=typeof p=="function"?p(e):p;if(v!==e){const y=e;e=m?v:Object.assign({},e,v),t.forEach(x=>x(e,y))}},r=()=>e,a=(p,m=r,v=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let y=m(e);function x(){const b=m(e);if(!v(y,b)){const T=y;p(y=b,T)}}return t.add(x),()=>t.delete(x)},f={setState:i,getState:r,subscribe:(p,m,v)=>m||v?a(p,m,v):(t.add(p),()=>t.delete(p)),destroy:()=>t.clear()};return e=n(i,r,f),f}const ej=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Nw=ej?F.useEffect:F.useLayoutEffect;function tj(n){const e=typeof n=="function"?QY(n):n,t=(i=e.getState,r=Object.is)=>{const[,a]=F.useReducer(M=>M+1,0),o=e.getState(),c=F.useRef(o),f=F.useRef(i),p=F.useRef(r),m=F.useRef(!1),v=F.useRef();v.current===void 0&&(v.current=i(o));let y,x=!1;(c.current!==o||f.current!==i||p.current!==r||m.current)&&(y=i(o),x=!r(v.current,y)),Nw(()=>{x&&(v.current=y),c.current=o,f.current=i,p.current=r,m.current=!1});const b=F.useRef(o);Nw(()=>{const M=()=>{try{const w=e.getState(),B=f.current(w);p.current(v.current,B)||(c.current=w,v.current=B,a())}catch{m.current=!0,a()}},A=e.subscribe(M);return e.getState()!==b.current&&M(),A},[]);const T=x?y:v.current;return F.useDebugValue(T),T};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const nj=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(o,c,f)=>{let p=o;if(c){const m=(f==null?void 0:f.equalityFn)||Object.is;let v=o(i.getState());p=y=>{const x=o(y);if(!m(v,x)){const b=v;c(v=x,b)}},f!=null&&f.fireImmediately&&c(v,v)}return r(p)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var E1,Lw;function ij(){return Lw||(Lw=1,E1=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),E1}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var M1,Iw;function fO(){if(Iw)return M1;Iw=1;var n=ij();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return M1=function(i){var r,a;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(a=r.prototype,e(a)===!1)||a.hasOwnProperty("isPrototypeOf")===!1)},M1}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var T1,Pw;function sM(){if(Pw)return T1;Pw=1;var n=fO();return T1=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},T1}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var C1,zw;function rj(){return zw||(zw=1,C1=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),C1}var R1,Fw;function aj(){if(Fw)return R1;Fw=1;var n=sM(),e=rj();function t(o,c){for(var f=arguments.length,p=0;++p<f;){var m=arguments[p];r(m)&&e(m,i,o)}return o}function i(o,c){if(a(c)){var f=this[c];r(o)&&r(f)?t(f,o):this[c]=o}}function r(o){return n(o)&&!Array.isArray(o)}function a(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"}return R1=t,R1}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var w1,Hw;function sj(){if(Hw)return w1;Hw=1,w1=function(t,i,r,a,o){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),a&&(i+="."+e(a)),o&&(i+="."+e(o)),i in t)return t[i];for(var c=i.split("."),f=c.length,p=-1;t&&++p<f;){for(var m=c[p];m[m.length-1]==="\\";)m=m.slice(0,-1)+"."+c[++p];t=t[m]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return w1}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var B1,Gw;function oj(){return Gw||(Gw=1,B1=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,a=0;++a<r;)for(var o=Object(arguments[a]),c=Object.getOwnPropertySymbols(o),f=0;f<c.length;f++){var p=c[f];t.call(o,p)&&(i[p]=o[p])}return i}),B1}var D1,Vw;function lj(){if(Vw)return D1;Vw=1;var n=sM(),e=oj();D1=Object.assign||function(c){if(c===null||typeof c>"u")throw new TypeError("Cannot convert undefined or null to object");a(c)||(c={});for(var f=1;f<arguments.length;f++){var p=arguments[f];i(p)&&(p=r(p)),a(p)&&(t(c,p),e(c,p))}return c};function t(c,f){for(var p in f)o(f,p)&&(c[p]=f[p])}function i(c){return c&&typeof c=="string"}function r(c){var f={};for(var p in c)f[p]=c[p];return f}function a(c){return c&&typeof c=="object"||n(c)}function o(c,f){return Object.prototype.hasOwnProperty.call(c,f)}return D1}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var O1,kw;function cj(){if(kw)return O1;kw=1;var n=lj();O1=function(r,a,o){if(typeof r!="string")throw new TypeError("expected a string");typeof a=="function"&&(o=a,a=null),typeof a=="string"&&(a={sep:a});var c=n({sep:"."},a),f=c.quotes||['"',"'","`"],p;c.brackets===!0?p={"<":">","(":")","[":"]","{":"}"}:c.brackets&&(p=c.brackets);var m=[],v=[],y=[""],x=c.sep,b=r.length,T=-1,M;function A(){if(p&&v.length)return p[v[v.length-1]]}for(;++T<b;){var w=r[T],B=r[T+1],D={val:w,idx:T,arr:y,str:r};if(m.push(D),w==="\\"){D.val=i(c,r,T)===!0?w+B:B,D.escaped=!0,typeof o=="function"&&o(D),y[y.length-1]+=D.val,T++;continue}if(p&&p[w]){v.push(w);var I=A(),N=T+1;if(r.indexOf(I,N+1)!==-1)for(;v.length&&N<b;){var H=r[++N];if(H==="\\"){H++;continue}if(f.indexOf(H)!==-1){N=e(r,H,N+1);continue}if(I=A(),v.length&&r.indexOf(I,N+1)===-1)break;if(p[H]){v.push(H);continue}I===H&&v.pop()}if(M=N,M===-1){y[y.length-1]+=w;continue}w=r.slice(T,M+1),D.val=w,D.idx=T=M}if(f.indexOf(w)!==-1){if(M=e(r,w,T+1),M===-1){y[y.length-1]+=w;continue}t(w,c)===!0?w=r.slice(T,M+1):w=r.slice(T+1,M),D.val=w,D.idx=T=M}if(typeof o=="function"&&(o(D,m),w=D.val,T=D.idx),D.val===x&&D.split!==!1){y.push("");continue}y[y.length-1]+=D.val}return y};function e(r,a,o,c){var f=r.indexOf(a,o);return r.charAt(f-1)==="\\"?e(r,a,f+1):f}function t(r,a){return a.keepDoubleQuotes===!0&&r==='"'||a.keepSingleQuotes===!0&&r==="'"?!0:a.keepQuotes}function i(r,a,o){return typeof r.keepEscaping=="function"?r.keepEscaping(a,o):r.keepEscaping===!0||a[o+1]==="\\"}return O1}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var U1,Xw;function uj(){return Xw||(Xw=1,U1=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),U1}var N1,Yw;function fj(){if(Yw)return N1;Yw=1;var n=uj();N1=function(r){n(r)||(r={});for(var a=arguments.length,o=1;o<a;o++){var c=arguments[o];n(c)&&e(r,c)}return r};function e(i,r){for(var a in r)t(r,a)&&(i[a]=r[a])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return N1}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var L1,jw;function hj(){return jw||(jw=1,L1=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),L1}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var I1,Ww;function dj(){if(Ww)return I1;Ww=1;var n=cj(),e=fj(),t=fO(),i=hj();I1=function(a,o,c){if(!i(a)||(Array.isArray(o)&&(o=[].concat.apply([],o).join(".")),typeof o!="string"))return a;for(var f=n(o,{sep:".",brackets:!0}).filter(r),p=f.length,m=-1,v=a;++m<p;){var y=f[m];if(m!==p-1){i(v[y])||(v[y]={}),v=v[y];continue}t(v[y])&&t(c)?v[y]=e({},v[y],c):v[y]=c}return a};function r(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return I1}var P1,qw;function pj(){if(qw)return P1;qw=1;var n=sM(),e=aj(),t=sj(),i=dj();return P1=function(a,o,c){if(!n(a))throw new TypeError("expected an object");if(typeof o!="string"||c==null)return e.apply(null,arguments);if(typeof c=="string")return i(a,o,c),a;var f=t(a,o);return n(c)&&n(f)&&(c=e({},f,c)),i(a,o,c),a},P1}var mj=pj();const gj=Bh(mj),oM=(...n)=>n.filter(Boolean).join(".");function vj(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function yj(n,e){return Object.entries(l7(n,e)).reduce((t,[,{value:i,disabled:r,key:a}])=>(t[a]=r?void 0:i,t),{})}function _j(n,e){const t=F.useRef();return Qg(n,t.current)||(t.current=n),t.current}function hO(n,e){return F.useMemo(n,_j(e))}function xj(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!0);return F.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),F.useEffect(()=>{if(i.current){i.current=!1;return}let r;const a=e.current,o=()=>{n&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});const{height:c}=t.current.getBoundingClientRect();return a.style.height=c+"px",n||(a.style.overflow="hidden",r=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",o),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const bj=n=>{const[e,t]=F.useState(n.getVisiblePaths());return F.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:sb});return()=>i()},[n]),e};function Sj(n,e,t){return n.useStore(r=>{const a=rn(rn({},t),r.data);return yj(a,e)},sb)}function dO(n=3){const e=F.useRef(null),t=F.useRef(null),[i,r]=F.useState(!1),a=F.useCallback(()=>r(!0),[]),o=F.useCallback(()=>r(!1),[]);return F.useLayoutEffect(()=>{if(i){const{bottom:c,top:f,left:p}=e.current.getBoundingClientRect(),{height:m}=t.current.getBoundingClientRect(),v=c+m>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=p+"px",v==="down"?t.current.style.top=c+n+"px":t.current.style.bottom=window.innerHeight-f+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:a,hide:o}}XX([YX]);const Aj={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};os.extend({color:()=>n=>Fa(n).isValid()});const Ej=n=>os().color().test(n);function pO(n,{format:e,hasAlpha:t,isString:i}){const r=Aj[e]+(i&&e!=="hex"?"String":""),a=n[r]();return typeof a=="object"&&!t?c7(a,["a"]):a}const mO=(n,e)=>{const t=Fa(n);if(!t.isValid())throw Error("Invalid color");return pO(t,e)},Mj=(n,e)=>pO(Fa(n),rn(rn({},e),{},{isString:!0,format:"hex"})),Tj=({value:n})=>{const e=kX(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:mO(n,r),settings:r}};var Cj=Object.freeze({__proto__:null,schema:Ej,sanitize:mO,format:Mj,normalize:Tj});const Rj=Zt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),wj=Zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Bj=Zt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function Kw(n,e){return e!=="rgb"?Fa(n).toRgb():n}function Dj({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:a}=xa(),{format:o,hasAlpha:c}=t,{popinRef:f,wrapperRef:p,shown:m,show:v,hide:y}=dO(),x=F.useRef(0),[b,T]=F.useState(()=>Kw(n,o)),M=c?$X:eY,A=()=>{T(Kw(n,o)),v(),r()},w=()=>{y(),a(),window.clearTimeout(x.current)},B=()=>{x.current=window.setTimeout(w,500)};return F.useEffect(()=>()=>window.clearTimeout(x.current),[]),fe.createElement(fe.Fragment,null,fe.createElement(Rj,{ref:f,active:m,onClick:()=>A(),style:{color:e}}),m&&fe.createElement($E,null,fe.createElement(P3,{onPointerUp:w}),fe.createElement(Bj,{ref:p,onMouseEnter:()=>window.clearTimeout(x.current),onMouseLeave:D=>D.buttons===0&&B()},fe.createElement(M,{color:b,onChange:i}))))}function Oj(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:a}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,t),fe.createElement(wj,null,fe.createElement(Dj,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:a}),fe.createElement(ZE,{value:e,onChange:i,onUpdate:r})))}var Uj=rn({component:Oj},Cj);function Nj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(eM,{value:e,settings:i,onUpdate:t}))}var Lj=rn({component:Nj},Y3(["x","y","z"]));const Ij=Zt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Pj=Zt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function zj({value:n,settings:e,onUpdate:t}){const i=F.useRef(),r=F.useRef(0),a=F.useRef(0),o=F.useRef(1),[c,f]=F.useState(!1),[p,m]=F.useState(!1),[v,y]=F3(),x=F.useRef(null),b=F.useRef(null);F.useLayoutEffect(()=>{if(c){const{top:ie,left:Q,width:ae,height:he}=x.current.getBoundingClientRect();b.current.style.left=Q+ae/2+"px",b.current.style.top=ie+he/2+"px"}},[c]);const{keys:[T,M],joystick:A}=e,w=A==="invertY"?1:-1,{[T]:{step:B},[M]:{step:D}}=e,I=Sc("sizes","joystickWidth"),N=Sc("sizes","joystickHeight"),H=parseFloat(I)*.8/2,P=parseFloat(N)*.8/2,L=F.useCallback(()=>{i.current||(m(!0),r.current&&y({x:r.current*H}),a.current&&y({y:a.current*-P}),i.current=window.setInterval(()=>{t(ie=>{const Q=B*r.current*o.current,ae=w*D*a.current*o.current;return Array.isArray(ie)?{[T]:ie[0]+Q,[M]:ie[1]+ae}:{[T]:ie[T]+Q,[M]:ie[M]+ae}})},16))},[H,P,t,y,B,D,T,M,w]),U=F.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,m(!1)},[]);F.useEffect(()=>{function ie(Q){o.current=A3(Q)}return window.addEventListener("keydown",ie),window.addEventListener("keyup",ie),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",ie),window.removeEventListener("keyup",ie)}},[]);const Y=Cv(({first:ie,active:Q,delta:[ae,he],movement:[X,te]})=>{ie&&f(!0);const ne=Gu(X,-H,H),be=Gu(te,-P,P);r.current=Math.abs(X)>Math.abs(ne)?Math.sign(X-ne):0,a.current=Math.abs(te)>Math.abs(be)?Math.sign(be-te):0;let W=n[T],se=n[M];Q?(r.current||(W+=ae*B*o.current,y({x:ne})),a.current||(se-=w*he*D*o.current,y({y:be})),r.current||a.current?L():U(),t({[T]:W,[M]:se})):(f(!1),r.current=0,a.current=0,y({x:0,y:0}),U())});return fe.createElement(Ij,ir({ref:x},Y()),c&&fe.createElement($E,null,fe.createElement(Pj,{ref:b,isOutOfBounds:p},fe.createElement("div",null),fe.createElement("span",{ref:v}))))}const Fj=Zt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Hj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xa();return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(Fj,{withJoystick:!!i.joystick},i.joystick&&fe.createElement(zj,{value:e,settings:i,onUpdate:t}),fe.createElement(eM,{value:e,settings:i,onUpdate:t})))}const Gj=["joystick"],gO=Y3(["x","y"]),Vj=n=>{let{joystick:e=!0}=n,t=yi(n,Gj);const{value:i,settings:r}=gO.normalize(t);return{value:i,settings:rn(rn({},r),{},{joystick:e})}};var kj=rn(rn({component:Hj},gO),{},{normalize:Vj});const Xj=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},Yj=(n,e)=>typeof e=="object"&&"image"in e,jj=({image:n})=>({value:n});var Wj=Object.freeze({__proto__:null,sanitize:Xj,schema:Yj,normalize:jj});const qj=Zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Kj=Zt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Jj=Zt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Zj=Zt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),$j=Zt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Qj=Zt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function eW(){const{label:n,value:e,onUpdate:t,disabled:i}=xa(),{popinRef:r,wrapperRef:a,shown:o,show:c,hide:f}=dO(),p=F.useCallback(b=>{b.length&&t(b[0])},[t]),m=F.useCallback(b=>{b.stopPropagation(),t(void 0)},[t]),{getRootProps:v,getInputProps:y,isDragAccept:x}=uO({maxFiles:1,accept:"image/*",onDrop:p,disabled:i});return fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(qj,null,fe.createElement(Jj,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&c(),onPointerUp:f,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&fe.createElement($E,null,fe.createElement(P3,{onPointerUp:f,style:{cursor:"pointer"}}),fe.createElement(Zj,{ref:a,style:{backgroundImage:`url(${e})`}})),fe.createElement(Kj,v({isDragAccept:x}),fe.createElement("input",y()),fe.createElement($j,null,x?"drop image":"click or drop")),fe.createElement(Qj,{onClick:m,disabled:!e})))}var tW=rn({component:eW},Wj);const Jw=os().number(),nW=(n,e)=>os().array().length(2).every.number().test(n)&&os().schema({min:Jw,max:Jw}).test(e),_x=n=>({min:n[0],max:n[1]}),vO=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?_x(n):n,a={min:i[0],max:i[1]},{min:o,max:c}=rn(rn({},a),r);return[Gu(Number(o),e,Math.max(e,c)),Gu(Number(c),Math.min(t,o),t)]},iW=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=X3(_x(n),{min:i,max:i}),a=[e,t],o=rn(rn({},r),{},{bounds:a});return{value:vO(_x(n),o,n),settings:o}};var rW=Object.freeze({__proto__:null,schema:nW,format:_x,sanitize:vO,normalize:iW});const aW=["value","bounds","onDrag"],sW=["bounds"],oW=Zt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function lW(n){let{value:e,bounds:[t,i],onDrag:r}=n,a=yi(n,aW);const o=F.useRef(null),c=F.useRef(null),f=F.useRef(null),p=F.useRef(0),m=Sc("sizes","scrubberWidth"),v=Cv(({event:b,first:T,xy:[M],movement:[A],memo:w={}})=>{if(T){const{width:D,left:I}=o.current.getBoundingClientRect();p.current=D-parseFloat(m);const N=(b==null?void 0:b.target)===c.current||(b==null?void 0:b.target)===f.current;w.pos=px((M-I)/D,t,i);const H=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=H<0||H===0&&w.pos<=e.min?"min":"max",N&&(w.pos=e[w.key])}const B=w.pos+px(A/p.current,0,i-t);return r({[w.key]:J7(B,a[w.key])}),w}),y=`calc(${dx(e.min,t,i)} * (100% - ${m} - 8px) + 4px)`,x=`calc(${1-dx(e.max,t,i)} * (100% - ${m} - 8px) + 4px)`;return fe.createElement(G3,ir({ref:o},v()),fe.createElement(H3,null,fe.createElement(V3,{style:{left:y,right:x}})),fe.createElement(TA,{position:"left",ref:c,style:{left:y}}),fe.createElement(TA,{position:"right",ref:f,style:{right:x}}))}function cW(){const{label:n,displayValue:e,onUpdate:t,settings:i}=xa(),r=yi(i,sW);return fe.createElement(fe.Fragment,null,fe.createElement(io,{input:!0},fe.createElement(Yo,null,n),fe.createElement(oW,null,fe.createElement(lW,ir({value:e},i,{onDrag:t})),fe.createElement(eM,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var uW=rn({component:cW},rW);const fW=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},hW=["type","value"],dW=["onChange","transient","onEditStart","onEditEnd"],pW=function(){const e=tj(nj(()=>({data:{}}))),t=fW();this.storeId=o7(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const o=this.getData(),c=Object.keys(o),f=[];Object.entries(i).forEach(([m,v])=>{v.render&&c.some(y=>y.indexOf(m)===0)&&!v.render(this.get)&&f.push(m+".")});const p=[];return r.forEach(m=>{m in o&&o[m].__refCount>0&&f.every(v=>m.indexOf(v)===-1)&&(!o[m].render||o[m].render(this.get))&&p.push(m)}),p},this.setOrderedPaths=o=>{o.forEach(c=>r.add(c))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(c=>{const f=c.data;return o.forEach(p=>{if(p in f){const m=f[p];m.__refCount--,m.__refCount===0&&m.type in Fo&&delete f[p]}}),{data:f}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>i[o]||{},this.getData=()=>e.getState().data,this.addData=(o,c)=>{e.setState(f=>{const p=f.data;return Object.entries(o).forEach(([m,v])=>{let y=p[m];if(y){const{type:x,value:b}=v,T=yi(v,hW);x!==y.type?mc(Wi.INPUT_TYPE_OVERRIDE,x):((y.__refCount===0||c)&&Object.assign(y,T),y.__refCount++)}else p[m]=rn(rn({},v),{},{__refCount:1})}),{data:p}})},this.setValueAtPath=(o,c,f)=>{e.setState(p=>{const m=p.data;return lw(m[o],c,o,this,f),{data:m}})},this.setSettingsAtPath=(o,c)=>{e.setState(f=>{const p=f.data;return p[o].settings=rn(rn({},p[o].settings),c),{data:p}})},this.disableInputAtPath=(o,c)=>{e.setState(f=>{const p=f.data;return p[o].disabled=c,{data:p}})},this.set=(o,c)=>{e.setState(f=>{const p=f.data;return Object.entries(o).forEach(([m,v])=>{try{lw(p[m],v,void 0,void 0,c)}catch{}}),{data:p}})},this.getInput=o=>{try{return this.getData()[o]}catch{mc(Wi.PATH_DOESNT_EXIST,o)}},this.get=o=>{var c;return(c=this.getInput(o))===null||c===void 0?void 0:c.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,rn(rn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,rn(rn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,c)=>{const f=`onEditStart:${o}`;return t.on(f,c),()=>t.off(f,c)},this.subscribeToEditEnd=(o,c)=>{const f=`onEditEnd:${o}`;return t.on(f,c),()=>t.off(f,c)};const a=(o,c,f)=>{const p={};return Object.entries(o).forEach(([m,v])=>{if(m==="")return mc(Wi.EMPTY_KEY);let y=oM(c,m);if(v.type===Fo.FOLDER){const x=a(v.schema,y,f);Object.assign(p,x),y in i||(i[y]=v.settings)}else if(m in f)mc(Wi.DUPLICATE_KEYS,m,y,f[m].path);else{const x=m7(v,m,y,p);if(x){const{type:b,options:T,input:M}=x,{onChange:A,transient:w,onEditStart:B,onEditEnd:D}=T,I=yi(T,dW);p[y]=rn(rn(rn({type:b},I),M),{},{fromPanel:!0}),f[m]={path:y,onChange:A,transient:w,onEditStart:B,onEditEnd:D}}else mc(Wi.UNKNOWN_INPUT,y,v)}}),p};this.getDataFromSchema=o=>{const c={};return[a(o,"",c),c]}},yO=new pW,mW={collapsed:!1};function gW(n,e){return{type:Fo.FOLDER,schema:n,settings:rn(rn({},mW),e)}}const Zw=n=>"__levaInput"in n,vW=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[a,o]=vj(r);(!i||a.toLowerCase().indexOf(i)>-1)&&gj(t,o,{[a]:{__levaInput:!0,path:r}})}),t},yW=["type","label","path","valueKey","value","settings","setValue","disabled"];function _W(n){let{type:e,label:t,path:i,valueKey:r,value:a,settings:o,setValue:c,disabled:f}=n,p=yi(n,yW);const{displayValue:m,onChange:v,onUpdate:y}=z3({type:e,value:a,settings:o,setValue:c}),x=wh[e].component;return x?fe.createElement(R3.Provider,{value:rn({key:r,path:i,id:""+i,label:t,displayValue:m,value:a,onChange:v,onUpdate:y,settings:o,setValue:c,disabled:f},p)},fe.createElement(N7,{disabled:f},fe.createElement(x,null))):(mc(Wi.NO_COMPONENT_FOR_TYPE,e,i),null)}const xW=Zt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function bW({onClick:n,settings:e,label:t}){const i=Tv();return fe.createElement(io,null,fe.createElement(xW,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const SW=Zt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),AW=Zt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),EW=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function MW(n){const{label:e,opts:t}=EW(n),i=Tv();return fe.createElement(io,{input:!!e},e&&fe.createElement(Yo,null,e),fe.createElement(SW,null,Object.entries(t).map(([r,a])=>fe.createElement(AW,{key:r,onClick:()=>a(i.get)},r))))}const TW=Zt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),_O=100;function CW(n,e){n.push(e),n.length>_O&&n.shift()}const RW=F.forwardRef(function({initialValue:n},e){const t=Sc("colors","highlight3"),i=Sc("colors","elevation2"),r=Sc("colors","highlight1"),[a,o]=F.useMemo(()=>[Fa(r).alpha(.4).toRgbString(),Fa(r).alpha(.1).toRgbString()],[r]),c=F.useRef([n]),f=F.useRef(n),p=F.useRef(n),m=F.useRef(),v=F.useCallback((b,T)=>{if(!b)return;const{width:M,height:A}=b,w=new Path2D,B=M/_O,D=A*.05;for(let H=0;H<c.current.length;H++){const P=dx(c.current[H],f.current,p.current),L=B*H,U=A-P*(A-D*2)-D;w.lineTo(L,U)}T.clearRect(0,0,M,A);const I=new Path2D(w);I.lineTo(B*(c.current.length+1),A),I.lineTo(0,A),I.lineTo(0,0);const N=T.createLinearGradient(0,0,0,A);N.addColorStop(0,a),N.addColorStop(1,o),T.fillStyle=N,T.fill(I),T.strokeStyle=i,T.lineJoin="round",T.lineWidth=14,T.stroke(w),T.strokeStyle=t,T.lineWidth=2,T.stroke(w)},[t,i,a,o]),[y,x]=k7(v);return F.useImperativeHandle(e,()=>({frame:b=>{(f.current===void 0||b<f.current)&&(f.current=b),(p.current===void 0||b>p.current)&&(p.current=b),CW(c.current,b),m.current=requestAnimationFrame(()=>v(y.current,x.current))}}),[y,x,v]),F.useEffect(()=>()=>cancelAnimationFrame(m.current),[]),fe.createElement(TW,{ref:y})}),$w=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),wW=F.forwardRef(function({initialValue:n},e){const[t,i]=F.useState($w(n));return F.useImperativeHandle(e,()=>({frame:r=>i($w(r))}),[]),fe.createElement("div",null,t)});function Qw(n){return typeof n=="function"?n():n.current}function BW({label:n,objectOrFn:e,settings:t}){const i=F.useRef(),r=F.useRef(Qw(e));return F.useEffect(()=>{const a=window.setInterval(()=>{var o;document.hidden||(o=i.current)===null||o===void 0||o.frame(Qw(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),fe.createElement(io,{input:!0},fe.createElement(Yo,{align:"top"},n),t.graph?fe.createElement(RW,{ref:i,initialValue:r.current}):fe.createElement(wW,{ref:i,initialValue:r.current}))}const DW=["type","label","key"],OW={[Fo.BUTTON]:bW,[Fo.BUTTON_GROUP]:MW,[Fo.MONITOR]:BW},UW=fe.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:a,emitOnEditStart:o,emitOnEditEnd:c}]=Y7(n);if(!e)return null;const{type:f,label:p,key:m}=e,v=yi(e,DW);if(f in Fo){const y=OW[f];return fe.createElement(y,ir({label:p,path:n},v))}return f in wh?fe.createElement(_W,ir({key:a+n,type:f,label:p,storeId:a,path:n,valueKey:m,setValue:t,setSettings:i,disable:r,emitOnEditStart:o,emitOnEditEnd:c},v)):(Qk(Wi.UNSUPPORTED_INPUT,f,n),null)});function NW({toggle:n,toggled:e,name:t}){return fe.createElement(D7,{onClick:()=>n()},fe.createElement(QE,{toggled:e}),fe.createElement("div",null,t))}const LW=({name:n,path:e,tree:t})=>{const i=Tv(),r=oM(e,n),{collapsed:a,color:o}=i.getFolderSettings(r),[c,f]=F.useState(!a),p=F.useRef(null),m=Sc("colors","folderWidgetColor"),v=Sc("colors","folderTextColor");return F.useLayoutEffect(()=>{p.current.style.setProperty("--leva-colors-folderWidgetColor",o||m),p.current.style.setProperty("--leva-colors-folderTextColor",o||v)},[o,m,v]),fe.createElement(mx,{ref:p},fe.createElement(NW,{name:n,toggled:c,toggle:()=>f(y=>!y)}),fe.createElement(xO,{parent:r,tree:t,toggled:c}))},xO=fe.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:a})=>{const{wrapperRef:o,contentRef:c}=xj(a),f=Tv(),p=([v,y])=>{var x;return(Zw(y)?(x=f.getInput(y.path))===null||x===void 0?void 0:x.order:f.getFolderSettings(oM(i,v)).order)||0},m=Object.entries(r).sort((v,y)=>p(v)-p(y));return fe.createElement(EA,{ref:o,isRoot:n,fill:e,flat:t},fe.createElement(N3,{ref:c,isRoot:n,toggled:a},m.map(([v,y])=>Zw(y)?fe.createElement(UW,{key:y.path,valueKey:y.valueKey,path:y.path}):fe.createElement(LW,{key:v,name:v,path:i,tree:y}))))}),IW=Zt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${I3}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),bO=40,xx=Zt("i",{$flexCenter:"",width:bO,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),PW=Zt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),zW=Zt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${xx}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),FW=Zt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),HW=Zt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:bO}}}}),GW=fe.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=F.useState(""),a=F.useMemo(()=>S3(n,250),[n]),o=()=>{n(""),r("")},c=f=>{const p=f.currentTarget.value;e(!0),r(p)};return F.useEffect(()=>{a(i)},[i,a]),fe.createElement(fe.Fragment,null,fe.createElement(FW,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:f=>f.stopPropagation(),onChange:c}),fe.createElement(xx,{onClick:()=>o(),style:{visibility:i?"visible":"hidden"}},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function VW({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:a,title:o,drag:c,filterEnabled:f,from:p}){const[m,v]=F.useState(!1),y=F.useRef(null);F.useEffect(()=>{var b,T;m?(b=y.current)===null||b===void 0||b.focus():(T=y.current)===null||T===void 0||T.blur()},[m]);const x=Cv(({offset:[b,T],first:M,last:A})=>{e({x:b,y:T}),M&&t({x:b,y:T}),A&&i({x:b,y:T})},{filterTaps:!0,from:({offset:[b,T]})=>[(p==null?void 0:p.x)||b,(p==null?void 0:p.y)||T]});return F.useEffect(()=>{const b=T=>{T.key==="L"&&T.shiftKey&&T.metaKey&&v(M=>!M)};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]),fe.createElement(fe.Fragment,null,fe.createElement(PW,{mode:c?"drag":void 0},fe.createElement(xx,{active:!a,onClick:()=>r()},fe.createElement(QE,{toggled:a,width:12,height:8})),fe.createElement(HW,ir({},c?x():{},{drag:c,filterEnabled:f}),o===void 0&&c?fe.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("circle",{cx:"2",cy:"2",r:"2"}),fe.createElement("circle",{cx:"14",cy:"2",r:"2"}),fe.createElement("circle",{cx:"26",cy:"2",r:"2"}),fe.createElement("circle",{cx:"2",cy:"12",r:"2"}),fe.createElement("circle",{cx:"14",cy:"12",r:"2"}),fe.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),f&&fe.createElement(xx,{active:m,onClick:()=>v(b=>!b)},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},fe.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),fe.createElement(zW,{toggled:m},fe.createElement(GW,{ref:y,setFilter:n,toggle:r})))}const kW=["store","hidden","theme","collapsed"];function XW(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,a=yi(n,kW);const o=hO(()=>M7(i),[i]),[c,f]=F.useState(!r),p=typeof r=="object"?!r.collapsed:c,m=F.useMemo(()=>typeof r=="object"?v=>{typeof v=="function"?r.onChange(!v(!r.collapsed)):r.onChange(!v)}:f,[r]);return!e||t?null:fe.createElement(JE.Provider,{value:o},fe.createElement(YW,ir({store:e},a,{toggled:p,setToggle:m,rootClass:o.className})))}const YW=fe.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:a=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:c=!1,toggled:f,setToggle:p})=>{var m,v;const y=bj(n),[x,b]=F.useState(""),T=F.useMemo(()=>vW(y,x),[y,x]),[M,A]=F3(),w=r||y.length>0,B=typeof o=="object"&&o.title||void 0,D=typeof o=="object"&&(m=o.drag)!==null&&m!==void 0?m:!0,I=typeof o=="object"&&(v=o.filter)!==null&&v!==void 0?v:!0,N=typeof o=="object"&&o.position||void 0,H=typeof o=="object"&&o.onDrag||void 0,P=typeof o=="object"&&o.onDragStart||void 0,L=typeof o=="object"&&o.onDragEnd||void 0;return fe.useEffect(()=>{A({x:N==null?void 0:N.x,y:N==null?void 0:N.y})},[N,A]),E7(),fe.createElement(B3.Provider,{value:{hideCopyButton:c}},fe.createElement(IW,{ref:M,className:e,fill:t,flat:i,oneLineLabels:a,hideTitleBar:!o,style:{display:w?"block":"none"}},o&&fe.createElement(VW,{onDrag:U=>{A(U),H==null||H(U)},onDragStart:U=>P==null?void 0:P(U),onDragEnd:U=>L==null?void 0:L(U),setFilter:b,toggle:U=>p(Y=>U??!Y),toggled:f,title:B,drag:D,filterEnabled:I,from:N}),w&&fe.createElement(w3.Provider,{value:n},fe.createElement(xO,{isRoot:!0,fill:t,flat:i,tree:T,toggled:f}))))}),jW=["isRoot"];let bx=!1,fh=null;function WW(n){let{isRoot:e=!1}=n,t=yi(n,jW);return F.useEffect(()=>(bx=!0,!e&&fh&&(fh.remove(),fh=null),()=>{e||(bx=!1)}),[e]),fe.createElement(XW,ir({store:yO},t))}function qW(n){F.useEffect(()=>{bx||(fh||(fh=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(fh),t2.createRoot(fh).render(fe.createElement(WW,{isRoot:!0})))),bx=!0)},[n])}function KW(n,e,t,i,r){let a,o,c,f,p;return o=n,a=e,Array.isArray(t)&&(p=t),{schema:a,folderName:o,folderSettings:c,hookSettings:f,deps:p||[]}}function JW(n,e,t,i,r){const{folderName:a,schema:o,folderSettings:c,deps:f}=KW(n,e,t),p=typeof o=="function",m=F.useRef(!1),v=F.useRef(!0),y=hO(()=>{m.current=!0;const U=typeof o=="function"?o():o;return a?{[a]:gW(U,c)}:U},f);qW(!0);const[b]=F.useState(()=>yO),[T,M]=F.useMemo(()=>b.getDataFromSchema(y),[b,y]),[A,w,B,D,I]=F.useMemo(()=>{const U=[],Y=[],ie={},Q={},ae={};return Object.values(M).forEach(({path:he,onChange:X,onEditStart:te,onEditEnd:ne,transient:be})=>{U.push(he),X?(ie[he]=X,be||Y.push(he)):Y.push(he),te&&(Q[he]=te),ne&&(ae[he]=ne)}),[U,Y,ie,Q,ae]},[M]),N=F.useMemo(()=>b.orderPaths(A),[A,b]),H=Sj(b,w,T),P=F.useCallback(U=>{const Y=Object.entries(U).reduce((ie,[Q,ae])=>Object.assign(ie,{[M[Q].path]:ae}),{});b.set(Y,!1)},[b,M]),L=F.useCallback(U=>b.get(M[U].path),[b,M]);return F.useEffect(()=>{const U=!v.current&&m.current;return b.addData(T,U),v.current=!1,m.current=!1,()=>b.disposePaths(N)},[b,N,T]),F.useEffect(()=>{const U=[];return Object.entries(B).forEach(([Y,ie])=>{ie(b.get(Y),Y,rn({initial:!0,get:b.get},b.getInput(Y)));const Q=b.useStore.subscribe(ae=>{const he=ae.data[Y];return[he.disabled?void 0:he.value,he]},([ae,he])=>ie(ae,Y,rn({initial:!1,get:b.get},he)),{equalityFn:sb});U.push(Q)}),()=>U.forEach(Y=>Y())},[b,B]),F.useEffect(()=>{const U=[];return Object.entries(D).forEach(([Y,ie])=>U.push(b.subscribeToEditStart(Y,ie))),Object.entries(I).forEach(([Y,ie])=>U.push(b.subscribeToEditEnd(Y,ie))),()=>U.forEach(Y=>Y())},[D,I,b]),p?[H,P,L]:H}Rc(Vo.SELECT,lX);Rc(Vo.IMAGE,tW);Rc(Vo.NUMBER,$7);Rc(Vo.COLOR,Uj);Rc(Vo.STRING,vX);Rc(Vo.BOOLEAN,EX);Rc(Vo.INTERVAL,uW);Rc(Vo.VECTOR3D,Lj);Rc(Vo.VECTOR2D,kj);function ZW(){const{scene:n}=ib("/tokyo.glb"),e=F.useRef(),{positionX:t,positionY:i,positionZ:r,modelScale:a,rotationSpeed:o}=JW("Tokyo Model",{positionX:{value:0,min:-30,max:30,step:.1},positionY:{value:0,min:-30,max:30,step:.1},positionZ:{value:0,min:-30,max:30,step:.1},modelScale:{value:.1,min:.01,max:1,step:.01},rotationSpeed:{value:2e-4,min:0,max:.01,step:1e-5}});return fe.useEffect(()=>{n.traverse(f=>{f.isMesh&&(f.castShadow=!0,f.receiveShadow=!0)});const c=new Vr().setFromObject(n);c.getCenter(new $),c.getSize(new $)},[n]),xv(()=>{e.current&&(e.current.position.set(t,i,r),e.current.scale.set(a,a,a),e.current.rotation.y+=o)}),_n.jsx("primitive",{object:n,ref:e})}function $W(){const{camera:n}=Fr();return _n.jsxs(_n.Fragment,{children:[_n.jsx("ambientLight",{intensity:.5}),_n.jsx("directionalLight",{position:[10,10,5],intensity:1.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-near":.5,"shadow-camera-far":50,"shadow-camera-left":-20,"shadow-camera-right":20,"shadow-camera-top":20,"shadow-camera-bottom":-20}),_n.jsx("pointLight",{position:[-10,0,-20],intensity:.5,decay:.5,color:"blue"}),_n.jsx("spotLight",{position:[0,15,0],angle:.3,penumbra:1,intensity:2,castShadow:!0,color:"yellow"}),_n.jsx(n6,{preset:"city"}),_n.jsx(i6,{position:[0,-.5,0],opacity:.75,scale:60,blur:2,far:30,resolution:1024,color:"#000000"}),_n.jsx(F.Suspense,{fallback:null,children:_n.jsx(ZW,{})}),_n.jsx(H8,{camera:n,target:[0,0,0]}),_n.jsx(M9,{children:_n.jsx(R9,{luminanceThreshold:0,luminanceSmoothing:.9,height:300})})]})}function QW(){const n=[0,8,25];return _n.jsxs("div",{className:"App-container",children:[_n.jsx(IG,{shadows:!0,camera:{position:n,fov:45},style:{background:"#000000"},children:_n.jsx(F.Suspense,{fallback:null,children:_n.jsx($W,{})})}),_n.jsxs("div",{className:"App-overlay",children:[_n.jsx("h1",{children:"Explore Tokyo in 3D!"}),_n.jsx("p",{children:"Drag to orbit, scroll to zoom. Use the Leva GUI to adjust the Tokyo model's position."})]})]})}t2.createRoot(document.getElementById("root")).render(_n.jsx(F.StrictMode,{children:_n.jsx(QW,{})}));
